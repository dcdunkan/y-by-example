function matchFilter(filter) {
    const parsed = parse(filter);
    const predicate = compile(parsed);
    return (ctx)=>predicate(ctx);
}
function parse(filter) {
    return Array.isArray(filter) ? filter.map((q)=>q.split(":")) : [
        filter.split(":")
    ];
}
function compile(parsed) {
    const preprocessed = parsed.flatMap((q)=>check(q, preprocess(q)));
    const ltree = treeify(preprocessed);
    const predicate = arborist(ltree);
    return (ctx)=>!!predicate(ctx.update, ctx);
}
function preprocess(filter) {
    const valid = UPDATE_KEYS;
    const expanded = [
        filter
    ].flatMap((q)=>{
        const [l1, l2, l3] = q;
        if (!(l1 in L1_SHORTCUTS)) return [
            q
        ];
        if (!l1 && !l2 && !l3) return [
            q
        ];
        const targets = L1_SHORTCUTS[l1];
        const expanded = targets.map((s)=>[
                s,
                l2,
                l3
            ]);
        if (l2 === undefined) return expanded;
        if (l2 in L2_SHORTCUTS && (l2 || l3)) return expanded;
        return expanded.filter(([s])=>!!valid[s]?.[l2]);
    }).flatMap((q)=>{
        const [l1, l2, l3] = q;
        if (!(l2 in L2_SHORTCUTS)) return [
            q
        ];
        if (!l2 && !l3) return [
            q
        ];
        const targets = L2_SHORTCUTS[l2];
        const expanded = targets.map((s)=>[
                l1,
                s,
                l3
            ]);
        if (l3 === undefined) return expanded;
        return expanded.filter(([, s])=>!!valid[l1]?.[s]?.[l3]);
    });
    if (expanded.length === 0) {
        throw new Error(`Shortcuts in '${filter.join(":")}' do not expand to any valid filter query`);
    }
    return expanded;
}
function check(original, preprocessed) {
    if (preprocessed.length === 0) throw new Error("Empty filter query given");
    const errors = preprocessed.map(checkOne).filter((r)=>r !== true);
    if (errors.length === 0) return preprocessed;
    else if (errors.length === 1) throw new Error(errors[0]);
    else {
        throw new Error(`Invalid filter query '${original.join(":")}'. There are ${errors.length} errors after expanding the contained shortcuts: ${errors.join("; ")}`);
    }
}
function checkOne(filter) {
    const [l1, l2, l3, ...n] = filter;
    if (l1 === undefined) return "Empty filter query given";
    if (!(l1 in UPDATE_KEYS)) {
        const permitted = Object.keys(UPDATE_KEYS);
        return `Invalid L1 filter '${l1}' given in '${filter.join(":")}'. \
Permitted values are: ${permitted.map((k)=>`'${k}'`).join(", ")}.`;
    }
    if (l2 === undefined) return true;
    const l1Obj = UPDATE_KEYS[l1];
    if (!(l2 in l1Obj)) {
        const permitted1 = Object.keys(l1Obj);
        return `Invalid L2 filter '${l2}' given in '${filter.join(":")}'. \
Permitted values are: ${permitted1.map((k)=>`'${k}'`).join(", ")}.`;
    }
    if (l3 === undefined) return true;
    const l2Obj = l1Obj[l2];
    if (!(l3 in l2Obj)) {
        const permitted2 = Object.keys(l2Obj);
        return `Invalid L3 filter '${l3}' given in '${filter.join(":")}'. ${permitted2.length === 0 ? `No further filtering is possible after '${l1}:${l2}'.` : `Permitted values are: ${permitted2.map((k)=>`'${k}'`).join(", ")}.`}`;
    }
    if (n.length === 0) return true;
    return `Cannot filter further than three levels, ':${n.join(":")}' is invalid!`;
}
function treeify(paths) {
    const tree = {};
    for (const [l1, l2, l3] of paths){
        const subtree = tree[l1] ??= {};
        if (l2 !== undefined) {
            const set = subtree[l2] ??= new Set();
            if (l3 !== undefined) set.add(l3);
        }
    }
    return tree;
}
function or(left, right) {
    return (obj, ctx)=>left(obj, ctx) || right(obj, ctx);
}
function concat(get, test) {
    return (obj, ctx)=>{
        const nextObj = get(obj, ctx);
        return nextObj && test(nextObj, ctx);
    };
}
function leaf(pred) {
    return (obj, ctx)=>pred(obj, ctx) != null;
}
function arborist(tree) {
    const l1Predicates = Object.entries(tree).map(([l1, subtree])=>{
        const l1Pred = (obj)=>obj[l1];
        const l2Predicates = Object.entries(subtree).map(([l2, set])=>{
            const l2Pred = (obj)=>obj[l2];
            const l3Predicates = Array.from(set).map((l3)=>{
                const l3Pred = l3 === "me" ? (obj, ctx)=>{
                    const me = ctx.me.id;
                    return testMaybeArray(obj, (u)=>u.id === me);
                } : (obj)=>testMaybeArray(obj, (e)=>e[l3] || e.type === l3);
                return l3Pred;
            });
            return l3Predicates.length === 0 ? leaf(l2Pred) : concat(l2Pred, l3Predicates.reduce(or));
        });
        return l2Predicates.length === 0 ? leaf(l1Pred) : concat(l1Pred, l2Predicates.reduce(or));
    });
    if (l1Predicates.length === 0) {
        throw new Error("Cannot create filter function for empty query");
    }
    return l1Predicates.reduce(or);
}
function testMaybeArray(t, pred) {
    const p = (x)=>x != null && pred(x);
    return Array.isArray(t) ? t.some(p) : p(t);
}
const ENTITY_KEYS = {
    mention: {},
    hashtag: {},
    cashtag: {},
    bot_command: {},
    url: {},
    email: {},
    phone_number: {},
    bold: {},
    italic: {},
    underline: {},
    strikethrough: {},
    spoiler: {},
    code: {},
    pre: {},
    text_link: {},
    text_mention: {}
};
const USER_KEYS = {
    me: {},
    is_bot: {},
    is_premium: {},
    added_to_attachment_menu: {}
};
const EDITABLE_MESSAGE_KEYS = {
    text: {},
    animation: {},
    audio: {},
    document: {},
    photo: {},
    video: {},
    game: {},
    location: {},
    entities: ENTITY_KEYS,
    caption_entities: ENTITY_KEYS,
    caption: {}
};
const COMMON_MESSAGE_KEYS = {
    ...EDITABLE_MESSAGE_KEYS,
    sticker: {},
    video_note: {},
    voice: {},
    contact: {},
    dice: {},
    poll: {},
    venue: {},
    new_chat_title: {},
    new_chat_photo: {},
    delete_chat_photo: {},
    message_auto_delete_timer_changed: {},
    pinned_message: {},
    invoice: {},
    proximity_alert_triggered: {},
    video_chat_scheduled: {},
    video_chat_started: {},
    video_chat_ended: {},
    video_chat_participants_invited: {},
    web_app_data: {},
    forward_date: {},
    is_automatic_forward: {}
};
const MESSAGE_KEYS = {
    ...COMMON_MESSAGE_KEYS,
    new_chat_members: USER_KEYS,
    left_chat_member: USER_KEYS,
    group_chat_created: {},
    supergroup_chat_created: {},
    migrate_to_chat_id: {},
    migrate_from_chat_id: {},
    successful_payment: {},
    connected_website: {},
    passport_data: {}
};
const CHANNEL_POST_KEYS = {
    ...COMMON_MESSAGE_KEYS,
    channel_chat_created: {}
};
const CALLBACK_QUERY_KEYS = {
    data: {},
    game_short_name: {}
};
const CHAT_MEMBER_UPDATED_KEYS = {
    from: USER_KEYS
};
const UPDATE_KEYS = {
    message: MESSAGE_KEYS,
    edited_message: MESSAGE_KEYS,
    channel_post: CHANNEL_POST_KEYS,
    edited_channel_post: CHANNEL_POST_KEYS,
    inline_query: {},
    chosen_inline_result: {},
    callback_query: CALLBACK_QUERY_KEYS,
    shipping_query: {},
    pre_checkout_query: {},
    poll: {},
    poll_answer: {},
    my_chat_member: CHAT_MEMBER_UPDATED_KEYS,
    chat_member: CHAT_MEMBER_UPDATED_KEYS,
    chat_join_request: {}
};
const L1_SHORTCUTS = {
    "": [
        "message",
        "channel_post"
    ],
    msg: [
        "message",
        "channel_post"
    ],
    edit: [
        "edited_message",
        "edited_channel_post"
    ]
};
const L2_SHORTCUTS = {
    "": [
        "entities",
        "caption_entities"
    ],
    media: [
        "photo",
        "video"
    ],
    file: [
        "photo",
        "animation",
        "audio",
        "document",
        "video",
        "video_note",
        "voice",
        "sticker", 
    ]
};
const checker = {
    filterQuery (filter) {
        const pred = matchFilter(filter);
        return (ctx)=>pred(ctx);
    },
    text (trigger) {
        const hasText = checker.filterQuery([
            ":text",
            ":caption"
        ]);
        const trg = triggerFn(trigger);
        return (ctx)=>{
            if (!hasText(ctx)) return false;
            const msg = ctx.message ?? ctx.channelPost;
            const txt = msg.text ?? msg.caption;
            return match(ctx, txt, trg);
        };
    },
    command (command) {
        const hasEntities = checker.filterQuery(":entities:bot_command");
        const atCommands = new Set();
        const noAtCommands = new Set();
        toArray(command).forEach((cmd)=>{
            if (cmd.startsWith("/")) {
                throw new Error(`Do not include '/' when registering command handlers (use '${cmd.substring(1)}' not '${cmd}')`);
            }
            const set = cmd.indexOf("@") === -1 ? noAtCommands : atCommands;
            set.add(cmd);
        });
        return (ctx)=>{
            if (!hasEntities(ctx)) return false;
            const msg = ctx.message ?? ctx.channelPost;
            const txt = msg.text ?? msg.caption;
            return msg.entities.some((e)=>{
                if (e.type !== "bot_command") return false;
                if (e.offset !== 0) return false;
                const cmd = txt.substring(1, e.length);
                if (noAtCommands.has(cmd) || atCommands.has(cmd)) {
                    ctx.match = txt.substring(cmd.length + 1).trimStart();
                    return true;
                }
                const index = cmd.indexOf("@");
                if (index === -1) return false;
                const atTarget = cmd.substring(index + 1);
                if (atTarget !== ctx.me.username) return false;
                const atCommand = cmd.substring(0, index);
                if (noAtCommands.has(atCommand)) {
                    ctx.match = txt.substring(cmd.length + 1).trimStart();
                    return true;
                }
                return false;
            });
        };
    },
    chatType (chatType) {
        const set = new Set(toArray(chatType));
        return (ctx)=>ctx.chat?.type !== undefined && set.has(ctx.chat.type);
    },
    callbackQuery (trigger) {
        const hasCallbackQuery = checker.filterQuery("callback_query:data");
        const trg = triggerFn(trigger);
        return (ctx)=>hasCallbackQuery(ctx) && match(ctx, ctx.callbackQuery.data, trg);
    },
    gameQuery (trigger) {
        const hasGameQuery = checker.filterQuery("callback_query:game_short_name");
        const trg = triggerFn(trigger);
        return (ctx)=>hasGameQuery(ctx) && match(ctx, ctx.callbackQuery.game_short_name, trg);
    },
    inlineQuery (trigger) {
        const hasInlineQuery = checker.filterQuery("inline_query");
        const trg = triggerFn(trigger);
        return (ctx)=>hasInlineQuery(ctx) && match(ctx, ctx.inlineQuery.query, trg);
    }
};
class Context {
    match;
    constructor(update, api, me){
        this.update = update;
        this.api = api;
        this.me = me;
    }
    get message() {
        return this.update.message;
    }
    get editedMessage() {
        return this.update.edited_message;
    }
    get channelPost() {
        return this.update.channel_post;
    }
    get editedChannelPost() {
        return this.update.edited_channel_post;
    }
    get inlineQuery() {
        return this.update.inline_query;
    }
    get chosenInlineResult() {
        return this.update.chosen_inline_result;
    }
    get callbackQuery() {
        return this.update.callback_query;
    }
    get shippingQuery() {
        return this.update.shipping_query;
    }
    get preCheckoutQuery() {
        return this.update.pre_checkout_query;
    }
    get poll() {
        return this.update.poll;
    }
    get pollAnswer() {
        return this.update.poll_answer;
    }
    get myChatMember() {
        return this.update.my_chat_member;
    }
    get chatMember() {
        return this.update.chat_member;
    }
    get chatJoinRequest() {
        return this.update.chat_join_request;
    }
    get msg() {
        return (((this.message ?? this.editedMessage) ?? this.callbackQuery?.message) ?? this.channelPost) ?? this.editedChannelPost;
    }
    get chat() {
        return (((this.msg ?? this.myChatMember) ?? this.chatMember) ?? this.chatJoinRequest)?.chat;
    }
    get senderChat() {
        return this.msg?.sender_chat;
    }
    get from() {
        return ((((((((this.callbackQuery ?? this.inlineQuery) ?? this.shippingQuery) ?? this.preCheckoutQuery) ?? this.chosenInlineResult) ?? this.msg) ?? this.myChatMember) ?? this.chatMember) ?? this.chatJoinRequest)?.from;
    }
    get inlineMessageId() {
        return this.callbackQuery?.inline_message_id ?? this.chosenInlineResult?.inline_message_id;
    }
    static has = checker;
    has(filter) {
        return Context.has.filterQuery(filter)(this);
    }
    hasText(trigger) {
        return Context.has.text(trigger)(this);
    }
    hasCommand(command) {
        return Context.has.command(command)(this);
    }
    hasChatType(chatType) {
        return Context.has.chatType(chatType)(this);
    }
    hasCallbackQuery(trigger) {
        return Context.has.callbackQuery(trigger)(this);
    }
    hasGameQuery(trigger) {
        return Context.has.gameQuery(trigger)(this);
    }
    hasInlineQuery(trigger) {
        return Context.has.inlineQuery(trigger)(this);
    }
    reply(text, other, signal) {
        return this.api.sendMessage(orThrow(this.chat, "sendMessage").id, text, other, signal);
    }
    forwardMessage(chat_id, other, signal) {
        return this.api.forwardMessage(chat_id, orThrow(this.chat, "forwardMessage").id, orThrow(this.msg, "forwardMessage").message_id, other, signal);
    }
    copyMessage(chat_id, other, signal) {
        return this.api.copyMessage(chat_id, orThrow(this.chat, "copyMessage").id, orThrow(this.msg, "copyMessage").message_id, other, signal);
    }
    replyWithPhoto(photo, other, signal) {
        return this.api.sendPhoto(orThrow(this.chat, "sendPhoto").id, photo, other, signal);
    }
    replyWithAudio(audio, other, signal) {
        return this.api.sendAudio(orThrow(this.chat, "sendAudio").id, audio, other, signal);
    }
    replyWithDocument(document1, other, signal) {
        return this.api.sendDocument(orThrow(this.chat, "sendDocument").id, document1, other, signal);
    }
    replyWithVideo(video, other, signal) {
        return this.api.sendVideo(orThrow(this.chat, "sendVideo").id, video, other, signal);
    }
    replyWithAnimation(animation, other, signal) {
        return this.api.sendAnimation(orThrow(this.chat, "sendAnimation").id, animation, other, signal);
    }
    replyWithVoice(voice, other, signal) {
        return this.api.sendVoice(orThrow(this.chat, "sendVoice").id, voice, other, signal);
    }
    replyWithVideoNote(video_note, other, signal) {
        return this.api.sendVideoNote(orThrow(this.chat, "sendVideoNote").id, video_note, other, signal);
    }
    replyWithMediaGroup(media, other, signal) {
        return this.api.sendMediaGroup(orThrow(this.chat, "sendMediaGroup").id, media, other, signal);
    }
    replyWithLocation(latitude, longitude, other, signal) {
        return this.api.sendLocation(orThrow(this.chat, "sendLocation").id, latitude, longitude, other, signal);
    }
    editMessageLiveLocation(latitude, longitude, other, signal) {
        const inlineId = this.inlineMessageId;
        return inlineId !== undefined ? this.api.editMessageLiveLocationInline(inlineId, latitude, longitude, other) : this.api.editMessageLiveLocation(orThrow(this.chat, "editMessageLiveLocation").id, orThrow(this.msg, "editMessageLiveLocation").message_id, latitude, longitude, other, signal);
    }
    stopMessageLiveLocation(other, signal) {
        const inlineId = this.inlineMessageId;
        return inlineId !== undefined ? this.api.stopMessageLiveLocationInline(inlineId, other) : this.api.stopMessageLiveLocation(orThrow(this.chat, "stopMessageLiveLocation").id, orThrow(this.msg, "stopMessageLiveLocation").message_id, other, signal);
    }
    replyWithVenue(latitude, longitude, title, address, other, signal) {
        return this.api.sendVenue(orThrow(this.chat, "sendVenue").id, latitude, longitude, title, address, other, signal);
    }
    replyWithContact(phone_number, first_name, other, signal) {
        return this.api.sendContact(orThrow(this.chat, "sendContact").id, phone_number, first_name, other, signal);
    }
    replyWithPoll(question, options, other, signal) {
        return this.api.sendPoll(orThrow(this.chat, "sendPoll").id, question, options, other, signal);
    }
    replyWithDice(emoji, other, signal) {
        return this.api.sendDice(orThrow(this.chat, "sendDice").id, emoji, other, signal);
    }
    replyWithChatAction(action, signal) {
        return this.api.sendChatAction(orThrow(this.chat, "sendChatAction").id, action, signal);
    }
    getUserProfilePhotos(other, signal) {
        return this.api.getUserProfilePhotos(orThrow(this.from, "getUserProfilePhotos").id, other, signal);
    }
    getFile(signal) {
        const m = orThrow(this.msg, "getFile");
        const file = m.photo !== undefined ? m.photo[m.photo.length - 1] : (((((m.animation ?? m.audio) ?? m.document) ?? m.video) ?? m.video_note) ?? m.voice) ?? m.sticker;
        return this.api.getFile(orThrow(file, "getFile").file_id, signal);
    }
    kickAuthor(...args) {
        return this.banAuthor(...args);
    }
    banAuthor(other, signal) {
        return this.api.banChatMember(orThrow(this.chat, "banAuthor").id, orThrow(this.from, "banAuthor").id, other, signal);
    }
    kickChatMember(...args) {
        return this.banChatMember(...args);
    }
    banChatMember(user_id, other, signal) {
        return this.api.banChatMember(orThrow(this.chat, "banChatMember").id, user_id, other, signal);
    }
    unbanChatMember(user_id, other, signal) {
        return this.api.unbanChatMember(orThrow(this.chat, "unbanChatMember").id, user_id, other, signal);
    }
    restrictAuthor(permissions, other, signal) {
        return this.api.restrictChatMember(orThrow(this.chat, "restrictAuthor").id, orThrow(this.from, "restrictAuthor").id, permissions, other, signal);
    }
    restrictChatMember(user_id, permissions, other, signal) {
        return this.api.restrictChatMember(orThrow(this.chat, "restrictChatMember").id, user_id, permissions, other, signal);
    }
    promoteAuthor(other, signal) {
        return this.api.promoteChatMember(orThrow(this.chat, "promoteAuthor").id, orThrow(this.from, "promoteAuthor").id, other, signal);
    }
    promoteChatMember(user_id, other, signal) {
        return this.api.promoteChatMember(orThrow(this.chat, "promoteChatMember").id, user_id, other, signal);
    }
    setChatAdministratorAuthorCustomTitle(custom_title, signal) {
        return this.api.setChatAdministratorCustomTitle(orThrow(this.chat, "setChatAdministratorAuthorCustomTitle").id, orThrow(this.from, "setChatAdministratorAuthorCustomTitle").id, custom_title, signal);
    }
    setChatAdministratorCustomTitle(user_id, custom_title, signal) {
        return this.api.setChatAdministratorCustomTitle(orThrow(this.chat, "setChatAdministratorCustomTitle").id, user_id, custom_title, signal);
    }
    banChatSenderChat(sender_chat_id, signal) {
        return this.api.banChatSenderChat(orThrow(this.chat, "banChatSenderChat").id, sender_chat_id, signal);
    }
    unbanChatSenderChat(sender_chat_id, signal) {
        return this.api.unbanChatSenderChat(orThrow(this.chat, "unbanChatSenderChat").id, sender_chat_id, signal);
    }
    setChatPermissions(permissions, signal) {
        return this.api.setChatPermissions(orThrow(this.chat, "setChatPermissions").id, permissions, signal);
    }
    exportChatInviteLink(signal) {
        return this.api.exportChatInviteLink(orThrow(this.chat, "exportChatInviteLink").id, signal);
    }
    createChatInviteLink(other, signal) {
        return this.api.createChatInviteLink(orThrow(this.chat, "createChatInviteLink").id, other, signal);
    }
    editChatInviteLink(invite_link, other, signal) {
        return this.api.editChatInviteLink(orThrow(this.chat, "editChatInviteLink").id, invite_link, other, signal);
    }
    revokeChatInviteLink(invite_link, signal) {
        return this.api.revokeChatInviteLink(orThrow(this.chat, "editChatInviteLink").id, invite_link, signal);
    }
    approveChatJoinRequest(user_id, signal) {
        return this.api.approveChatJoinRequest(orThrow(this.chat, "approveChatJoinRequest").id, user_id, signal);
    }
    declineChatJoinRequest(user_id, signal) {
        return this.api.declineChatJoinRequest(orThrow(this.chat, "declineChatJoinRequest").id, user_id, signal);
    }
    setChatPhoto(photo, signal) {
        return this.api.setChatPhoto(orThrow(this.chat, "setChatPhoto").id, photo, signal);
    }
    deleteChatPhoto(signal) {
        return this.api.deleteChatPhoto(orThrow(this.chat, "deleteChatPhoto").id, signal);
    }
    setChatTitle(title, signal) {
        return this.api.setChatTitle(orThrow(this.chat, "setChatTitle").id, title, signal);
    }
    setChatDescription(description, signal) {
        return this.api.setChatDescription(orThrow(this.chat, "setChatDescription").id, description, signal);
    }
    pinChatMessage(message_id, other, signal) {
        return this.api.pinChatMessage(orThrow(this.chat, "pinChatMessage").id, message_id, other, signal);
    }
    unpinChatMessage(message_id, signal) {
        return this.api.unpinChatMessage(orThrow(this.chat, "unpinChatMessage").id, message_id, signal);
    }
    unpinAllChatMessages(signal) {
        return this.api.unpinAllChatMessages(orThrow(this.chat, "unpinAllChatMessages").id, signal);
    }
    leaveChat(signal) {
        return this.api.leaveChat(orThrow(this.chat, "leaveChat").id, signal);
    }
    getChat(signal) {
        return this.api.getChat(orThrow(this.chat, "getChat").id, signal);
    }
    getChatAdministrators(signal) {
        return this.api.getChatAdministrators(orThrow(this.chat, "getChatAdministrators").id, signal);
    }
    getChatMembersCount(...args) {
        return this.getChatMemberCount(...args);
    }
    getChatMemberCount(signal) {
        return this.api.getChatMemberCount(orThrow(this.chat, "getChatMemberCount").id, signal);
    }
    getAuthor(signal) {
        return this.api.getChatMember(orThrow(this.chat, "getAuthor").id, orThrow(this.from, "getAuthor").id, signal);
    }
    getChatMember(user_id, signal) {
        return this.api.getChatMember(orThrow(this.chat, "getChatMember").id, user_id, signal);
    }
    setChatStickerSet(sticker_set_name, signal) {
        return this.api.setChatStickerSet(orThrow(this.chat, "setChatStickerSet").id, sticker_set_name, signal);
    }
    deleteChatStickerSet(signal) {
        return this.api.deleteChatStickerSet(orThrow(this.chat, "deleteChatStickerSet").id, signal);
    }
    answerCallbackQuery(other, signal) {
        return this.api.answerCallbackQuery(orThrow(this.callbackQuery, "answerCallbackQuery").id, typeof other === "string" ? {
            text: other
        } : other, signal);
    }
    setChatMenuButton(other, signal) {
        return this.api.setChatMenuButton(other, signal);
    }
    getChatMenuButton(other, signal) {
        return this.api.getChatMenuButton(other, signal);
    }
    setMyDefaultAdministratorRights(other, signal) {
        return this.api.setMyDefaultAdministratorRights(other, signal);
    }
    getMyDefaultAdministratorRights(other, signal) {
        return this.api.getMyDefaultAdministratorRights(other, signal);
    }
    editMessageText(text, other, signal) {
        const inlineId = this.inlineMessageId;
        return inlineId !== undefined ? this.api.editMessageTextInline(inlineId, text, other) : this.api.editMessageText(orThrow(this.chat, "editMessageText").id, orThrow(this.msg, "editMessageText").message_id, text, other, signal);
    }
    editMessageCaption(other, signal) {
        const inlineId = this.inlineMessageId;
        return inlineId !== undefined ? this.api.editMessageCaptionInline(inlineId, other) : this.api.editMessageCaption(orThrow(this.chat, "editMessageCaption").id, orThrow(this.msg, "editMessageCaption").message_id, other, signal);
    }
    editMessageMedia(media, other, signal) {
        const inlineId = this.inlineMessageId;
        return inlineId !== undefined ? this.api.editMessageMediaInline(inlineId, media, other) : this.api.editMessageMedia(orThrow(this.chat, "editMessageMedia").id, orThrow(this.msg, "editMessageMedia").message_id, media, other, signal);
    }
    editMessageReplyMarkup(other, signal) {
        const inlineId = this.inlineMessageId;
        return inlineId !== undefined ? this.api.editMessageReplyMarkupInline(inlineId, other) : this.api.editMessageReplyMarkup(orThrow(this.chat, "editMessageReplyMarkup").id, orThrow(this.msg, "editMessageReplyMarkup").message_id, other, signal);
    }
    stopPoll(other, signal) {
        return this.api.stopPoll(orThrow(this.chat, "stopPoll").id, orThrow(this.msg, "stopPoll").message_id, other, signal);
    }
    deleteMessage(signal) {
        return this.api.deleteMessage(orThrow(this.chat, "deleteMessage").id, orThrow(this.msg, "deleteMessage").message_id, signal);
    }
    replyWithSticker(sticker, other, signal) {
        return this.api.sendSticker(orThrow(this.chat, "sendSticker").id, sticker, other, signal);
    }
    answerInlineQuery(results, other, signal) {
        return this.api.answerInlineQuery(orThrow(this.inlineQuery, "answerInlineQuery").id, results, other, signal);
    }
    replyWithInvoice(title, description, payload, provider_token, currency, prices, other, signal) {
        return this.api.sendInvoice(orThrow(this.chat, "sendInvoice").id, title, description, payload, provider_token, currency, prices, other, signal);
    }
    answerShippingQuery(ok, other, signal) {
        return this.api.answerShippingQuery(orThrow(this.shippingQuery, "answerShippingQuery").id, ok, other, signal);
    }
    answerPreCheckoutQuery(ok, other, signal) {
        return this.api.answerPreCheckoutQuery(orThrow(this.preCheckoutQuery, "answerPreCheckoutQuery").id, ok, typeof other === "string" ? {
            error_message: other
        } : other, signal);
    }
    setPassportDataErrors(errors, signal) {
        return this.api.setPassportDataErrors(orThrow(this.from, "setPassportDataErrors").id, errors, signal);
    }
    replyWithGame(game_short_name, other, signal) {
        return this.api.sendGame(orThrow(this.chat, "sendGame").id, game_short_name, other, signal);
    }
    update;
    api;
    me;
}
function orThrow(value, method) {
    if (value === undefined) {
        throw new Error(`Missing information for API call to ${method}`);
    }
    return value;
}
function triggerFn(trigger) {
    return toArray(trigger).map((t)=>typeof t === "string" ? (txt)=>txt === t ? t : null : (txt)=>txt.match(t));
}
function match(ctx, content, triggers) {
    for (const t of triggers){
        const res = t(content);
        if (res) {
            ctx.match = res;
            return true;
        }
    }
    return false;
}
function toArray(e) {
    return Array.isArray(e) ? e : [
        e
    ];
}
class BotError extends Error {
    constructor(error, ctx){
        super(generateBotErrorMessage(error));
        this.error = error;
        this.ctx = ctx;
        this.name = "BotError";
        if (error instanceof Error) this.stack = error.stack;
    }
    error;
    ctx;
}
function generateBotErrorMessage(error) {
    let msg;
    if (error instanceof Error) {
        msg = `${error.name} in middleware: ${error.message}`;
    } else {
        const type = typeof error;
        msg = `Non-error value of type ${type} thrown in middleware`;
        switch(type){
            case "bigint":
            case "boolean":
            case "number":
            case "symbol":
                msg += `: ${error}`;
                break;
            case "string":
                msg += `: ${String(error).substring(0, 50)}`;
                break;
            default:
                msg += "!";
                break;
        }
    }
    return msg;
}
function flatten(mw) {
    return typeof mw === "function" ? mw : (ctx, next)=>mw.middleware()(ctx, next);
}
function concat1(first, andThen) {
    return async (ctx, next)=>{
        let nextCalled = false;
        await first(ctx, async ()=>{
            if (nextCalled) throw new Error("`next` already called before!");
            else nextCalled = true;
            await andThen(ctx, next);
        });
    };
}
function pass(_ctx, next) {
    return next();
}
const leaf1 = ()=>Promise.resolve();
async function run(middleware, ctx) {
    await middleware(ctx, leaf1);
}
class Composer {
    handler;
    constructor(...middleware){
        this.handler = middleware.length === 0 ? pass : middleware.map(flatten).reduce(concat1);
    }
    middleware() {
        return this.handler;
    }
    use(...middleware) {
        const composer = new Composer(...middleware);
        this.handler = concat1(this.handler, flatten(composer));
        return composer;
    }
    on(filter, ...middleware) {
        return this.filter(Context.has.filterQuery(filter), ...middleware);
    }
    hears(trigger, ...middleware) {
        return this.filter(Context.has.text(trigger), ...middleware);
    }
    command(command, ...middleware) {
        return this.filter(Context.has.command(command), ...middleware);
    }
    chatType(chatType, ...middleware) {
        return this.filter(Context.has.chatType(chatType), ...middleware);
    }
    callbackQuery(trigger, ...middleware) {
        return this.filter(Context.has.callbackQuery(trigger), ...middleware);
    }
    gameQuery(trigger, ...middleware) {
        return this.filter(Context.has.gameQuery(trigger), ...middleware);
    }
    inlineQuery(trigger, ...middleware) {
        return this.filter(Context.has.inlineQuery(trigger), ...middleware);
    }
    filter(predicate, ...middleware) {
        const composer = new Composer(...middleware);
        this.branch(predicate, composer, pass);
        return composer;
    }
    drop(predicate, ...middleware) {
        return this.filter(async (ctx)=>!await predicate(ctx), ...middleware);
    }
    fork(...middleware) {
        const composer = new Composer(...middleware);
        const fork = flatten(composer);
        this.use((ctx, next)=>Promise.all([
                next(),
                run(fork, ctx)
            ]));
        return composer;
    }
    lazy(middlewareFactory) {
        return this.use(async (ctx, next)=>{
            const middleware = await middlewareFactory(ctx);
            const arr = Array.isArray(middleware) ? middleware : [
                middleware
            ];
            await flatten(new Composer(...arr))(ctx, next);
        });
    }
    route(router, routeHandlers, fallback = pass) {
        return this.lazy(async (ctx)=>{
            const route = await router(ctx);
            return (route === undefined || !routeHandlers[route] ? fallback : routeHandlers[route]) ?? [];
        });
    }
    branch(predicate, trueMiddleware, falseMiddleware) {
        return this.lazy(async (ctx)=>await predicate(ctx) ? trueMiddleware : falseMiddleware);
    }
    errorBoundary(errorHandler, ...middleware) {
        const composer = new Composer(...middleware);
        const bound = flatten(composer);
        this.use(async (ctx, next)=>{
            let nextCalled = false;
            const cont = ()=>(nextCalled = true, Promise.resolve());
            try {
                await bound(ctx, cont);
            } catch (err) {
                nextCalled = false;
                await errorHandler(new BotError(err, ctx), cont);
            }
            if (nextCalled) await next();
        });
        return composer;
    }
}
var s = 1e3;
var m = s * 60;
var h = m * 60;
var d = h * 24;
var w = d * 7;
var y = d * 365.25;
var ms = function(val, options) {
    options = options || {};
    var type = typeof val;
    if (type === "string" && val.length > 0) {
        return parse1(val);
    } else if (type === "number" && isFinite(val)) {
        return options.long ? fmtLong(val) : fmtShort(val);
    }
    throw new Error("val is not a non-empty string or a valid number. val=" + JSON.stringify(val));
};
function parse1(str) {
    str = String(str);
    if (str.length > 100) {
        return;
    }
    var match = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);
    if (!match) {
        return;
    }
    var n = parseFloat(match[1]);
    var type = (match[2] || "ms").toLowerCase();
    switch(type){
        case "years":
        case "year":
        case "yrs":
        case "yr":
        case "y":
            return n * y;
        case "weeks":
        case "week":
        case "w":
            return n * w;
        case "days":
        case "day":
        case "d":
            return n * d;
        case "hours":
        case "hour":
        case "hrs":
        case "hr":
        case "h":
            return n * h;
        case "minutes":
        case "minute":
        case "mins":
        case "min":
        case "m":
            return n * m;
        case "seconds":
        case "second":
        case "secs":
        case "sec":
        case "s":
            return n * s;
        case "milliseconds":
        case "millisecond":
        case "msecs":
        case "msec":
        case "ms":
            return n;
        default:
            return void 0;
    }
}
function fmtShort(ms2) {
    var msAbs = Math.abs(ms2);
    if (msAbs >= d) {
        return Math.round(ms2 / d) + "d";
    }
    if (msAbs >= h) {
        return Math.round(ms2 / h) + "h";
    }
    if (msAbs >= m) {
        return Math.round(ms2 / m) + "m";
    }
    if (msAbs >= s) {
        return Math.round(ms2 / s) + "s";
    }
    return ms2 + "ms";
}
function fmtLong(ms2) {
    var msAbs = Math.abs(ms2);
    if (msAbs >= d) {
        return plural(ms2, msAbs, d, "day");
    }
    if (msAbs >= h) {
        return plural(ms2, msAbs, h, "hour");
    }
    if (msAbs >= m) {
        return plural(ms2, msAbs, m, "minute");
    }
    if (msAbs >= s) {
        return plural(ms2, msAbs, s, "second");
    }
    return ms2 + " ms";
}
function plural(ms2, msAbs, n, name) {
    var isPlural = msAbs >= n * 1.5;
    return Math.round(ms2 / n) + " " + name + (isPlural ? "s" : "");
}
function defaultSetTimout() {
    throw new Error("setTimeout has not been defined");
}
function defaultClearTimeout() {
    throw new Error("clearTimeout has not been defined");
}
var cachedSetTimeout = defaultSetTimout;
var cachedClearTimeout = defaultClearTimeout;
var globalContext;
if (typeof window !== "undefined") {
    globalContext = window;
} else if (typeof self !== "undefined") {
    globalContext = self;
} else {
    globalContext = {};
}
if (typeof globalContext.setTimeout === "function") {
    cachedSetTimeout = setTimeout;
}
if (typeof globalContext.clearTimeout === "function") {
    cachedClearTimeout = clearTimeout;
}
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        return setTimeout(fun, 0);
    }
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        return cachedSetTimeout(fun, 0);
    } catch (e) {
        try {
            return cachedSetTimeout.call(null, fun, 0);
        } catch (e2) {
            return cachedSetTimeout.call(this, fun, 0);
        }
    }
}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        return clearTimeout(marker);
    }
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        return cachedClearTimeout(marker);
    } catch (e) {
        try {
            return cachedClearTimeout.call(null, marker);
        } catch (e2) {
            return cachedClearTimeout.call(this, marker);
        }
    }
}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;
function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}
function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;
    var len = queue.length;
    while(len){
        currentQueue = queue;
        queue = [];
        while(++queueIndex < len){
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}
function nextTick(fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for(var i = 1; i < arguments.length; i++){
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
}
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function() {
    this.fun.apply(null, this.array);
};
var title = "browser";
var platform = "browser";
var browser = true;
var argv = [];
var version = "";
var versions = {};
var release = {};
var config = {};
function noop() {}
var on = noop;
var addListener = noop;
var once = noop;
var off = noop;
var removeListener = noop;
var removeAllListeners = noop;
var emit = noop;
function binding(name) {
    throw new Error("process.binding is not supported");
}
function cwd() {
    return "/";
}
function chdir(dir) {
    throw new Error("process.chdir is not supported");
}
function umask() {
    return 0;
}
var performance = globalContext.performance || {};
var performanceNow = performance.now || performance.mozNow || performance.msNow || performance.oNow || performance.webkitNow || function() {
    return new Date().getTime();
};
function hrtime(previousTimestamp) {
    var clocktime = performanceNow.call(performance) * 1e-3;
    var seconds = Math.floor(clocktime);
    var nanoseconds = Math.floor(clocktime % 1 * 1e9);
    if (previousTimestamp) {
        seconds = seconds - previousTimestamp[0];
        nanoseconds = nanoseconds - previousTimestamp[1];
        if (nanoseconds < 0) {
            seconds--;
            nanoseconds += 1e9;
        }
    }
    return [
        seconds,
        nanoseconds
    ];
}
var startTime = new Date();
function uptime() {
    var currentTime = new Date();
    var dif = currentTime - startTime;
    return dif / 1e3;
}
var process = {
    nextTick,
    title,
    browser,
    env: {
        NODE_ENV: "production"
    },
    argv,
    version,
    versions,
    on,
    addListener,
    once,
    off,
    removeListener,
    removeAllListeners,
    emit,
    binding,
    cwd,
    chdir,
    umask,
    hrtime,
    platform,
    release,
    config,
    uptime
};
function createCommonjsModule(fn, basedir, module) {
    return module = {
        path: basedir,
        exports: {},
        require: function(path, base) {
            return commonjsRequire(path, base === void 0 || base === null ? module.path : base);
        }
    }, fn(module, module.exports), module.exports;
}
function commonjsRequire() {
    throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs");
}
function setup(env) {
    createDebug.debug = createDebug;
    createDebug.default = createDebug;
    createDebug.coerce = coerce;
    createDebug.disable = disable;
    createDebug.enable = enable;
    createDebug.enabled = enabled;
    createDebug.humanize = ms;
    createDebug.destroy = destroy2;
    Object.keys(env).forEach((key)=>{
        createDebug[key] = env[key];
    });
    createDebug.names = [];
    createDebug.skips = [];
    createDebug.formatters = {};
    function selectColor(namespace) {
        let hash = 0;
        for(let i = 0; i < namespace.length; i++){
            hash = (hash << 5) - hash + namespace.charCodeAt(i);
            hash |= 0;
        }
        return createDebug.colors[Math.abs(hash) % createDebug.colors.length];
    }
    createDebug.selectColor = selectColor;
    function createDebug(namespace) {
        let prevTime;
        let enableOverride = null;
        let namespacesCache;
        let enabledCache;
        function debug(...args) {
            if (!debug.enabled) {
                return;
            }
            const self2 = debug;
            const curr = Number(new Date());
            const ms2 = curr - (prevTime || curr);
            self2.diff = ms2;
            self2.prev = prevTime;
            self2.curr = curr;
            prevTime = curr;
            args[0] = createDebug.coerce(args[0]);
            if (typeof args[0] !== "string") {
                args.unshift("%O");
            }
            let index = 0;
            args[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format)=>{
                if (match === "%%") {
                    return "%";
                }
                index++;
                const formatter = createDebug.formatters[format];
                if (typeof formatter === "function") {
                    const val = args[index];
                    match = formatter.call(self2, val);
                    args.splice(index, 1);
                    index--;
                }
                return match;
            });
            createDebug.formatArgs.call(self2, args);
            const logFn = self2.log || createDebug.log;
            logFn.apply(self2, args);
        }
        debug.namespace = namespace;
        debug.useColors = createDebug.useColors();
        debug.color = createDebug.selectColor(namespace);
        debug.extend = extend;
        debug.destroy = createDebug.destroy;
        Object.defineProperty(debug, "enabled", {
            enumerable: true,
            configurable: false,
            get: ()=>{
                if (enableOverride !== null) {
                    return enableOverride;
                }
                if (namespacesCache !== createDebug.namespaces) {
                    namespacesCache = createDebug.namespaces;
                    enabledCache = createDebug.enabled(namespace);
                }
                return enabledCache;
            },
            set: (v)=>{
                enableOverride = v;
            }
        });
        if (typeof createDebug.init === "function") {
            createDebug.init(debug);
        }
        return debug;
    }
    function extend(namespace, delimiter) {
        const newDebug = createDebug(this.namespace + (typeof delimiter === "undefined" ? ":" : delimiter) + namespace);
        newDebug.log = this.log;
        return newDebug;
    }
    function enable(namespaces) {
        createDebug.save(namespaces);
        createDebug.namespaces = namespaces;
        createDebug.names = [];
        createDebug.skips = [];
        let i;
        const split = (typeof namespaces === "string" ? namespaces : "").split(/[\s,]+/);
        const len = split.length;
        for(i = 0; i < len; i++){
            if (!split[i]) {
                continue;
            }
            namespaces = split[i].replace(/\*/g, ".*?");
            if (namespaces[0] === "-") {
                createDebug.skips.push(new RegExp("^" + namespaces.slice(1) + "$"));
            } else {
                createDebug.names.push(new RegExp("^" + namespaces + "$"));
            }
        }
    }
    function disable() {
        const namespaces = [
            ...createDebug.names.map(toNamespace),
            ...createDebug.skips.map(toNamespace).map((namespace)=>"-" + namespace)
        ].join(",");
        createDebug.enable("");
        return namespaces;
    }
    function enabled(name) {
        if (name[name.length - 1] === "*") {
            return true;
        }
        let i;
        let len;
        for(i = 0, len = createDebug.skips.length; i < len; i++){
            if (createDebug.skips[i].test(name)) {
                return false;
            }
        }
        for(i = 0, len = createDebug.names.length; i < len; i++){
            if (createDebug.names[i].test(name)) {
                return true;
            }
        }
        return false;
    }
    function toNamespace(regexp) {
        return regexp.toString().substring(2, regexp.toString().length - 2).replace(/\.\*\?$/, "*");
    }
    function coerce(val) {
        if (val instanceof Error) {
            return val.stack || val.message;
        }
        return val;
    }
    function destroy2() {
        console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");
    }
    createDebug.enable(createDebug.load());
    return createDebug;
}
var common = setup;
var browser$1 = createCommonjsModule(function(module, exports) {
    exports.formatArgs = formatArgs2;
    exports.save = save2;
    exports.load = load2;
    exports.useColors = useColors2;
    exports.storage = localstorage();
    exports.destroy = (()=>{
        let warned = false;
        return ()=>{
            if (!warned) {
                warned = true;
                console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");
            }
        };
    })();
    exports.colors = [
        "#0000CC",
        "#0000FF",
        "#0033CC",
        "#0033FF",
        "#0066CC",
        "#0066FF",
        "#0099CC",
        "#0099FF",
        "#00CC00",
        "#00CC33",
        "#00CC66",
        "#00CC99",
        "#00CCCC",
        "#00CCFF",
        "#3300CC",
        "#3300FF",
        "#3333CC",
        "#3333FF",
        "#3366CC",
        "#3366FF",
        "#3399CC",
        "#3399FF",
        "#33CC00",
        "#33CC33",
        "#33CC66",
        "#33CC99",
        "#33CCCC",
        "#33CCFF",
        "#6600CC",
        "#6600FF",
        "#6633CC",
        "#6633FF",
        "#66CC00",
        "#66CC33",
        "#9900CC",
        "#9900FF",
        "#9933CC",
        "#9933FF",
        "#99CC00",
        "#99CC33",
        "#CC0000",
        "#CC0033",
        "#CC0066",
        "#CC0099",
        "#CC00CC",
        "#CC00FF",
        "#CC3300",
        "#CC3333",
        "#CC3366",
        "#CC3399",
        "#CC33CC",
        "#CC33FF",
        "#CC6600",
        "#CC6633",
        "#CC9900",
        "#CC9933",
        "#CCCC00",
        "#CCCC33",
        "#FF0000",
        "#FF0033",
        "#FF0066",
        "#FF0099",
        "#FF00CC",
        "#FF00FF",
        "#FF3300",
        "#FF3333",
        "#FF3366",
        "#FF3399",
        "#FF33CC",
        "#FF33FF",
        "#FF6600",
        "#FF6633",
        "#FF9900",
        "#FF9933",
        "#FFCC00",
        "#FFCC33"
    ];
    function useColors2() {
        if (typeof window !== "undefined" && window.process && (window.process.type === "renderer" || window.process.__nwjs)) {
            return true;
        }
        if (typeof navigator !== "undefined" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) {
            return false;
        }
        return typeof document !== "undefined" && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || typeof window !== "undefined" && window.console && (window.console.firebug || window.console.exception && window.console.table) || typeof navigator !== "undefined" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31 || typeof navigator !== "undefined" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);
    }
    function formatArgs2(args) {
        args[0] = (this.useColors ? "%c" : "") + this.namespace + (this.useColors ? " %c" : " ") + args[0] + (this.useColors ? "%c " : " ") + "+" + module.exports.humanize(this.diff);
        if (!this.useColors) {
            return;
        }
        const c = "color: " + this.color;
        args.splice(1, 0, c, "color: inherit");
        let index = 0;
        let lastC = 0;
        args[0].replace(/%[a-zA-Z%]/g, (match)=>{
            if (match === "%%") {
                return;
            }
            index++;
            if (match === "%c") {
                lastC = index;
            }
        });
        args.splice(lastC, 0, c);
    }
    exports.log = console.debug || console.log || (()=>{});
    function save2(namespaces) {
        try {
            if (namespaces) {
                exports.storage.setItem("debug", namespaces);
            } else {
                exports.storage.removeItem("debug");
            }
        } catch (error) {}
    }
    function load2() {
        let r;
        try {
            r = exports.storage.getItem("debug");
        } catch (error) {}
        if (!r && typeof process !== "undefined" && "env" in process) {
            r = process.env.DEBUG;
        }
        return r;
    }
    function localstorage() {
        try {
            return localStorage;
        } catch (error) {}
    }
    module.exports = common(exports);
    const { formatters  } = module.exports;
    formatters.j = function(v) {
        try {
            return JSON.stringify(v);
        } catch (error) {
            return "[UnexpectedJSONParseError]: " + error.message;
        }
    };
});
browser$1.colors;
browser$1.destroy;
browser$1.formatArgs;
browser$1.load;
browser$1.log;
browser$1.save;
browser$1.storage;
browser$1.useColors;
var l = Object.create;
var o = Object.defineProperty;
var r = Object.getOwnPropertyDescriptor;
var m1 = Object.getOwnPropertyNames;
var n = Object.getPrototypeOf, s1 = Object.prototype.hasOwnProperty;
var i = (t, e)=>()=>(e || t((e = {
            exports: {}
        }).exports, e), e.exports);
var p = (t, e, d, f)=>{
    if (e && typeof e == "object" || typeof e == "function") for (let _ of m1(e))!s1.call(t, _) && _ !== d && o(t, _, {
        get: ()=>e[_],
        enumerable: !(f = r(e, _)) || f.enumerable
    });
    return t;
};
var c = (t, e, d)=>(d = t != null ? l(n(t)) : {}, p(e || !t || !t.__esModule ? o(d, "default", {
        value: t,
        enumerable: !0
    }) : d, t));
var u = i(()=>{});
var x = c(u()), { default: a , ...b } = x;
class DenoStdInternalError extends Error {
    constructor(message){
        super(message);
        this.name = "DenoStdInternalError";
    }
}
function assert(expr, msg = "") {
    if (!expr) {
        throw new DenoStdInternalError(msg);
    }
}
function copy(src, dst, off = 0) {
    off = Math.max(0, Math.min(off, dst.byteLength));
    const dstBytesAvailable = dst.byteLength - off;
    if (src.byteLength > dstBytesAvailable) {
        src = src.subarray(0, dstBytesAvailable);
    }
    dst.set(src, off);
    return src.byteLength;
}
const MIN_BUF_SIZE = 16;
const CR = "\r".charCodeAt(0);
const LF = "\n".charCodeAt(0);
class BufferFullError extends Error {
    name;
    constructor(partial){
        super("Buffer full");
        this.partial = partial;
        this.name = "BufferFullError";
    }
    partial;
}
class PartialReadError extends Error {
    name = "PartialReadError";
    partial;
    constructor(){
        super("Encountered UnexpectedEof, data only partially read");
    }
}
class BufReader {
    #buf;
    #rd;
    #r = 0;
    #w = 0;
    #eof = false;
    static create(r, size = 4096) {
        return r instanceof BufReader ? r : new BufReader(r, size);
    }
    constructor(rd, size = 4096){
        if (size < 16) {
            size = MIN_BUF_SIZE;
        }
        this.#reset(new Uint8Array(size), rd);
    }
    size() {
        return this.#buf.byteLength;
    }
    buffered() {
        return this.#w - this.#r;
    }
    #fill = async ()=>{
        if (this.#r > 0) {
            this.#buf.copyWithin(0, this.#r, this.#w);
            this.#w -= this.#r;
            this.#r = 0;
        }
        if (this.#w >= this.#buf.byteLength) {
            throw Error("bufio: tried to fill full buffer");
        }
        for(let i = 100; i > 0; i--){
            const rr = await this.#rd.read(this.#buf.subarray(this.#w));
            if (rr === null) {
                this.#eof = true;
                return;
            }
            assert(rr >= 0, "negative read");
            this.#w += rr;
            if (rr > 0) {
                return;
            }
        }
        throw new Error(`No progress after ${100} read() calls`);
    };
    reset(r) {
        this.#reset(this.#buf, r);
    }
    #reset = (buf, rd)=>{
        this.#buf = buf;
        this.#rd = rd;
        this.#eof = false;
    };
    async read(p) {
        let rr = p.byteLength;
        if (p.byteLength === 0) return rr;
        if (this.#r === this.#w) {
            if (p.byteLength >= this.#buf.byteLength) {
                const rr1 = await this.#rd.read(p);
                const nread = rr1 ?? 0;
                assert(nread >= 0, "negative read");
                return rr1;
            }
            this.#r = 0;
            this.#w = 0;
            rr = await this.#rd.read(this.#buf);
            if (rr === 0 || rr === null) return rr;
            assert(rr >= 0, "negative read");
            this.#w += rr;
        }
        const copied = copy(this.#buf.subarray(this.#r, this.#w), p, 0);
        this.#r += copied;
        return copied;
    }
    async readFull(p) {
        let bytesRead = 0;
        while(bytesRead < p.length){
            try {
                const rr = await this.read(p.subarray(bytesRead));
                if (rr === null) {
                    if (bytesRead === 0) {
                        return null;
                    } else {
                        throw new PartialReadError();
                    }
                }
                bytesRead += rr;
            } catch (err) {
                if (err instanceof PartialReadError) {
                    err.partial = p.subarray(0, bytesRead);
                } else if (err instanceof Error) {
                    const e = new PartialReadError();
                    e.partial = p.subarray(0, bytesRead);
                    e.stack = err.stack;
                    e.message = err.message;
                    e.cause = err.cause;
                    throw err;
                }
                throw err;
            }
        }
        return p;
    }
    async readByte() {
        while(this.#r === this.#w){
            if (this.#eof) return null;
            await this.#fill();
        }
        const c = this.#buf[this.#r];
        this.#r++;
        return c;
    }
    async readString(delim) {
        if (delim.length !== 1) {
            throw new Error("Delimiter should be a single character");
        }
        const buffer = await this.readSlice(delim.charCodeAt(0));
        if (buffer === null) return null;
        return new TextDecoder().decode(buffer);
    }
    async readLine() {
        let line = null;
        try {
            line = await this.readSlice(LF);
        } catch (err) {
            if (err instanceof Deno.errors.BadResource) {
                throw err;
            }
            let partial;
            if (err instanceof PartialReadError) {
                partial = err.partial;
                assert(partial instanceof Uint8Array, "bufio: caught error from `readSlice()` without `partial` property");
            }
            if (!(err instanceof BufferFullError)) {
                throw err;
            }
            partial = err.partial;
            if (!this.#eof && partial && partial.byteLength > 0 && partial[partial.byteLength - 1] === CR) {
                assert(this.#r > 0, "bufio: tried to rewind past start of buffer");
                this.#r--;
                partial = partial.subarray(0, partial.byteLength - 1);
            }
            if (partial) {
                return {
                    line: partial,
                    more: !this.#eof
                };
            }
        }
        if (line === null) {
            return null;
        }
        if (line.byteLength === 0) {
            return {
                line,
                more: false
            };
        }
        if (line[line.byteLength - 1] == LF) {
            let drop = 1;
            if (line.byteLength > 1 && line[line.byteLength - 2] === CR) {
                drop = 2;
            }
            line = line.subarray(0, line.byteLength - drop);
        }
        return {
            line,
            more: false
        };
    }
    async readSlice(delim) {
        let s = 0;
        let slice;
        while(true){
            let i = this.#buf.subarray(this.#r + s, this.#w).indexOf(delim);
            if (i >= 0) {
                i += s;
                slice = this.#buf.subarray(this.#r, this.#r + i + 1);
                this.#r += i + 1;
                break;
            }
            if (this.#eof) {
                if (this.#r === this.#w) {
                    return null;
                }
                slice = this.#buf.subarray(this.#r, this.#w);
                this.#r = this.#w;
                break;
            }
            if (this.buffered() >= this.#buf.byteLength) {
                this.#r = this.#w;
                const oldbuf = this.#buf;
                const newbuf = this.#buf.slice(0);
                this.#buf = newbuf;
                throw new BufferFullError(oldbuf);
            }
            s = this.#w - this.#r;
            try {
                await this.#fill();
            } catch (err) {
                if (err instanceof PartialReadError) {
                    err.partial = slice;
                } else if (err instanceof Error) {
                    const e = new PartialReadError();
                    e.partial = slice;
                    e.stack = err.stack;
                    e.message = err.message;
                    e.cause = err.cause;
                    throw err;
                }
                throw err;
            }
        }
        return slice;
    }
    async peek(n) {
        if (n < 0) {
            throw Error("negative count");
        }
        let avail = this.#w - this.#r;
        while(avail < n && avail < this.#buf.byteLength && !this.#eof){
            try {
                await this.#fill();
            } catch (err) {
                if (err instanceof PartialReadError) {
                    err.partial = this.#buf.subarray(this.#r, this.#w);
                } else if (err instanceof Error) {
                    const e = new PartialReadError();
                    e.partial = this.#buf.subarray(this.#r, this.#w);
                    e.stack = err.stack;
                    e.message = err.message;
                    e.cause = err.cause;
                    throw err;
                }
                throw err;
            }
            avail = this.#w - this.#r;
        }
        if (avail === 0 && this.#eof) {
            return null;
        } else if (avail < n && this.#eof) {
            return this.#buf.subarray(this.#r, this.#r + avail);
        } else if (avail < n) {
            throw new BufferFullError(this.#buf.subarray(this.#r, this.#w));
        }
        return this.#buf.subarray(this.#r, this.#r + n);
    }
}
class AbstractBufBase {
    buf;
    usedBufferBytes = 0;
    err = null;
    constructor(buf){
        this.buf = buf;
    }
    size() {
        return this.buf.byteLength;
    }
    available() {
        return this.buf.byteLength - this.usedBufferBytes;
    }
    buffered() {
        return this.usedBufferBytes;
    }
}
class BufWriter extends AbstractBufBase {
    #writer;
    static create(writer, size = 4096) {
        return writer instanceof BufWriter ? writer : new BufWriter(writer, size);
    }
    constructor(writer, size = 4096){
        super(new Uint8Array(size <= 0 ? 4096 : size));
        this.#writer = writer;
    }
    reset(w) {
        this.err = null;
        this.usedBufferBytes = 0;
        this.#writer = w;
    }
    async flush() {
        if (this.err !== null) throw this.err;
        if (this.usedBufferBytes === 0) return;
        try {
            const p = this.buf.subarray(0, this.usedBufferBytes);
            let nwritten = 0;
            while(nwritten < p.length){
                nwritten += await this.#writer.write(p.subarray(nwritten));
            }
        } catch (e) {
            if (e instanceof Error) {
                this.err = e;
            }
            throw e;
        }
        this.buf = new Uint8Array(this.buf.length);
        this.usedBufferBytes = 0;
    }
    async write(data) {
        if (this.err !== null) throw this.err;
        if (data.length === 0) return 0;
        let totalBytesWritten = 0;
        let numBytesWritten = 0;
        while(data.byteLength > this.available()){
            if (this.buffered() === 0) {
                try {
                    numBytesWritten = await this.#writer.write(data);
                } catch (e) {
                    if (e instanceof Error) {
                        this.err = e;
                    }
                    throw e;
                }
            } else {
                numBytesWritten = copy(data, this.buf, this.usedBufferBytes);
                this.usedBufferBytes += numBytesWritten;
                await this.flush();
            }
            totalBytesWritten += numBytesWritten;
            data = data.subarray(numBytesWritten);
        }
        numBytesWritten = copy(data, this.buf, this.usedBufferBytes);
        this.usedBufferBytes += numBytesWritten;
        totalBytesWritten += numBytesWritten;
        return totalBytesWritten;
    }
}
class BufWriterSync extends AbstractBufBase {
    #writer;
    static create(writer, size = 4096) {
        return writer instanceof BufWriterSync ? writer : new BufWriterSync(writer, size);
    }
    constructor(writer, size = 4096){
        super(new Uint8Array(size <= 0 ? 4096 : size));
        this.#writer = writer;
    }
    reset(w) {
        this.err = null;
        this.usedBufferBytes = 0;
        this.#writer = w;
    }
    flush() {
        if (this.err !== null) throw this.err;
        if (this.usedBufferBytes === 0) return;
        try {
            const p = this.buf.subarray(0, this.usedBufferBytes);
            let nwritten = 0;
            while(nwritten < p.length){
                nwritten += this.#writer.writeSync(p.subarray(nwritten));
            }
        } catch (e) {
            if (e instanceof Error) {
                this.err = e;
            }
            throw e;
        }
        this.buf = new Uint8Array(this.buf.length);
        this.usedBufferBytes = 0;
    }
    writeSync(data) {
        if (this.err !== null) throw this.err;
        if (data.length === 0) return 0;
        let totalBytesWritten = 0;
        let numBytesWritten = 0;
        while(data.byteLength > this.available()){
            if (this.buffered() === 0) {
                try {
                    numBytesWritten = this.#writer.writeSync(data);
                } catch (e) {
                    if (e instanceof Error) {
                        this.err = e;
                    }
                    throw e;
                }
            } else {
                numBytesWritten = copy(data, this.buf, this.usedBufferBytes);
                this.usedBufferBytes += numBytesWritten;
                this.flush();
            }
            totalBytesWritten += numBytesWritten;
            data = data.subarray(numBytesWritten);
        }
        numBytesWritten = copy(data, this.buf, this.usedBufferBytes);
        this.usedBufferBytes += numBytesWritten;
        totalBytesWritten += numBytesWritten;
        return totalBytesWritten;
    }
}
function readableStreamFromIterable(iterable) {
    const iterator = iterable[Symbol.asyncIterator]?.() ?? iterable[Symbol.iterator]?.();
    return new ReadableStream({
        async pull (controller) {
            const { value , done  } = await iterator.next();
            if (done) {
                controller.close();
            } else {
                controller.enqueue(value);
            }
        },
        async cancel (reason) {
            if (typeof iterator.throw == "function") {
                try {
                    await iterator.throw(reason);
                } catch  {}
            }
        }
    });
}
"\r".charCodeAt(0);
"\n".charCodeAt(0);
const isDeno = typeof Deno !== "undefined";
const DEBUG = "DEBUG";
if (isDeno) {
    browser$1.useColors = ()=>!Deno.noColor;
    const env = {
        name: "env",
        variable: DEBUG
    };
    const res = await Deno.permissions.query(env);
    if (res.state === "granted") {
        const val = Deno.env.get(DEBUG);
        if (val) browser$1.enable(val);
    }
}
const baseFetchConfig = (_apiRoot)=>({});
const toRaw = Symbol("InputFile data");
class GrammyError extends Error {
    ok;
    error_code;
    description;
    parameters;
    constructor(message, err, method, payload){
        super(`${message} (${err.error_code}: ${err.description})`);
        this.method = method;
        this.payload = payload;
        this.ok = false;
        this.name = "GrammyError";
        this.error_code = err.error_code;
        this.description = err.description;
        this.parameters = err.parameters ?? {};
    }
    method;
    payload;
}
function toGrammyError(err, method, payload) {
    return new GrammyError(`Call to '${method}' failed!`, err, method, payload);
}
class HttpError extends Error {
    constructor(message, error){
        super(message);
        this.error = error;
        this.name = "HttpError";
    }
    error;
}
function isTelegramError(err) {
    return typeof err === "object" && err !== null && "status" in err && "statusText" in err;
}
function toHttpError(method, sensitiveLogs) {
    return (err)=>{
        let msg = `Network request for '${method}' failed!`;
        if (isTelegramError(err)) msg += ` (${err.status}: ${err.statusText})`;
        if (sensitiveLogs && err instanceof Error) msg += ` ${err.message}`;
        throw new HttpError(msg, err);
    };
}
const osType = (()=>{
    const { Deno: Deno1  } = globalThis;
    if (typeof Deno1?.build?.os === "string") {
        return Deno1.build.os;
    }
    const { navigator: navigator1  } = globalThis;
    if (navigator1?.appVersion?.includes?.("Win")) {
        return "windows";
    }
    return "linux";
})();
const isWindows = osType === "windows";
const CHAR_FORWARD_SLASH = 47;
function assertPath(path) {
    if (typeof path !== "string") {
        throw new TypeError(`Path must be a string. Received ${JSON.stringify(path)}`);
    }
}
function isPosixPathSeparator(code) {
    return code === 47;
}
function isPathSeparator(code) {
    return isPosixPathSeparator(code) || code === 92;
}
function isWindowsDeviceRoot(code) {
    return code >= 97 && code <= 122 || code >= 65 && code <= 90;
}
function normalizeString(path, allowAboveRoot, separator, isPathSeparator) {
    let res = "";
    let lastSegmentLength = 0;
    let lastSlash = -1;
    let dots = 0;
    let code;
    for(let i = 0, len = path.length; i <= len; ++i){
        if (i < len) code = path.charCodeAt(i);
        else if (isPathSeparator(code)) break;
        else code = CHAR_FORWARD_SLASH;
        if (isPathSeparator(code)) {
            if (lastSlash === i - 1 || dots === 1) {} else if (lastSlash !== i - 1 && dots === 2) {
                if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== 46 || res.charCodeAt(res.length - 2) !== 46) {
                    if (res.length > 2) {
                        const lastSlashIndex = res.lastIndexOf(separator);
                        if (lastSlashIndex === -1) {
                            res = "";
                            lastSegmentLength = 0;
                        } else {
                            res = res.slice(0, lastSlashIndex);
                            lastSegmentLength = res.length - 1 - res.lastIndexOf(separator);
                        }
                        lastSlash = i;
                        dots = 0;
                        continue;
                    } else if (res.length === 2 || res.length === 1) {
                        res = "";
                        lastSegmentLength = 0;
                        lastSlash = i;
                        dots = 0;
                        continue;
                    }
                }
                if (allowAboveRoot) {
                    if (res.length > 0) res += `${separator}..`;
                    else res = "..";
                    lastSegmentLength = 2;
                }
            } else {
                if (res.length > 0) res += separator + path.slice(lastSlash + 1, i);
                else res = path.slice(lastSlash + 1, i);
                lastSegmentLength = i - lastSlash - 1;
            }
            lastSlash = i;
            dots = 0;
        } else if (code === 46 && dots !== -1) {
            ++dots;
        } else {
            dots = -1;
        }
    }
    return res;
}
function _format(sep, pathObject) {
    const dir = pathObject.dir || pathObject.root;
    const base = pathObject.base || (pathObject.name || "") + (pathObject.ext || "");
    if (!dir) return base;
    if (dir === pathObject.root) return dir + base;
    return dir + sep + base;
}
const WHITESPACE_ENCODINGS = {
    "\u0009": "%09",
    "\u000A": "%0A",
    "\u000B": "%0B",
    "\u000C": "%0C",
    "\u000D": "%0D",
    "\u0020": "%20"
};
function encodeWhitespace(string) {
    return string.replaceAll(/[\s]/g, (c)=>{
        return WHITESPACE_ENCODINGS[c] ?? c;
    });
}
class DenoStdInternalError1 extends Error {
    constructor(message){
        super(message);
        this.name = "DenoStdInternalError";
    }
}
function assert1(expr, msg = "") {
    if (!expr) {
        throw new DenoStdInternalError1(msg);
    }
}
const sep = "\\";
const delimiter = ";";
function resolve(...pathSegments) {
    let resolvedDevice = "";
    let resolvedTail = "";
    let resolvedAbsolute = false;
    for(let i = pathSegments.length - 1; i >= -1; i--){
        let path;
        const { Deno: Deno1  } = globalThis;
        if (i >= 0) {
            path = pathSegments[i];
        } else if (!resolvedDevice) {
            if (typeof Deno1?.cwd !== "function") {
                throw new TypeError("Resolved a drive-letter-less path without a CWD.");
            }
            path = Deno1.cwd();
        } else {
            if (typeof Deno1?.env?.get !== "function" || typeof Deno1?.cwd !== "function") {
                throw new TypeError("Resolved a relative path without a CWD.");
            }
            path = Deno1.cwd();
            if (path === undefined || path.slice(0, 3).toLowerCase() !== `${resolvedDevice.toLowerCase()}\\`) {
                path = `${resolvedDevice}\\`;
            }
        }
        assertPath(path);
        const len = path.length;
        if (len === 0) continue;
        let rootEnd = 0;
        let device = "";
        let isAbsolute = false;
        const code = path.charCodeAt(0);
        if (len > 1) {
            if (isPathSeparator(code)) {
                isAbsolute = true;
                if (isPathSeparator(path.charCodeAt(1))) {
                    let j = 2;
                    let last = j;
                    for(; j < len; ++j){
                        if (isPathSeparator(path.charCodeAt(j))) break;
                    }
                    if (j < len && j !== last) {
                        const firstPart = path.slice(last, j);
                        last = j;
                        for(; j < len; ++j){
                            if (!isPathSeparator(path.charCodeAt(j))) break;
                        }
                        if (j < len && j !== last) {
                            last = j;
                            for(; j < len; ++j){
                                if (isPathSeparator(path.charCodeAt(j))) break;
                            }
                            if (j === len) {
                                device = `\\\\${firstPart}\\${path.slice(last)}`;
                                rootEnd = j;
                            } else if (j !== last) {
                                device = `\\\\${firstPart}\\${path.slice(last, j)}`;
                                rootEnd = j;
                            }
                        }
                    }
                } else {
                    rootEnd = 1;
                }
            } else if (isWindowsDeviceRoot(code)) {
                if (path.charCodeAt(1) === 58) {
                    device = path.slice(0, 2);
                    rootEnd = 2;
                    if (len > 2) {
                        if (isPathSeparator(path.charCodeAt(2))) {
                            isAbsolute = true;
                            rootEnd = 3;
                        }
                    }
                }
            }
        } else if (isPathSeparator(code)) {
            rootEnd = 1;
            isAbsolute = true;
        }
        if (device.length > 0 && resolvedDevice.length > 0 && device.toLowerCase() !== resolvedDevice.toLowerCase()) {
            continue;
        }
        if (resolvedDevice.length === 0 && device.length > 0) {
            resolvedDevice = device;
        }
        if (!resolvedAbsolute) {
            resolvedTail = `${path.slice(rootEnd)}\\${resolvedTail}`;
            resolvedAbsolute = isAbsolute;
        }
        if (resolvedAbsolute && resolvedDevice.length > 0) break;
    }
    resolvedTail = normalizeString(resolvedTail, !resolvedAbsolute, "\\", isPathSeparator);
    return resolvedDevice + (resolvedAbsolute ? "\\" : "") + resolvedTail || ".";
}
function normalize(path) {
    assertPath(path);
    const len = path.length;
    if (len === 0) return ".";
    let rootEnd = 0;
    let device;
    let isAbsolute = false;
    const code = path.charCodeAt(0);
    if (len > 1) {
        if (isPathSeparator(code)) {
            isAbsolute = true;
            if (isPathSeparator(path.charCodeAt(1))) {
                let j = 2;
                let last = j;
                for(; j < len; ++j){
                    if (isPathSeparator(path.charCodeAt(j))) break;
                }
                if (j < len && j !== last) {
                    const firstPart = path.slice(last, j);
                    last = j;
                    for(; j < len; ++j){
                        if (!isPathSeparator(path.charCodeAt(j))) break;
                    }
                    if (j < len && j !== last) {
                        last = j;
                        for(; j < len; ++j){
                            if (isPathSeparator(path.charCodeAt(j))) break;
                        }
                        if (j === len) {
                            return `\\\\${firstPart}\\${path.slice(last)}\\`;
                        } else if (j !== last) {
                            device = `\\\\${firstPart}\\${path.slice(last, j)}`;
                            rootEnd = j;
                        }
                    }
                }
            } else {
                rootEnd = 1;
            }
        } else if (isWindowsDeviceRoot(code)) {
            if (path.charCodeAt(1) === 58) {
                device = path.slice(0, 2);
                rootEnd = 2;
                if (len > 2) {
                    if (isPathSeparator(path.charCodeAt(2))) {
                        isAbsolute = true;
                        rootEnd = 3;
                    }
                }
            }
        }
    } else if (isPathSeparator(code)) {
        return "\\";
    }
    let tail;
    if (rootEnd < len) {
        tail = normalizeString(path.slice(rootEnd), !isAbsolute, "\\", isPathSeparator);
    } else {
        tail = "";
    }
    if (tail.length === 0 && !isAbsolute) tail = ".";
    if (tail.length > 0 && isPathSeparator(path.charCodeAt(len - 1))) {
        tail += "\\";
    }
    if (device === undefined) {
        if (isAbsolute) {
            if (tail.length > 0) return `\\${tail}`;
            else return "\\";
        } else if (tail.length > 0) {
            return tail;
        } else {
            return "";
        }
    } else if (isAbsolute) {
        if (tail.length > 0) return `${device}\\${tail}`;
        else return `${device}\\`;
    } else if (tail.length > 0) {
        return device + tail;
    } else {
        return device;
    }
}
function isAbsolute(path) {
    assertPath(path);
    const len = path.length;
    if (len === 0) return false;
    const code = path.charCodeAt(0);
    if (isPathSeparator(code)) {
        return true;
    } else if (isWindowsDeviceRoot(code)) {
        if (len > 2 && path.charCodeAt(1) === 58) {
            if (isPathSeparator(path.charCodeAt(2))) return true;
        }
    }
    return false;
}
function join(...paths) {
    const pathsCount = paths.length;
    if (pathsCount === 0) return ".";
    let joined;
    let firstPart = null;
    for(let i = 0; i < pathsCount; ++i){
        const path = paths[i];
        assertPath(path);
        if (path.length > 0) {
            if (joined === undefined) joined = firstPart = path;
            else joined += `\\${path}`;
        }
    }
    if (joined === undefined) return ".";
    let needsReplace = true;
    let slashCount = 0;
    assert1(firstPart != null);
    if (isPathSeparator(firstPart.charCodeAt(0))) {
        ++slashCount;
        const firstLen = firstPart.length;
        if (firstLen > 1) {
            if (isPathSeparator(firstPart.charCodeAt(1))) {
                ++slashCount;
                if (firstLen > 2) {
                    if (isPathSeparator(firstPart.charCodeAt(2))) ++slashCount;
                    else {
                        needsReplace = false;
                    }
                }
            }
        }
    }
    if (needsReplace) {
        for(; slashCount < joined.length; ++slashCount){
            if (!isPathSeparator(joined.charCodeAt(slashCount))) break;
        }
        if (slashCount >= 2) joined = `\\${joined.slice(slashCount)}`;
    }
    return normalize(joined);
}
function relative(from, to) {
    assertPath(from);
    assertPath(to);
    if (from === to) return "";
    const fromOrig = resolve(from);
    const toOrig = resolve(to);
    if (fromOrig === toOrig) return "";
    from = fromOrig.toLowerCase();
    to = toOrig.toLowerCase();
    if (from === to) return "";
    let fromStart = 0;
    let fromEnd = from.length;
    for(; fromStart < fromEnd; ++fromStart){
        if (from.charCodeAt(fromStart) !== 92) break;
    }
    for(; fromEnd - 1 > fromStart; --fromEnd){
        if (from.charCodeAt(fromEnd - 1) !== 92) break;
    }
    const fromLen = fromEnd - fromStart;
    let toStart = 0;
    let toEnd = to.length;
    for(; toStart < toEnd; ++toStart){
        if (to.charCodeAt(toStart) !== 92) break;
    }
    for(; toEnd - 1 > toStart; --toEnd){
        if (to.charCodeAt(toEnd - 1) !== 92) break;
    }
    const toLen = toEnd - toStart;
    const length = fromLen < toLen ? fromLen : toLen;
    let lastCommonSep = -1;
    let i = 0;
    for(; i <= length; ++i){
        if (i === length) {
            if (toLen > length) {
                if (to.charCodeAt(toStart + i) === 92) {
                    return toOrig.slice(toStart + i + 1);
                } else if (i === 2) {
                    return toOrig.slice(toStart + i);
                }
            }
            if (fromLen > length) {
                if (from.charCodeAt(fromStart + i) === 92) {
                    lastCommonSep = i;
                } else if (i === 2) {
                    lastCommonSep = 3;
                }
            }
            break;
        }
        const fromCode = from.charCodeAt(fromStart + i);
        const toCode = to.charCodeAt(toStart + i);
        if (fromCode !== toCode) break;
        else if (fromCode === 92) lastCommonSep = i;
    }
    if (i !== length && lastCommonSep === -1) {
        return toOrig;
    }
    let out = "";
    if (lastCommonSep === -1) lastCommonSep = 0;
    for(i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i){
        if (i === fromEnd || from.charCodeAt(i) === 92) {
            if (out.length === 0) out += "..";
            else out += "\\..";
        }
    }
    if (out.length > 0) {
        return out + toOrig.slice(toStart + lastCommonSep, toEnd);
    } else {
        toStart += lastCommonSep;
        if (toOrig.charCodeAt(toStart) === 92) ++toStart;
        return toOrig.slice(toStart, toEnd);
    }
}
function toNamespacedPath(path) {
    if (typeof path !== "string") return path;
    if (path.length === 0) return "";
    const resolvedPath = resolve(path);
    if (resolvedPath.length >= 3) {
        if (resolvedPath.charCodeAt(0) === 92) {
            if (resolvedPath.charCodeAt(1) === 92) {
                const code = resolvedPath.charCodeAt(2);
                if (code !== 63 && code !== 46) {
                    return `\\\\?\\UNC\\${resolvedPath.slice(2)}`;
                }
            }
        } else if (isWindowsDeviceRoot(resolvedPath.charCodeAt(0))) {
            if (resolvedPath.charCodeAt(1) === 58 && resolvedPath.charCodeAt(2) === 92) {
                return `\\\\?\\${resolvedPath}`;
            }
        }
    }
    return path;
}
function dirname(path) {
    assertPath(path);
    const len = path.length;
    if (len === 0) return ".";
    let rootEnd = -1;
    let end = -1;
    let matchedSlash = true;
    let offset = 0;
    const code = path.charCodeAt(0);
    if (len > 1) {
        if (isPathSeparator(code)) {
            rootEnd = offset = 1;
            if (isPathSeparator(path.charCodeAt(1))) {
                let j = 2;
                let last = j;
                for(; j < len; ++j){
                    if (isPathSeparator(path.charCodeAt(j))) break;
                }
                if (j < len && j !== last) {
                    last = j;
                    for(; j < len; ++j){
                        if (!isPathSeparator(path.charCodeAt(j))) break;
                    }
                    if (j < len && j !== last) {
                        last = j;
                        for(; j < len; ++j){
                            if (isPathSeparator(path.charCodeAt(j))) break;
                        }
                        if (j === len) {
                            return path;
                        }
                        if (j !== last) {
                            rootEnd = offset = j + 1;
                        }
                    }
                }
            }
        } else if (isWindowsDeviceRoot(code)) {
            if (path.charCodeAt(1) === 58) {
                rootEnd = offset = 2;
                if (len > 2) {
                    if (isPathSeparator(path.charCodeAt(2))) rootEnd = offset = 3;
                }
            }
        }
    } else if (isPathSeparator(code)) {
        return path;
    }
    for(let i = len - 1; i >= offset; --i){
        if (isPathSeparator(path.charCodeAt(i))) {
            if (!matchedSlash) {
                end = i;
                break;
            }
        } else {
            matchedSlash = false;
        }
    }
    if (end === -1) {
        if (rootEnd === -1) return ".";
        else end = rootEnd;
    }
    return path.slice(0, end);
}
function basename(path, ext = "") {
    if (ext !== undefined && typeof ext !== "string") {
        throw new TypeError('"ext" argument must be a string');
    }
    assertPath(path);
    let start = 0;
    let end = -1;
    let matchedSlash = true;
    let i;
    if (path.length >= 2) {
        const drive = path.charCodeAt(0);
        if (isWindowsDeviceRoot(drive)) {
            if (path.charCodeAt(1) === 58) start = 2;
        }
    }
    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {
        if (ext.length === path.length && ext === path) return "";
        let extIdx = ext.length - 1;
        let firstNonSlashEnd = -1;
        for(i = path.length - 1; i >= start; --i){
            const code = path.charCodeAt(i);
            if (isPathSeparator(code)) {
                if (!matchedSlash) {
                    start = i + 1;
                    break;
                }
            } else {
                if (firstNonSlashEnd === -1) {
                    matchedSlash = false;
                    firstNonSlashEnd = i + 1;
                }
                if (extIdx >= 0) {
                    if (code === ext.charCodeAt(extIdx)) {
                        if (--extIdx === -1) {
                            end = i;
                        }
                    } else {
                        extIdx = -1;
                        end = firstNonSlashEnd;
                    }
                }
            }
        }
        if (start === end) end = firstNonSlashEnd;
        else if (end === -1) end = path.length;
        return path.slice(start, end);
    } else {
        for(i = path.length - 1; i >= start; --i){
            if (isPathSeparator(path.charCodeAt(i))) {
                if (!matchedSlash) {
                    start = i + 1;
                    break;
                }
            } else if (end === -1) {
                matchedSlash = false;
                end = i + 1;
            }
        }
        if (end === -1) return "";
        return path.slice(start, end);
    }
}
function extname(path) {
    assertPath(path);
    let start = 0;
    let startDot = -1;
    let startPart = 0;
    let end = -1;
    let matchedSlash = true;
    let preDotState = 0;
    if (path.length >= 2 && path.charCodeAt(1) === 58 && isWindowsDeviceRoot(path.charCodeAt(0))) {
        start = startPart = 2;
    }
    for(let i = path.length - 1; i >= start; --i){
        const code = path.charCodeAt(i);
        if (isPathSeparator(code)) {
            if (!matchedSlash) {
                startPart = i + 1;
                break;
            }
            continue;
        }
        if (end === -1) {
            matchedSlash = false;
            end = i + 1;
        }
        if (code === 46) {
            if (startDot === -1) startDot = i;
            else if (preDotState !== 1) preDotState = 1;
        } else if (startDot !== -1) {
            preDotState = -1;
        }
    }
    if (startDot === -1 || end === -1 || preDotState === 0 || preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {
        return "";
    }
    return path.slice(startDot, end);
}
function format(pathObject) {
    if (pathObject === null || typeof pathObject !== "object") {
        throw new TypeError(`The "pathObject" argument must be of type Object. Received type ${typeof pathObject}`);
    }
    return _format("\\", pathObject);
}
function parse2(path) {
    assertPath(path);
    const ret = {
        root: "",
        dir: "",
        base: "",
        ext: "",
        name: ""
    };
    const len = path.length;
    if (len === 0) return ret;
    let rootEnd = 0;
    let code = path.charCodeAt(0);
    if (len > 1) {
        if (isPathSeparator(code)) {
            rootEnd = 1;
            if (isPathSeparator(path.charCodeAt(1))) {
                let j = 2;
                let last = j;
                for(; j < len; ++j){
                    if (isPathSeparator(path.charCodeAt(j))) break;
                }
                if (j < len && j !== last) {
                    last = j;
                    for(; j < len; ++j){
                        if (!isPathSeparator(path.charCodeAt(j))) break;
                    }
                    if (j < len && j !== last) {
                        last = j;
                        for(; j < len; ++j){
                            if (isPathSeparator(path.charCodeAt(j))) break;
                        }
                        if (j === len) {
                            rootEnd = j;
                        } else if (j !== last) {
                            rootEnd = j + 1;
                        }
                    }
                }
            }
        } else if (isWindowsDeviceRoot(code)) {
            if (path.charCodeAt(1) === 58) {
                rootEnd = 2;
                if (len > 2) {
                    if (isPathSeparator(path.charCodeAt(2))) {
                        if (len === 3) {
                            ret.root = ret.dir = path;
                            return ret;
                        }
                        rootEnd = 3;
                    }
                } else {
                    ret.root = ret.dir = path;
                    return ret;
                }
            }
        }
    } else if (isPathSeparator(code)) {
        ret.root = ret.dir = path;
        return ret;
    }
    if (rootEnd > 0) ret.root = path.slice(0, rootEnd);
    let startDot = -1;
    let startPart = rootEnd;
    let end = -1;
    let matchedSlash = true;
    let i = path.length - 1;
    let preDotState = 0;
    for(; i >= rootEnd; --i){
        code = path.charCodeAt(i);
        if (isPathSeparator(code)) {
            if (!matchedSlash) {
                startPart = i + 1;
                break;
            }
            continue;
        }
        if (end === -1) {
            matchedSlash = false;
            end = i + 1;
        }
        if (code === 46) {
            if (startDot === -1) startDot = i;
            else if (preDotState !== 1) preDotState = 1;
        } else if (startDot !== -1) {
            preDotState = -1;
        }
    }
    if (startDot === -1 || end === -1 || preDotState === 0 || preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {
        if (end !== -1) {
            ret.base = ret.name = path.slice(startPart, end);
        }
    } else {
        ret.name = path.slice(startPart, startDot);
        ret.base = path.slice(startPart, end);
        ret.ext = path.slice(startDot, end);
    }
    if (startPart > 0 && startPart !== rootEnd) {
        ret.dir = path.slice(0, startPart - 1);
    } else ret.dir = ret.root;
    return ret;
}
function fromFileUrl(url) {
    url = url instanceof URL ? url : new URL(url);
    if (url.protocol != "file:") {
        throw new TypeError("Must be a file URL.");
    }
    let path = decodeURIComponent(url.pathname.replace(/\//g, "\\").replace(/%(?![0-9A-Fa-f]{2})/g, "%25")).replace(/^\\*([A-Za-z]:)(\\|$)/, "$1\\");
    if (url.hostname != "") {
        path = `\\\\${url.hostname}${path}`;
    }
    return path;
}
function toFileUrl(path) {
    if (!isAbsolute(path)) {
        throw new TypeError("Must be an absolute path.");
    }
    const [, hostname, pathname] = path.match(/^(?:[/\\]{2}([^/\\]+)(?=[/\\](?:[^/\\]|$)))?(.*)/);
    const url = new URL("file:///");
    url.pathname = encodeWhitespace(pathname.replace(/%/g, "%25"));
    if (hostname != null && hostname != "localhost") {
        url.hostname = hostname;
        if (!url.hostname) {
            throw new TypeError("Invalid hostname.");
        }
    }
    return url;
}
const mod = {
    sep: sep,
    delimiter: delimiter,
    resolve: resolve,
    normalize: normalize,
    isAbsolute: isAbsolute,
    join: join,
    relative: relative,
    toNamespacedPath: toNamespacedPath,
    dirname: dirname,
    basename: basename,
    extname: extname,
    format: format,
    parse: parse2,
    fromFileUrl: fromFileUrl,
    toFileUrl: toFileUrl
};
const sep1 = "/";
const delimiter1 = ":";
function resolve1(...pathSegments) {
    let resolvedPath = "";
    let resolvedAbsolute = false;
    for(let i = pathSegments.length - 1; i >= -1 && !resolvedAbsolute; i--){
        let path;
        if (i >= 0) path = pathSegments[i];
        else {
            const { Deno: Deno1  } = globalThis;
            if (typeof Deno1?.cwd !== "function") {
                throw new TypeError("Resolved a relative path without a CWD.");
            }
            path = Deno1.cwd();
        }
        assertPath(path);
        if (path.length === 0) {
            continue;
        }
        resolvedPath = `${path}/${resolvedPath}`;
        resolvedAbsolute = path.charCodeAt(0) === CHAR_FORWARD_SLASH;
    }
    resolvedPath = normalizeString(resolvedPath, !resolvedAbsolute, "/", isPosixPathSeparator);
    if (resolvedAbsolute) {
        if (resolvedPath.length > 0) return `/${resolvedPath}`;
        else return "/";
    } else if (resolvedPath.length > 0) return resolvedPath;
    else return ".";
}
function normalize1(path) {
    assertPath(path);
    if (path.length === 0) return ".";
    const isAbsolute = path.charCodeAt(0) === 47;
    const trailingSeparator = path.charCodeAt(path.length - 1) === 47;
    path = normalizeString(path, !isAbsolute, "/", isPosixPathSeparator);
    if (path.length === 0 && !isAbsolute) path = ".";
    if (path.length > 0 && trailingSeparator) path += "/";
    if (isAbsolute) return `/${path}`;
    return path;
}
function isAbsolute1(path) {
    assertPath(path);
    return path.length > 0 && path.charCodeAt(0) === 47;
}
function join1(...paths) {
    if (paths.length === 0) return ".";
    let joined;
    for(let i = 0, len = paths.length; i < len; ++i){
        const path = paths[i];
        assertPath(path);
        if (path.length > 0) {
            if (!joined) joined = path;
            else joined += `/${path}`;
        }
    }
    if (!joined) return ".";
    return normalize1(joined);
}
function relative1(from, to) {
    assertPath(from);
    assertPath(to);
    if (from === to) return "";
    from = resolve1(from);
    to = resolve1(to);
    if (from === to) return "";
    let fromStart = 1;
    const fromEnd = from.length;
    for(; fromStart < fromEnd; ++fromStart){
        if (from.charCodeAt(fromStart) !== 47) break;
    }
    const fromLen = fromEnd - fromStart;
    let toStart = 1;
    const toEnd = to.length;
    for(; toStart < toEnd; ++toStart){
        if (to.charCodeAt(toStart) !== 47) break;
    }
    const toLen = toEnd - toStart;
    const length = fromLen < toLen ? fromLen : toLen;
    let lastCommonSep = -1;
    let i = 0;
    for(; i <= length; ++i){
        if (i === length) {
            if (toLen > length) {
                if (to.charCodeAt(toStart + i) === 47) {
                    return to.slice(toStart + i + 1);
                } else if (i === 0) {
                    return to.slice(toStart + i);
                }
            } else if (fromLen > length) {
                if (from.charCodeAt(fromStart + i) === 47) {
                    lastCommonSep = i;
                } else if (i === 0) {
                    lastCommonSep = 0;
                }
            }
            break;
        }
        const fromCode = from.charCodeAt(fromStart + i);
        const toCode = to.charCodeAt(toStart + i);
        if (fromCode !== toCode) break;
        else if (fromCode === 47) lastCommonSep = i;
    }
    let out = "";
    for(i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i){
        if (i === fromEnd || from.charCodeAt(i) === 47) {
            if (out.length === 0) out += "..";
            else out += "/..";
        }
    }
    if (out.length > 0) return out + to.slice(toStart + lastCommonSep);
    else {
        toStart += lastCommonSep;
        if (to.charCodeAt(toStart) === 47) ++toStart;
        return to.slice(toStart);
    }
}
function toNamespacedPath1(path) {
    return path;
}
function dirname1(path) {
    assertPath(path);
    if (path.length === 0) return ".";
    const hasRoot = path.charCodeAt(0) === 47;
    let end = -1;
    let matchedSlash = true;
    for(let i = path.length - 1; i >= 1; --i){
        if (path.charCodeAt(i) === 47) {
            if (!matchedSlash) {
                end = i;
                break;
            }
        } else {
            matchedSlash = false;
        }
    }
    if (end === -1) return hasRoot ? "/" : ".";
    if (hasRoot && end === 1) return "//";
    return path.slice(0, end);
}
function basename1(path, ext = "") {
    if (ext !== undefined && typeof ext !== "string") {
        throw new TypeError('"ext" argument must be a string');
    }
    assertPath(path);
    let start = 0;
    let end = -1;
    let matchedSlash = true;
    let i;
    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {
        if (ext.length === path.length && ext === path) return "";
        let extIdx = ext.length - 1;
        let firstNonSlashEnd = -1;
        for(i = path.length - 1; i >= 0; --i){
            const code = path.charCodeAt(i);
            if (code === 47) {
                if (!matchedSlash) {
                    start = i + 1;
                    break;
                }
            } else {
                if (firstNonSlashEnd === -1) {
                    matchedSlash = false;
                    firstNonSlashEnd = i + 1;
                }
                if (extIdx >= 0) {
                    if (code === ext.charCodeAt(extIdx)) {
                        if (--extIdx === -1) {
                            end = i;
                        }
                    } else {
                        extIdx = -1;
                        end = firstNonSlashEnd;
                    }
                }
            }
        }
        if (start === end) end = firstNonSlashEnd;
        else if (end === -1) end = path.length;
        return path.slice(start, end);
    } else {
        for(i = path.length - 1; i >= 0; --i){
            if (path.charCodeAt(i) === 47) {
                if (!matchedSlash) {
                    start = i + 1;
                    break;
                }
            } else if (end === -1) {
                matchedSlash = false;
                end = i + 1;
            }
        }
        if (end === -1) return "";
        return path.slice(start, end);
    }
}
function extname1(path) {
    assertPath(path);
    let startDot = -1;
    let startPart = 0;
    let end = -1;
    let matchedSlash = true;
    let preDotState = 0;
    for(let i = path.length - 1; i >= 0; --i){
        const code = path.charCodeAt(i);
        if (code === 47) {
            if (!matchedSlash) {
                startPart = i + 1;
                break;
            }
            continue;
        }
        if (end === -1) {
            matchedSlash = false;
            end = i + 1;
        }
        if (code === 46) {
            if (startDot === -1) startDot = i;
            else if (preDotState !== 1) preDotState = 1;
        } else if (startDot !== -1) {
            preDotState = -1;
        }
    }
    if (startDot === -1 || end === -1 || preDotState === 0 || preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {
        return "";
    }
    return path.slice(startDot, end);
}
function format1(pathObject) {
    if (pathObject === null || typeof pathObject !== "object") {
        throw new TypeError(`The "pathObject" argument must be of type Object. Received type ${typeof pathObject}`);
    }
    return _format("/", pathObject);
}
function parse3(path) {
    assertPath(path);
    const ret = {
        root: "",
        dir: "",
        base: "",
        ext: "",
        name: ""
    };
    if (path.length === 0) return ret;
    const isAbsolute = path.charCodeAt(0) === 47;
    let start;
    if (isAbsolute) {
        ret.root = "/";
        start = 1;
    } else {
        start = 0;
    }
    let startDot = -1;
    let startPart = 0;
    let end = -1;
    let matchedSlash = true;
    let i = path.length - 1;
    let preDotState = 0;
    for(; i >= start; --i){
        const code = path.charCodeAt(i);
        if (code === 47) {
            if (!matchedSlash) {
                startPart = i + 1;
                break;
            }
            continue;
        }
        if (end === -1) {
            matchedSlash = false;
            end = i + 1;
        }
        if (code === 46) {
            if (startDot === -1) startDot = i;
            else if (preDotState !== 1) preDotState = 1;
        } else if (startDot !== -1) {
            preDotState = -1;
        }
    }
    if (startDot === -1 || end === -1 || preDotState === 0 || preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {
        if (end !== -1) {
            if (startPart === 0 && isAbsolute) {
                ret.base = ret.name = path.slice(1, end);
            } else {
                ret.base = ret.name = path.slice(startPart, end);
            }
        }
    } else {
        if (startPart === 0 && isAbsolute) {
            ret.name = path.slice(1, startDot);
            ret.base = path.slice(1, end);
        } else {
            ret.name = path.slice(startPart, startDot);
            ret.base = path.slice(startPart, end);
        }
        ret.ext = path.slice(startDot, end);
    }
    if (startPart > 0) ret.dir = path.slice(0, startPart - 1);
    else if (isAbsolute) ret.dir = "/";
    return ret;
}
function fromFileUrl1(url) {
    url = url instanceof URL ? url : new URL(url);
    if (url.protocol != "file:") {
        throw new TypeError("Must be a file URL.");
    }
    return decodeURIComponent(url.pathname.replace(/%(?![0-9A-Fa-f]{2})/g, "%25"));
}
function toFileUrl1(path) {
    if (!isAbsolute1(path)) {
        throw new TypeError("Must be an absolute path.");
    }
    const url = new URL("file:///");
    url.pathname = encodeWhitespace(path.replace(/%/g, "%25").replace(/\\/g, "%5C"));
    return url;
}
const mod1 = {
    sep: sep1,
    delimiter: delimiter1,
    resolve: resolve1,
    normalize: normalize1,
    isAbsolute: isAbsolute1,
    join: join1,
    relative: relative1,
    toNamespacedPath: toNamespacedPath1,
    dirname: dirname1,
    basename: basename1,
    extname: extname1,
    format: format1,
    parse: parse3,
    fromFileUrl: fromFileUrl1,
    toFileUrl: toFileUrl1
};
const path = isWindows ? mod : mod1;
const { join: join2 , normalize: normalize2  } = path;
const path1 = isWindows ? mod : mod1;
const { basename: basename2 , delimiter: delimiter2 , dirname: dirname2 , extname: extname2 , format: format2 , fromFileUrl: fromFileUrl2 , isAbsolute: isAbsolute2 , join: join3 , normalize: normalize3 , parse: parse4 , relative: relative2 , resolve: resolve2 , sep: sep2 , toFileUrl: toFileUrl2 , toNamespacedPath: toNamespacedPath2 ,  } = path1;
function copy1(src, dst, off = 0) {
    off = Math.max(0, Math.min(off, dst.byteLength));
    const dstBytesAvailable = dst.byteLength - off;
    if (src.byteLength > dstBytesAvailable) {
        src = src.subarray(0, dstBytesAvailable);
    }
    dst.set(src, off);
    return src.byteLength;
}
const MIN_BUF_SIZE1 = 16;
const CR1 = "\r".charCodeAt(0);
const LF1 = "\n".charCodeAt(0);
class BufferFullError1 extends Error {
    name;
    constructor(partial){
        super("Buffer full");
        this.partial = partial;
        this.name = "BufferFullError";
    }
    partial;
}
class PartialReadError1 extends Error {
    name = "PartialReadError";
    partial;
    constructor(){
        super("Encountered UnexpectedEof, data only partially read");
    }
}
class BufReader1 {
    #buf;
    #rd;
    #r = 0;
    #w = 0;
    #eof = false;
    static create(r, size = 4096) {
        return r instanceof BufReader1 ? r : new BufReader1(r, size);
    }
    constructor(rd, size = 4096){
        if (size < 16) {
            size = MIN_BUF_SIZE1;
        }
        this.#reset(new Uint8Array(size), rd);
    }
    size() {
        return this.#buf.byteLength;
    }
    buffered() {
        return this.#w - this.#r;
    }
    #fill = async ()=>{
        if (this.#r > 0) {
            this.#buf.copyWithin(0, this.#r, this.#w);
            this.#w -= this.#r;
            this.#r = 0;
        }
        if (this.#w >= this.#buf.byteLength) {
            throw Error("bufio: tried to fill full buffer");
        }
        for(let i = 100; i > 0; i--){
            const rr = await this.#rd.read(this.#buf.subarray(this.#w));
            if (rr === null) {
                this.#eof = true;
                return;
            }
            assert1(rr >= 0, "negative read");
            this.#w += rr;
            if (rr > 0) {
                return;
            }
        }
        throw new Error(`No progress after ${100} read() calls`);
    };
    reset(r) {
        this.#reset(this.#buf, r);
    }
    #reset = (buf, rd)=>{
        this.#buf = buf;
        this.#rd = rd;
        this.#eof = false;
    };
    async read(p) {
        let rr = p.byteLength;
        if (p.byteLength === 0) return rr;
        if (this.#r === this.#w) {
            if (p.byteLength >= this.#buf.byteLength) {
                const rr1 = await this.#rd.read(p);
                const nread = rr1 ?? 0;
                assert1(nread >= 0, "negative read");
                return rr1;
            }
            this.#r = 0;
            this.#w = 0;
            rr = await this.#rd.read(this.#buf);
            if (rr === 0 || rr === null) return rr;
            assert1(rr >= 0, "negative read");
            this.#w += rr;
        }
        const copied = copy1(this.#buf.subarray(this.#r, this.#w), p, 0);
        this.#r += copied;
        return copied;
    }
    async readFull(p) {
        let bytesRead = 0;
        while(bytesRead < p.length){
            try {
                const rr = await this.read(p.subarray(bytesRead));
                if (rr === null) {
                    if (bytesRead === 0) {
                        return null;
                    } else {
                        throw new PartialReadError1();
                    }
                }
                bytesRead += rr;
            } catch (err) {
                if (err instanceof PartialReadError1) {
                    err.partial = p.subarray(0, bytesRead);
                } else if (err instanceof Error) {
                    const e = new PartialReadError1();
                    e.partial = p.subarray(0, bytesRead);
                    e.stack = err.stack;
                    e.message = err.message;
                    e.cause = err.cause;
                    throw err;
                }
                throw err;
            }
        }
        return p;
    }
    async readByte() {
        while(this.#r === this.#w){
            if (this.#eof) return null;
            await this.#fill();
        }
        const c = this.#buf[this.#r];
        this.#r++;
        return c;
    }
    async readString(delim) {
        if (delim.length !== 1) {
            throw new Error("Delimiter should be a single character");
        }
        const buffer = await this.readSlice(delim.charCodeAt(0));
        if (buffer === null) return null;
        return new TextDecoder().decode(buffer);
    }
    async readLine() {
        let line = null;
        try {
            line = await this.readSlice(LF1);
        } catch (err) {
            if (err instanceof Deno.errors.BadResource) {
                throw err;
            }
            let partial;
            if (err instanceof PartialReadError1) {
                partial = err.partial;
                assert1(partial instanceof Uint8Array, "bufio: caught error from `readSlice()` without `partial` property");
            }
            if (!(err instanceof BufferFullError1)) {
                throw err;
            }
            partial = err.partial;
            if (!this.#eof && partial && partial.byteLength > 0 && partial[partial.byteLength - 1] === CR1) {
                assert1(this.#r > 0, "bufio: tried to rewind past start of buffer");
                this.#r--;
                partial = partial.subarray(0, partial.byteLength - 1);
            }
            if (partial) {
                return {
                    line: partial,
                    more: !this.#eof
                };
            }
        }
        if (line === null) {
            return null;
        }
        if (line.byteLength === 0) {
            return {
                line,
                more: false
            };
        }
        if (line[line.byteLength - 1] == LF1) {
            let drop = 1;
            if (line.byteLength > 1 && line[line.byteLength - 2] === CR1) {
                drop = 2;
            }
            line = line.subarray(0, line.byteLength - drop);
        }
        return {
            line,
            more: false
        };
    }
    async readSlice(delim) {
        let s = 0;
        let slice;
        while(true){
            let i = this.#buf.subarray(this.#r + s, this.#w).indexOf(delim);
            if (i >= 0) {
                i += s;
                slice = this.#buf.subarray(this.#r, this.#r + i + 1);
                this.#r += i + 1;
                break;
            }
            if (this.#eof) {
                if (this.#r === this.#w) {
                    return null;
                }
                slice = this.#buf.subarray(this.#r, this.#w);
                this.#r = this.#w;
                break;
            }
            if (this.buffered() >= this.#buf.byteLength) {
                this.#r = this.#w;
                const oldbuf = this.#buf;
                const newbuf = this.#buf.slice(0);
                this.#buf = newbuf;
                throw new BufferFullError1(oldbuf);
            }
            s = this.#w - this.#r;
            try {
                await this.#fill();
            } catch (err) {
                if (err instanceof PartialReadError1) {
                    err.partial = slice;
                } else if (err instanceof Error) {
                    const e = new PartialReadError1();
                    e.partial = slice;
                    e.stack = err.stack;
                    e.message = err.message;
                    e.cause = err.cause;
                    throw err;
                }
                throw err;
            }
        }
        return slice;
    }
    async peek(n) {
        if (n < 0) {
            throw Error("negative count");
        }
        let avail = this.#w - this.#r;
        while(avail < n && avail < this.#buf.byteLength && !this.#eof){
            try {
                await this.#fill();
            } catch (err) {
                if (err instanceof PartialReadError1) {
                    err.partial = this.#buf.subarray(this.#r, this.#w);
                } else if (err instanceof Error) {
                    const e = new PartialReadError1();
                    e.partial = this.#buf.subarray(this.#r, this.#w);
                    e.stack = err.stack;
                    e.message = err.message;
                    e.cause = err.cause;
                    throw err;
                }
                throw err;
            }
            avail = this.#w - this.#r;
        }
        if (avail === 0 && this.#eof) {
            return null;
        } else if (avail < n && this.#eof) {
            return this.#buf.subarray(this.#r, this.#r + avail);
        } else if (avail < n) {
            throw new BufferFullError1(this.#buf.subarray(this.#r, this.#w));
        }
        return this.#buf.subarray(this.#r, this.#r + n);
    }
}
class AbstractBufBase1 {
    buf;
    usedBufferBytes = 0;
    err = null;
    constructor(buf){
        this.buf = buf;
    }
    size() {
        return this.buf.byteLength;
    }
    available() {
        return this.buf.byteLength - this.usedBufferBytes;
    }
    buffered() {
        return this.usedBufferBytes;
    }
}
class BufWriter1 extends AbstractBufBase1 {
    #writer;
    static create(writer, size = 4096) {
        return writer instanceof BufWriter1 ? writer : new BufWriter1(writer, size);
    }
    constructor(writer, size = 4096){
        super(new Uint8Array(size <= 0 ? 4096 : size));
        this.#writer = writer;
    }
    reset(w) {
        this.err = null;
        this.usedBufferBytes = 0;
        this.#writer = w;
    }
    async flush() {
        if (this.err !== null) throw this.err;
        if (this.usedBufferBytes === 0) return;
        try {
            const p = this.buf.subarray(0, this.usedBufferBytes);
            let nwritten = 0;
            while(nwritten < p.length){
                nwritten += await this.#writer.write(p.subarray(nwritten));
            }
        } catch (e) {
            if (e instanceof Error) {
                this.err = e;
            }
            throw e;
        }
        this.buf = new Uint8Array(this.buf.length);
        this.usedBufferBytes = 0;
    }
    async write(data) {
        if (this.err !== null) throw this.err;
        if (data.length === 0) return 0;
        let totalBytesWritten = 0;
        let numBytesWritten = 0;
        while(data.byteLength > this.available()){
            if (this.buffered() === 0) {
                try {
                    numBytesWritten = await this.#writer.write(data);
                } catch (e) {
                    if (e instanceof Error) {
                        this.err = e;
                    }
                    throw e;
                }
            } else {
                numBytesWritten = copy1(data, this.buf, this.usedBufferBytes);
                this.usedBufferBytes += numBytesWritten;
                await this.flush();
            }
            totalBytesWritten += numBytesWritten;
            data = data.subarray(numBytesWritten);
        }
        numBytesWritten = copy1(data, this.buf, this.usedBufferBytes);
        this.usedBufferBytes += numBytesWritten;
        totalBytesWritten += numBytesWritten;
        return totalBytesWritten;
    }
}
class BufWriterSync1 extends AbstractBufBase1 {
    #writer;
    static create(writer, size = 4096) {
        return writer instanceof BufWriterSync1 ? writer : new BufWriterSync1(writer, size);
    }
    constructor(writer, size = 4096){
        super(new Uint8Array(size <= 0 ? 4096 : size));
        this.#writer = writer;
    }
    reset(w) {
        this.err = null;
        this.usedBufferBytes = 0;
        this.#writer = w;
    }
    flush() {
        if (this.err !== null) throw this.err;
        if (this.usedBufferBytes === 0) return;
        try {
            const p = this.buf.subarray(0, this.usedBufferBytes);
            let nwritten = 0;
            while(nwritten < p.length){
                nwritten += this.#writer.writeSync(p.subarray(nwritten));
            }
        } catch (e) {
            if (e instanceof Error) {
                this.err = e;
            }
            throw e;
        }
        this.buf = new Uint8Array(this.buf.length);
        this.usedBufferBytes = 0;
    }
    writeSync(data) {
        if (this.err !== null) throw this.err;
        if (data.length === 0) return 0;
        let totalBytesWritten = 0;
        let numBytesWritten = 0;
        while(data.byteLength > this.available()){
            if (this.buffered() === 0) {
                try {
                    numBytesWritten = this.#writer.writeSync(data);
                } catch (e) {
                    if (e instanceof Error) {
                        this.err = e;
                    }
                    throw e;
                }
            } else {
                numBytesWritten = copy1(data, this.buf, this.usedBufferBytes);
                this.usedBufferBytes += numBytesWritten;
                this.flush();
            }
            totalBytesWritten += numBytesWritten;
            data = data.subarray(numBytesWritten);
        }
        numBytesWritten = copy1(data, this.buf, this.usedBufferBytes);
        this.usedBufferBytes += numBytesWritten;
        totalBytesWritten += numBytesWritten;
        return totalBytesWritten;
    }
}
const DEFAULT_BUFFER_SIZE = 32 * 1024;
async function* iterateReader(r, options) {
    const bufSize = options?.bufSize ?? DEFAULT_BUFFER_SIZE;
    const b = new Uint8Array(bufSize);
    while(true){
        const result = await r.read(b);
        if (result === null) {
            break;
        }
        yield b.subarray(0, result);
    }
}
"\r".charCodeAt(0);
"\n".charCodeAt(0);
const debug = browser$1("grammy:warn");
class InputFile {
    consumed = false;
    fileData;
    filename;
    constructor(file, filename){
        this.fileData = file;
        filename ??= this.guessFilename(file);
        this.filename = filename;
        if (typeof file === "string" && (file.startsWith("http:") || file.startsWith("https:"))) {
            debug(`InputFile received the local file path '${file}' that looks like a URL. Is this a mistake?`);
        }
    }
    guessFilename(file) {
        if (typeof file === "string") return basename2(file);
        if (typeof file !== "object") return undefined;
        if ("url" in file) return basename2(file.url);
        if (!(file instanceof URL)) return undefined;
        return basename2(file.pathname) || basename2(file.hostname);
    }
    async [toRaw]() {
        if (this.consumed) {
            throw new Error("Cannot reuse InputFile data source!");
        }
        const data = this.fileData;
        if (typeof data === "string") {
            if (!isDeno) {
                throw new Error("Reading files by path requires a Deno environment");
            }
            const file = await Deno.open(data);
            return iterateReader(file);
        }
        if (data instanceof Blob) return data.stream();
        if (isDenoFile(data)) return iterateReader(data);
        if (data instanceof URL) return fetchFile(data);
        if ("url" in data) return fetchFile(data.url);
        if (!(data instanceof Uint8Array)) this.consumed = true;
        return data;
    }
}
async function* fetchFile(url) {
    const { body  } = await fetch(url);
    if (body === null) {
        throw new Error(`Download failed, no response body from '${url}'`);
    }
    yield* body;
}
function isDenoFile(data) {
    return isDeno && data instanceof Deno.FsFile;
}
function requiresFormDataUpload(payload) {
    return payload instanceof InputFile || typeof payload === "object" && payload !== null && Object.values(payload).some((v)=>Array.isArray(v) ? v.some(requiresFormDataUpload) : v instanceof InputFile || requiresFormDataUpload(v));
}
function str(value) {
    return JSON.stringify(value, (_, v)=>v ?? undefined);
}
function createJsonPayload(payload) {
    return {
        method: "POST",
        headers: {
            "content-type": "application/json",
            connection: "keep-alive"
        },
        body: str(payload)
    };
}
async function* protectItr(itr, onError) {
    try {
        yield* itr;
    } catch (err) {
        onError(err);
    }
}
function createFormDataPayload(payload, onError) {
    const boundary = createBoundary();
    const itr = payloadToMultipartItr(payload, boundary);
    const safeItr = protectItr(itr, onError);
    const stream = readableStreamFromIterable(safeItr);
    return {
        method: "POST",
        headers: {
            "content-type": `multipart/form-data; boundary=${boundary}`,
            connection: "keep-alive"
        },
        body: stream
    };
}
function createBoundary() {
    return "----------" + randomId(32);
}
function randomId(length = 16) {
    return Array.from(Array(length)).map(()=>Math.random().toString(36)[2] || 0).join("");
}
const enc = new TextEncoder();
async function* payloadToMultipartItr(payload, boundary) {
    const files = extractFiles(payload);
    yield enc.encode(`--${boundary}\r\n`);
    const separator = enc.encode(`\r\n--${boundary}\r\n`);
    let first = true;
    for (const [key, value] of Object.entries(payload)){
        if (value == null) continue;
        if (!first) yield separator;
        yield valuePart(key, typeof value === "object" ? str(value) : value);
        first = false;
    }
    for (const { id , origin , file  } of files){
        if (!first) yield separator;
        yield* filePart(id, origin, file);
        first = false;
    }
    yield enc.encode(`\r\n--${boundary}--\r\n`);
}
function extractFiles(value, key) {
    if (typeof value !== "object" || value === null) return [];
    return Object.entries(value).flatMap(([k, v])=>{
        const origin = key ?? k;
        if (Array.isArray(v)) return v.flatMap((p)=>extractFiles(p, origin));
        else if (v instanceof InputFile) {
            const id = randomId();
            Object.assign(value, {
                [k]: `attach://${id}`
            });
            return {
                id,
                origin,
                file: v
            };
        } else return extractFiles(v, origin);
    });
}
function valuePart(key, value) {
    return enc.encode(`content-disposition:form-data;name="${key}"\r\n\r\n${value}`);
}
async function* filePart(id, origin, input) {
    const filename = input.filename || `${origin}.${getExt(origin)}`;
    if (filename.includes("\r") || filename.includes("\n")) {
        throw new Error(`File paths cannot contain carriage-return (\\r) \
or newline (\\n) characters! Filename for property '${origin}' was:
"""
${filename}
"""`);
    }
    yield enc.encode(`content-disposition:form-data;name="${id}";filename=${filename}\r\ncontent-type:application/octet-stream\r\n\r\n`);
    const data = await input[toRaw]();
    if (data instanceof Uint8Array) yield data;
    else yield* data;
}
function getExt(key) {
    switch(key){
        case "photo":
            return "jpg";
        case "voice":
            return "ogg";
        case "audio":
            return "mp3";
        case "animation":
        case "video":
        case "video_note":
            return "mp4";
        case "sticker":
            return "webp";
        default:
            return "dat";
    }
}
const debug1 = browser$1("grammy:core");
function concatTransformer(prev, trans) {
    return (method, payload, signal)=>trans(prev, method, payload, signal);
}
class ApiClient {
    options;
    hasUsedWebhookReply;
    installedTransformers;
    constructor(token, options = {}, webhookReplyEnvelope = {}){
        this.token = token;
        this.webhookReplyEnvelope = webhookReplyEnvelope;
        this.hasUsedWebhookReply = false;
        this.installedTransformers = [];
        this.call = async (method, p, signal)=>{
            const payload = p ?? {};
            debug1(`Calling ${method}`);
            const opts = this.options;
            const formDataRequired = requiresFormDataUpload(payload);
            if (this.webhookReplyEnvelope.send !== undefined && !this.hasUsedWebhookReply && !formDataRequired && opts.canUseWebhookReply(method)) {
                this.hasUsedWebhookReply = true;
                const config = createJsonPayload({
                    ...payload,
                    method
                });
                await this.webhookReplyEnvelope.send(config.body);
                return {
                    ok: true,
                    result: true
                };
            }
            const controller = createAbortControllerFromSignal(signal);
            const timeout = createTimeout(controller, opts.timeoutSeconds, method);
            const streamErr = createStreamError(controller);
            const url = opts.buildUrl(opts.apiRoot, this.token, method);
            const config1 = formDataRequired ? createFormDataPayload(payload, (err)=>streamErr.catch(err)) : createJsonPayload(payload);
            const sig = controller.signal;
            const options = {
                ...opts.baseFetchConfig,
                signal: sig,
                ...config1
            };
            const successPromise = fetch(url instanceof URL ? url.href : url, options).catch(toHttpError(method, opts.sensitiveLogs));
            const operations = [
                successPromise,
                streamErr.promise,
                timeout.promise
            ];
            try {
                const res = await Promise.race(operations);
                return await res.json();
            } finally{
                if (timeout.handle !== undefined) clearTimeout(timeout.handle);
            }
        };
        const apiRoot = options.apiRoot ?? "https://api.telegram.org";
        this.options = {
            apiRoot,
            buildUrl: options.buildUrl ?? ((root, token, method)=>`${root}/bot${token}/${method}`),
            timeoutSeconds: options.timeoutSeconds ?? 500,
            baseFetchConfig: {
                ...baseFetchConfig(apiRoot),
                ...options.baseFetchConfig
            },
            canUseWebhookReply: options.canUseWebhookReply ?? (()=>false),
            sensitiveLogs: options.sensitiveLogs ?? false
        };
        if (this.options.apiRoot.endsWith("/")) {
            throw new Error(`Remove the trailing '/' from the 'apiRoot' option (use '${this.options.apiRoot.substring(0, this.options.apiRoot.length - 1)}' instead of '${this.options.apiRoot}')`);
        }
    }
    call;
    use(...transformers) {
        this.call = transformers.reduce(concatTransformer, this.call);
        this.installedTransformers.push(...transformers);
        return this;
    }
    async callApi(method, payload, signal) {
        const data = await this.call(method, payload, signal);
        if (data.ok) return data.result;
        else throw toGrammyError(data, method, payload);
    }
    token;
    webhookReplyEnvelope;
}
function createRawApi(token, options, webhookReplyEnvelope) {
    const client = new ApiClient(token, options, webhookReplyEnvelope);
    const proxyHandler = {
        get (_, m) {
            return m === "toJSON" ? "__internal" : client.callApi.bind(client, m);
        },
        ...proxyMethods
    };
    const raw = new Proxy({}, proxyHandler);
    const installedTransformers = client.installedTransformers;
    const api = {
        raw,
        installedTransformers,
        use: (...t)=>{
            client.use(...t);
            return api;
        }
    };
    return api;
}
const proxyMethods = {
    set () {
        return false;
    },
    defineProperty () {
        return false;
    },
    deleteProperty () {
        return false;
    },
    ownKeys () {
        return [];
    }
};
function createTimeout(controller, seconds, method) {
    let handle = undefined;
    const promise = new Promise((_, reject)=>{
        handle = setTimeout(()=>{
            const msg = `Request to '${method}' timed out after ${seconds} seconds`;
            reject(new Error(msg));
            controller.abort();
        }, 1000 * seconds);
    });
    return {
        promise,
        handle
    };
}
function createStreamError(abortController) {
    let onError = (err)=>{
        throw err;
    };
    const promise = new Promise((_, reject)=>{
        onError = (err)=>{
            reject(err);
            abortController.abort();
        };
    });
    return {
        promise,
        catch: onError
    };
}
function createAbortControllerFromSignal(signal) {
    const abortController = new AbortController();
    if (signal === undefined) return abortController;
    const sig = signal;
    function abort() {
        abortController.abort();
        sig.removeEventListener("abort", abort);
    }
    if (sig.aborted) abort();
    else sig.addEventListener("abort", abort);
    return {
        abort,
        signal: abortController.signal
    };
}
class Api {
    raw;
    config;
    constructor(token, config, webhookReplyEnvelope){
        const { raw , use , installedTransformers  } = createRawApi(token, config, webhookReplyEnvelope);
        this.raw = raw;
        this.config = {
            use,
            installedTransformers: ()=>[
                    ...installedTransformers
                ]
        };
    }
    getUpdates(other, signal) {
        return this.raw.getUpdates({
            ...other
        }, signal);
    }
    setWebhook(url, other, signal) {
        return this.raw.setWebhook({
            url,
            ...other
        }, signal);
    }
    deleteWebhook(other, signal) {
        return this.raw.deleteWebhook({
            ...other
        }, signal);
    }
    getWebhookInfo(signal) {
        return this.raw.getWebhookInfo(signal);
    }
    getMe(signal) {
        return this.raw.getMe(signal);
    }
    logOut(signal) {
        return this.raw.logOut(signal);
    }
    close(signal) {
        return this.raw.close(signal);
    }
    sendMessage(chat_id, text, other, signal) {
        return this.raw.sendMessage({
            chat_id,
            text,
            ...other
        }, signal);
    }
    forwardMessage(chat_id, from_chat_id, message_id, other, signal) {
        return this.raw.forwardMessage({
            chat_id,
            from_chat_id,
            message_id,
            ...other
        }, signal);
    }
    copyMessage(chat_id, from_chat_id, message_id, other, signal) {
        return this.raw.copyMessage({
            chat_id,
            from_chat_id,
            message_id,
            ...other
        }, signal);
    }
    sendPhoto(chat_id, photo, other, signal) {
        return this.raw.sendPhoto({
            chat_id,
            photo,
            ...other
        }, signal);
    }
    sendAudio(chat_id, audio, other, signal) {
        return this.raw.sendAudio({
            chat_id,
            audio,
            ...other
        }, signal);
    }
    sendDocument(chat_id, document1, other, signal) {
        return this.raw.sendDocument({
            chat_id,
            document: document1,
            ...other
        }, signal);
    }
    sendVideo(chat_id, video, other, signal) {
        return this.raw.sendVideo({
            chat_id,
            video,
            ...other
        }, signal);
    }
    sendAnimation(chat_id, animation, other, signal) {
        return this.raw.sendAnimation({
            chat_id,
            animation,
            ...other
        }, signal);
    }
    sendVoice(chat_id, voice, other, signal) {
        return this.raw.sendVoice({
            chat_id,
            voice,
            ...other
        }, signal);
    }
    sendVideoNote(chat_id, video_note, other, signal) {
        return this.raw.sendVideoNote({
            chat_id,
            video_note,
            ...other
        }, signal);
    }
    sendMediaGroup(chat_id, media, other, signal) {
        return this.raw.sendMediaGroup({
            chat_id,
            media,
            ...other
        }, signal);
    }
    sendLocation(chat_id, latitude, longitude, other, signal) {
        return this.raw.sendLocation({
            chat_id,
            latitude,
            longitude,
            ...other
        }, signal);
    }
    editMessageLiveLocation(chat_id, message_id, latitude, longitude, other, signal) {
        return this.raw.editMessageLiveLocation({
            chat_id,
            message_id,
            latitude,
            longitude,
            ...other
        }, signal);
    }
    editMessageLiveLocationInline(inline_message_id, latitude, longitude, other, signal) {
        return this.raw.editMessageLiveLocation({
            inline_message_id,
            latitude,
            longitude,
            ...other
        }, signal);
    }
    stopMessageLiveLocation(chat_id, message_id, other, signal) {
        return this.raw.stopMessageLiveLocation({
            chat_id,
            message_id,
            ...other
        }, signal);
    }
    stopMessageLiveLocationInline(inline_message_id, other, signal) {
        return this.raw.stopMessageLiveLocation({
            inline_message_id,
            ...other
        }, signal);
    }
    sendVenue(chat_id, latitude, longitude, title, address, other, signal) {
        return this.raw.sendVenue({
            chat_id,
            latitude,
            longitude,
            title,
            address,
            ...other
        }, signal);
    }
    sendContact(chat_id, phone_number, first_name, other, signal) {
        return this.raw.sendContact({
            chat_id,
            phone_number,
            first_name,
            ...other
        }, signal);
    }
    sendPoll(chat_id, question, options, other, signal) {
        return this.raw.sendPoll({
            chat_id,
            question,
            options,
            ...other
        }, signal);
    }
    sendDice(chat_id, emoji, other, signal) {
        return this.raw.sendDice({
            chat_id,
            emoji,
            ...other
        }, signal);
    }
    sendChatAction(chat_id, action, signal) {
        return this.raw.sendChatAction({
            chat_id,
            action
        }, signal);
    }
    getUserProfilePhotos(user_id, other, signal) {
        return this.raw.getUserProfilePhotos({
            user_id,
            ...other
        }, signal);
    }
    getFile(file_id, signal) {
        return this.raw.getFile({
            file_id
        }, signal);
    }
    kickChatMember(...args) {
        return this.banChatMember(...args);
    }
    banChatMember(chat_id, user_id, other, signal) {
        return this.raw.banChatMember({
            chat_id,
            user_id,
            ...other
        }, signal);
    }
    unbanChatMember(chat_id, user_id, other, signal) {
        return this.raw.unbanChatMember({
            chat_id,
            user_id,
            ...other
        }, signal);
    }
    restrictChatMember(chat_id, user_id, permissions, other, signal) {
        return this.raw.restrictChatMember({
            chat_id,
            user_id,
            permissions,
            ...other
        }, signal);
    }
    promoteChatMember(chat_id, user_id, other, signal) {
        return this.raw.promoteChatMember({
            chat_id,
            user_id,
            ...other
        }, signal);
    }
    setChatAdministratorCustomTitle(chat_id, user_id, custom_title, signal) {
        return this.raw.setChatAdministratorCustomTitle({
            chat_id,
            user_id,
            custom_title
        }, signal);
    }
    banChatSenderChat(chat_id, sender_chat_id, signal) {
        return this.raw.banChatSenderChat({
            chat_id,
            sender_chat_id
        }, signal);
    }
    unbanChatSenderChat(chat_id, sender_chat_id, signal) {
        return this.raw.unbanChatSenderChat({
            chat_id,
            sender_chat_id
        }, signal);
    }
    setChatPermissions(chat_id, permissions, signal) {
        return this.raw.setChatPermissions({
            chat_id,
            permissions
        }, signal);
    }
    exportChatInviteLink(chat_id, signal) {
        return this.raw.exportChatInviteLink({
            chat_id
        }, signal);
    }
    createChatInviteLink(chat_id, other, signal) {
        return this.raw.createChatInviteLink({
            chat_id,
            ...other
        }, signal);
    }
    editChatInviteLink(chat_id, invite_link, other, signal) {
        return this.raw.editChatInviteLink({
            chat_id,
            invite_link,
            ...other
        }, signal);
    }
    revokeChatInviteLink(chat_id, invite_link, signal) {
        return this.raw.revokeChatInviteLink({
            chat_id,
            invite_link
        }, signal);
    }
    approveChatJoinRequest(chat_id, user_id, signal) {
        return this.raw.approveChatJoinRequest({
            chat_id,
            user_id
        }, signal);
    }
    declineChatJoinRequest(chat_id, user_id, signal) {
        return this.raw.declineChatJoinRequest({
            chat_id,
            user_id
        }, signal);
    }
    setChatPhoto(chat_id, photo, signal) {
        return this.raw.setChatPhoto({
            chat_id,
            photo
        }, signal);
    }
    deleteChatPhoto(chat_id, signal) {
        return this.raw.deleteChatPhoto({
            chat_id
        }, signal);
    }
    setChatTitle(chat_id, title, signal) {
        return this.raw.setChatTitle({
            chat_id,
            title
        }, signal);
    }
    setChatDescription(chat_id, description, signal) {
        return this.raw.setChatDescription({
            chat_id,
            description
        }, signal);
    }
    pinChatMessage(chat_id, message_id, other, signal) {
        return this.raw.pinChatMessage({
            chat_id,
            message_id,
            ...other
        }, signal);
    }
    unpinChatMessage(chat_id, message_id, signal) {
        return this.raw.unpinChatMessage({
            chat_id,
            message_id
        }, signal);
    }
    unpinAllChatMessages(chat_id, signal) {
        return this.raw.unpinAllChatMessages({
            chat_id
        }, signal);
    }
    leaveChat(chat_id, signal) {
        return this.raw.leaveChat({
            chat_id
        }, signal);
    }
    getChat(chat_id, signal) {
        return this.raw.getChat({
            chat_id
        }, signal);
    }
    getChatAdministrators(chat_id, signal) {
        return this.raw.getChatAdministrators({
            chat_id
        }, signal);
    }
    getChatMembersCount(...args) {
        return this.getChatMemberCount(...args);
    }
    getChatMemberCount(chat_id, signal) {
        return this.raw.getChatMemberCount({
            chat_id
        }, signal);
    }
    getChatMember(chat_id, user_id, signal) {
        return this.raw.getChatMember({
            chat_id,
            user_id
        }, signal);
    }
    setChatStickerSet(chat_id, sticker_set_name, signal) {
        return this.raw.setChatStickerSet({
            chat_id,
            sticker_set_name
        }, signal);
    }
    deleteChatStickerSet(chat_id, signal) {
        return this.raw.deleteChatStickerSet({
            chat_id
        }, signal);
    }
    answerCallbackQuery(callback_query_id, other, signal) {
        return this.raw.answerCallbackQuery({
            callback_query_id,
            ...other
        }, signal);
    }
    setChatMenuButton(other, signal) {
        return this.raw.setChatMenuButton({
            ...other
        }, signal);
    }
    getChatMenuButton(other, signal) {
        return this.raw.getChatMenuButton({
            ...other
        }, signal);
    }
    setMyDefaultAdministratorRights(other, signal) {
        return this.raw.setMyDefaultAdministratorRights({
            ...other
        }, signal);
    }
    getMyDefaultAdministratorRights(other, signal) {
        return this.raw.getMyDefaultAdministratorRights({
            ...other
        }, signal);
    }
    setMyCommands(commands, other, signal) {
        return this.raw.setMyCommands({
            commands,
            ...other
        }, signal);
    }
    deleteMyCommands(other, signal) {
        return this.raw.deleteMyCommands({
            ...other
        }, signal);
    }
    getMyCommands(other, signal) {
        return this.raw.getMyCommands({
            ...other
        }, signal);
    }
    editMessageText(chat_id, message_id, text, other, signal) {
        return this.raw.editMessageText({
            chat_id,
            message_id,
            text,
            ...other
        }, signal);
    }
    editMessageTextInline(inline_message_id, text, other, signal) {
        return this.raw.editMessageText({
            inline_message_id,
            text,
            ...other
        }, signal);
    }
    editMessageCaption(chat_id, message_id, other, signal) {
        return this.raw.editMessageCaption({
            chat_id,
            message_id,
            ...other
        }, signal);
    }
    editMessageCaptionInline(inline_message_id, other, signal) {
        return this.raw.editMessageCaption({
            inline_message_id,
            ...other
        }, signal);
    }
    editMessageMedia(chat_id, message_id, media, other, signal) {
        return this.raw.editMessageMedia({
            chat_id,
            message_id,
            media,
            ...other
        }, signal);
    }
    editMessageMediaInline(inline_message_id, media, other, signal) {
        return this.raw.editMessageMedia({
            inline_message_id,
            media,
            ...other
        }, signal);
    }
    editMessageReplyMarkup(chat_id, message_id, other, signal) {
        return this.raw.editMessageReplyMarkup({
            chat_id,
            message_id,
            ...other
        }, signal);
    }
    editMessageReplyMarkupInline(inline_message_id, other, signal) {
        return this.raw.editMessageReplyMarkup({
            inline_message_id,
            ...other
        }, signal);
    }
    stopPoll(chat_id, message_id, other, signal) {
        return this.raw.stopPoll({
            chat_id,
            message_id,
            ...other
        }, signal);
    }
    deleteMessage(chat_id, message_id, signal) {
        return this.raw.deleteMessage({
            chat_id,
            message_id
        }, signal);
    }
    sendSticker(chat_id, sticker, other, signal) {
        return this.raw.sendSticker({
            chat_id,
            sticker,
            ...other
        }, signal);
    }
    getStickerSet(name, signal) {
        return this.raw.getStickerSet({
            name
        }, signal);
    }
    uploadStickerFile(user_id, png_sticker, signal) {
        return this.raw.uploadStickerFile({
            user_id,
            png_sticker
        }, signal);
    }
    createNewStickerSet(user_id, name, title, emojis, other, signal) {
        return this.raw.createNewStickerSet({
            user_id,
            name,
            title,
            emojis,
            ...other
        }, signal);
    }
    addStickerToSet(user_id, name, emojis, other, signal) {
        return this.raw.addStickerToSet({
            user_id,
            name,
            emojis,
            ...other
        }, signal);
    }
    setStickerPositionInSet(sticker, position, signal) {
        return this.raw.setStickerPositionInSet({
            sticker,
            position
        }, signal);
    }
    deleteStickerFromSet(sticker, signal) {
        return this.raw.deleteStickerFromSet({
            sticker
        }, signal);
    }
    setStickerSetThumb(name, user_id, thumb, signal) {
        return this.raw.setStickerSetThumb({
            name,
            user_id,
            thumb
        }, signal);
    }
    answerInlineQuery(inline_query_id, results, other, signal) {
        return this.raw.answerInlineQuery({
            inline_query_id,
            results,
            ...other
        }, signal);
    }
    answerWebAppQuery(web_app_query_id, result, signal) {
        return this.raw.answerWebAppQuery({
            web_app_query_id,
            result
        }, signal);
    }
    sendInvoice(chat_id, title, description, payload, provider_token, currency, prices, other, signal) {
        return this.raw.sendInvoice({
            chat_id,
            title,
            description,
            payload,
            provider_token,
            currency,
            prices,
            ...other
        }, signal);
    }
    createInvoiceLink(title, description, payload, provider_token, currency, prices, other, signal) {
        return this.raw.createInvoiceLink({
            title,
            description,
            payload,
            provider_token,
            currency,
            prices,
            ...other
        }, signal);
    }
    answerShippingQuery(shipping_query_id, ok, other, signal) {
        return this.raw.answerShippingQuery({
            shipping_query_id,
            ok,
            ...other
        }, signal);
    }
    answerPreCheckoutQuery(pre_checkout_query_id, ok, other, signal) {
        return this.raw.answerPreCheckoutQuery({
            pre_checkout_query_id,
            ok,
            ...other
        }, signal);
    }
    setPassportDataErrors(user_id, errors, signal) {
        return this.raw.setPassportDataErrors({
            user_id,
            errors
        }, signal);
    }
    sendGame(chat_id, game_short_name, other, signal) {
        return this.raw.sendGame({
            chat_id,
            game_short_name,
            ...other
        }, signal);
    }
    setGameScore(chat_id, message_id, user_id, score, other, signal) {
        return this.raw.setGameScore({
            chat_id,
            message_id,
            user_id,
            score,
            ...other
        }, signal);
    }
    setGameScoreInline(inline_message_id, user_id, score, other, signal) {
        return this.raw.setGameScore({
            inline_message_id,
            user_id,
            score,
            ...other
        }, signal);
    }
    getGameHighScores(chat_id, message_id, user_id, signal) {
        return this.raw.getGameHighScores({
            chat_id,
            message_id,
            user_id
        }, signal);
    }
    getGameHighScoresInline(inline_message_id, user_id, signal) {
        return this.raw.getGameHighScores({
            inline_message_id,
            user_id
        }, signal);
    }
}
const debug2 = browser$1("grammy:bot");
const debugErr = browser$1("grammy:error");
class Bot extends Composer {
    pollingRunning;
    pollingAbortController;
    lastTriedUpdateId;
    api;
    me;
    mePromise;
    clientConfig;
    ContextConstructor;
    errorHandler;
    constructor(token, config){
        super();
        this.token = token;
        this.pollingRunning = false;
        this.lastTriedUpdateId = 0;
        this.errorHandler = async (err)=>{
            console.error("Error in middleware while handling update", err.ctx?.update?.update_id, err.error);
            console.error("No error handler was set!");
            console.error("Set your own error handler with `bot.catch = ...`");
            if (this.pollingRunning) {
                console.error("Stopping bot");
                await this.stop();
            }
            throw err;
        };
        if (!token) throw new Error("Empty token!");
        this.me = config?.botInfo;
        this.clientConfig = config?.client;
        this.ContextConstructor = config?.ContextConstructor ?? Context;
        this.api = new Api(token, this.clientConfig);
    }
    set botInfo(botInfo) {
        this.me = botInfo;
    }
    get botInfo() {
        if (this.me === undefined) {
            throw new Error("Bot information unavailable! Make sure to call `await bot.init()` before accessing `bot.botInfo`!");
        }
        return this.me;
    }
    isInited() {
        return this.me !== undefined;
    }
    async init() {
        if (!this.isInited()) {
            debug2("Initializing bot");
            this.mePromise ??= withRetries(()=>this.api.getMe());
            let me;
            try {
                me = await this.mePromise;
            } finally{
                this.mePromise = undefined;
            }
            if (this.me === undefined) this.me = me;
            else debug2("Bot info was set by now, will not overwrite");
        }
        debug2(`I am ${this.me.username}!`);
    }
    async handleUpdates(updates) {
        for (const update of updates){
            this.lastTriedUpdateId = update.update_id;
            try {
                await this.handleUpdate(update);
            } catch (err) {
                if (err instanceof BotError) {
                    await this.errorHandler(err);
                } else {
                    console.error("FATAL: grammY unable to handle:", err);
                    throw err;
                }
            }
        }
    }
    async handleUpdate(update, webhookReplyEnvelope) {
        if (this.me === undefined) {
            throw new Error("Bot not initialized! Either call `await bot.init()`, \
or directly set the `botInfo` option in the `Bot` constructor to specify \
a known bot info object.");
        }
        debug2(`Processing update ${update.update_id}`);
        const api = new Api(this.token, this.clientConfig, webhookReplyEnvelope);
        const t = this.api.config.installedTransformers();
        if (t.length > 0) api.config.use(...t);
        const ctx = new this.ContextConstructor(update, api, this.me);
        try {
            await run(this.middleware(), ctx);
        } catch (err) {
            debugErr(`Error in middleware for update ${update.update_id}`);
            throw new BotError(err, ctx);
        }
    }
    async start(options) {
        if (!this.isInited()) await this.init();
        if (this.pollingRunning) {
            debug2("Simple long polling already running!");
            return;
        }
        await withRetries(()=>this.api.deleteWebhook({
                drop_pending_updates: options?.drop_pending_updates
            }));
        await options?.onStart?.(this.botInfo);
        this.use = ()=>{
            throw new Error(`It looks like you are registering more listeners \
on your bot from within other listeners! This means that every time your bot \
handles a message like this one, new listeners will be added. This list grows until \
your machine crashes, so grammY throws this error to tell you that you should \
probably do things a bit differently. If you're unsure how to resolve this problem, \
you can ask in the group chat: https://telegram.me/grammyjs

On the other hand, if you actually know what you're doing and you do need to install \
further middleware while your bot is running, consider installing a composer \
instance on your bot, and in turn augment the composer after the fact. This way, \
you can circumvent this protection against memory leaks.`);
        };
        debug2("Starting simple long polling");
        await this.loop(options);
        debug2("Middleware is done running");
    }
    async stop() {
        if (this.pollingRunning) {
            debug2("Stopping bot, saving update offset");
            this.pollingRunning = false;
            this.pollingAbortController?.abort();
            const offset = this.lastTriedUpdateId + 1;
            await this.api.getUpdates({
                offset,
                limit: 1
            });
            this.pollingAbortController = undefined;
        } else {
            debug2("Bot is not running!");
        }
    }
    catch(errorHandler) {
        this.errorHandler = errorHandler;
    }
    async loop(options) {
        this.pollingRunning = true;
        this.pollingAbortController = new AbortController();
        const limit = options?.limit;
        const timeout = options?.timeout ?? 30;
        let allowed_updates = options?.allowed_updates;
        while(this.pollingRunning){
            const updates = await this.fetchUpdates({
                limit,
                timeout,
                allowed_updates
            });
            if (updates === undefined) break;
            await this.handleUpdates(updates);
            allowed_updates = undefined;
        }
    }
    async fetchUpdates({ limit , timeout , allowed_updates  }) {
        const offset = this.lastTriedUpdateId + 1;
        let updates = undefined;
        do {
            try {
                updates = await this.api.getUpdates({
                    offset,
                    limit,
                    timeout,
                    allowed_updates
                }, this.pollingAbortController?.signal);
            } catch (error) {
                await this.handlePollingError(error);
            }
        }while (updates === undefined && this.pollingRunning)
        return updates;
    }
    async handlePollingError(error) {
        if (!this.pollingRunning) {
            debug2("Pending getUpdates request cancelled");
            return;
        }
        let sleepSeconds = 3;
        if (error instanceof GrammyError) {
            debugErr(error.message);
            if (error.error_code === 401) {
                debugErr("Make sure you are using the bot token you obtained from @BotFather (https://t.me/BotFather).");
                throw error;
            } else if (error.error_code === 409) {
                debugErr("Consider revoking the bot token if you believe that no other instance is running.");
                throw error;
            } else if (error.error_code === 429) {
                debugErr("Bot API server is closing.");
                sleepSeconds = error.parameters.retry_after ?? sleepSeconds;
            }
        } else debugErr(error);
        debugErr(`Call to getUpdates failed, retrying in ${sleepSeconds} seconds ...`);
        await sleep(sleepSeconds);
    }
    token;
}
async function withRetries(task) {
    let result = {
        ok: false
    };
    while(!result.ok){
        try {
            result = {
                ok: true,
                value: await task()
            };
        } catch (error) {
            debugErr(error);
            if (error instanceof HttpError) continue;
            if (error instanceof GrammyError) {
                if (error.error_code >= 500) continue;
                if (error.error_code === 429) {
                    const retryAfter = error.parameters.retry_after;
                    if (retryAfter !== undefined) await sleep(retryAfter);
                    continue;
                }
            }
            throw error;
        }
    }
    return result.value;
}
function sleep(seconds) {
    return new Promise((r)=>setTimeout(r, 1000 * seconds));
}
browser$1("grammy:session");
browser$1("grammy:error");
function getBot(token) {
    const bot = new Bot(token);
    bot.command("start", async (ctx)=>{
        await ctx.reply("*Hello there\!*", {
            parse_mode: "MarkdownV2"
        });
    });
    bot.command("help", async (ctx)=>{
        await ctx.reply("<b>Help</b>\n" + "I can show you ID of the current chat. Just send /id!\n\n" + `This chat's ID is: <code>${ctx.chat.id}</code>`, {
            parse_mode: "HTML"
        });
    });
    bot.command("id", async (ctx)=>{
        await ctx.reply("`" + ctx.chat.id + "`", {
            parse_mode: "Markdown"
        });
    });
    return bot;
}
export { getBot as getBot };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvZ3JhbW15QHYxLjEwLjEvZmlsdGVyLnRzIiwiaHR0cHM6Ly9kZW5vLmxhbmQveC9ncmFtbXlAdjEuMTAuMS9jb250ZXh0LnRzIiwiaHR0cHM6Ly9kZW5vLmxhbmQveC9ncmFtbXlAdjEuMTAuMS9jb21wb3Nlci50cyIsImh0dHBzOi8vY2RuLnNreXBhY2suZGV2Ly0vbXNAdjIuMS4yLWdpQkRaMUlBNWxtUTNaWGFhODdWL2Rpc3Q9ZXMyMDE5LG1vZGU9aW1wb3J0cy9vcHRpbWl6ZWQvbXMuanMiLCJodHRwczovL2Nkbi5za3lwYWNrLmRldi8tL2RlYnVnQHY0LjMuNC1vNGxpVnZNbE9uUVdiTFNZWk1Ydy9kaXN0PWVzMjAxOSxtb2RlPWltcG9ydHMvb3B0aW1pemVkL2RlYnVnLmpzIiwiaHR0cHM6Ly9lc20uc2gvdjk0L0BncmFtbXlqcy90eXBlc0AyLjguMi9kZW5vL3R5cGVzLmpzIiwiaHR0cHM6Ly9kZW5vLmxhbmQvc3RkQDAuMTUwLjAvX3V0aWwvYXNzZXJ0LnRzIiwiaHR0cHM6Ly9kZW5vLmxhbmQvc3RkQDAuMTUwLjAvYnl0ZXMvbW9kLnRzIiwiaHR0cHM6Ly9kZW5vLmxhbmQvc3RkQDAuMTUwLjAvaW8vYnVmZmVyLnRzIiwiaHR0cHM6Ly9kZW5vLmxhbmQvc3RkQDAuMTUwLjAvc3RyZWFtcy9jb252ZXJzaW9uLnRzIiwiaHR0cHM6Ly9kZW5vLmxhbmQvc3RkQDAuMTUwLjAvc3RyZWFtcy9kZWxpbWl0ZXIudHMiLCJodHRwczovL2Rlbm8ubGFuZC94L2dyYW1teUB2MS4xMC4xL3BsYXRmb3JtLmRlbm8udHMiLCJodHRwczovL2Rlbm8ubGFuZC94L2dyYW1teUB2MS4xMC4xL2NvcmUvZXJyb3IudHMiLCJodHRwczovL2Rlbm8ubGFuZC9zdGRAMC4xNDguMC9fdXRpbC9vcy50cyIsImh0dHBzOi8vZGVuby5sYW5kL3N0ZEAwLjE0OC4wL3BhdGgvX2NvbnN0YW50cy50cyIsImh0dHBzOi8vZGVuby5sYW5kL3N0ZEAwLjE0OC4wL3BhdGgvX3V0aWwudHMiLCJodHRwczovL2Rlbm8ubGFuZC9zdGRAMC4xNDguMC9fdXRpbC9hc3NlcnQudHMiLCJodHRwczovL2Rlbm8ubGFuZC9zdGRAMC4xNDguMC9wYXRoL3dpbjMyLnRzIiwiaHR0cHM6Ly9kZW5vLmxhbmQvc3RkQDAuMTQ4LjAvcGF0aC9wb3NpeC50cyIsImh0dHBzOi8vZGVuby5sYW5kL3N0ZEAwLjE0OC4wL3BhdGgvZ2xvYi50cyIsImh0dHBzOi8vZGVuby5sYW5kL3N0ZEAwLjE0OC4wL3BhdGgvbW9kLnRzIiwiaHR0cHM6Ly9kZW5vLmxhbmQvc3RkQDAuMTQ4LjAvYnl0ZXMvbW9kLnRzIiwiaHR0cHM6Ly9kZW5vLmxhbmQvc3RkQDAuMTQ4LjAvaW8vYnVmZmVyLnRzIiwiaHR0cHM6Ly9kZW5vLmxhbmQvc3RkQDAuMTQ4LjAvc3RyZWFtcy9jb252ZXJzaW9uLnRzIiwiaHR0cHM6Ly9kZW5vLmxhbmQvc3RkQDAuMTQ4LjAvc3RyZWFtcy9kZWxpbWl0ZXIudHMiLCJodHRwczovL2Rlbm8ubGFuZC94L2dyYW1teUB2MS4xMC4xL3R5cGVzLmRlbm8udHMiLCJodHRwczovL2Rlbm8ubGFuZC94L2dyYW1teUB2MS4xMC4xL2NvcmUvcGF5bG9hZC50cyIsImh0dHBzOi8vZGVuby5sYW5kL3gvZ3JhbW15QHYxLjEwLjEvY29yZS9jbGllbnQudHMiLCJodHRwczovL2Rlbm8ubGFuZC94L2dyYW1teUB2MS4xMC4xL2NvcmUvYXBpLnRzIiwiaHR0cHM6Ly9kZW5vLmxhbmQveC9ncmFtbXlAdjEuMTAuMS9ib3QudHMiLCJodHRwczovL2Rlbm8ubGFuZC94L2dyYW1teUB2MS4xMC4xL2NvbnZlbmllbmNlL3Nlc3Npb24udHMiLCJodHRwczovL2Rlbm8ubGFuZC94L2dyYW1teUB2MS4xMC4xL2NvbnZlbmllbmNlL3dlYmhvb2sudHMiLCJmaWxlOi8vL3RtcC9iMzJlNWQ2NC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBkZW5vLWxpbnQtaWdub3JlLWZpbGUgY2FtZWxjYXNlIG5vLWV4cGxpY2l0LWFueVxuaW1wb3J0IHsgdHlwZSBBbGlhc1Byb3BzLCB0eXBlIENvbnRleHQgfSBmcm9tIFwiLi9jb250ZXh0LnRzXCI7XG5pbXBvcnQgeyB0eXBlIFVwZGF0ZSB9IGZyb20gXCIuL3R5cGVzLnRzXCI7XG5cbnR5cGUgRmlsdGVyRnVuY3Rpb248QyBleHRlbmRzIENvbnRleHQsIEQgZXh0ZW5kcyBDPiA9IChjdHg6IEMpID0+IGN0eCBpcyBEO1xuXG4vLyA9PT0gT2J0YWluIE8oMSkgZmlsdGVyIGZ1bmN0aW9uIGZyb20gcXVlcnlcbi8qKlxuICogPiBUaGlzIGlzIGFuIGFkdmFuY2VkIGZ1bmN0aW9uIG9mIGdyYW1tWS5cbiAqXG4gKiBUYWtlcyBhIGZpbHRlciBxdWVyeSBhbmQgdHVybnMgaXQgaW50byBhIHByZWRpY2F0ZSBmdW5jdGlvbiB0aGF0IGNhbiBjaGVjayBpblxuICogY29uc3RhbnQgdGltZSB3aGV0aGVyIGEgZ2l2ZW4gY29udGV4dCBvYmplY3Qgc2F0aXNmaWVzIHRoZSBxdWVyeS4gVGhlIGNyZWF0ZWRcbiAqIHByZWRpY2F0ZSBjYW4gYmUgcGFzc2VkIHRvIGBib3QuZmlsdGVyYCBhbmQgd2lsbCBuYXJyb3cgZG93biB0aGUgY29udGV4dFxuICogYWNjb3JkaW5nbHkuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGludGVybmFsbHkgYnkgYGJvdC5vbmAgYnV0IGV4cG9zZWQgZm9yIGFkdmFuY2VkIHVzYWdlXG4gKiBsaWtlIHRoZSBmb2xsb3dpbmcuXG4gKiBgYGB0c1xuICogLy8gTGlzdGVucyBmb3IgdXBkYXRlcyBleGNlcHQgZm9yd2FyZHMgb2YgbWVzc2FnZXMgb3IgY2hhbm5lbCBwb3N0c1xuICogYm90LmRyb3AobWF0Y2hGaWx0ZXIoJzpmb3J3YXJkX2RhdGUnKSwgY3R4ID0+IHsgLi4uIH0pXG4gKiBgYGBcbiAqXG4gKiBDaGVjayBvdXQgdGhlXG4gKiBbZG9jdW1lbnRhdGlvbl0oaHR0cHM6Ly9kb2MuZGVuby5sYW5kL2h0dHBzOi8vZGVuby5sYW5kL3gvZ3JhbW15L21vZC50cy9+L0NvbXBvc2VyKVxuICogb2YgYGJvdC5vbmAgZm9yIGV4YW1wbGVzLiBJbiBhZGRpdGlvbiwgdGhlXG4gKiBbd2Vic2l0ZV0oaHR0cHM6Ly9ncmFtbXkuZGV2L2d1aWRlL2ZpbHRlci1xdWVyaWVzLmh0bWwpIGNvbnRhaW5zIG1vcmVcbiAqIGluZm9ybWF0aW9uIGFib3V0IGhvdyBmaWx0ZXIgcXVlcmllcyB3b3JrIGluIGdyYW1tWS5cbiAqXG4gKiBAcGFyYW0gZmlsdGVyIEEgZmlsdGVyIHF1ZXJ5IG9yIGFuIGFycmF5IG9mIGZpbHRlciBxdWVyaWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXRjaEZpbHRlcjxDIGV4dGVuZHMgQ29udGV4dCwgUSBleHRlbmRzIEZpbHRlclF1ZXJ5PihcbiAgICBmaWx0ZXI6IFEgfCBRW10sXG4pOiBGaWx0ZXJGdW5jdGlvbjxDLCBGaWx0ZXI8QywgUT4+IHtcbiAgICBjb25zdCBwYXJzZWQgPSBwYXJzZShmaWx0ZXIpO1xuICAgIGNvbnN0IHByZWRpY2F0ZSA9IGNvbXBpbGUocGFyc2VkKTtcbiAgICByZXR1cm4gKGN0eDogQyk6IGN0eCBpcyBGaWx0ZXI8QywgUT4gPT4gcHJlZGljYXRlKGN0eCk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlKGZpbHRlcjogRmlsdGVyUXVlcnkgfCBGaWx0ZXJRdWVyeVtdKTogc3RyaW5nW11bXSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZmlsdGVyKVxuICAgICAgICA/IGZpbHRlci5tYXAoKHEpID0+IHEuc3BsaXQoXCI6XCIpKVxuICAgICAgICA6IFtmaWx0ZXIuc3BsaXQoXCI6XCIpXTtcbn1cblxuZnVuY3Rpb24gY29tcGlsZShwYXJzZWQ6IHN0cmluZ1tdW10pOiAoY3R4OiBDb250ZXh0KSA9PiBib29sZWFuIHtcbiAgICBjb25zdCBwcmVwcm9jZXNzZWQgPSBwYXJzZWQuZmxhdE1hcCgocSkgPT4gY2hlY2socSwgcHJlcHJvY2VzcyhxKSkpO1xuICAgIGNvbnN0IGx0cmVlID0gdHJlZWlmeShwcmVwcm9jZXNzZWQpO1xuICAgIGNvbnN0IHByZWRpY2F0ZSA9IGFyYm9yaXN0KGx0cmVlKTsgLy8gYXJib3Jpc3RzIGNoZWNrIHRyZWVzXG4gICAgcmV0dXJuIChjdHgpID0+ICEhcHJlZGljYXRlKGN0eC51cGRhdGUsIGN0eCk7XG59XG5cbmZ1bmN0aW9uIHByZXByb2Nlc3MoZmlsdGVyOiBzdHJpbmdbXSk6IHN0cmluZ1tdW10ge1xuICAgIGNvbnN0IHZhbGlkOiBhbnkgPSBVUERBVEVfS0VZUztcbiAgICBjb25zdCBleHBhbmRlZCA9IFtmaWx0ZXJdXG4gICAgICAgIC8vIGV4cGFuZCBMMVxuICAgICAgICAuZmxhdE1hcCgocSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgW2wxLCBsMiwgbDNdID0gcTtcbiAgICAgICAgICAgIC8vIG9ubHkgZXhwYW5kIGlmIHNob3J0Y3V0IGlzIGdpdmVuXG4gICAgICAgICAgICBpZiAoIShsMSBpbiBMMV9TSE9SVENVVFMpKSByZXR1cm4gW3FdO1xuICAgICAgICAgICAgLy8gb25seSBleHBhbmQgZm9yIGF0IGxlYXN0IG9uZSBub24tZW1wdHkgcGFydFxuICAgICAgICAgICAgaWYgKCFsMSAmJiAhbDIgJiYgIWwzKSByZXR1cm4gW3FdO1xuICAgICAgICAgICAgLy8gcGVyZm9ybSBhY3R1YWwgZXhwYW5zaW9uXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRzID0gTDFfU0hPUlRDVVRTW2wxIGFzIEwxU2hvcnRjdXRzXTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGFuZGVkID0gdGFyZ2V0cy5tYXAoKHMpID0+IFtzLCBsMiwgbDNdKTtcbiAgICAgICAgICAgIC8vIGFzc3VtZSB0aGF0IGJhcmUgTDEgZXhwYW5zaW9ucyBhcmUgYWx3YXlzIGNvcnJlY3RcbiAgICAgICAgICAgIGlmIChsMiA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZXhwYW5kZWQ7XG4gICAgICAgICAgICAvLyBvbmx5IGZpbHRlciBvdXQgaW52YWxpZCBleHBhbnNpb25zIGlmIHdlIGRvbid0IGRvIHRoaXMgbGF0ZXJcbiAgICAgICAgICAgIGlmIChsMiBpbiBMMl9TSE9SVENVVFMgJiYgKGwyIHx8IGwzKSkgcmV0dXJuIGV4cGFuZGVkO1xuICAgICAgICAgICAgLy8gZmlsdGVyIG91dCBpbnZhbGlkIGV4cGFuc2lvbnMsIGUuZy4gYGNoYW5uZWxfcG9zdDpuZXdfY2hhdF9tZW1iZXJgIGZvciBlbXB0eSBMMVxuICAgICAgICAgICAgcmV0dXJuIGV4cGFuZGVkLmZpbHRlcigoW3NdKSA9PiAhIXZhbGlkW3NdPy5bbDJdKTtcbiAgICAgICAgfSlcbiAgICAgICAgLy8gZXhwYW5kIEwyXG4gICAgICAgIC5mbGF0TWFwKChxKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbbDEsIGwyLCBsM10gPSBxO1xuICAgICAgICAgICAgLy8gb25seSBleHBhbmQgaWYgc2hvcnRjdXQgaXMgZ2l2ZW5cbiAgICAgICAgICAgIGlmICghKGwyIGluIEwyX1NIT1JUQ1VUUykpIHJldHVybiBbcV07XG4gICAgICAgICAgICAvLyBvbmx5IGV4cGFuZCBmb3IgYXQgbGVhc3Qgb25lIG5vbi1lbXB0eSBwYXJ0XG4gICAgICAgICAgICBpZiAoIWwyICYmICFsMykgcmV0dXJuIFtxXTtcbiAgICAgICAgICAgIC8vIHBlcmZvcm0gYWN0dWFsIGV4cGFuc2lvblxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0cyA9IEwyX1NIT1JUQ1VUU1tsMiBhcyBMMlNob3J0Y3V0c107XG4gICAgICAgICAgICBjb25zdCBleHBhbmRlZCA9IHRhcmdldHMubWFwKChzKSA9PiBbbDEsIHMsIGwzXSk7XG4gICAgICAgICAgICAvLyBhc3N1bWUgdGhhdCBiYXJlIEwyIGV4cGFuc2lvbnMgYXJlIGFsd2F5cyBjb3JyZWN0XG4gICAgICAgICAgICBpZiAobDMgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGV4cGFuZGVkO1xuICAgICAgICAgICAgLy8gZmlsdGVyIG91dCBpbnZhbGlkIGV4cGFuc2lvbnNcbiAgICAgICAgICAgIHJldHVybiBleHBhbmRlZC5maWx0ZXIoKFssIHNdKSA9PiAhIXZhbGlkW2wxXT8uW3NdPy5bbDNdKTtcbiAgICAgICAgfSk7XG4gICAgaWYgKGV4cGFuZGVkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgU2hvcnRjdXRzIGluICcke1xuICAgICAgICAgICAgICAgIGZpbHRlci5qb2luKFwiOlwiKVxuICAgICAgICAgICAgfScgZG8gbm90IGV4cGFuZCB0byBhbnkgdmFsaWQgZmlsdGVyIHF1ZXJ5YCxcbiAgICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIGV4cGFuZGVkO1xufVxuXG5mdW5jdGlvbiBjaGVjayhvcmlnaW5hbDogc3RyaW5nW10sIHByZXByb2Nlc3NlZDogc3RyaW5nW11bXSk6IHN0cmluZ1tdW10ge1xuICAgIGlmIChwcmVwcm9jZXNzZWQubGVuZ3RoID09PSAwKSB0aHJvdyBuZXcgRXJyb3IoXCJFbXB0eSBmaWx0ZXIgcXVlcnkgZ2l2ZW5cIik7XG4gICAgY29uc3QgZXJyb3JzID0gcHJlcHJvY2Vzc2VkXG4gICAgICAgIC5tYXAoY2hlY2tPbmUpXG4gICAgICAgIC5maWx0ZXIoKHIpOiByIGlzIHN0cmluZyA9PiByICE9PSB0cnVlKTtcbiAgICBpZiAoZXJyb3JzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHByZXByb2Nlc3NlZDtcbiAgICBlbHNlIGlmIChlcnJvcnMubGVuZ3RoID09PSAxKSB0aHJvdyBuZXcgRXJyb3IoZXJyb3JzWzBdKTtcbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYEludmFsaWQgZmlsdGVyIHF1ZXJ5ICcke1xuICAgICAgICAgICAgICAgIG9yaWdpbmFsLmpvaW4oXCI6XCIpXG4gICAgICAgICAgICB9Jy4gVGhlcmUgYXJlICR7ZXJyb3JzLmxlbmd0aH0gZXJyb3JzIGFmdGVyIGV4cGFuZGluZyB0aGUgY29udGFpbmVkIHNob3J0Y3V0czogJHtcbiAgICAgICAgICAgICAgICBlcnJvcnMuam9pbihcIjsgXCIpXG4gICAgICAgICAgICB9YCxcbiAgICAgICAgKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjaGVja09uZShmaWx0ZXI6IHN0cmluZ1tdKTogc3RyaW5nIHwgdHJ1ZSB7XG4gICAgY29uc3QgW2wxLCBsMiwgbDMsIC4uLm5dID0gZmlsdGVyO1xuICAgIGlmIChsMSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gXCJFbXB0eSBmaWx0ZXIgcXVlcnkgZ2l2ZW5cIjtcbiAgICBpZiAoIShsMSBpbiBVUERBVEVfS0VZUykpIHtcbiAgICAgICAgY29uc3QgcGVybWl0dGVkID0gT2JqZWN0LmtleXMoVVBEQVRFX0tFWVMpO1xuICAgICAgICByZXR1cm4gYEludmFsaWQgTDEgZmlsdGVyICcke2wxfScgZ2l2ZW4gaW4gJyR7ZmlsdGVyLmpvaW4oXCI6XCIpfScuIFxcXG5QZXJtaXR0ZWQgdmFsdWVzIGFyZTogJHtwZXJtaXR0ZWQubWFwKChrKSA9PiBgJyR7a30nYCkuam9pbihcIiwgXCIpfS5gO1xuICAgIH1cbiAgICBpZiAobDIgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHRydWU7XG4gICAgY29uc3QgbDFPYmo6IGFueSA9IFVQREFURV9LRVlTW2wxIGFzIGtleW9mIFNdO1xuICAgIGlmICghKGwyIGluIGwxT2JqKSkge1xuICAgICAgICBjb25zdCBwZXJtaXR0ZWQgPSBPYmplY3Qua2V5cyhsMU9iaik7XG4gICAgICAgIHJldHVybiBgSW52YWxpZCBMMiBmaWx0ZXIgJyR7bDJ9JyBnaXZlbiBpbiAnJHtmaWx0ZXIuam9pbihcIjpcIil9Jy4gXFxcblBlcm1pdHRlZCB2YWx1ZXMgYXJlOiAke3Blcm1pdHRlZC5tYXAoKGspID0+IGAnJHtrfSdgKS5qb2luKFwiLCBcIil9LmA7XG4gICAgfVxuICAgIGlmIChsMyA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdHJ1ZTtcbiAgICBjb25zdCBsMk9iaiA9IGwxT2JqW2wyXTtcbiAgICBpZiAoIShsMyBpbiBsMk9iaikpIHtcbiAgICAgICAgY29uc3QgcGVybWl0dGVkID0gT2JqZWN0LmtleXMobDJPYmopO1xuICAgICAgICByZXR1cm4gYEludmFsaWQgTDMgZmlsdGVyICcke2wzfScgZ2l2ZW4gaW4gJyR7ZmlsdGVyLmpvaW4oXCI6XCIpfScuICR7XG4gICAgICAgICAgICBwZXJtaXR0ZWQubGVuZ3RoID09PSAwXG4gICAgICAgICAgICAgICAgPyBgTm8gZnVydGhlciBmaWx0ZXJpbmcgaXMgcG9zc2libGUgYWZ0ZXIgJyR7bDF9OiR7bDJ9Jy5gXG4gICAgICAgICAgICAgICAgOiBgUGVybWl0dGVkIHZhbHVlcyBhcmU6ICR7XG4gICAgICAgICAgICAgICAgICAgIHBlcm1pdHRlZC5tYXAoKGspID0+IGAnJHtrfSdgKS5qb2luKFwiLCBcIilcbiAgICAgICAgICAgICAgICB9LmBcbiAgICAgICAgfWA7XG4gICAgfVxuICAgIGlmIChuLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIGBDYW5ub3QgZmlsdGVyIGZ1cnRoZXIgdGhhbiB0aHJlZSBsZXZlbHMsICc6JHtcbiAgICAgICAgbi5qb2luKFwiOlwiKVxuICAgIH0nIGlzIGludmFsaWQhYDtcbn1cbmludGVyZmFjZSBMVHJlZSB7XG4gICAgW2wxOiBzdHJpbmddOiB7IFtsMjogc3RyaW5nXTogU2V0PHN0cmluZz4gfTtcbn1cbmZ1bmN0aW9uIHRyZWVpZnkocGF0aHM6IHN0cmluZ1tdW10pOiBMVHJlZSB7XG4gICAgY29uc3QgdHJlZTogTFRyZWUgPSB7fTtcbiAgICBmb3IgKGNvbnN0IFtsMSwgbDIsIGwzXSBvZiBwYXRocykge1xuICAgICAgICBjb25zdCBzdWJ0cmVlID0gKHRyZWVbbDFdID8/PSB7fSk7XG4gICAgICAgIGlmIChsMiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBzZXQgPSAoc3VidHJlZVtsMl0gPz89IG5ldyBTZXQoKSk7XG4gICAgICAgICAgICBpZiAobDMgIT09IHVuZGVmaW5lZCkgc2V0LmFkZChsMyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRyZWU7XG59XG5cbnR5cGUgUHJlZCA9IChvYmo6IGFueSwgY3R4OiBDb250ZXh0KSA9PiBib29sZWFuO1xuZnVuY3Rpb24gb3IobGVmdDogUHJlZCwgcmlnaHQ6IFByZWQpOiBQcmVkIHtcbiAgICByZXR1cm4gKG9iaiwgY3R4KSA9PiBsZWZ0KG9iaiwgY3R4KSB8fCByaWdodChvYmosIGN0eCk7XG59XG5mdW5jdGlvbiBjb25jYXQoZ2V0OiBQcmVkLCB0ZXN0OiBQcmVkKTogUHJlZCB7XG4gICAgcmV0dXJuIChvYmosIGN0eCkgPT4ge1xuICAgICAgICBjb25zdCBuZXh0T2JqID0gZ2V0KG9iaiwgY3R4KTtcbiAgICAgICAgcmV0dXJuIG5leHRPYmogJiYgdGVzdChuZXh0T2JqLCBjdHgpO1xuICAgIH07XG59XG5mdW5jdGlvbiBsZWFmKHByZWQ6IFByZWQpOiBQcmVkIHtcbiAgICByZXR1cm4gKG9iaiwgY3R4KSA9PiBwcmVkKG9iaiwgY3R4KSAhPSBudWxsO1xufVxuZnVuY3Rpb24gYXJib3Jpc3QodHJlZTogTFRyZWUpOiBQcmVkIHtcbiAgICBjb25zdCBsMVByZWRpY2F0ZXMgPSBPYmplY3QuZW50cmllcyh0cmVlKS5tYXAoKFtsMSwgc3VidHJlZV0pID0+IHtcbiAgICAgICAgY29uc3QgbDFQcmVkOiBQcmVkID0gKG9iaikgPT4gb2JqW2wxXTtcbiAgICAgICAgY29uc3QgbDJQcmVkaWNhdGVzID0gT2JqZWN0LmVudHJpZXMoc3VidHJlZSkubWFwKChbbDIsIHNldF0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGwyUHJlZDogUHJlZCA9IChvYmopID0+IG9ialtsMl07XG4gICAgICAgICAgICBjb25zdCBsM1ByZWRpY2F0ZXMgPSBBcnJheS5mcm9tKHNldCkubWFwKChsMykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGwzUHJlZDogUHJlZCA9IGwzID09PSBcIm1lXCIgLy8gc3BlY2lhbCBoYW5kbGluZyBmb3IgYG1lYCBzaG9ydGN1dFxuICAgICAgICAgICAgICAgICAgICA/IChvYmosIGN0eCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWUgPSBjdHgubWUuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVzdE1heWJlQXJyYXkob2JqLCAodSkgPT4gdS5pZCA9PT0gbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDogKG9iaikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRlc3RNYXliZUFycmF5KG9iaiwgKGUpID0+IGVbbDNdIHx8IGUudHlwZSA9PT0gbDMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBsM1ByZWQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBsM1ByZWRpY2F0ZXMubGVuZ3RoID09PSAwXG4gICAgICAgICAgICAgICAgPyBsZWFmKGwyUHJlZClcbiAgICAgICAgICAgICAgICA6IGNvbmNhdChsMlByZWQsIGwzUHJlZGljYXRlcy5yZWR1Y2Uob3IpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBsMlByZWRpY2F0ZXMubGVuZ3RoID09PSAwXG4gICAgICAgICAgICA/IGxlYWYobDFQcmVkKVxuICAgICAgICAgICAgOiBjb25jYXQobDFQcmVkLCBsMlByZWRpY2F0ZXMucmVkdWNlKG9yKSk7XG4gICAgfSk7XG4gICAgaWYgKGwxUHJlZGljYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGNyZWF0ZSBmaWx0ZXIgZnVuY3Rpb24gZm9yIGVtcHR5IHF1ZXJ5XCIpO1xuICAgIH1cbiAgICByZXR1cm4gbDFQcmVkaWNhdGVzLnJlZHVjZShvcik7XG59XG5cbmZ1bmN0aW9uIHRlc3RNYXliZUFycmF5PFQ+KHQ6IFQgfCBUW10sIHByZWQ6ICh0OiBUKSA9PiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgY29uc3QgcCA9ICh4OiBUKSA9PiB4ICE9IG51bGwgJiYgcHJlZCh4KTtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh0KSA/IHQuc29tZShwKSA6IHAodCk7XG59XG5cbi8vID09PSBEZWZpbmUgYSBzdHJ1Y3R1cmUgdG8gdmFsaWRhdGUgdGhlIHF1ZXJpZXNcbi8vIEwzXG5jb25zdCBFTlRJVFlfS0VZUyA9IHtcbiAgICBtZW50aW9uOiB7fSxcbiAgICBoYXNodGFnOiB7fSxcbiAgICBjYXNodGFnOiB7fSxcbiAgICBib3RfY29tbWFuZDoge30sXG4gICAgdXJsOiB7fSxcbiAgICBlbWFpbDoge30sXG4gICAgcGhvbmVfbnVtYmVyOiB7fSxcbiAgICBib2xkOiB7fSxcbiAgICBpdGFsaWM6IHt9LFxuICAgIHVuZGVybGluZToge30sXG4gICAgc3RyaWtldGhyb3VnaDoge30sXG4gICAgc3BvaWxlcjoge30sXG4gICAgY29kZToge30sXG4gICAgcHJlOiB7fSxcbiAgICB0ZXh0X2xpbms6IHt9LFxuICAgIHRleHRfbWVudGlvbjoge30sXG59IGFzIGNvbnN0O1xuY29uc3QgVVNFUl9LRVlTID0ge1xuICAgIG1lOiB7fSxcbiAgICBpc19ib3Q6IHt9LFxuICAgIGlzX3ByZW1pdW06IHt9LFxuICAgIGFkZGVkX3RvX2F0dGFjaG1lbnRfbWVudToge30sXG59IGFzIGNvbnN0O1xuXG4vLyBMMlxuY29uc3QgRURJVEFCTEVfTUVTU0FHRV9LRVlTID0ge1xuICAgIHRleHQ6IHt9LFxuICAgIGFuaW1hdGlvbjoge30sXG4gICAgYXVkaW86IHt9LFxuICAgIGRvY3VtZW50OiB7fSxcbiAgICBwaG90bzoge30sXG4gICAgdmlkZW86IHt9LFxuICAgIGdhbWU6IHt9LFxuICAgIGxvY2F0aW9uOiB7fSxcblxuICAgIGVudGl0aWVzOiBFTlRJVFlfS0VZUyxcbiAgICBjYXB0aW9uX2VudGl0aWVzOiBFTlRJVFlfS0VZUyxcblxuICAgIGNhcHRpb246IHt9LFxufSBhcyBjb25zdDtcbmNvbnN0IENPTU1PTl9NRVNTQUdFX0tFWVMgPSB7XG4gICAgLi4uRURJVEFCTEVfTUVTU0FHRV9LRVlTLFxuXG4gICAgc3RpY2tlcjoge30sXG4gICAgdmlkZW9fbm90ZToge30sXG4gICAgdm9pY2U6IHt9LFxuICAgIGNvbnRhY3Q6IHt9LFxuICAgIGRpY2U6IHt9LFxuICAgIHBvbGw6IHt9LFxuICAgIHZlbnVlOiB7fSxcblxuICAgIG5ld19jaGF0X3RpdGxlOiB7fSxcbiAgICBuZXdfY2hhdF9waG90bzoge30sXG4gICAgZGVsZXRlX2NoYXRfcGhvdG86IHt9LFxuICAgIG1lc3NhZ2VfYXV0b19kZWxldGVfdGltZXJfY2hhbmdlZDoge30sXG4gICAgcGlubmVkX21lc3NhZ2U6IHt9LFxuICAgIGludm9pY2U6IHt9LFxuICAgIHByb3hpbWl0eV9hbGVydF90cmlnZ2VyZWQ6IHt9LFxuICAgIHZpZGVvX2NoYXRfc2NoZWR1bGVkOiB7fSxcbiAgICB2aWRlb19jaGF0X3N0YXJ0ZWQ6IHt9LFxuICAgIHZpZGVvX2NoYXRfZW5kZWQ6IHt9LFxuICAgIHZpZGVvX2NoYXRfcGFydGljaXBhbnRzX2ludml0ZWQ6IHt9LFxuICAgIHdlYl9hcHBfZGF0YToge30sXG5cbiAgICBmb3J3YXJkX2RhdGU6IHt9LFxuICAgIGlzX2F1dG9tYXRpY19mb3J3YXJkOiB7fSxcbn0gYXMgY29uc3Q7XG5jb25zdCBNRVNTQUdFX0tFWVMgPSB7XG4gICAgLi4uQ09NTU9OX01FU1NBR0VfS0VZUyxcbiAgICBuZXdfY2hhdF9tZW1iZXJzOiBVU0VSX0tFWVMsXG4gICAgbGVmdF9jaGF0X21lbWJlcjogVVNFUl9LRVlTLFxuICAgIGdyb3VwX2NoYXRfY3JlYXRlZDoge30sXG4gICAgc3VwZXJncm91cF9jaGF0X2NyZWF0ZWQ6IHt9LFxuICAgIG1pZ3JhdGVfdG9fY2hhdF9pZDoge30sXG4gICAgbWlncmF0ZV9mcm9tX2NoYXRfaWQ6IHt9LFxuICAgIHN1Y2Nlc3NmdWxfcGF5bWVudDoge30sXG4gICAgY29ubmVjdGVkX3dlYnNpdGU6IHt9LFxuICAgIHBhc3Nwb3J0X2RhdGE6IHt9LFxufSBhcyBjb25zdDtcbmNvbnN0IENIQU5ORUxfUE9TVF9LRVlTID0ge1xuICAgIC4uLkNPTU1PTl9NRVNTQUdFX0tFWVMsXG4gICAgY2hhbm5lbF9jaGF0X2NyZWF0ZWQ6IHt9LFxufSBhcyBjb25zdDtcbmNvbnN0IENBTExCQUNLX1FVRVJZX0tFWVMgPSB7IGRhdGE6IHt9LCBnYW1lX3Nob3J0X25hbWU6IHt9IH0gYXMgY29uc3Q7XG5jb25zdCBDSEFUX01FTUJFUl9VUERBVEVEX0tFWVMgPSB7IGZyb206IFVTRVJfS0VZUyB9IGFzIGNvbnN0O1xuXG4vLyBMMVxuY29uc3QgVVBEQVRFX0tFWVMgPSB7XG4gICAgbWVzc2FnZTogTUVTU0FHRV9LRVlTLFxuICAgIGVkaXRlZF9tZXNzYWdlOiBNRVNTQUdFX0tFWVMsXG4gICAgY2hhbm5lbF9wb3N0OiBDSEFOTkVMX1BPU1RfS0VZUyxcbiAgICBlZGl0ZWRfY2hhbm5lbF9wb3N0OiBDSEFOTkVMX1BPU1RfS0VZUyxcbiAgICBpbmxpbmVfcXVlcnk6IHt9LFxuICAgIGNob3Nlbl9pbmxpbmVfcmVzdWx0OiB7fSxcbiAgICBjYWxsYmFja19xdWVyeTogQ0FMTEJBQ0tfUVVFUllfS0VZUyxcbiAgICBzaGlwcGluZ19xdWVyeToge30sXG4gICAgcHJlX2NoZWNrb3V0X3F1ZXJ5OiB7fSxcbiAgICBwb2xsOiB7fSxcbiAgICBwb2xsX2Fuc3dlcjoge30sXG4gICAgbXlfY2hhdF9tZW1iZXI6IENIQVRfTUVNQkVSX1VQREFURURfS0VZUyxcbiAgICBjaGF0X21lbWJlcjogQ0hBVF9NRU1CRVJfVVBEQVRFRF9LRVlTLFxuICAgIGNoYXRfam9pbl9yZXF1ZXN0OiB7fSxcbn0gYXMgY29uc3Q7XG5cbi8vID09PSBCdWlsZCB1cCBhbGwgcG9zc2libGUgZmlsdGVyIHF1ZXJpZXMgZnJvbSB0aGUgYWJvdmUgdmFsaWRhdGlvbiBzdHJ1Y3R1cmVcbnR5cGUgS2V5T2Y8VD4gPSBzdHJpbmcgJiBrZXlvZiBUOyAvLyBFbXVsYXRlIGBrZXlvZlN0cmluZ3NPbmx5YFxuXG4vLyBTdWdnZXN0aW9uIGJ1aWxkaW5nIGJhc2Ugc3RydWN0dXJlXG50eXBlIFMgPSB0eXBlb2YgVVBEQVRFX0tFWVM7XG5cbi8vIEUuZy4gJ21lc3NhZ2UnIHN1Z2dlc3Rpb25zXG50eXBlIEwxUyA9IEtleU9mPFM+O1xuLy8gRS5nLiAnbWVzc2FnZTplbnRpdGllcycgc3VnZ2VzdGlvbnNcbnR5cGUgTDJTPEwxIGV4dGVuZHMgTDFTID0gTDFTPiA9IEwxIGV4dGVuZHMgdW5rbm93biA/IGAke0wxfToke0tleU9mPFNbTDFdPn1gXG4gICAgOiBuZXZlcjtcbi8vIEUuZy4gJ21lc3NhZ2U6ZW50aXRpZXM6dXJsJyBzdWdnZXN0aW9uc1xudHlwZSBMM1M8TDEgZXh0ZW5kcyBMMVMgPSBMMVM+ID0gTDEgZXh0ZW5kcyB1bmtub3duID8gTDNTXzxMMT4gOiBuZXZlcjtcbnR5cGUgTDNTXzxcbiAgICBMMSBleHRlbmRzIEwxUyxcbiAgICBMMiBleHRlbmRzIEtleU9mPFNbTDFdPiA9IEtleU9mPFNbTDFdPixcbj4gPSBMMiBleHRlbmRzIHVua25vd24gPyBgJHtMMX06JHtMMn06JHtLZXlPZjxTW0wxXVtMMl0+fWAgOiBuZXZlcjtcbi8vIFN1Z2dlc3Rpb25zIGZvciBhbGwgdGhyZWUgY29tYmluZWRcbnR5cGUgTDEyMyA9IEwxUyB8IEwyUyB8IEwzUztcbi8vIEUuZy4gJ21lc3NhZ2U6OnVybCcgZ2VuZXJhdGlvblxudHlwZSBJbmplY3RTaG9ydGN1dHM8USBleHRlbmRzIEwxMjMgPSBMMTIzPiA9IFEgZXh0ZW5kc1xuICAgIGAke2luZmVyIFJ9OiR7aW5mZXIgU306JHtpbmZlciBUfWBcbiAgICA/IGAke0NvbGxhcHNlTDE8UiwgTDFTaG9ydGN1dHM+fToke0NvbGxhcHNlTDI8UywgTDJTaG9ydGN1dHM+fToke1R9YFxuICAgIDogUSBleHRlbmRzIGAke2luZmVyIFJ9OiR7aW5mZXIgU31gXG4gICAgICAgID8gYCR7Q29sbGFwc2VMMTxSLCBMMVNob3J0Y3V0cz59OiR7Q29sbGFwc2VMMjxTPn1gXG4gICAgOiBDb2xsYXBzZUwxPFE+O1xuLy8gQWRkIEwxIHNob3J0Y3V0c1xudHlwZSBDb2xsYXBzZUwxPFxuICAgIFEgZXh0ZW5kcyBzdHJpbmcsXG4gICAgTCBleHRlbmRzIEwxU2hvcnRjdXRzID0gRXhjbHVkZTxMMVNob3J0Y3V0cywgXCJcIj4sXG4+ID1cbiAgICB8IFFcbiAgICB8IChMIGV4dGVuZHMgc3RyaW5nID8gUSBleHRlbmRzIHR5cGVvZiBMMV9TSE9SVENVVFNbTF1bbnVtYmVyXSA/IExcbiAgICAgICAgOiBuZXZlclxuICAgICAgICA6IG5ldmVyKTtcbi8vIEFkZCBMMiBzaG9ydGN1dHNcbnR5cGUgQ29sbGFwc2VMMjxcbiAgICBRIGV4dGVuZHMgc3RyaW5nLFxuICAgIEwgZXh0ZW5kcyBMMlNob3J0Y3V0cyA9IEV4Y2x1ZGU8TDJTaG9ydGN1dHMsIFwiXCI+LFxuPiA9XG4gICAgfCBRXG4gICAgfCAoTCBleHRlbmRzIHN0cmluZyA/IFEgZXh0ZW5kcyB0eXBlb2YgTDJfU0hPUlRDVVRTW0xdW251bWJlcl0gPyBMXG4gICAgICAgIDogbmV2ZXJcbiAgICAgICAgOiBuZXZlcik7XG4vLyBBbGwgcXVlcmllc1xudHlwZSBBbGxWYWxpZEZpbHRlclF1ZXJpZXMgPSBJbmplY3RTaG9ydGN1dHM7XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGZpbHRlciBxdWVyeSB0aGF0IGNhbiBiZSBwYXNzZWQgdG8gYGJvdC5vbmAuIFRoZXJlIGFyZSB0aHJlZVxuICogZGlmZmVyZW50IGtpbmRzIG9mIGZpbHRlciBxdWVyaWVzOiBMZXZlbCAxLCBMZXZlbCAyLCBhbmQgTGV2ZWwgMy4gQ2hlY2sgb3V0XG4gKiB0aGUgW3dlYnNpdGVdKGh0dHBzOi8vZ3JhbW15LmRldi9ndWlkZS9maWx0ZXItcXVlcmllcy5odG1sKSB0byByZWFkIGFib3V0IGhvd1xuICogZmlsdGVyIHF1ZXJpZXMgd29yayBpbiBncmFtbVksIGFuZCBob3cgdG8gdXNlIHRoZW0uXG4gKlxuICogSGVyZSBhcmUgdGhyZWUgYnJpZWYgZXhhbXBsZXM6XG4gKiBgYGB0c1xuICogLy8gTGlzdGVuIGZvciBtZXNzYWdlcyBvZiBhbnkgdHlwZSAoTGV2ZWwgMSlcbiAqIGJvdC5vbignbWVzc2FnZScsIGN0eCA9PiB7IC4uLiB9KVxuICogLy8gTGlzdGVuIGZvciBhdWRpbyBtZXNzYWdlcyBvbmx5IChMZXZlbCAyKVxuICogYm90Lm9uKCdtZXNzYWdlOmF1ZGlvJywgY3R4ID0+IHsgLi4uIH0pXG4gKiAvLyBMaXN0ZW4gZm9yIHRleHQgbWVzc2FnZXMgdGhhdCBoYXZlIGEgVVJMIGVudGl0eSAoTGV2ZWwgMylcbiAqIGJvdC5vbignbWVzc2FnZTplbnRpdGllczp1cmwnLCBjdHggPT4geyAuLi4gfSlcbiAqIGBgYFxuICovXG5leHBvcnQgdHlwZSBGaWx0ZXJRdWVyeSA9IEFsbFZhbGlkRmlsdGVyUXVlcmllcztcblxuLy8gPT09IEluZmVyIHRoZSBwcmVzZW50L2Fic2VudCBwcm9wZXJ0aWVzIG9uIGEgY29udGV4dCBvYmplY3QgYmFzZWQgb24gYSBxdWVyeVxuLy8gTm90ZTogTDMgZmlsdGVycyBhcmUgbm90IHJlcHJlc2VudGVkIGluIHR5cGVzXG5cbi8qKlxuICogQW55IGtpbmQgb2YgdmFsdWUgdGhhdCBhcHBlYXJzIGluIHRoZSBUZWxlZ3JhbSBCb3QgQVBJLiBXaGVuIGludGVyc2VjdGVkIHdpdGhcbiAqIGFuIG9wdGlvbmFsIGZpZWxkLCBpdCBlZmZlY3RpdmVseSByZW1vdmVzIGB8IHVuZGVmaW5lZGAuXG4gKi9cbi8vIGRlbm8tbGludC1pZ25vcmUgYmFuLXR5cGVzXG50eXBlIFNvbWVPYmplY3QgPSBvYmplY3Q7XG50eXBlIE5vdFVuZGVmaW5lZCA9IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4gfCBTb21lT2JqZWN0O1xuXG4vKipcbiAqIEdpdmVuIGEgRmlsdGVyUXVlcnksIHJldHVybnMgYW4gb2JqZWN0IHRoYXQsIHdoZW4gaW50ZXJzZWN0ZWQgd2l0aCBhbiBVcGRhdGUsXG4gKiBtYXJrcyB0aG9zZSBwcm9wZXJ0aWVzIGFzIHJlcXVpcmVkIHRoYXQgYXJlIGd1YXJhbnRlZWQgdG8gZXhpc3QuXG4gKi9cbnR5cGUgUnVuUXVlcnk8USBleHRlbmRzIHN0cmluZz4gPSBMMURpc2NyaW1pbmF0b3I8USwgTDFQYXJ0czxRPj47XG5cbi8vIGdldHMgYWxsIEwxIHF1ZXJ5IHNuaXBwZXRzXG50eXBlIEwxUGFydHM8USBleHRlbmRzIHN0cmluZz4gPSBRIGV4dGVuZHMgYCR7aW5mZXIgTDF9OiR7c3RyaW5nfWAgPyBMMSA6IFE7XG4vLyBnZXRzIGFsbCBMMiBxdWVyeSBzbmlwcGV0cyBmb3IgdGhlIGdpdmVuIEwxIHBhcnQsIG9yIGBuZXZlcmBcbnR5cGUgTDJQYXJ0czxcbiAgICBRIGV4dGVuZHMgc3RyaW5nLFxuICAgIEwxIGV4dGVuZHMgc3RyaW5nLFxuPiA9IFEgZXh0ZW5kcyBgJHtMMX06JHtpbmZlciBMMn06JHtzdHJpbmd9YCA/IEwyXG4gICAgOiBRIGV4dGVuZHMgYCR7TDF9OiR7aW5mZXIgTDJ9YCA/IEwyXG4gICAgOiBuZXZlcjtcblxuLy8gYnVpbGQgdXAgYWxsIGNvbWJpbmF0aW9ucyBvZiBhbGwgTDEgZmllbGRzXG50eXBlIEwxRGlzY3JpbWluYXRvcjxRIGV4dGVuZHMgc3RyaW5nLCBMMSBleHRlbmRzIHN0cmluZz4gPSBDb21iaW5lPFxuICAgIEwxRnJhZ21lbnQ8USwgTDE+LFxuICAgIEwxXG4+O1xuLy8gbWFwcyBlYWNoIEwxIHBhcnQgb2YgdGhlIGZpbHRlciBxdWVyeSB0byBhbiBvYmplY3RcbnR5cGUgTDFGcmFnbWVudDxRIGV4dGVuZHMgc3RyaW5nLCBMMSBleHRlbmRzIHN0cmluZz4gPSBMMSBleHRlbmRzIHVua25vd25cbiAgICA/IFJlY29yZDxMMSwgTDJEaXNjcmltaW5hdG9yPEwxLCBMMlBhcnRzPFEsIEwxPj4+XG4gICAgOiBuZXZlcjtcblxuLy8gYnVpbGQgdXAgYWxsIGNvbWJpbmF0aW9ucyBvZiBhbGwgTDIgZmllbGRzXG50eXBlIEwyRGlzY3JpbWluYXRvcjxMMSBleHRlbmRzIHN0cmluZywgTDIgZXh0ZW5kcyBzdHJpbmc+ID0gW0wyXSBleHRlbmRzXG4gICAgW25ldmVyXSA/IEwyU2hhbGxvd0ZyYWdtZW50PEwxPiAvLyBzaG9ydC1jaXJjdWl0IEwxIHF1ZXJpZXMgKEwyIGlzIG5ldmVyKSwgb25seSBhZGQgdHdpbnNcbiAgICA6IENvbWJpbmU8TDJGcmFnbWVudDxMMSwgTDI+LCBMMj47XG4vLyBtYXBzIGVhY2ggTDIgcGFydCBvZiB0aGUgZmlsdGVyIHF1ZXJ5IHRvIGFuIG9iamVjdCBhbmQgaGFuZGxlcyBzaWJsaW5nc1xudHlwZSBMMkZyYWdtZW50PEwxIGV4dGVuZHMgc3RyaW5nLCBMMiBleHRlbmRzIHN0cmluZz4gPSBMMiBleHRlbmRzIHVua25vd25cbiAgICA/IFJlY29yZDxMMiB8IEFkZFR3aW5zPEwxLCBMMj4sIE5vdFVuZGVmaW5lZD5cbiAgICA6IG5ldmVyO1xuLy8gZG9lcyB0aGUgc2FtZSBhcyBMMUZyYWdtZW50IGJ1dCB3aXRob3V0IGNvbWJpbmluZyBMMiBwcm9wZXJ0aWVzXG50eXBlIEwyU2hhbGxvd0ZyYWdtZW50PEwxIGV4dGVuZHMgc3RyaW5nPiA9IFJlY29yZDxcbiAgICBBZGRUd2luczxMMSwgbmV2ZXI+LFxuICAgIE5vdFVuZGVmaW5lZFxuPjtcblxuLy8gZGVmaW5lIGFkZGl0aW9uYWwgZmllbGRzIG9uIFUgd2l0aCB2YWx1ZSBgdW5kZWZpbmVkYFxudHlwZSBDb21iaW5lPFUsIEsgZXh0ZW5kcyBzdHJpbmc+ID0gVSBleHRlbmRzIHVua25vd25cbiAgICA/IFUgJiBQYXJ0aWFsPFJlY29yZDxFeGNsdWRlPEssIGtleW9mIFU+LCB1bmRlZmluZWQ+PlxuICAgIDogbmV2ZXI7XG5cbi8qKlxuICogVGhpcyB0eXBlIGluZmVycyB3aGljaCBwcm9wZXJ0aWVzIHdpbGwgYmUgcHJlc2VudCBvbiB0aGUgZ2l2ZW4gY29udGV4dCBvYmplY3RcbiAqIHByb3ZpZGVkIGl0IG1hdGNoZXMgdGhlIGdpdmVuIGZpbHRlciBxdWVyeS4gSWYgdGhlIGZpbHRlciBxdWVyeSBpcyBhIHVuaW9uXG4gKiB0eXBlLCB0aGUgcHJvZHVjZWQgY29udGV4dCBvYmplY3Qgd2lsbCBiZSBhIHVuaW9uIG9mIHBvc3NpYmxlIGNvbWJpbmF0aW9ucyxcbiAqIGhlbmNlIGFsbG93aW5nIHlvdSB0byBuYXJyb3cgZG93biBtYW51YWxseSB3aGljaCBvZiB0aGUgcHJvcGVydGllcyBhcmVcbiAqIHByZXNlbnQuXG4gKlxuICogSW4gc29tZSBzZW5zZSwgdGhpcyB0eXBlIGNvbXB1dGVzIGBtYXRjaEZpbHRlcmAgb24gdGhlIHR5cGUgbGV2ZWwuXG4gKi9cbmV4cG9ydCB0eXBlIEZpbHRlcjxDIGV4dGVuZHMgQ29udGV4dCwgUSBleHRlbmRzIEZpbHRlclF1ZXJ5PiA9IFBlcmZvcm1RdWVyeTxcbiAgICBDLFxuICAgIFJ1blF1ZXJ5PEV4cGFuZFNob3J0Y3V0czxRPj5cbj47XG4vLyBhcHBseSBhIHF1ZXJ5IHJlc3VsdCBieSBpbnRlcnNlY3RpbmcgaXQgd2l0aCBVcGRhdGUsIGFuZCB0aGVuIGluamVjdGluZyBpbnRvIENcbnR5cGUgUGVyZm9ybVF1ZXJ5PEMgZXh0ZW5kcyBDb250ZXh0LCBVIGV4dGVuZHMgU29tZU9iamVjdD4gPSBVIGV4dGVuZHMgdW5rbm93blxuICAgID8gRmlsdGVyZWRDb250ZXh0PEMsIFVwZGF0ZSAmIFU+XG4gICAgOiBuZXZlcjtcbi8vIHNldCB0aGUgZ2l2ZW4gdXBkYXRlIGludG8gYSBnaXZlbiBjb250ZXh0IG9iamVjdCwgYW5kIGFkanVzdCB0aGUgYWxpYXNlc1xudHlwZSBGaWx0ZXJlZENvbnRleHQ8QyBleHRlbmRzIENvbnRleHQsIFUgZXh0ZW5kcyBVcGRhdGU+ID1cbiAgICAmIENcbiAgICAmIFJlY29yZDxcInVwZGF0ZVwiLCBVPlxuICAgICYgQWxpYXNQcm9wczxPbWl0PFUsIFwidXBkYXRlX2lkXCI+PlxuICAgICYgU2hvcnRjdXRzPFU+O1xuXG4vLyBoZWxwZXIgdHlwZSB0byBpbmZlciBzaG9ydGN1dHMgb24gY29udGV4dCBvYmplY3QgYmFzZWQgb24gcHJlc2VudCBwcm9wZXJ0aWVzLCBtdXN0IGJlIGluIHN5bmMgd2l0aCBzaG9ydGN1dCBpbXBsIVxuaW50ZXJmYWNlIFNob3J0Y3V0czxVIGV4dGVuZHMgVXBkYXRlPiB7XG4gICAgbXNnOiBbVVtcImNhbGxiYWNrX3F1ZXJ5XCJdXSBleHRlbmRzIFtTb21lT2JqZWN0XVxuICAgICAgICA/IFVbXCJjYWxsYmFja19xdWVyeVwiXVtcIm1lc3NhZ2VcIl1cbiAgICAgICAgOiBbVVtcIm1lc3NhZ2VcIl1dIGV4dGVuZHMgW1NvbWVPYmplY3RdID8gVVtcIm1lc3NhZ2VcIl1cbiAgICAgICAgOiBbVVtcImVkaXRlZF9tZXNzYWdlXCJdXSBleHRlbmRzIFtTb21lT2JqZWN0XSA/IFVbXCJlZGl0ZWRfbWVzc2FnZVwiXVxuICAgICAgICA6IFtVW1wiY2hhbm5lbF9wb3N0XCJdXSBleHRlbmRzIFtTb21lT2JqZWN0XSA/IFVbXCJjaGFubmVsX3Bvc3RcIl1cbiAgICAgICAgOiBbVVtcImVkaXRlZF9jaGFubmVsX3Bvc3RcIl1dIGV4dGVuZHMgW1NvbWVPYmplY3RdXG4gICAgICAgICAgICA/IFVbXCJlZGl0ZWRfY2hhbm5lbF9wb3N0XCJdXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGNoYXQ6IFtVW1wiY2FsbGJhY2tfcXVlcnlcIl1dIGV4dGVuZHMgW1NvbWVPYmplY3RdXG4gICAgICAgID8gTm9uTnVsbGFibGU8VVtcImNhbGxiYWNrX3F1ZXJ5XCJdW1wibWVzc2FnZVwiXT5bXCJjaGF0XCJdIHwgdW5kZWZpbmVkXG4gICAgICAgIDogW1Nob3J0Y3V0czxVPltcIm1zZ1wiXV0gZXh0ZW5kcyBbU29tZU9iamVjdF1cbiAgICAgICAgICAgID8gU2hvcnRjdXRzPFU+W1wibXNnXCJdW1wiY2hhdFwiXVxuICAgICAgICA6IFtVW1wibXlfY2hhdF9tZW1iZXJcIl1dIGV4dGVuZHMgW1NvbWVPYmplY3RdXG4gICAgICAgICAgICA/IFVbXCJteV9jaGF0X21lbWJlclwiXVtcImNoYXRcIl1cbiAgICAgICAgOiBbVVtcImNoYXRfbWVtYmVyXCJdXSBleHRlbmRzIFtTb21lT2JqZWN0XSA/IFVbXCJjaGF0X21lbWJlclwiXVtcImNoYXRcIl1cbiAgICAgICAgOiBbVVtcImNoYXRfam9pbl9yZXF1ZXN0XCJdXSBleHRlbmRzIFtTb21lT2JqZWN0XVxuICAgICAgICAgICAgPyBVW1wiY2hhdF9qb2luX3JlcXVlc3RcIl1bXCJjaGF0XCJdXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIHNlbmRlckNoYXQ6IFtTaG9ydGN1dHM8VT5bXCJtc2dcIl1dIGV4dGVuZHMgW1NvbWVPYmplY3RdXG4gICAgICAgID8gU2hvcnRjdXRzPFU+W1wibXNnXCJdW1wic2VuZGVyX2NoYXRcIl1cbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgZnJvbTogW1VbXCJjYWxsYmFja19xdWVyeVwiXV0gZXh0ZW5kcyBbU29tZU9iamVjdF1cbiAgICAgICAgPyBVW1wiY2FsbGJhY2tfcXVlcnlcIl1bXCJmcm9tXCJdXG4gICAgICAgIDogW1VbXCJpbmxpbmVfcXVlcnlcIl1dIGV4dGVuZHMgW1NvbWVPYmplY3RdID8gVVtcImlubGluZV9xdWVyeVwiXVtcImZyb21cIl1cbiAgICAgICAgOiBbVVtcInNoaXBwaW5nX3F1ZXJ5XCJdXSBleHRlbmRzIFtTb21lT2JqZWN0XVxuICAgICAgICAgICAgPyBVW1wic2hpcHBpbmdfcXVlcnlcIl1bXCJmcm9tXCJdXG4gICAgICAgIDogW1VbXCJwcmVfY2hlY2tvdXRfcXVlcnlcIl1dIGV4dGVuZHMgW1NvbWVPYmplY3RdXG4gICAgICAgICAgICA/IFVbXCJwcmVfY2hlY2tvdXRfcXVlcnlcIl1bXCJmcm9tXCJdXG4gICAgICAgIDogW1VbXCJjaG9zZW5faW5saW5lX3Jlc3VsdFwiXV0gZXh0ZW5kcyBbU29tZU9iamVjdF1cbiAgICAgICAgICAgID8gVVtcImNob3Nlbl9pbmxpbmVfcmVzdWx0XCJdW1wiZnJvbVwiXVxuICAgICAgICA6IFtVW1wibWVzc2FnZVwiXV0gZXh0ZW5kcyBbU29tZU9iamVjdF1cbiAgICAgICAgICAgID8gTm9uTnVsbGFibGU8VVtcIm1lc3NhZ2VcIl1bXCJmcm9tXCJdPlxuICAgICAgICA6IFtVW1wiZWRpdGVkX21lc3NhZ2VcIl1dIGV4dGVuZHMgW1NvbWVPYmplY3RdXG4gICAgICAgICAgICA/IE5vbk51bGxhYmxlPFVbXCJlZGl0ZWRfbWVzc2FnZVwiXVtcImZyb21cIl0+XG4gICAgICAgIDogW1VbXCJteV9jaGF0X21lbWJlclwiXV0gZXh0ZW5kcyBbU29tZU9iamVjdF1cbiAgICAgICAgICAgID8gVVtcIm15X2NoYXRfbWVtYmVyXCJdW1wiZnJvbVwiXVxuICAgICAgICA6IFtVW1wiY2hhdF9tZW1iZXJcIl1dIGV4dGVuZHMgW1NvbWVPYmplY3RdID8gVVtcImNoYXRfbWVtYmVyXCJdW1wiZnJvbVwiXVxuICAgICAgICA6IFtVW1wiY2hhdF9qb2luX3JlcXVlc3RcIl1dIGV4dGVuZHMgW1NvbWVPYmplY3RdXG4gICAgICAgICAgICA/IFVbXCJjaGF0X2pvaW5fcmVxdWVzdFwiXVtcImZyb21cIl1cbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgLy8gaW5saW5lTWVzc2FnZUlkOiBkaXNyZWdhcmRlZCBoZXJlIGJlY2F1c2UgYWx3YXlzIG9wdGlvbmFsIG9uIGJvdGggdHlwZXNcbn1cblxuLy8gPT09IERlZmluZSBzb21lIGhlbHBlcnMgZm9yIGhhbmRsaW5nIHNob3J0Y3V0cywgZS5nLiBpbiAnZWRpdDpwaG90bydcbmNvbnN0IEwxX1NIT1JUQ1VUUyA9IHtcbiAgICBcIlwiOiBbXCJtZXNzYWdlXCIsIFwiY2hhbm5lbF9wb3N0XCJdLFxuICAgIG1zZzogW1wibWVzc2FnZVwiLCBcImNoYW5uZWxfcG9zdFwiXSxcbiAgICBlZGl0OiBbXCJlZGl0ZWRfbWVzc2FnZVwiLCBcImVkaXRlZF9jaGFubmVsX3Bvc3RcIl0sXG59IGFzIGNvbnN0O1xuY29uc3QgTDJfU0hPUlRDVVRTID0ge1xuICAgIFwiXCI6IFtcImVudGl0aWVzXCIsIFwiY2FwdGlvbl9lbnRpdGllc1wiXSxcbiAgICBtZWRpYTogW1wicGhvdG9cIiwgXCJ2aWRlb1wiXSxcbiAgICBmaWxlOiBbXG4gICAgICAgIFwicGhvdG9cIixcbiAgICAgICAgXCJhbmltYXRpb25cIixcbiAgICAgICAgXCJhdWRpb1wiLFxuICAgICAgICBcImRvY3VtZW50XCIsXG4gICAgICAgIFwidmlkZW9cIixcbiAgICAgICAgXCJ2aWRlb19ub3RlXCIsXG4gICAgICAgIFwidm9pY2VcIixcbiAgICAgICAgXCJzdGlja2VyXCIsXG4gICAgXSxcbn0gYXMgY29uc3Q7XG50eXBlIEwxU2hvcnRjdXRzID0gS2V5T2Y8dHlwZW9mIEwxX1NIT1JUQ1VUUz47XG50eXBlIEwyU2hvcnRjdXRzID0gS2V5T2Y8dHlwZW9mIEwyX1NIT1JUQ1VUUz47XG5cbnR5cGUgRXhwYW5kU2hvcnRjdXRzPFEgZXh0ZW5kcyBzdHJpbmc+ID0gUSBleHRlbmRzXG4gICAgYCR7aW5mZXIgTDF9OiR7aW5mZXIgTDJ9OiR7aW5mZXIgTDN9YFxuICAgID8gYCR7RXhwYW5kTDE8TDE+fToke0V4cGFuZEwyPEwyPn06JHtMM31gXG4gICAgOiBRIGV4dGVuZHMgYCR7aW5mZXIgTDF9OiR7aW5mZXIgTDJ9YCA/IGAke0V4cGFuZEwxPEwxPn06JHtFeHBhbmRMMjxMMj59YFxuICAgIDogRXhwYW5kTDE8UT47XG50eXBlIEV4cGFuZEwxPFMgZXh0ZW5kcyBzdHJpbmc+ID0gUyBleHRlbmRzIEwxU2hvcnRjdXRzXG4gICAgPyB0eXBlb2YgTDFfU0hPUlRDVVRTW1NdW251bWJlcl1cbiAgICA6IFM7XG50eXBlIEV4cGFuZEwyPFMgZXh0ZW5kcyBzdHJpbmc+ID0gUyBleHRlbmRzIEwyU2hvcnRjdXRzXG4gICAgPyB0eXBlb2YgTDJfU0hPUlRDVVRTW1NdW251bWJlcl1cbiAgICA6IFM7XG5cbi8vID09PSBEZWZpbmUgc29tZSBoZWxwZXJzIGZvciB3aGVuIG9uZSBwcm9wZXJ0eSBpbXBsaWVzIHRoZSBleGlzdGVuY2Ugb2Ygb3RoZXJzXG5cbi8vIG1lcmdlcyB0d2lucyBiYXNlZCBvbiBMMSB3aXRoIHRob3NlIGJhc2VkIG9uIEwxIGFuZCBMMlxudHlwZSBBZGRUd2luczxMMSBleHRlbmRzIHN0cmluZywgTDIgZXh0ZW5kcyBzdHJpbmc+ID1cbiAgICB8IFR3aW5zRnJvbUwxPEwxLCBMMj5cbiAgICB8IFR3aW5zRnJvbUwyPEwxLCBMMj47XG5cbi8vIHlpZWxkcyB0d2lucyBiYXNlZCBvbiBhIGdpdmVuIEwxIHByb3BlcnR5XG50eXBlIFR3aW5zRnJvbUwxPEwxIGV4dGVuZHMgc3RyaW5nLCBMMiBleHRlbmRzIHN0cmluZz4gPSBMMSBleHRlbmRzXG4gICAgS2V5T2Y8TDFFcXVpdmFsZW50cz4gPyBMMUVxdWl2YWxlbnRzW0wxXVxuICAgIDogTDI7XG50eXBlIEwxRXF1aXZhbGVudHMgPSB7XG4gICAgbWVzc2FnZTogXCJmcm9tXCI7XG4gICAgZWRpdGVkX21lc3NhZ2U6IFwiZnJvbVwiIHwgXCJlZGl0X2RhdGVcIjtcbiAgICBjaGFubmVsX3Bvc3Q6IFwic2VuZGVyX2NoYXRcIjtcbiAgICBlZGl0ZWRfY2hhbm5lbF9wb3N0OiBcInNlbmRlcl9jaGF0XCIgfCBcImVkaXRfZGF0ZVwiO1xufTtcblxuLy8geWllbGRzIHR3aW5zIGJhc2VkIG9uIGdpdmVuIEwxIGFuZCBMMiBwcm9wZXJ0aWVzXG50eXBlIFR3aW5zRnJvbUwyPEwxIGV4dGVuZHMgc3RyaW5nLCBMMiBleHRlbmRzIHN0cmluZz4gPSBMMSBleHRlbmRzXG4gICAgS2V5T2Y8TDJFcXVpdmFsZW50cz5cbiAgICA/IEwyIGV4dGVuZHMgS2V5T2Y8TDJFcXVpdmFsZW50c1tMMV0+ID8gTDJFcXVpdmFsZW50c1tMMV1bTDJdIDogTDJcbiAgICA6IEwyO1xudHlwZSBMMkVxdWl2YWxlbnRzID0ge1xuICAgIG1lc3NhZ2U6IE1lc3NhZ2VFcXVpdmFsZW50cztcbiAgICBlZGl0ZWRfbWVzc2FnZTogTWVzc2FnZUVxdWl2YWxlbnRzO1xuICAgIGNoYW5uZWxfcG9zdDogTWVzc2FnZUVxdWl2YWxlbnRzO1xuICAgIGVkaXRlZF9jaGFubmVsX3Bvc3Q6IE1lc3NhZ2VFcXVpdmFsZW50cztcbn07XG50eXBlIE1lc3NhZ2VFcXVpdmFsZW50cyA9IHtcbiAgICBhbmltYXRpb246IFwiZG9jdW1lbnRcIjtcbiAgICBlbnRpdGllczogXCJ0ZXh0XCI7XG4gICAgY2FwdGlvbjogQ2FwdGlvbk1lc3NhZ2VzO1xuICAgIGNhcHRpb25fZW50aXRpZXM6IENhcHRpb25NZXNzYWdlcztcbn07XG50eXBlIENhcHRpb25NZXNzYWdlcyA9XG4gICAgfCBcImFuaW1hdGlvblwiXG4gICAgfCBcImF1ZGlvXCJcbiAgICB8IFwiZG9jdW1lbnRcIlxuICAgIHwgXCJwaG90b1wiXG4gICAgfCBcInZpZGVvXCJcbiAgICB8IFwidm9pY2VcIjtcbiIsIi8vIGRlbm8tbGludC1pZ25vcmUtZmlsZSBjYW1lbGNhc2VcbmltcG9ydCB7IHR5cGUgQXBpLCB0eXBlIE90aGVyIGFzIE90aGVyQXBpIH0gZnJvbSBcIi4vY29yZS9hcGkudHNcIjtcbmltcG9ydCB7IHR5cGUgTWV0aG9kcywgdHlwZSBSYXdBcGkgfSBmcm9tIFwiLi9jb3JlL2NsaWVudC50c1wiO1xuaW1wb3J0IHsgdHlwZSBGaWx0ZXIsIHR5cGUgRmlsdGVyUXVlcnksIG1hdGNoRmlsdGVyIH0gZnJvbSBcIi4vZmlsdGVyLnRzXCI7XG5pbXBvcnQge1xuICAgIHR5cGUgQ2hhdCxcbiAgICB0eXBlIENoYXRQZXJtaXNzaW9ucyxcbiAgICB0eXBlIElubGluZVF1ZXJ5UmVzdWx0LFxuICAgIHR5cGUgSW5wdXRGaWxlLFxuICAgIHR5cGUgSW5wdXRNZWRpYSxcbiAgICB0eXBlIElucHV0TWVkaWFBdWRpbyxcbiAgICB0eXBlIElucHV0TWVkaWFEb2N1bWVudCxcbiAgICB0eXBlIElucHV0TWVkaWFQaG90byxcbiAgICB0eXBlIElucHV0TWVkaWFWaWRlbyxcbiAgICB0eXBlIExhYmVsZWRQcmljZSxcbiAgICB0eXBlIE1lc3NhZ2UsXG4gICAgdHlwZSBQYXNzcG9ydEVsZW1lbnRFcnJvcixcbiAgICB0eXBlIFVwZGF0ZSxcbiAgICB0eXBlIFVzZXIsXG4gICAgdHlwZSBVc2VyRnJvbUdldE1lLFxufSBmcm9tIFwiLi90eXBlcy50c1wiO1xuXG4vLyA9PT0gVXRpbCB0eXBlc1xuZXhwb3J0IHR5cGUgTWF5YmVBcnJheTxUPiA9IFQgfCBUW107XG4vLyBkZW5vLWxpbnQtaWdub3JlIGJhbi10eXBlc1xuZXhwb3J0IHR5cGUgU3RyaW5nV2l0aFN1Z2dlc3Rpb25zPFMgZXh0ZW5kcyBzdHJpbmc+ID0gKHN0cmluZyAmIHt9KSB8IFM7IC8vIHBlcm1pdHMgYHN0cmluZ2AgYnV0IGdpdmVzIGhpbnRzXG5cbnR5cGUgT3RoZXI8TSBleHRlbmRzIE1ldGhvZHM8UmF3QXBpPiwgWCBleHRlbmRzIHN0cmluZyA9IG5ldmVyPiA9IE90aGVyQXBpPFxuICAgIFJhd0FwaSxcbiAgICBNLFxuICAgIFhcbj47XG50eXBlIFNuYWtlVG9DYW1lbENhc2U8UyBleHRlbmRzIHN0cmluZz4gPSBTIGV4dGVuZHMgYCR7aW5mZXIgTH1fJHtpbmZlciBSfWBcbiAgICA/IGAke0x9JHtDYXBpdGFsaXplPFNuYWtlVG9DYW1lbENhc2U8Uj4+fWBcbiAgICA6IFM7XG5leHBvcnQgdHlwZSBBbGlhc1Byb3BzPFU+ID0ge1xuICAgIFtLIGluIHN0cmluZyAmIGtleW9mIFUgYXMgU25ha2VUb0NhbWVsQ2FzZTxLPl06IFVbS107XG59O1xudHlwZSBSZW5hbWVkVXBkYXRlID0gQWxpYXNQcm9wczxPbWl0PFVwZGF0ZSwgXCJ1cGRhdGVfaWRcIj4+O1xuXG4vLyA9PT0gQ29udGV4dCBwcm9iaW5nIGxvZ2ljXG5pbnRlcmZhY2UgU3RhdGljSGFzIHtcbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSBwcmVkaWNhdGUgZnVuY3Rpb24gdGhhdCBjYW4gdGVzdCBjb250ZXh0IG9iamVjdHMgZm9yIG1hdGNoaW5nXG4gICAgICogdGhlIGdpdmVuIGZpbHRlciBxdWVyeS4gVGhpcyB1c2VzIHRoZSBzYW1lIGxvZ2ljIGFzIGBib3Qub25gLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpbHRlciBUaGUgZmlsdGVyIHF1ZXJ5IHRvIGNoZWNrXG4gICAgICovXG4gICAgZmlsdGVyUXVlcnk8USBleHRlbmRzIEZpbHRlclF1ZXJ5PihcbiAgICAgICAgZmlsdGVyOiBRIHwgUVtdLFxuICAgICk6IDxDIGV4dGVuZHMgQ29udGV4dD4oY3R4OiBDKSA9PiBjdHggaXMgRmlsdGVyPEMsIFE+O1xuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhIHByZWRpY2F0ZSBmdW5jdGlvbiB0aGF0IGNhbiB0ZXN0IGNvbnRleHQgb2JqZWN0cyBmb3JcbiAgICAgKiBjb250YWluaW5nIHRoZSBnaXZlbiB0ZXh0LCBvciBmb3IgdGhlIHRleHQgdG8gbWF0Y2ggdGhlIGdpdmVuIHJlZ3VsYXJcbiAgICAgKiBleHByZXNzaW9uLiBUaGlzIHVzZXMgdGhlIHNhbWUgbG9naWMgYXMgYGJvdC5oZWFyc2AuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJpZ2dlciBUaGUgc3RyaW5nIG9yIHJlZ2V4IHRvIG1hdGNoXG4gICAgICovXG4gICAgdGV4dChcbiAgICAgICAgdHJpZ2dlcjogTWF5YmVBcnJheTxzdHJpbmcgfCBSZWdFeHA+LFxuICAgICk6IDxDIGV4dGVuZHMgQ29udGV4dD4oY3R4OiBDKSA9PiBjdHggaXMgSGVhcnNDb250ZXh0PEM+O1xuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhIHByZWRpY2F0ZSBmdW5jdGlvbiB0aGF0IGNhbiB0ZXN0IGNvbnRleHQgb2JqZWN0cyBmb3JcbiAgICAgKiBjb250YWluaW5nIGEgY29tbWFuZC4gVGhpcyB1c2VzIHRoZSBzYW1lIGxvZ2ljIGFzIGBib3QuY29tbWFuZGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29tbWFuZCBUaGUgY29tbWFuZCB0byBtYXRjaFxuICAgICAqL1xuICAgIGNvbW1hbmQ8UyBleHRlbmRzIHN0cmluZz4oXG4gICAgICAgIGNvbW1hbmQ6IE1heWJlQXJyYXk8XG4gICAgICAgICAgICBTdHJpbmdXaXRoU3VnZ2VzdGlvbnM8UyB8IFwic3RhcnRcIiB8IFwiaGVscFwiIHwgXCJzZXR0aW5nc1wiPlxuICAgICAgICA+LFxuICAgICk6IDxDIGV4dGVuZHMgQ29udGV4dD4oY3R4OiBDKSA9PiBjdHggaXMgQ29tbWFuZENvbnRleHQ8Qz47XG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGEgcHJlZGljYXRlIGZ1bmN0aW9uIHRoYXQgY2FuIHRlc3QgY29udGV4dCBvYmplY3RzIGZvclxuICAgICAqIGJlbG9uZ2luZyB0byBhIGNoYXQgd2l0aCB0aGUgZ2l2ZW4gY2hhdCB0eXBlLiBUaGlzIHVzZXMgdGhlIHNhbWUgbG9naWMgYXNcbiAgICAgKiBgYm90LmNoYXRUeXBlYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjaGF0VHlwZSBUaGUgY2hhdCB0eXBlIHRvIG1hdGNoXG4gICAgICovXG4gICAgY2hhdFR5cGU8VCBleHRlbmRzIENoYXRbXCJ0eXBlXCJdPihcbiAgICAgICAgY2hhdFR5cGU6IE1heWJlQXJyYXk8VD4sXG4gICAgKTogPEMgZXh0ZW5kcyBDb250ZXh0PihjdHg6IEMpID0+IGN0eCBpcyBDaGF0VHlwZUNvbnRleHQ8QywgVD47XG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGEgcHJlZGljYXRlIGZ1bmN0aW9uIHRoYXQgY2FuIHRlc3QgY29udGV4dCBvYmplY3RzIGZvclxuICAgICAqIGNvbnRhaW5pbmcgdGhlIGdpdmVuIGNhbGxiYWNrIHF1ZXJ5LCBvciBmb3IgdGhlIGNhbGxiYWNrIHF1ZXJ5IGRhdGEgdG9cbiAgICAgKiBtYXRjaCB0aGUgZ2l2ZW4gcmVndWxhciBleHByZXNzaW9uLiBUaGlzIHVzZXMgdGhlIHNhbWUgbG9naWMgYXNcbiAgICAgKiBgYm90LmNhbGxiYWNrUXVlcnlgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyaWdnZXIgVGhlIHN0cmluZyBvciByZWdleCB0byBtYXRjaFxuICAgICAqL1xuICAgIGNhbGxiYWNrUXVlcnkoXG4gICAgICAgIHRyaWdnZXI6IE1heWJlQXJyYXk8c3RyaW5nIHwgUmVnRXhwPixcbiAgICApOiA8QyBleHRlbmRzIENvbnRleHQ+KGN0eDogQykgPT4gY3R4IGlzIENhbGxiYWNrUXVlcnlDb250ZXh0PEM+O1xuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhIHByZWRpY2F0ZSBmdW5jdGlvbiB0aGF0IGNhbiB0ZXN0IGNvbnRleHQgb2JqZWN0cyBmb3JcbiAgICAgKiBjb250YWluaW5nIHRoZSBnaXZlbiBnYW1lIHF1ZXJ5LCBvciBmb3IgdGhlIGdhbWUgbmFtZSB0byBtYXRjaCB0aGUgZ2l2ZW5cbiAgICAgKiByZWd1bGFyIGV4cHJlc3Npb24uIFRoaXMgdXNlcyB0aGUgc2FtZSBsb2dpYyBhcyBgYm90LmdhbWVRdWVyeWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJpZ2dlciBUaGUgc3RyaW5nIG9yIHJlZ2V4IHRvIG1hdGNoXG4gICAgICovXG4gICAgZ2FtZVF1ZXJ5KFxuICAgICAgICB0cmlnZ2VyOiBNYXliZUFycmF5PHN0cmluZyB8IFJlZ0V4cD4sXG4gICAgKTogPEMgZXh0ZW5kcyBDb250ZXh0PihjdHg6IEMpID0+IGN0eCBpcyBHYW1lUXVlcnlDb250ZXh0PEM+O1xuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhIHByZWRpY2F0ZSBmdW5jdGlvbiB0aGF0IGNhbiB0ZXN0IGNvbnRleHQgb2JqZWN0cyBmb3JcbiAgICAgKiBjb250YWluaW5nIHRoZSBnaXZlbiBpbmxpbmUgcXVlcnksIG9yIGZvciB0aGUgaW5saW5lIHF1ZXJ5IHRvIG1hdGNoIHRoZVxuICAgICAqIGdpdmVuIHJlZ3VsYXIgZXhwcmVzc2lvbi4gVGhpcyB1c2VzIHRoZSBzYW1lIGxvZ2ljIGFzIGBib3QuaW5saW5lUXVlcnlgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyaWdnZXIgVGhlIHN0cmluZyBvciByZWdleCB0byBtYXRjaFxuICAgICAqL1xuICAgIGlubGluZVF1ZXJ5KFxuICAgICAgICB0cmlnZ2VyOiBNYXliZUFycmF5PHN0cmluZyB8IFJlZ0V4cD4sXG4gICAgKTogPEMgZXh0ZW5kcyBDb250ZXh0PihjdHg6IEMpID0+IGN0eCBpcyBJbmxpbmVRdWVyeUNvbnRleHQ8Qz47XG59XG5jb25zdCBjaGVja2VyOiBTdGF0aWNIYXMgPSB7XG4gICAgZmlsdGVyUXVlcnk8USBleHRlbmRzIEZpbHRlclF1ZXJ5PihmaWx0ZXI6IFEgfCBRW10pIHtcbiAgICAgICAgY29uc3QgcHJlZCA9IG1hdGNoRmlsdGVyKGZpbHRlcik7XG4gICAgICAgIHJldHVybiA8QyBleHRlbmRzIENvbnRleHQ+KGN0eDogQyk6IGN0eCBpcyBGaWx0ZXI8QywgUT4gPT4gcHJlZChjdHgpO1xuICAgIH0sXG4gICAgdGV4dCh0cmlnZ2VyKSB7XG4gICAgICAgIGNvbnN0IGhhc1RleHQgPSBjaGVja2VyLmZpbHRlclF1ZXJ5KFtcIjp0ZXh0XCIsIFwiOmNhcHRpb25cIl0pO1xuICAgICAgICBjb25zdCB0cmcgPSB0cmlnZ2VyRm4odHJpZ2dlcik7XG4gICAgICAgIHJldHVybiA8QyBleHRlbmRzIENvbnRleHQ+KGN0eDogQyk6IGN0eCBpcyBIZWFyc0NvbnRleHQ8Qz4gPT4ge1xuICAgICAgICAgICAgaWYgKCFoYXNUZXh0KGN0eCkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9IGN0eC5tZXNzYWdlID8/IGN0eC5jaGFubmVsUG9zdDtcbiAgICAgICAgICAgIGNvbnN0IHR4dCA9IG1zZy50ZXh0ID8/IG1zZy5jYXB0aW9uO1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoKGN0eCwgdHh0LCB0cmcpO1xuICAgICAgICB9O1xuICAgIH0sXG4gICAgY29tbWFuZChjb21tYW5kKSB7XG4gICAgICAgIGNvbnN0IGhhc0VudGl0aWVzID0gY2hlY2tlci5maWx0ZXJRdWVyeShcIjplbnRpdGllczpib3RfY29tbWFuZFwiKTtcbiAgICAgICAgY29uc3QgYXRDb21tYW5kcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgICAgICBjb25zdCBub0F0Q29tbWFuZHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICAgICAgdG9BcnJheShjb21tYW5kKS5mb3JFYWNoKChjbWQpID0+IHtcbiAgICAgICAgICAgIGlmIChjbWQuc3RhcnRzV2l0aChcIi9cIikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIGBEbyBub3QgaW5jbHVkZSAnLycgd2hlbiByZWdpc3RlcmluZyBjb21tYW5kIGhhbmRsZXJzICh1c2UgJyR7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbWQuc3Vic3RyaW5nKDEpXG4gICAgICAgICAgICAgICAgICAgIH0nIG5vdCAnJHtjbWR9JylgLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzZXQgPSBjbWQuaW5kZXhPZihcIkBcIikgPT09IC0xID8gbm9BdENvbW1hbmRzIDogYXRDb21tYW5kcztcbiAgICAgICAgICAgIHNldC5hZGQoY21kKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiA8QyBleHRlbmRzIENvbnRleHQ+KGN0eDogQyk6IGN0eCBpcyBDb21tYW5kQ29udGV4dDxDPiA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhc0VudGl0aWVzKGN0eCkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9IGN0eC5tZXNzYWdlID8/IGN0eC5jaGFubmVsUG9zdDtcbiAgICAgICAgICAgIGNvbnN0IHR4dCA9IG1zZy50ZXh0ID8/IG1zZy5jYXB0aW9uO1xuICAgICAgICAgICAgcmV0dXJuIG1zZy5lbnRpdGllcy5zb21lKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGUudHlwZSAhPT0gXCJib3RfY29tbWFuZFwiKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKGUub2Zmc2V0ICE9PSAwKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc3QgY21kID0gdHh0LnN1YnN0cmluZygxLCBlLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgaWYgKG5vQXRDb21tYW5kcy5oYXMoY21kKSB8fCBhdENvbW1hbmRzLmhhcyhjbWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5tYXRjaCA9IHR4dC5zdWJzdHJpbmcoY21kLmxlbmd0aCArIDEpLnRyaW1TdGFydCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBjbWQuaW5kZXhPZihcIkBcIik7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGF0VGFyZ2V0ID0gY21kLnN1YnN0cmluZyhpbmRleCArIDEpO1xuICAgICAgICAgICAgICAgIGlmIChhdFRhcmdldCAhPT0gY3R4Lm1lLnVzZXJuYW1lKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc3QgYXRDb21tYW5kID0gY21kLnN1YnN0cmluZygwLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKG5vQXRDb21tYW5kcy5oYXMoYXRDb21tYW5kKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHgubWF0Y2ggPSB0eHQuc3Vic3RyaW5nKGNtZC5sZW5ndGggKyAxKS50cmltU3RhcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH0sXG4gICAgY2hhdFR5cGU8VCBleHRlbmRzIENoYXRbXCJ0eXBlXCJdPihjaGF0VHlwZTogTWF5YmVBcnJheTxUPikge1xuICAgICAgICBjb25zdCBzZXQgPSBuZXcgU2V0PENoYXRbXCJ0eXBlXCJdPih0b0FycmF5KGNoYXRUeXBlKSk7XG4gICAgICAgIHJldHVybiA8QyBleHRlbmRzIENvbnRleHQ+KGN0eDogQyk6IGN0eCBpcyBDaGF0VHlwZUNvbnRleHQ8QywgVD4gPT5cbiAgICAgICAgICAgIGN0eC5jaGF0Py50eXBlICE9PSB1bmRlZmluZWQgJiYgc2V0LmhhcyhjdHguY2hhdC50eXBlKTtcbiAgICB9LFxuICAgIGNhbGxiYWNrUXVlcnkodHJpZ2dlcikge1xuICAgICAgICBjb25zdCBoYXNDYWxsYmFja1F1ZXJ5ID0gY2hlY2tlci5maWx0ZXJRdWVyeShcImNhbGxiYWNrX3F1ZXJ5OmRhdGFcIik7XG4gICAgICAgIGNvbnN0IHRyZyA9IHRyaWdnZXJGbih0cmlnZ2VyKTtcbiAgICAgICAgcmV0dXJuIDxDIGV4dGVuZHMgQ29udGV4dD4oY3R4OiBDKTogY3R4IGlzIENhbGxiYWNrUXVlcnlDb250ZXh0PEM+ID0+XG4gICAgICAgICAgICBoYXNDYWxsYmFja1F1ZXJ5KGN0eCkgJiYgbWF0Y2goY3R4LCBjdHguY2FsbGJhY2tRdWVyeS5kYXRhLCB0cmcpO1xuICAgIH0sXG4gICAgZ2FtZVF1ZXJ5KHRyaWdnZXIpIHtcbiAgICAgICAgY29uc3QgaGFzR2FtZVF1ZXJ5ID0gY2hlY2tlci5maWx0ZXJRdWVyeShcbiAgICAgICAgICAgIFwiY2FsbGJhY2tfcXVlcnk6Z2FtZV9zaG9ydF9uYW1lXCIsXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHRyZyA9IHRyaWdnZXJGbih0cmlnZ2VyKTtcbiAgICAgICAgcmV0dXJuIDxDIGV4dGVuZHMgQ29udGV4dD4oY3R4OiBDKTogY3R4IGlzIEdhbWVRdWVyeUNvbnRleHQ8Qz4gPT5cbiAgICAgICAgICAgIGhhc0dhbWVRdWVyeShjdHgpICYmXG4gICAgICAgICAgICBtYXRjaChjdHgsIGN0eC5jYWxsYmFja1F1ZXJ5LmdhbWVfc2hvcnRfbmFtZSwgdHJnKTtcbiAgICB9LFxuICAgIGlubGluZVF1ZXJ5KHRyaWdnZXIpIHtcbiAgICAgICAgY29uc3QgaGFzSW5saW5lUXVlcnkgPSBjaGVja2VyLmZpbHRlclF1ZXJ5KFwiaW5saW5lX3F1ZXJ5XCIpO1xuICAgICAgICBjb25zdCB0cmcgPSB0cmlnZ2VyRm4odHJpZ2dlcik7XG4gICAgICAgIHJldHVybiA8QyBleHRlbmRzIENvbnRleHQ+KGN0eDogQyk6IGN0eCBpcyBJbmxpbmVRdWVyeUNvbnRleHQ8Qz4gPT5cbiAgICAgICAgICAgIGhhc0lubGluZVF1ZXJ5KGN0eCkgJiYgbWF0Y2goY3R4LCBjdHguaW5saW5lUXVlcnkucXVlcnksIHRyZyk7XG4gICAgfSxcbn07XG5cbi8vID09PSBDb250ZXh0IGNsYXNzXG4vKipcbiAqIFdoZW4geW91ciBib3QgcmVjZWl2ZXMgYSBtZXNzYWdlLCBUZWxlZ3JhbSBzZW5kcyBhbiB1cGRhdGUgb2JqZWN0IHRvIHlvdXJcbiAqIGJvdC4gVGhlIHVwZGF0ZSBjb250YWlucyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY2hhdCwgdGhlIHVzZXIsIGFuZCBvZiBjb3Vyc2VcbiAqIHRoZSBtZXNzYWdlIGl0c2VsZi4gVGhlcmUgYXJlIG51bWVyb3VzIG90aGVyIHVwZGF0ZXMsIHRvbzpcbiAqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjdXBkYXRlXG4gKlxuICogV2hlbiBncmFtbVkgcmVjZWl2ZXMgYW4gdXBkYXRlLCBpdCB3cmFwcyB0aGlzIHVwZGF0ZSBpbnRvIGEgY29udGV4dCBvYmplY3RcbiAqIGZvciB5b3UuIENvbnRleHQgb2JqZWN0cyBhcmUgY29tbW9ubHkgbmFtZWQgYGN0eGAuIEEgY29udGV4dCBvYmplY3QgZG9lcyB0d29cbiAqIHRoaW5nczpcbiAqIDEuICoqYGN0eC51cGRhdGVgKiogaG9sZHMgdGhlIHVwZGF0ZSBvYmplY3QgdGhhdCB5b3UgY2FuIHVzZSB0byBwcm9jZXNzIHRoZVxuICogICAgbWVzc2FnZS4gVGhpcyBpbmNsdWRlcyBwcm92aWRpbmcgdXNlZnVsIHNob3J0Y3V0cyBmb3IgdGhlIHVwZGF0ZSwgZm9yXG4gKiAgICBpbnN0YW5jZSwgYGN0eC5tc2dgIGlzIGEgc2hvcnRjdXQgdGhhdCBnaXZlcyB5b3UgdGhlIG1lc3NhZ2Ugb2JqZWN0IGZyb21cbiAqICAgIHRoZSB1cGRhdGXigJRubyBtYXR0ZXIgd2hldGhlciBpdCBpcyBjb250YWluZWQgaW4gYGN0eC51cGRhdGUubWVzc2FnZWAsIG9yXG4gKiAgICBgY3R4LnVwZGF0ZS5lZGl0ZWRfbWVzc2FnZWAsIG9yIGBjdHgudXBkYXRlLmNoYW5uZWxfcG9zdGAsIG9yXG4gKiAgICBgY3R4LnVwZGF0ZS5lZGl0ZWRfY2hhbm5lbF9wb3N0YC5cbiAqIDIuICoqYGN0eC5hcGlgKiogZ2l2ZXMgeW91IGFjY2VzcyB0byB0aGUgZnVsbCBUZWxlZ3JhbSBCb3QgQVBJIHNvIHRoYXQgeW91XG4gKiAgICBjYW4gZGlyZWN0bHkgY2FsbCBhbnkgbWV0aG9kLCBzdWNoIGFzIHJlc3BvbmRpbmcgdmlhXG4gKiAgICBgY3R4LmFwaS5zZW5kTWVzc2FnZWAuIEFsc28gaGVyZSwgdGhlIGNvbnRleHQgb2JqZWN0cyBoYXMgc29tZSB1c2VmdWxcbiAqICAgIHNob3J0Y3V0cyBmb3IgeW91LiBGb3IgaW5zdGFuY2UsIGlmIHlvdSB3YW50IHRvIHNlbmQgYSBtZXNzYWdlIHRvIHRoZSBzYW1lXG4gKiAgICBjaGF0IHRoYXQgYSBtZXNzYWdlIGNvbWVzIGZyb20gKGkuZS4ganVzdCByZXNwb25kIHRvIGEgdXNlcikgeW91IGNhbiBjYWxsXG4gKiAgICBgY3R4LnJlcGx5YC4gVGhpcyBpcyBub3RoaW5nIGJ1dCBhIHdyYXBwZXIgZm9yIGBjdHguYXBpLnNlbmRNZXNzYWdlYCB3aXRoXG4gKiAgICB0aGUgcmlnaHQgYGNoYXRfaWRgIHByZS1maWxsZWQgZm9yIHlvdS4gQWxtb3N0IGFsbCBtZXRob2RzIG9mIHRoZSBUZWxlZ3JhbVxuICogICAgQm90IEFQSSBoYXZlIHRoZWlyIG93biBzaG9ydGN1dCBkaXJlY3RseSBvbiB0aGUgY29udGV4dCBvYmplY3QsIHNvIHlvdVxuICogICAgcHJvYmFibHkgbmV2ZXIgcmVhbGx5IGhhdmUgdG8gdXNlIGBjdHguYXBpYCBhdCBhbGwuXG4gKlxuICogVGhpcyBjb250ZXh0IG9iamVjdCBpcyB0aGVuIHBhc3NlZCB0byBhbGwgb2YgdGhlIGxpc3RlbmVycyAoY2FsbGVkXG4gKiBtaWRkbGV3YXJlKSB0aGF0IHlvdSByZWdpc3RlciBvbiB5b3VyIGJvdC4gQmVjYXVzZSB0aGlzIGlzIHNvIHVzZWZ1bCwgdGhlXG4gKiBjb250ZXh0IG9iamVjdCBpcyBvZnRlbiB1c2VkIHRvIGhvbGQgbW9yZSBpbmZvcm1hdGlvbi4gT25lIGV4YW1wbGUgYXJlXG4gKiBzZXNzaW9ucyAoYSBjaGF0LXNwZWNpZmljIGRhdGEgc3RvcmFnZSB0aGF0IGlzIHN0b3JlZCBpbiBhIGRhdGFiYXNlKSwgYW5kXG4gKiBhbm90aGVyIGV4YW1wbGUgaXMgYGN0eC5tYXRjaGAgdGhhdCBpcyB1c2VkIGJ5IGBib3QuY29tbWFuZGAgYW5kIG90aGVyXG4gKiBtZXRob2RzIHRvIGtlZXAgaW5mb3JtYXRpb24gYWJvdXQgaG93IGEgcmVndWxhciBleHByZXNzaW9uIHdhcyBtYXRjaGVkLlxuICpcbiAqIFJlYWQgdXAgYWJvdXQgbWlkZGxld2FyZSBvbiB0aGVcbiAqIFt3ZWJzaXRlXShodHRwczovL2dyYW1teS5kZXYvZ3VpZGUvY29udGV4dC5odG1sKSBpZiB5b3Ugd2FudCB0byBrbm93IG1vcmVcbiAqIGFib3V0IHRoZSBwb3dlcmZ1bCBvcHBvcnR1bml0aWVzIHRoYXQgbGllIGluIGNvbnRleHQgb2JqZWN0cywgYW5kIGFib3V0IGhvd1xuICogZ3JhbW1ZIGltcGxlbWVudHMgdGhlbS5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbnRleHQgaW1wbGVtZW50cyBSZW5hbWVkVXBkYXRlIHtcbiAgICAvKipcbiAgICAgKiBVc2VkIGJ5IHNvbWUgbWlkZGxld2FyZSB0byBzdG9yZSBpbmZvcm1hdGlvbiBhYm91dCBob3cgYSBjZXJ0YWluIHN0cmluZ1xuICAgICAqIG9yIHJlZ3VsYXIgZXhwcmVzc2lvbiB3YXMgbWF0Y2hlZC5cbiAgICAgKi9cbiAgICBwdWJsaWMgbWF0Y2g6IHN0cmluZyB8IFJlZ0V4cE1hdGNoQXJyYXkgfCB1bmRlZmluZWQ7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB1cGRhdGUgb2JqZWN0IHRoYXQgaXMgY29udGFpbmVkIGluIHRoZSBjb250ZXh0LlxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIHJlYWRvbmx5IHVwZGF0ZTogVXBkYXRlLFxuICAgICAgICAvKipcbiAgICAgICAgICogQW4gQVBJIGluc3RhbmNlIHRoYXQgYWxsb3dzIHlvdSB0byBjYWxsIGFueSBtZXRob2Qgb2YgdGhlIFRlbGVncmFtXG4gICAgICAgICAqIEJvdCBBUEkuXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgYXBpOiBBcGksXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbmZvcm1hdGlvbiBhYm91dCB0aGUgYm90IGl0c2VsZi5cbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBtZTogVXNlckZyb21HZXRNZSxcbiAgICApIHt9XG5cbiAgICAvLyBVUERBVEUgU0hPUlRDVVRTXG5cbiAgICAvKiogQWxpYXMgZm9yIGBjdHgudXBkYXRlLm1lc3NhZ2VgICovXG4gICAgZ2V0IG1lc3NhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZS5tZXNzYWdlO1xuICAgIH1cbiAgICAvKiogQWxpYXMgZm9yIGBjdHgudXBkYXRlLmVkaXRlZF9tZXNzYWdlYCAqL1xuICAgIGdldCBlZGl0ZWRNZXNzYWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGUuZWRpdGVkX21lc3NhZ2U7XG4gICAgfVxuICAgIC8qKiBBbGlhcyBmb3IgYGN0eC51cGRhdGUuY2hhbm5lbF9wb3N0YCAqL1xuICAgIGdldCBjaGFubmVsUG9zdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlLmNoYW5uZWxfcG9zdDtcbiAgICB9XG4gICAgLyoqIEFsaWFzIGZvciBgY3R4LnVwZGF0ZS5lZGl0ZWRfY2hhbm5lbF9wb3N0YCAqL1xuICAgIGdldCBlZGl0ZWRDaGFubmVsUG9zdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlLmVkaXRlZF9jaGFubmVsX3Bvc3Q7XG4gICAgfVxuICAgIC8qKiBBbGlhcyBmb3IgYGN0eC51cGRhdGUuaW5saW5lX3F1ZXJ5YCAqL1xuICAgIGdldCBpbmxpbmVRdWVyeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlLmlubGluZV9xdWVyeTtcbiAgICB9XG4gICAgLyoqIEFsaWFzIGZvciBgY3R4LnVwZGF0ZS5jaG9zZW5faW5saW5lX3Jlc3VsdGAgKi9cbiAgICBnZXQgY2hvc2VuSW5saW5lUmVzdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGUuY2hvc2VuX2lubGluZV9yZXN1bHQ7XG4gICAgfVxuICAgIC8qKiBBbGlhcyBmb3IgYGN0eC51cGRhdGUuY2FsbGJhY2tfcXVlcnlgICovXG4gICAgZ2V0IGNhbGxiYWNrUXVlcnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZS5jYWxsYmFja19xdWVyeTtcbiAgICB9XG4gICAgLyoqIEFsaWFzIGZvciBgY3R4LnVwZGF0ZS5zaGlwcGluZ19xdWVyeWAgKi9cbiAgICBnZXQgc2hpcHBpbmdRdWVyeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlLnNoaXBwaW5nX3F1ZXJ5O1xuICAgIH1cbiAgICAvKiogQWxpYXMgZm9yIGBjdHgudXBkYXRlLnByZV9jaGVja291dF9xdWVyeWAgKi9cbiAgICBnZXQgcHJlQ2hlY2tvdXRRdWVyeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlLnByZV9jaGVja291dF9xdWVyeTtcbiAgICB9XG4gICAgLyoqIEFsaWFzIGZvciBgY3R4LnVwZGF0ZS5wb2xsYCAqL1xuICAgIGdldCBwb2xsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGUucG9sbDtcbiAgICB9XG4gICAgLyoqIEFsaWFzIGZvciBgY3R4LnVwZGF0ZS5wb2xsX2Fuc3dlcmAgKi9cbiAgICBnZXQgcG9sbEFuc3dlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlLnBvbGxfYW5zd2VyO1xuICAgIH1cbiAgICAvKiogQWxpYXMgZm9yIGBjdHgudXBkYXRlLm15X2NoYXRfbWVtYmVyYCAqL1xuICAgIGdldCBteUNoYXRNZW1iZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZS5teV9jaGF0X21lbWJlcjtcbiAgICB9XG4gICAgLyoqIEFsaWFzIGZvciBgY3R4LnVwZGF0ZS5jaGF0X21lbWJlcmAgKi9cbiAgICBnZXQgY2hhdE1lbWJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlLmNoYXRfbWVtYmVyO1xuICAgIH1cbiAgICAvKiogQWxpYXMgZm9yIGBjdHgudXBkYXRlLmNoYXRfam9pbl9yZXF1ZXN0YCAqL1xuICAgIGdldCBjaGF0Sm9pblJlcXVlc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZS5jaGF0X2pvaW5fcmVxdWVzdDtcbiAgICB9XG5cbiAgICAvLyBBR0dSRUdBVElPTiBTSE9SVENVVFNcblxuICAgIC8qKlxuICAgICAqIEdldCBtZXNzYWdlIG9iamVjdCBmcm9tIHdoZXJldmVyIHBvc3NpYmxlLiBBbGlhcyBmb3IgYGN0eC5tZXNzYWdlID8/XG4gICAgICogY3R4LmVkaXRlZE1lc3NhZ2UgPz8gY3R4LmNhbGxiYWNrUXVlcnk/Lm1lc3NhZ2UgPz8gY3R4LmNoYW5uZWxQb3N0ID8/XG4gICAgICogY3R4LmVkaXRlZENoYW5uZWxQb3N0YFxuICAgICAqL1xuICAgIGdldCBtc2coKTogTWVzc2FnZSB8IHVuZGVmaW5lZCB7XG4gICAgICAgIC8vIEtlZXAgaW4gc3luYyB3aXRoIHR5cGVzIGluIGBmaWx0ZXIudHNgLlxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlID8/XG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0ZWRNZXNzYWdlID8/XG4gICAgICAgICAgICAgICAgdGhpcy5jYWxsYmFja1F1ZXJ5Py5tZXNzYWdlID8/XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFubmVsUG9zdCA/P1xuICAgICAgICAgICAgICAgIHRoaXMuZWRpdGVkQ2hhbm5lbFBvc3RcbiAgICAgICAgKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGNoYXQgb2JqZWN0IGZyb20gd2hlcmV2ZXIgcG9zc2libGUuIEFsaWFzIGZvciBgKGN0eC5tc2cgPz9cbiAgICAgKiBjdHgubXlDaGF0TWVtYmVyID8/IGN0eC5jaGF0TWVtYmVyID8/IGN0eC5jaGF0Sm9pblJlcXVlc3QpPy5jaGF0YFxuICAgICAqL1xuICAgIGdldCBjaGF0KCk6IENoYXQgfCB1bmRlZmluZWQge1xuICAgICAgICAvLyBLZWVwIGluIHN5bmMgd2l0aCB0eXBlcyBpbiBgZmlsdGVyLnRzYC5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHRoaXMubXNnID8/XG4gICAgICAgICAgICAgICAgdGhpcy5teUNoYXRNZW1iZXIgPz9cbiAgICAgICAgICAgICAgICB0aGlzLmNoYXRNZW1iZXIgPz9cbiAgICAgICAgICAgICAgICB0aGlzLmNoYXRKb2luUmVxdWVzdFxuICAgICAgICApPy5jaGF0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgc2VuZGVyIGNoYXQgb2JqZWN0IGZyb20gd2hlcmV2ZXIgcG9zc2libGUuIEFsaWFzIGZvclxuICAgICAqIGBjdHgubXNnPy5zZW5kZXJfY2hhdGAuXG4gICAgICovXG4gICAgZ2V0IHNlbmRlckNoYXQoKTogQ2hhdCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLm1zZz8uc2VuZGVyX2NoYXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBtZXNzYWdlIGF1dGhvciBmcm9tIHdoZXJldmVyIHBvc3NpYmxlLiBBbGlhcyBmb3JcbiAgICAgKiBgKGN0eC5jYWxsYmFja1F1ZXJ5Pz8gY3R4LmlubGluZVF1ZXJ5ID8/IGN0eC5zaGlwcGluZ1F1ZXJ5ID8/XG4gICAgICogY3R4LnByZUNoZWNrb3V0UXVlcnkgPz8gY3R4LmNob3NlbklubGluZVJlc3VsdCA/PyBjdHgubXNnID8/XG4gICAgICogY3R4Lm15Q2hhdE1lbWJlciA/PyBjdHguY2hhdE1lbWJlciA/PyBjdHguY2hhdEpvaW5SZXF1ZXN0KT8uZnJvbWBcbiAgICAgKi9cbiAgICBnZXQgZnJvbSgpOiBVc2VyIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgLy8gS2VlcCBpbiBzeW5jIHdpdGggdHlwZXMgaW4gYGZpbHRlci50c2AuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrUXVlcnkgPz9cbiAgICAgICAgICAgICAgICB0aGlzLmlubGluZVF1ZXJ5ID8/XG4gICAgICAgICAgICAgICAgdGhpcy5zaGlwcGluZ1F1ZXJ5ID8/XG4gICAgICAgICAgICAgICAgdGhpcy5wcmVDaGVja291dFF1ZXJ5ID8/XG4gICAgICAgICAgICAgICAgdGhpcy5jaG9zZW5JbmxpbmVSZXN1bHQgPz9cbiAgICAgICAgICAgICAgICB0aGlzLm1zZyA/P1xuICAgICAgICAgICAgICAgIHRoaXMubXlDaGF0TWVtYmVyID8/XG4gICAgICAgICAgICAgICAgdGhpcy5jaGF0TWVtYmVyID8/XG4gICAgICAgICAgICAgICAgdGhpcy5jaGF0Sm9pblJlcXVlc3RcbiAgICAgICAgKT8uZnJvbTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGlubGluZSBtZXNzYWdlIElEIGZyb20gd2hlcmV2ZXIgcG9zc2libGUuIEFsaWFzIGZvclxuICAgICAqIGAoY3R4LmNhbGxiYWNrUXVlcnkgPz8gY3R4LmNob3NlbklubGluZVJlc3VsdCk/LmlubGluZV9tZXNzYWdlX2lkYFxuICAgICAqL1xuICAgIGdldCBpbmxpbmVNZXNzYWdlSWQoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tRdWVyeT8uaW5saW5lX21lc3NhZ2VfaWQgPz9cbiAgICAgICAgICAgICAgICB0aGlzLmNob3NlbklubGluZVJlc3VsdD8uaW5saW5lX21lc3NhZ2VfaWRcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBQUk9CSU5HIFNIT1JUQ1VUU1xuXG4gICAgLyoqXG4gICAgICogYENvbnRleHQuaGFzYCBpcyBhbiBvYmplY3QgdGhhdCBjb250YWlucyBhIG51bWJlciBvZiB1c2VmdWwgZnVuY3Rpb25zIGZvclxuICAgICAqIHByb2JpbmcgY29udGV4dCBvYmplY3RzLiBFYWNoIG9mIHRoZXNlIGZ1bmN0aW9ucyBjYW4gZ2VuZXJhdGUgYSBwcmVkaWNhdGVcbiAgICAgKiBmdW5jdGlvbiwgdG8gd2hpY2ggeW91IGNhbiBwYXNzIGNvbnRleHQgb2JqZWN0cyBpbiBvcmRlciB0byBjaGVjayBpZiBhXG4gICAgICogY29uZGl0aW9uIGhvbGRzIGZvciB0aGUgcmVzcGVjdGl2ZSBjb250ZXh0IG9iamVjdC5cbiAgICAgKlxuICAgICAqIEZvciBleGFtcGxlLCB5b3UgY2FuIGNhbGwgYENvbnRleHQuaGFzLmZpbHRlclF1ZXJ5KFwiOnRleHRcIilgIHRvIGdlbmVyYXRlXG4gICAgICogYSBwcmVkaWNhdGUgZnVuY3Rpb24gdGhhdCB0ZXN0cyBjb250ZXh0IG9iamVjdHMgZm9yIGNvbnRhaW5pbmcgdGV4dDpcbiAgICAgKiBgYGB0c1xuICAgICAqIGNvbnN0IGhhc1RleHQgPSBDb250ZXh0Lmhhcy5maWx0ZXJRdWVyeShcIjp0ZXh0XCIpO1xuICAgICAqXG4gICAgICogaWYgKGhhc1RleHQoY3R4MCkpIHt9IC8vIGBjdHgwYCBtYXRjaGVzIHRoZSBmaWx0ZXIgcXVlcnkgYDp0ZXh0YFxuICAgICAqIGlmIChoYXNUZXh0KGN0eDEpKSB7fSAvLyBgY3R4MWAgbWF0Y2hlcyB0aGUgZmlsdGVyIHF1ZXJ5IGA6dGV4dGBcbiAgICAgKiBpZiAoaGFzVGV4dChjdHgyKSkge30gLy8gYGN0eDJgIG1hdGNoZXMgdGhlIGZpbHRlciBxdWVyeSBgOnRleHRgXG4gICAgICogYGBgXG4gICAgICogVGhlc2UgcHJlZGljYXRlIGZ1bnRpb25zIGFyZSB1c2VkIGludGVybmFsbHkgYnkgdGhlIGhhcy1tZXRob2RzIHRoYXQgYXJlXG4gICAgICogaW5zdGFsbGVkIG9uIGV2ZXJ5IGNvbnRleHQgb2JqZWN0LiBUaGlzIG1lYW5zIHRoYXQgY2FsbGluZ1xuICAgICAqIGBjdHguaGFzKFwiOnRleHRcIilgIGlzIGVxdWl2YWxlbnQgdG9cbiAgICAgKiBgQ29udGV4dC5oYXMuZmlsdGVyUXVlcnkoXCI6dGV4dFwiKShjdHgpYC5cbiAgICAgKi9cbiAgICBzdGF0aWMgaGFzID0gY2hlY2tlcjtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGlzIGNvbnRleHQgb2JqZWN0IG1hdGNoZXMgdGhlIGdpdmVuIGZpbHRlciBxdWVyeSwgYW5kXG4gICAgICogYGZhbHNlYCBvdGhlcndpc2UuIFRoaXMgdXNlcyB0aGUgc2FtZSBsb2dpYyBhcyBgYm90Lm9uYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWx0ZXIgVGhlIGZpbHRlciBxdWVyeSB0byBjaGVja1xuICAgICAqL1xuICAgIGhhczxRIGV4dGVuZHMgRmlsdGVyUXVlcnk+KGZpbHRlcjogUSB8IFFbXSk6IHRoaXMgaXMgRmlsdGVyPHRoaXMsIFE+IHtcbiAgICAgICAgcmV0dXJuIENvbnRleHQuaGFzLmZpbHRlclF1ZXJ5KGZpbHRlcikodGhpcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoaXMgY29udGV4dCBvYmplY3QgY29udGFpbnMgdGhlIGdpdmVuIHRleHQsIG9yIGlmIGl0XG4gICAgICogY29udGFpbnMgdGV4dCB0aGF0IG1hdGNoZXMgdGhlIGdpdmVuIHJlZ3VsYXIgZXhwcmVzc2lvbi4gSXQgcmV0dXJuc1xuICAgICAqIGBmYWxzZWAgb3RoZXJ3aXNlLiBUaGlzIHVzZXMgdGhlIHNhbWUgbG9naWMgYXMgYGJvdC5oZWFyc2AuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJpZ2dlciBUaGUgc3RyaW5nIG9yIHJlZ2V4IHRvIG1hdGNoXG4gICAgICovXG4gICAgaGFzVGV4dCh0cmlnZ2VyOiBNYXliZUFycmF5PHN0cmluZyB8IFJlZ0V4cD4pOiB0aGlzIGlzIEhlYXJzQ29udGV4dDx0aGlzPiB7XG4gICAgICAgIHJldHVybiBDb250ZXh0Lmhhcy50ZXh0KHRyaWdnZXIpKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGlzIGNvbnRleHQgb2JqZWN0IGNvbnRhaW5zIHRoZSBnaXZlbiBjb21tYW5kLCBhbmRcbiAgICAgKiBgZmFsc2VgIG90aGVyd2lzZS4gVGhpcyB1c2VzIHRoZSBzYW1lIGxvZ2ljIGFzIGBib3QuY29tbWFuZGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29tbWFuZCBUaGUgY29tbWFuZCB0byBtYXRjaFxuICAgICAqL1xuICAgIGhhc0NvbW1hbmQ8UyBleHRlbmRzIHN0cmluZz4oXG4gICAgICAgIGNvbW1hbmQ6IE1heWJlQXJyYXk8XG4gICAgICAgICAgICBTdHJpbmdXaXRoU3VnZ2VzdGlvbnM8UyB8IFwic3RhcnRcIiB8IFwiaGVscFwiIHwgXCJzZXR0aW5nc1wiPlxuICAgICAgICA+LFxuICAgICk6IHRoaXMgaXMgQ29tbWFuZENvbnRleHQ8dGhpcz4ge1xuICAgICAgICByZXR1cm4gQ29udGV4dC5oYXMuY29tbWFuZChjb21tYW5kKSh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhpcyBjb250ZXh0IG9iamVjdCBiZWxvbmdzIHRvIGEgY2hhdCB3aXRoIHRoZSBnaXZlblxuICAgICAqIGNoYXQgdHlwZSwgYW5kIGBmYWxzZWAgb3RoZXJ3aXNlLiBUaGlzIHVzZXMgdGhlIHNhbWUgbG9naWMgYXNcbiAgICAgKiBgYm90LmNoYXRUeXBlYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjaGF0VHlwZSBUaGUgY2hhdCB0eXBlIHRvIG1hdGNoXG4gICAgICovXG4gICAgaGFzQ2hhdFR5cGU8VCBleHRlbmRzIENoYXRbXCJ0eXBlXCJdPihcbiAgICAgICAgY2hhdFR5cGU6IE1heWJlQXJyYXk8VD4sXG4gICAgKTogdGhpcyBpcyBDaGF0VHlwZUNvbnRleHQ8dGhpcywgVD4ge1xuICAgICAgICByZXR1cm4gQ29udGV4dC5oYXMuY2hhdFR5cGUoY2hhdFR5cGUpKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGlzIGNvbnRleHQgb2JqZWN0IGNvbnRhaW5zIHRoZSBnaXZlbiBjYWxsYmFjayBxdWVyeSxcbiAgICAgKiBvciBpZiB0aGUgY29udGFpbmVkIGNhbGxiYWNrIHF1ZXJ5IGRhdGEgbWF0Y2hlcyB0aGUgZ2l2ZW4gcmVndWxhclxuICAgICAqIGV4cHJlc3Npb24uIEl0IHJldHVybnMgYGZhbHNlYCBvdGhlcndpc2UuIFRoaXMgdXNlcyB0aGUgc2FtZSBsb2dpYyBhc1xuICAgICAqIGBib3QuY2FsbGJhY2tRdWVyeWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJpZ2dlciBUaGUgc3RyaW5nIG9yIHJlZ2V4IHRvIG1hdGNoXG4gICAgICovXG4gICAgaGFzQ2FsbGJhY2tRdWVyeShcbiAgICAgICAgdHJpZ2dlcjogTWF5YmVBcnJheTxzdHJpbmcgfCBSZWdFeHA+LFxuICAgICk6IHRoaXMgaXMgQ2FsbGJhY2tRdWVyeUNvbnRleHQ8dGhpcz4ge1xuICAgICAgICByZXR1cm4gQ29udGV4dC5oYXMuY2FsbGJhY2tRdWVyeSh0cmlnZ2VyKSh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhpcyBjb250ZXh0IG9iamVjdCBjb250YWlucyB0aGUgZ2l2ZW4gZ2FtZSBxdWVyeSwgb3JcbiAgICAgKiBpZiB0aGUgY29udGFpbmVkIGdhbWUgcXVlcnkgbWF0Y2hlcyB0aGUgZ2l2ZW4gcmVndWxhciBleHByZXNzaW9uLiBJdFxuICAgICAqIHJldHVybnMgYGZhbHNlYCBvdGhlcndpc2UuIFRoaXMgdXNlcyB0aGUgc2FtZSBsb2dpYyBhcyBgYm90LmdhbWVRdWVyeWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJpZ2dlciBUaGUgc3RyaW5nIG9yIHJlZ2V4IHRvIG1hdGNoXG4gICAgICovXG4gICAgaGFzR2FtZVF1ZXJ5KFxuICAgICAgICB0cmlnZ2VyOiBNYXliZUFycmF5PHN0cmluZyB8IFJlZ0V4cD4sXG4gICAgKTogdGhpcyBpcyBHYW1lUXVlcnlDb250ZXh0PHRoaXM+IHtcbiAgICAgICAgcmV0dXJuIENvbnRleHQuaGFzLmdhbWVRdWVyeSh0cmlnZ2VyKSh0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhpcyBjb250ZXh0IG9iamVjdCBjb250YWlucyB0aGUgZ2l2ZW4gaW5saW5lIHF1ZXJ5LCBvclxuICAgICAqIGlmIHRoZSBjb250YWluZWQgaW5saW5lIHF1ZXJ5IG1hdGNoZXMgdGhlIGdpdmVuIHJlZ3VsYXIgZXhwcmVzc2lvbi4gSXRcbiAgICAgKiByZXR1cm5zIGBmYWxzZWAgb3RoZXJ3aXNlLiBUaGlzIHVzZXMgdGhlIHNhbWUgbG9naWMgYXMgYGJvdC5pbmxpbmVRdWVyeWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJpZ2dlciBUaGUgc3RyaW5nIG9yIHJlZ2V4IHRvIG1hdGNoXG4gICAgICovXG4gICAgaGFzSW5saW5lUXVlcnkoXG4gICAgICAgIHRyaWdnZXI6IE1heWJlQXJyYXk8c3RyaW5nIHwgUmVnRXhwPixcbiAgICApOiB0aGlzIGlzIElubGluZVF1ZXJ5Q29udGV4dDx0aGlzPiB7XG4gICAgICAgIHJldHVybiBDb250ZXh0Lmhhcy5pbmxpbmVRdWVyeSh0cmlnZ2VyKSh0aGlzKTtcbiAgICB9XG5cbiAgICAvLyBBUElcblxuICAgIC8qKlxuICAgICAqIENvbnRleHQtYXdhcmUgYWxpYXMgZm9yIGBhcGkuc2VuZE1lc3NhZ2VgLiBVc2UgdGhpcyBtZXRob2QgdG8gc2VuZCB0ZXh0IG1lc3NhZ2VzLiBPbiBzdWNjZXNzLCB0aGUgc2VudCBNZXNzYWdlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRleHQgVGV4dCBvZiB0aGUgbWVzc2FnZSB0byBiZSBzZW50LCAxLTQwOTYgY2hhcmFjdGVycyBhZnRlciBlbnRpdGllcyBwYXJzaW5nXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2VuZG1lc3NhZ2VcbiAgICAgKi9cbiAgICByZXBseShcbiAgICAgICAgdGV4dDogc3RyaW5nLFxuICAgICAgICBvdGhlcj86IE90aGVyPFwic2VuZE1lc3NhZ2VcIiwgXCJjaGF0X2lkXCIgfCBcInRleHRcIj4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGkuc2VuZE1lc3NhZ2UoXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJzZW5kTWVzc2FnZVwiKS5pZCxcbiAgICAgICAgICAgIHRleHQsXG4gICAgICAgICAgICBvdGhlcixcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb250ZXh0LWF3YXJlIGFsaWFzIGZvciBgYXBpLmZvcndhcmRNZXNzYWdlYC4gVXNlIHRoaXMgbWV0aG9kIHRvIGZvcndhcmQgbWVzc2FnZXMgb2YgYW55IGtpbmQuIFNlcnZpY2UgbWVzc2FnZXMgY2FuJ3QgYmUgZm9yd2FyZGVkLiBPbiBzdWNjZXNzLCB0aGUgc2VudCBNZXNzYWdlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IGNoYW5uZWwgKGluIHRoZSBmb3JtYXQgQGNoYW5uZWx1c2VybmFtZSlcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNmb3J3YXJkbWVzc2FnZVxuICAgICAqL1xuICAgIGZvcndhcmRNZXNzYWdlKFxuICAgICAgICBjaGF0X2lkOiBudW1iZXIgfCBzdHJpbmcsXG4gICAgICAgIG90aGVyPzogT3RoZXI8XG4gICAgICAgICAgICBcImZvcndhcmRNZXNzYWdlXCIsXG4gICAgICAgICAgICBcImNoYXRfaWRcIiB8IFwiZnJvbV9jaGF0X2lkXCIgfCBcIm1lc3NhZ2VfaWRcIlxuICAgICAgICA+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLmZvcndhcmRNZXNzYWdlKFxuICAgICAgICAgICAgY2hhdF9pZCxcbiAgICAgICAgICAgIG9yVGhyb3codGhpcy5jaGF0LCBcImZvcndhcmRNZXNzYWdlXCIpLmlkLFxuICAgICAgICAgICAgb3JUaHJvdyh0aGlzLm1zZywgXCJmb3J3YXJkTWVzc2FnZVwiKS5tZXNzYWdlX2lkLFxuICAgICAgICAgICAgb3RoZXIsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5jb3B5TWVzc2FnZWAuIFVzZSB0aGlzIG1ldGhvZCB0byBjb3B5IG1lc3NhZ2VzIG9mIGFueSBraW5kLiBTZXJ2aWNlIG1lc3NhZ2VzIGFuZCBpbnZvaWNlIG1lc3NhZ2VzIGNhbid0IGJlIGNvcGllZC4gVGhlIG1ldGhvZCBpcyBhbmFsb2dvdXMgdG8gdGhlIG1ldGhvZCBmb3J3YXJkTWVzc2FnZSwgYnV0IHRoZSBjb3BpZWQgbWVzc2FnZSBkb2Vzbid0IGhhdmUgYSBsaW5rIHRvIHRoZSBvcmlnaW5hbCBtZXNzYWdlLiBSZXR1cm5zIHRoZSBNZXNzYWdlSWQgb2YgdGhlIHNlbnQgbWVzc2FnZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IGNoYW5uZWwgKGluIHRoZSBmb3JtYXQgQGNoYW5uZWx1c2VybmFtZSlcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNjb3B5bWVzc2FnZVxuICAgICAqL1xuICAgIGNvcHlNZXNzYWdlKFxuICAgICAgICBjaGF0X2lkOiBudW1iZXIgfCBzdHJpbmcsXG4gICAgICAgIG90aGVyPzogT3RoZXI8XCJjb3B5TWVzc2FnZVwiLCBcImNoYXRfaWRcIiB8IFwiZnJvbV9jaGF0X2lkXCIgfCBcIm1lc3NhZ2VfaWRcIj4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGkuY29weU1lc3NhZ2UoXG4gICAgICAgICAgICBjaGF0X2lkLFxuICAgICAgICAgICAgb3JUaHJvdyh0aGlzLmNoYXQsIFwiY29weU1lc3NhZ2VcIikuaWQsXG4gICAgICAgICAgICBvclRocm93KHRoaXMubXNnLCBcImNvcHlNZXNzYWdlXCIpLm1lc3NhZ2VfaWQsXG4gICAgICAgICAgICBvdGhlcixcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb250ZXh0LWF3YXJlIGFsaWFzIGZvciBgYXBpLnNlbmRQaG90b2AuIFVzZSB0aGlzIG1ldGhvZCB0byBzZW5kIHBob3Rvcy4gT24gc3VjY2VzcywgdGhlIHNlbnQgTWVzc2FnZSBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwaG90byBQaG90byB0byBzZW5kLiBQYXNzIGEgZmlsZV9pZCBhcyBTdHJpbmcgdG8gc2VuZCBhIHBob3RvIHRoYXQgZXhpc3RzIG9uIHRoZSBUZWxlZ3JhbSBzZXJ2ZXJzIChyZWNvbW1lbmRlZCksIHBhc3MgYW4gSFRUUCBVUkwgYXMgYSBTdHJpbmcgZm9yIFRlbGVncmFtIHRvIGdldCBhIHBob3RvIGZyb20gdGhlIEludGVybmV0LCBvciB1cGxvYWQgYSBuZXcgcGhvdG8gdXNpbmcgbXVsdGlwYXJ0L2Zvcm0tZGF0YS4gVGhlIHBob3RvIG11c3QgYmUgYXQgbW9zdCAxMCBNQiBpbiBzaXplLiBUaGUgcGhvdG8ncyB3aWR0aCBhbmQgaGVpZ2h0IG11c3Qgbm90IGV4Y2VlZCAxMDAwMCBpbiB0b3RhbC4gV2lkdGggYW5kIGhlaWdodCByYXRpbyBtdXN0IGJlIGF0IG1vc3QgMjAuXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2VuZHBob3RvXG4gICAgICovXG4gICAgcmVwbHlXaXRoUGhvdG8oXG4gICAgICAgIHBob3RvOiBJbnB1dEZpbGUgfCBzdHJpbmcsXG4gICAgICAgIG90aGVyPzogT3RoZXI8XCJzZW5kUGhvdG9cIiwgXCJjaGF0X2lkXCIgfCBcInBob3RvXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLnNlbmRQaG90byhcbiAgICAgICAgICAgIG9yVGhyb3codGhpcy5jaGF0LCBcInNlbmRQaG90b1wiKS5pZCxcbiAgICAgICAgICAgIHBob3RvLFxuICAgICAgICAgICAgb3RoZXIsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5zZW5kQXVkaW9gLiBVc2UgdGhpcyBtZXRob2QgdG8gc2VuZCBhdWRpbyBmaWxlcywgaWYgeW91IHdhbnQgVGVsZWdyYW0gY2xpZW50cyB0byBkaXNwbGF5IHRoZW0gaW4gdGhlIG11c2ljIHBsYXllci4gWW91ciBhdWRpbyBtdXN0IGJlIGluIHRoZSAuTVAzIG9yIC5NNEEgZm9ybWF0LiBPbiBzdWNjZXNzLCB0aGUgc2VudCBNZXNzYWdlIGlzIHJldHVybmVkLiBCb3RzIGNhbiBjdXJyZW50bHkgc2VuZCBhdWRpbyBmaWxlcyBvZiB1cCB0byA1MCBNQiBpbiBzaXplLCB0aGlzIGxpbWl0IG1heSBiZSBjaGFuZ2VkIGluIHRoZSBmdXR1cmUuXG4gICAgICpcbiAgICAgKiBGb3Igc2VuZGluZyB2b2ljZSBtZXNzYWdlcywgdXNlIHRoZSBzZW5kVm9pY2UgbWV0aG9kIGluc3RlYWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXVkaW8gQXVkaW8gZmlsZSB0byBzZW5kLiBQYXNzIGEgZmlsZV9pZCBhcyBTdHJpbmcgdG8gc2VuZCBhbiBhdWRpbyBmaWxlIHRoYXQgZXhpc3RzIG9uIHRoZSBUZWxlZ3JhbSBzZXJ2ZXJzIChyZWNvbW1lbmRlZCksIHBhc3MgYW4gSFRUUCBVUkwgYXMgYSBTdHJpbmcgZm9yIFRlbGVncmFtIHRvIGdldCBhbiBhdWRpbyBmaWxlIGZyb20gdGhlIEludGVybmV0LCBvciB1cGxvYWQgYSBuZXcgb25lIHVzaW5nIG11bHRpcGFydC9mb3JtLWRhdGEuXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2VuZGF1ZGlvXG4gICAgICovXG4gICAgcmVwbHlXaXRoQXVkaW8oXG4gICAgICAgIGF1ZGlvOiBJbnB1dEZpbGUgfCBzdHJpbmcsXG4gICAgICAgIG90aGVyPzogT3RoZXI8XCJzZW5kQXVkaW9cIiwgXCJjaGF0X2lkXCIgfCBcImF1ZGlvXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLnNlbmRBdWRpbyhcbiAgICAgICAgICAgIG9yVGhyb3codGhpcy5jaGF0LCBcInNlbmRBdWRpb1wiKS5pZCxcbiAgICAgICAgICAgIGF1ZGlvLFxuICAgICAgICAgICAgb3RoZXIsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5zZW5kRG9jdW1lbnRgLiBVc2UgdGhpcyBtZXRob2QgdG8gc2VuZCBnZW5lcmFsIGZpbGVzLiBPbiBzdWNjZXNzLCB0aGUgc2VudCBNZXNzYWdlIGlzIHJldHVybmVkLiBCb3RzIGNhbiBjdXJyZW50bHkgc2VuZCBmaWxlcyBvZiBhbnkgdHlwZSBvZiB1cCB0byA1MCBNQiBpbiBzaXplLCB0aGlzIGxpbWl0IG1heSBiZSBjaGFuZ2VkIGluIHRoZSBmdXR1cmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgRmlsZSB0byBzZW5kLiBQYXNzIGEgZmlsZV9pZCBhcyBTdHJpbmcgdG8gc2VuZCBhIGZpbGUgdGhhdCBleGlzdHMgb24gdGhlIFRlbGVncmFtIHNlcnZlcnMgKHJlY29tbWVuZGVkKSwgcGFzcyBhbiBIVFRQIFVSTCBhcyBhIFN0cmluZyBmb3IgVGVsZWdyYW0gdG8gZ2V0IGEgZmlsZSBmcm9tIHRoZSBJbnRlcm5ldCwgb3IgdXBsb2FkIGEgbmV3IG9uZSB1c2luZyBtdWx0aXBhcnQvZm9ybS1kYXRhLlxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NlbmRkb2N1bWVudFxuICAgICAqL1xuICAgIHJlcGx5V2l0aERvY3VtZW50KFxuICAgICAgICBkb2N1bWVudDogSW5wdXRGaWxlIHwgc3RyaW5nLFxuICAgICAgICBvdGhlcj86IE90aGVyPFwic2VuZERvY3VtZW50XCIsIFwiY2hhdF9pZFwiIHwgXCJkb2N1bWVudFwiPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaS5zZW5kRG9jdW1lbnQoXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJzZW5kRG9jdW1lbnRcIikuaWQsXG4gICAgICAgICAgICBkb2N1bWVudCxcbiAgICAgICAgICAgIG90aGVyLFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRleHQtYXdhcmUgYWxpYXMgZm9yIGBhcGkuc2VuZFZpZGVvYC4gVXNlIHRoaXMgbWV0aG9kIHRvIHNlbmQgdmlkZW8gZmlsZXMsIFRlbGVncmFtIGNsaWVudHMgc3VwcG9ydCBtcDQgdmlkZW9zIChvdGhlciBmb3JtYXRzIG1heSBiZSBzZW50IGFzIERvY3VtZW50KS4gT24gc3VjY2VzcywgdGhlIHNlbnQgTWVzc2FnZSBpcyByZXR1cm5lZC4gQm90cyBjYW4gY3VycmVudGx5IHNlbmQgdmlkZW8gZmlsZXMgb2YgdXAgdG8gNTAgTUIgaW4gc2l6ZSwgdGhpcyBsaW1pdCBtYXkgYmUgY2hhbmdlZCBpbiB0aGUgZnV0dXJlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZpZGVvIFZpZGVvIHRvIHNlbmQuIFBhc3MgYSBmaWxlX2lkIGFzIFN0cmluZyB0byBzZW5kIGEgdmlkZW8gdGhhdCBleGlzdHMgb24gdGhlIFRlbGVncmFtIHNlcnZlcnMgKHJlY29tbWVuZGVkKSwgcGFzcyBhbiBIVFRQIFVSTCBhcyBhIFN0cmluZyBmb3IgVGVsZWdyYW0gdG8gZ2V0IGEgdmlkZW8gZnJvbSB0aGUgSW50ZXJuZXQsIG9yIHVwbG9hZCBhIG5ldyB2aWRlbyB1c2luZyBtdWx0aXBhcnQvZm9ybS1kYXRhLlxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NlbmR2aWRlb1xuICAgICAqL1xuICAgIHJlcGx5V2l0aFZpZGVvKFxuICAgICAgICB2aWRlbzogSW5wdXRGaWxlIHwgc3RyaW5nLFxuICAgICAgICBvdGhlcj86IE90aGVyPFwic2VuZFZpZGVvXCIsIFwiY2hhdF9pZFwiIHwgXCJ2aWRlb1wiPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaS5zZW5kVmlkZW8oXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJzZW5kVmlkZW9cIikuaWQsXG4gICAgICAgICAgICB2aWRlbyxcbiAgICAgICAgICAgIG90aGVyLFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRleHQtYXdhcmUgYWxpYXMgZm9yIGBhcGkuc2VuZEFuaW1hdGlvbmAuIFVzZSB0aGlzIG1ldGhvZCB0byBzZW5kIGFuaW1hdGlvbiBmaWxlcyAoR0lGIG9yIEguMjY0L01QRUctNCBBVkMgdmlkZW8gd2l0aG91dCBzb3VuZCkuIE9uIHN1Y2Nlc3MsIHRoZSBzZW50IE1lc3NhZ2UgaXMgcmV0dXJuZWQuIEJvdHMgY2FuIGN1cnJlbnRseSBzZW5kIGFuaW1hdGlvbiBmaWxlcyBvZiB1cCB0byA1MCBNQiBpbiBzaXplLCB0aGlzIGxpbWl0IG1heSBiZSBjaGFuZ2VkIGluIHRoZSBmdXR1cmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYW5pbWF0aW9uIEFuaW1hdGlvbiB0byBzZW5kLiBQYXNzIGEgZmlsZV9pZCBhcyBTdHJpbmcgdG8gc2VuZCBhbiBhbmltYXRpb24gdGhhdCBleGlzdHMgb24gdGhlIFRlbGVncmFtIHNlcnZlcnMgKHJlY29tbWVuZGVkKSwgcGFzcyBhbiBIVFRQIFVSTCBhcyBhIFN0cmluZyBmb3IgVGVsZWdyYW0gdG8gZ2V0IGFuIGFuaW1hdGlvbiBmcm9tIHRoZSBJbnRlcm5ldCwgb3IgdXBsb2FkIGEgbmV3IGFuaW1hdGlvbiB1c2luZyBtdWx0aXBhcnQvZm9ybS1kYXRhLlxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NlbmRhbmltYXRpb25cbiAgICAgKi9cbiAgICByZXBseVdpdGhBbmltYXRpb24oXG4gICAgICAgIGFuaW1hdGlvbjogSW5wdXRGaWxlIHwgc3RyaW5nLFxuICAgICAgICBvdGhlcj86IE90aGVyPFwic2VuZEFuaW1hdGlvblwiLCBcImNoYXRfaWRcIiB8IFwiYW5pbWF0aW9uXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLnNlbmRBbmltYXRpb24oXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJzZW5kQW5pbWF0aW9uXCIpLmlkLFxuICAgICAgICAgICAgYW5pbWF0aW9uLFxuICAgICAgICAgICAgb3RoZXIsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5zZW5kVm9pY2VgLiBVc2UgdGhpcyBtZXRob2QgdG8gc2VuZCBhdWRpbyBmaWxlcywgaWYgeW91IHdhbnQgVGVsZWdyYW0gY2xpZW50cyB0byBkaXNwbGF5IHRoZSBmaWxlIGFzIGEgcGxheWFibGUgdm9pY2UgbWVzc2FnZS4gRm9yIHRoaXMgdG8gd29yaywgeW91ciBhdWRpbyBtdXN0IGJlIGluIGFuIC5PR0cgZmlsZSBlbmNvZGVkIHdpdGggT1BVUyAob3RoZXIgZm9ybWF0cyBtYXkgYmUgc2VudCBhcyBBdWRpbyBvciBEb2N1bWVudCkuIE9uIHN1Y2Nlc3MsIHRoZSBzZW50IE1lc3NhZ2UgaXMgcmV0dXJuZWQuIEJvdHMgY2FuIGN1cnJlbnRseSBzZW5kIHZvaWNlIG1lc3NhZ2VzIG9mIHVwIHRvIDUwIE1CIGluIHNpemUsIHRoaXMgbGltaXQgbWF5IGJlIGNoYW5nZWQgaW4gdGhlIGZ1dHVyZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2b2ljZSBBdWRpbyBmaWxlIHRvIHNlbmQuIFBhc3MgYSBmaWxlX2lkIGFzIFN0cmluZyB0byBzZW5kIGEgZmlsZSB0aGF0IGV4aXN0cyBvbiB0aGUgVGVsZWdyYW0gc2VydmVycyAocmVjb21tZW5kZWQpLCBwYXNzIGFuIEhUVFAgVVJMIGFzIGEgU3RyaW5nIGZvciBUZWxlZ3JhbSB0byBnZXQgYSBmaWxlIGZyb20gdGhlIEludGVybmV0LCBvciB1cGxvYWQgYSBuZXcgb25lIHVzaW5nIG11bHRpcGFydC9mb3JtLWRhdGEuXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2VuZHZvaWNlXG4gICAgICovXG4gICAgcmVwbHlXaXRoVm9pY2UoXG4gICAgICAgIHZvaWNlOiBJbnB1dEZpbGUgfCBzdHJpbmcsXG4gICAgICAgIG90aGVyPzogT3RoZXI8XCJzZW5kVm9pY2VcIiwgXCJjaGF0X2lkXCIgfCBcInZvaWNlXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLnNlbmRWb2ljZShcbiAgICAgICAgICAgIG9yVGhyb3codGhpcy5jaGF0LCBcInNlbmRWb2ljZVwiKS5pZCxcbiAgICAgICAgICAgIHZvaWNlLFxuICAgICAgICAgICAgb3RoZXIsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5zZW5kVmlkZW9Ob3RlYC4gVXNlIHRoaXMgbWV0aG9kIHRvIHNlbmQgdmlkZW8gbWVzc2FnZXMuIE9uIHN1Y2Nlc3MsIHRoZSBzZW50IE1lc3NhZ2UgaXMgcmV0dXJuZWQuXG4gICAgICogQXMgb2Ygdi40LjAsIFRlbGVncmFtIGNsaWVudHMgc3VwcG9ydCByb3VuZGVkIHNxdWFyZSBtcDQgdmlkZW9zIG9mIHVwIHRvIDEgbWludXRlIGxvbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmlkZW9fbm90ZSBWaWRlbyBub3RlIHRvIHNlbmQuIFBhc3MgYSBmaWxlX2lkIGFzIFN0cmluZyB0byBzZW5kIGEgdmlkZW8gbm90ZSB0aGF0IGV4aXN0cyBvbiB0aGUgVGVsZWdyYW0gc2VydmVycyAocmVjb21tZW5kZWQpIG9yIHVwbG9hZCBhIG5ldyB2aWRlbyB1c2luZyBtdWx0aXBhcnQvZm9ybS1kYXRhLi4gU2VuZGluZyB2aWRlbyBub3RlcyBieSBhIFVSTCBpcyBjdXJyZW50bHkgdW5zdXBwb3J0ZWRcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNzZW5kdmlkZW9ub3RlXG4gICAgICovXG4gICAgcmVwbHlXaXRoVmlkZW9Ob3RlKFxuICAgICAgICB2aWRlb19ub3RlOiBJbnB1dEZpbGUgfCBzdHJpbmcsXG4gICAgICAgIG90aGVyPzogT3RoZXI8XCJzZW5kVmlkZW9Ob3RlXCIsIFwiY2hhdF9pZFwiIHwgXCJ2aWRlb19ub3RlXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLnNlbmRWaWRlb05vdGUoXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJzZW5kVmlkZW9Ob3RlXCIpLmlkLFxuICAgICAgICAgICAgdmlkZW9fbm90ZSxcbiAgICAgICAgICAgIG90aGVyLFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRleHQtYXdhcmUgYWxpYXMgZm9yIGBhcGkuc2VuZE1lZGlhR3JvdXBgLiBVc2UgdGhpcyBtZXRob2QgdG8gc2VuZCBhIGdyb3VwIG9mIHBob3RvcywgdmlkZW9zLCBkb2N1bWVudHMgb3IgYXVkaW9zIGFzIGFuIGFsYnVtLiBEb2N1bWVudHMgYW5kIGF1ZGlvIGZpbGVzIGNhbiBiZSBvbmx5IGdyb3VwZWQgaW4gYW4gYWxidW0gd2l0aCBtZXNzYWdlcyBvZiB0aGUgc2FtZSB0eXBlLiBPbiBzdWNjZXNzLCBhbiBhcnJheSBvZiBNZXNzYWdlcyB0aGF0IHdlcmUgc2VudCBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtZWRpYSBBbiBhcnJheSBkZXNjcmliaW5nIG1lc3NhZ2VzIHRvIGJlIHNlbnQsIG11c3QgaW5jbHVkZSAyLTEwIGl0ZW1zXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2VuZG1lZGlhZ3JvdXBcbiAgICAgKi9cbiAgICByZXBseVdpdGhNZWRpYUdyb3VwKFxuICAgICAgICBtZWRpYTogUmVhZG9ubHlBcnJheTxcbiAgICAgICAgICAgIHwgSW5wdXRNZWRpYUF1ZGlvXG4gICAgICAgICAgICB8IElucHV0TWVkaWFEb2N1bWVudFxuICAgICAgICAgICAgfCBJbnB1dE1lZGlhUGhvdG9cbiAgICAgICAgICAgIHwgSW5wdXRNZWRpYVZpZGVvXG4gICAgICAgID4sXG4gICAgICAgIG90aGVyPzogT3RoZXI8XCJzZW5kTWVkaWFHcm91cFwiLCBcImNoYXRfaWRcIiB8IFwibWVkaWFcIj4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGkuc2VuZE1lZGlhR3JvdXAoXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJzZW5kTWVkaWFHcm91cFwiKS5pZCxcbiAgICAgICAgICAgIG1lZGlhLFxuICAgICAgICAgICAgb3RoZXIsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5zZW5kTG9jYXRpb25gLiBVc2UgdGhpcyBtZXRob2QgdG8gc2VuZCBwb2ludCBvbiB0aGUgbWFwLiBPbiBzdWNjZXNzLCB0aGUgc2VudCBNZXNzYWdlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGxhdGl0dWRlIExhdGl0dWRlIG9mIHRoZSBsb2NhdGlvblxuICAgICAqIEBwYXJhbSBsb25naXR1ZGUgTG9uZ2l0dWRlIG9mIHRoZSBsb2NhdGlvblxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NlbmRsb2NhdGlvblxuICAgICAqL1xuICAgIHJlcGx5V2l0aExvY2F0aW9uKFxuICAgICAgICBsYXRpdHVkZTogbnVtYmVyLFxuICAgICAgICBsb25naXR1ZGU6IG51bWJlcixcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcInNlbmRMb2NhdGlvblwiLCBcImNoYXRfaWRcIiB8IFwibGF0aXR1ZGVcIiB8IFwibG9uZ2l0dWRlXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLnNlbmRMb2NhdGlvbihcbiAgICAgICAgICAgIG9yVGhyb3codGhpcy5jaGF0LCBcInNlbmRMb2NhdGlvblwiKS5pZCxcbiAgICAgICAgICAgIGxhdGl0dWRlLFxuICAgICAgICAgICAgbG9uZ2l0dWRlLFxuICAgICAgICAgICAgb3RoZXIsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5lZGl0TWVzc2FnZUxpdmVMb2NhdGlvbmAuIFVzZSB0aGlzIG1ldGhvZCB0byBlZGl0IGxpdmUgbG9jYXRpb24gbWVzc2FnZXMuIEEgbG9jYXRpb24gY2FuIGJlIGVkaXRlZCB1bnRpbCBpdHMgbGl2ZV9wZXJpb2QgZXhwaXJlcyBvciBlZGl0aW5nIGlzIGV4cGxpY2l0bHkgZGlzYWJsZWQgYnkgYSBjYWxsIHRvIHN0b3BNZXNzYWdlTGl2ZUxvY2F0aW9uLiBPbiBzdWNjZXNzLCBpZiB0aGUgZWRpdGVkIG1lc3NhZ2UgaXMgbm90IGFuIGlubGluZSBtZXNzYWdlLCB0aGUgZWRpdGVkIE1lc3NhZ2UgaXMgcmV0dXJuZWQsIG90aGVyd2lzZSBUcnVlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGxhdGl0dWRlIExhdGl0dWRlIG9mIG5ldyBsb2NhdGlvblxuICAgICAqIEBwYXJhbSBsb25naXR1ZGUgTG9uZ2l0dWRlIG9mIG5ldyBsb2NhdGlvblxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI2VkaXRtZXNzYWdlbGl2ZWxvY2F0aW9uXG4gICAgICovXG4gICAgZWRpdE1lc3NhZ2VMaXZlTG9jYXRpb24oXG4gICAgICAgIGxhdGl0dWRlOiBudW1iZXIsXG4gICAgICAgIGxvbmdpdHVkZTogbnVtYmVyLFxuICAgICAgICBvdGhlcj86IE90aGVyPFxuICAgICAgICAgICAgXCJlZGl0TWVzc2FnZUxpdmVMb2NhdGlvblwiLFxuICAgICAgICAgICAgfCBcImNoYXRfaWRcIlxuICAgICAgICAgICAgfCBcIm1lc3NhZ2VfaWRcIlxuICAgICAgICAgICAgfCBcImlubGluZV9tZXNzYWdlX2lkXCJcbiAgICAgICAgICAgIHwgXCJsYXRpdHVkZVwiXG4gICAgICAgICAgICB8IFwibG9uZ2l0dWRlXCJcbiAgICAgICAgPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IGlubGluZUlkID0gdGhpcy5pbmxpbmVNZXNzYWdlSWQ7XG4gICAgICAgIHJldHVybiBpbmxpbmVJZCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IHRoaXMuYXBpLmVkaXRNZXNzYWdlTGl2ZUxvY2F0aW9uSW5saW5lKFxuICAgICAgICAgICAgICAgIGlubGluZUlkLFxuICAgICAgICAgICAgICAgIGxhdGl0dWRlLFxuICAgICAgICAgICAgICAgIGxvbmdpdHVkZSxcbiAgICAgICAgICAgICAgICBvdGhlcixcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIDogdGhpcy5hcGkuZWRpdE1lc3NhZ2VMaXZlTG9jYXRpb24oXG4gICAgICAgICAgICAgICAgb3JUaHJvdyh0aGlzLmNoYXQsIFwiZWRpdE1lc3NhZ2VMaXZlTG9jYXRpb25cIikuaWQsXG4gICAgICAgICAgICAgICAgb3JUaHJvdyh0aGlzLm1zZywgXCJlZGl0TWVzc2FnZUxpdmVMb2NhdGlvblwiKS5tZXNzYWdlX2lkLFxuICAgICAgICAgICAgICAgIGxhdGl0dWRlLFxuICAgICAgICAgICAgICAgIGxvbmdpdHVkZSxcbiAgICAgICAgICAgICAgICBvdGhlcixcbiAgICAgICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRleHQtYXdhcmUgYWxpYXMgZm9yIGBhcGkuc3RvcE1lc3NhZ2VMaXZlTG9jYXRpb25gLiBVc2UgdGhpcyBtZXRob2QgdG8gc3RvcCB1cGRhdGluZyBhIGxpdmUgbG9jYXRpb24gbWVzc2FnZSBiZWZvcmUgbGl2ZV9wZXJpb2QgZXhwaXJlcy4gT24gc3VjY2VzcywgaWYgdGhlIG1lc3NhZ2UgaXMgbm90IGFuIGlubGluZSBtZXNzYWdlLCB0aGUgZWRpdGVkIE1lc3NhZ2UgaXMgcmV0dXJuZWQsIG90aGVyd2lzZSBUcnVlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc3RvcG1lc3NhZ2VsaXZlbG9jYXRpb25cbiAgICAgKi9cbiAgICBzdG9wTWVzc2FnZUxpdmVMb2NhdGlvbihcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcbiAgICAgICAgICAgIFwic3RvcE1lc3NhZ2VMaXZlTG9jYXRpb25cIixcbiAgICAgICAgICAgIFwiY2hhdF9pZFwiIHwgXCJtZXNzYWdlX2lkXCIgfCBcImlubGluZV9tZXNzYWdlX2lkXCJcbiAgICAgICAgPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IGlubGluZUlkID0gdGhpcy5pbmxpbmVNZXNzYWdlSWQ7XG4gICAgICAgIHJldHVybiBpbmxpbmVJZCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IHRoaXMuYXBpLnN0b3BNZXNzYWdlTGl2ZUxvY2F0aW9uSW5saW5lKGlubGluZUlkLCBvdGhlcilcbiAgICAgICAgICAgIDogdGhpcy5hcGkuc3RvcE1lc3NhZ2VMaXZlTG9jYXRpb24oXG4gICAgICAgICAgICAgICAgb3JUaHJvdyh0aGlzLmNoYXQsIFwic3RvcE1lc3NhZ2VMaXZlTG9jYXRpb25cIikuaWQsXG4gICAgICAgICAgICAgICAgb3JUaHJvdyh0aGlzLm1zZywgXCJzdG9wTWVzc2FnZUxpdmVMb2NhdGlvblwiKS5tZXNzYWdlX2lkLFxuICAgICAgICAgICAgICAgIG90aGVyLFxuICAgICAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5zZW5kVmVudWVgLiBVc2UgdGhpcyBtZXRob2QgdG8gc2VuZCBpbmZvcm1hdGlvbiBhYm91dCBhIHZlbnVlLiBPbiBzdWNjZXNzLCB0aGUgc2VudCBNZXNzYWdlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGxhdGl0dWRlIExhdGl0dWRlIG9mIHRoZSB2ZW51ZVxuICAgICAqIEBwYXJhbSBsb25naXR1ZGUgTG9uZ2l0dWRlIG9mIHRoZSB2ZW51ZVxuICAgICAqIEBwYXJhbSB0aXRsZSBOYW1lIG9mIHRoZSB2ZW51ZVxuICAgICAqIEBwYXJhbSBhZGRyZXNzIEFkZHJlc3Mgb2YgdGhlIHZlbnVlXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2VuZHZlbnVlXG4gICAgICovXG4gICAgcmVwbHlXaXRoVmVudWUoXG4gICAgICAgIGxhdGl0dWRlOiBudW1iZXIsXG4gICAgICAgIGxvbmdpdHVkZTogbnVtYmVyLFxuICAgICAgICB0aXRsZTogc3RyaW5nLFxuICAgICAgICBhZGRyZXNzOiBzdHJpbmcsXG4gICAgICAgIG90aGVyPzogT3RoZXI8XG4gICAgICAgICAgICBcInNlbmRWZW51ZVwiLFxuICAgICAgICAgICAgXCJjaGF0X2lkXCIgfCBcImxhdGl0dWRlXCIgfCBcImxvbmdpdHVkZVwiIHwgXCJ0aXRsZVwiIHwgXCJhZGRyZXNzXCJcbiAgICAgICAgPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaS5zZW5kVmVudWUoXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJzZW5kVmVudWVcIikuaWQsXG4gICAgICAgICAgICBsYXRpdHVkZSxcbiAgICAgICAgICAgIGxvbmdpdHVkZSxcbiAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgYWRkcmVzcyxcbiAgICAgICAgICAgIG90aGVyLFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRleHQtYXdhcmUgYWxpYXMgZm9yIGBhcGkuc2VuZENvbnRhY3RgLiBVc2UgdGhpcyBtZXRob2QgdG8gc2VuZCBwaG9uZSBjb250YWN0cy4gT24gc3VjY2VzcywgdGhlIHNlbnQgTWVzc2FnZSBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwaG9uZV9udW1iZXIgQ29udGFjdCdzIHBob25lIG51bWJlclxuICAgICAqIEBwYXJhbSBmaXJzdF9uYW1lIENvbnRhY3QncyBmaXJzdCBuYW1lXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2VuZGNvbnRhY3RcbiAgICAgKi9cbiAgICByZXBseVdpdGhDb250YWN0KFxuICAgICAgICBwaG9uZV9udW1iZXI6IHN0cmluZyxcbiAgICAgICAgZmlyc3RfbmFtZTogc3RyaW5nLFxuICAgICAgICBvdGhlcj86IE90aGVyPFwic2VuZENvbnRhY3RcIiwgXCJjaGF0X2lkXCIgfCBcInBob25lX251bWJlclwiIHwgXCJmaXJzdF9uYW1lXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLnNlbmRDb250YWN0KFxuICAgICAgICAgICAgb3JUaHJvdyh0aGlzLmNoYXQsIFwic2VuZENvbnRhY3RcIikuaWQsXG4gICAgICAgICAgICBwaG9uZV9udW1iZXIsXG4gICAgICAgICAgICBmaXJzdF9uYW1lLFxuICAgICAgICAgICAgb3RoZXIsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5zZW5kUG9sbGAuIFVzZSB0aGlzIG1ldGhvZCB0byBzZW5kIGEgbmF0aXZlIHBvbGwuIE9uIHN1Y2Nlc3MsIHRoZSBzZW50IE1lc3NhZ2UgaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcXVlc3Rpb24gUG9sbCBxdWVzdGlvbiwgMS0zMDAgY2hhcmFjdGVyc1xuICAgICAqIEBwYXJhbSBvcHRpb25zIEEgbGlzdCBvZiBhbnN3ZXIgb3B0aW9ucywgMi0xMCBzdHJpbmdzIDEtMTAwIGNoYXJhY3RlcnMgZWFjaFxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NlbmRwb2xsXG4gICAgICovXG4gICAgcmVwbHlXaXRoUG9sbChcbiAgICAgICAgcXVlc3Rpb246IHN0cmluZyxcbiAgICAgICAgb3B0aW9uczogcmVhZG9ubHkgc3RyaW5nW10sXG4gICAgICAgIG90aGVyPzogT3RoZXI8XCJzZW5kUG9sbFwiLCBcImNoYXRfaWRcIiB8IFwicXVlc3Rpb25cIiB8IFwib3B0aW9uc1wiPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaS5zZW5kUG9sbChcbiAgICAgICAgICAgIG9yVGhyb3codGhpcy5jaGF0LCBcInNlbmRQb2xsXCIpLmlkLFxuICAgICAgICAgICAgcXVlc3Rpb24sXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgb3RoZXIsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5zZW5kRGljZWAuIFVzZSB0aGlzIG1ldGhvZCB0byBzZW5kIGFuIGFuaW1hdGVkIGVtb2ppIHRoYXQgd2lsbCBkaXNwbGF5IGEgcmFuZG9tIHZhbHVlLiBPbiBzdWNjZXNzLCB0aGUgc2VudCBNZXNzYWdlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGVtb2ppIEVtb2ppIG9uIHdoaWNoIHRoZSBkaWNlIHRocm93IGFuaW1hdGlvbiBpcyBiYXNlZC4gQ3VycmVudGx5LCBtdXN0IGJlIG9uZSBvZiDigJzwn46y4oCdLCDigJzwn46v4oCdLCDigJzwn4+A4oCdLCDigJzimr3igJ0sIG9yIOKAnPCfjrDigJ0uIERpY2UgY2FuIGhhdmUgdmFsdWVzIDEtNiBmb3Ig4oCc8J+OsuKAnSBhbmQg4oCc8J+Or+KAnSwgdmFsdWVzIDEtNSBmb3Ig4oCc8J+PgOKAnSBhbmQg4oCc4pq94oCdLCBhbmQgdmFsdWVzIDEtNjQgZm9yIOKAnPCfjrDigJ0uIERlZmF1bHRzIHRvIOKAnPCfjrLigJ1cbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNzZW5kZGljZVxuICAgICAqL1xuICAgIHJlcGx5V2l0aERpY2UoXG4gICAgICAgIGVtb2ppOiBzdHJpbmcsXG4gICAgICAgIG90aGVyPzogT3RoZXI8XCJzZW5kRGljZVwiLCBcImNoYXRfaWRcIiB8IFwiZW1vamlcIj4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGkuc2VuZERpY2UoXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJzZW5kRGljZVwiKS5pZCxcbiAgICAgICAgICAgIGVtb2ppLFxuICAgICAgICAgICAgb3RoZXIsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5zZW5kQ2hhdEFjdGlvbmAuIFVzZSB0aGlzIG1ldGhvZCB3aGVuIHlvdSBuZWVkIHRvIHRlbGwgdGhlIHVzZXIgdGhhdCBzb21ldGhpbmcgaXMgaGFwcGVuaW5nIG9uIHRoZSBib3QncyBzaWRlLiBUaGUgc3RhdHVzIGlzIHNldCBmb3IgNSBzZWNvbmRzIG9yIGxlc3MgKHdoZW4gYSBtZXNzYWdlIGFycml2ZXMgZnJvbSB5b3VyIGJvdCwgVGVsZWdyYW0gY2xpZW50cyBjbGVhciBpdHMgdHlwaW5nIHN0YXR1cykuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogRXhhbXBsZTogVGhlIEltYWdlQm90IG5lZWRzIHNvbWUgdGltZSB0byBwcm9jZXNzIGEgcmVxdWVzdCBhbmQgdXBsb2FkIHRoZSBpbWFnZS4gSW5zdGVhZCBvZiBzZW5kaW5nIGEgdGV4dCBtZXNzYWdlIGFsb25nIHRoZSBsaW5lcyBvZiDigJxSZXRyaWV2aW5nIGltYWdlLCBwbGVhc2Ugd2FpdOKApuKAnSwgdGhlIGJvdCBtYXkgdXNlIHNlbmRDaGF0QWN0aW9uIHdpdGggYWN0aW9uID0gdXBsb2FkX3Bob3RvLiBUaGUgdXNlciB3aWxsIHNlZSBhIOKAnHNlbmRpbmcgcGhvdG/igJ0gc3RhdHVzIGZvciB0aGUgYm90LlxuICAgICAqXG4gICAgICogV2Ugb25seSByZWNvbW1lbmQgdXNpbmcgdGhpcyBtZXRob2Qgd2hlbiBhIHJlc3BvbnNlIGZyb20gdGhlIGJvdCB3aWxsIHRha2UgYSBub3RpY2VhYmxlIGFtb3VudCBvZiB0aW1lIHRvIGFycml2ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhY3Rpb24gVHlwZSBvZiBhY3Rpb24gdG8gYnJvYWRjYXN0LiBDaG9vc2Ugb25lLCBkZXBlbmRpbmcgb24gd2hhdCB0aGUgdXNlciBpcyBhYm91dCB0byByZWNlaXZlOiB0eXBpbmcgZm9yIHRleHQgbWVzc2FnZXMsIHVwbG9hZF9waG90byBmb3IgcGhvdG9zLCByZWNvcmRfdmlkZW8gb3IgdXBsb2FkX3ZpZGVvIGZvciB2aWRlb3MsIHJlY29yZF92b2ljZSBvciB1cGxvYWRfdm9pY2UgZm9yIHZvaWNlIG5vdGVzLCB1cGxvYWRfZG9jdW1lbnQgZm9yIGdlbmVyYWwgZmlsZXMsIGNob29zZV9zdGlja2VyIGZvciBzdGlja2VycywgZmluZF9sb2NhdGlvbiBmb3IgbG9jYXRpb24gZGF0YSwgcmVjb3JkX3ZpZGVvX25vdGUgb3IgdXBsb2FkX3ZpZGVvX25vdGUgZm9yIHZpZGVvIG5vdGVzLlxuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2VuZGNoYXRhY3Rpb25cbiAgICAgKi9cbiAgICByZXBseVdpdGhDaGF0QWN0aW9uKFxuICAgICAgICBhY3Rpb246XG4gICAgICAgICAgICB8IFwidHlwaW5nXCJcbiAgICAgICAgICAgIHwgXCJ1cGxvYWRfcGhvdG9cIlxuICAgICAgICAgICAgfCBcInJlY29yZF92aWRlb1wiXG4gICAgICAgICAgICB8IFwidXBsb2FkX3ZpZGVvXCJcbiAgICAgICAgICAgIHwgXCJyZWNvcmRfdm9pY2VcIlxuICAgICAgICAgICAgfCBcInVwbG9hZF92b2ljZVwiXG4gICAgICAgICAgICB8IFwidXBsb2FkX2RvY3VtZW50XCJcbiAgICAgICAgICAgIHwgXCJmaW5kX2xvY2F0aW9uXCJcbiAgICAgICAgICAgIHwgXCJyZWNvcmRfdmlkZW9fbm90ZVwiXG4gICAgICAgICAgICB8IFwidXBsb2FkX3ZpZGVvX25vdGVcIixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaS5zZW5kQ2hhdEFjdGlvbihcbiAgICAgICAgICAgIG9yVGhyb3codGhpcy5jaGF0LCBcInNlbmRDaGF0QWN0aW9uXCIpLmlkLFxuICAgICAgICAgICAgYWN0aW9uLFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRleHQtYXdhcmUgYWxpYXMgZm9yIGBhcGkuZ2V0VXNlclByb2ZpbGVQaG90b3NgLiBVc2UgdGhpcyBtZXRob2QgdG8gZ2V0IGEgbGlzdCBvZiBwcm9maWxlIHBpY3R1cmVzIGZvciBhIHVzZXIuIFJldHVybnMgYSBVc2VyUHJvZmlsZVBob3RvcyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdXNlcl9pZCBVbmlxdWUgaWRlbnRpZmllciBvZiB0aGUgdGFyZ2V0IHVzZXJcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNnZXR1c2VycHJvZmlsZXBob3Rvc1xuICAgICAqL1xuICAgIGdldFVzZXJQcm9maWxlUGhvdG9zKFxuICAgICAgICBvdGhlcj86IE90aGVyPFwiZ2V0VXNlclByb2ZpbGVQaG90b3NcIiwgXCJ1c2VyX2lkXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLmdldFVzZXJQcm9maWxlUGhvdG9zKFxuICAgICAgICAgICAgb3JUaHJvdyh0aGlzLmZyb20sIFwiZ2V0VXNlclByb2ZpbGVQaG90b3NcIikuaWQsXG4gICAgICAgICAgICBvdGhlcixcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb250ZXh0LWF3YXJlIGFsaWFzIGZvciBgYXBpLmdldEZpbGVgLiBVc2UgdGhpcyBtZXRob2QgdG8gZ2V0IGJhc2ljIGluZm8gYWJvdXQgYSBmaWxlIGFuZCBwcmVwYXJlIGl0IGZvciBkb3dubG9hZGluZy4gRm9yIHRoZSBtb21lbnQsIGJvdHMgY2FuIGRvd25sb2FkIGZpbGVzIG9mIHVwIHRvIDIwTUIgaW4gc2l6ZS4gT24gc3VjY2VzcywgYSBGaWxlIG9iamVjdCBpcyByZXR1cm5lZC4gVGhlIGZpbGUgY2FuIHRoZW4gYmUgZG93bmxvYWRlZCB2aWEgdGhlIGxpbmsgaHR0cHM6Ly9hcGkudGVsZWdyYW0ub3JnL2ZpbGUvYm90PHRva2VuPi88ZmlsZV9wYXRoPiwgd2hlcmUgPGZpbGVfcGF0aD4gaXMgdGFrZW4gZnJvbSB0aGUgcmVzcG9uc2UuIEl0IGlzIGd1YXJhbnRlZWQgdGhhdCB0aGUgbGluayB3aWxsIGJlIHZhbGlkIGZvciBhdCBsZWFzdCAxIGhvdXIuIFdoZW4gdGhlIGxpbmsgZXhwaXJlcywgYSBuZXcgb25lIGNhbiBiZSByZXF1ZXN0ZWQgYnkgY2FsbGluZyBnZXRGaWxlIGFnYWluLlxuICAgICAqXG4gICAgICogTm90ZTogVGhpcyBmdW5jdGlvbiBtYXkgbm90IHByZXNlcnZlIHRoZSBvcmlnaW5hbCBmaWxlIG5hbWUgYW5kIE1JTUUgdHlwZS4gWW91IHNob3VsZCBzYXZlIHRoZSBmaWxlJ3MgTUlNRSB0eXBlIGFuZCBuYW1lIChpZiBhdmFpbGFibGUpIHdoZW4gdGhlIEZpbGUgb2JqZWN0IGlzIHJlY2VpdmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNnZXRmaWxlXG4gICAgICovXG4gICAgZ2V0RmlsZShzaWduYWw/OiBBYm9ydFNpZ25hbCkge1xuICAgICAgICBjb25zdCBtID0gb3JUaHJvdyh0aGlzLm1zZywgXCJnZXRGaWxlXCIpO1xuICAgICAgICBjb25zdCBmaWxlID0gbS5waG90byAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IG0ucGhvdG9bbS5waG90by5sZW5ndGggLSAxXVxuICAgICAgICAgICAgOiBtLmFuaW1hdGlvbiA/P1xuICAgICAgICAgICAgICAgIG0uYXVkaW8gPz9cbiAgICAgICAgICAgICAgICBtLmRvY3VtZW50ID8/XG4gICAgICAgICAgICAgICAgbS52aWRlbyA/P1xuICAgICAgICAgICAgICAgIG0udmlkZW9fbm90ZSA/P1xuICAgICAgICAgICAgICAgIG0udm9pY2UgPz9cbiAgICAgICAgICAgICAgICBtLnN0aWNrZXI7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaS5nZXRGaWxlKG9yVGhyb3coZmlsZSwgXCJnZXRGaWxlXCIpLmZpbGVfaWQsIHNpZ25hbCk7XG4gICAgfVxuXG4gICAgLyoqIEBkZXByZWNhdGVkIFVzZSBgYmFuQXV0aG9yYCBpbnN0ZWFkLiAqL1xuICAgIGtpY2tBdXRob3IoLi4uYXJnczogUGFyYW1ldGVyczxDb250ZXh0W1wiYmFuQXV0aG9yXCJdPikge1xuICAgICAgICByZXR1cm4gdGhpcy5iYW5BdXRob3IoLi4uYXJncyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5iYW5DaGF0TWVtYmVyYC4gVXNlIHRoaXMgbWV0aG9kIHRvIGJhbiBhIHVzZXIgaW4gYSBncm91cCwgYSBzdXBlcmdyb3VwIG9yIGEgY2hhbm5lbC4gSW4gdGhlIGNhc2Ugb2Ygc3VwZXJncm91cHMgYW5kIGNoYW5uZWxzLCB0aGUgdXNlciB3aWxsIG5vdCBiZSBhYmxlIHRvIHJldHVybiB0byB0aGUgY2hhdCBvbiB0aGVpciBvd24gdXNpbmcgaW52aXRlIGxpbmtzLCBldGMuLCB1bmxlc3MgdW5iYW5uZWQgZmlyc3QuIFRoZSBib3QgbXVzdCBiZSBhbiBhZG1pbmlzdHJhdG9yIGluIHRoZSBjaGF0IGZvciB0aGlzIHRvIHdvcmsgYW5kIG11c3QgaGF2ZSB0aGUgYXBwcm9wcmlhdGUgYWRtaW5pc3RyYXRvciByaWdodHMuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjYmFuY2hhdG1lbWJlclxuICAgICAqLyBiYW5BdXRob3IoXG4gICAgICAgIG90aGVyPzogT3RoZXI8XCJiYW5DaGF0TWVtYmVyXCIsIFwiY2hhdF9pZFwiIHwgXCJ1c2VyX2lkXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLmJhbkNoYXRNZW1iZXIoXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJiYW5BdXRob3JcIikuaWQsXG4gICAgICAgICAgICBvclRocm93KHRoaXMuZnJvbSwgXCJiYW5BdXRob3JcIikuaWQsXG4gICAgICAgICAgICBvdGhlcixcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKiogQGRlcHJlY2F0ZWQgVXNlIGBiYW5DaGF0TWVtYmVyYCBpbnN0ZWFkLiAqL1xuICAgIGtpY2tDaGF0TWVtYmVyKC4uLmFyZ3M6IFBhcmFtZXRlcnM8Q29udGV4dFtcImJhbkNoYXRNZW1iZXJcIl0+KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhbkNoYXRNZW1iZXIoLi4uYXJncyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5iYW5DaGF0TWVtYmVyYC4gVXNlIHRoaXMgbWV0aG9kIHRvIGJhbiBhIHVzZXIgaW4gYSBncm91cCwgYSBzdXBlcmdyb3VwIG9yIGEgY2hhbm5lbC4gSW4gdGhlIGNhc2Ugb2Ygc3VwZXJncm91cHMgYW5kIGNoYW5uZWxzLCB0aGUgdXNlciB3aWxsIG5vdCBiZSBhYmxlIHRvIHJldHVybiB0byB0aGUgY2hhdCBvbiB0aGVpciBvd24gdXNpbmcgaW52aXRlIGxpbmtzLCBldGMuLCB1bmxlc3MgdW5iYW5uZWQgZmlyc3QuIFRoZSBib3QgbXVzdCBiZSBhbiBhZG1pbmlzdHJhdG9yIGluIHRoZSBjaGF0IGZvciB0aGlzIHRvIHdvcmsgYW5kIG11c3QgaGF2ZSB0aGUgYXBwcm9wcmlhdGUgYWRtaW5pc3RyYXRvciByaWdodHMuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHVzZXJfaWQgVW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHRhcmdldCB1c2VyXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjYmFuY2hhdG1lbWJlclxuICAgICAqL1xuICAgIGJhbkNoYXRNZW1iZXIoXG4gICAgICAgIHVzZXJfaWQ6IG51bWJlcixcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcImJhbkNoYXRNZW1iZXJcIiwgXCJjaGF0X2lkXCIgfCBcInVzZXJfaWRcIj4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGkuYmFuQ2hhdE1lbWJlcihcbiAgICAgICAgICAgIG9yVGhyb3codGhpcy5jaGF0LCBcImJhbkNoYXRNZW1iZXJcIikuaWQsXG4gICAgICAgICAgICB1c2VyX2lkLFxuICAgICAgICAgICAgb3RoZXIsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS51bmJhbkNoYXRNZW1iZXJgLiBVc2UgdGhpcyBtZXRob2QgdG8gdW5iYW4gYSBwcmV2aW91c2x5IGJhbm5lZCB1c2VyIGluIGEgc3VwZXJncm91cCBvciBjaGFubmVsLiBUaGUgdXNlciB3aWxsIG5vdCByZXR1cm4gdG8gdGhlIGdyb3VwIG9yIGNoYW5uZWwgYXV0b21hdGljYWxseSwgYnV0IHdpbGwgYmUgYWJsZSB0byBqb2luIHZpYSBsaW5rLCBldGMuIFRoZSBib3QgbXVzdCBiZSBhbiBhZG1pbmlzdHJhdG9yIGZvciB0aGlzIHRvIHdvcmsuIEJ5IGRlZmF1bHQsIHRoaXMgbWV0aG9kIGd1YXJhbnRlZXMgdGhhdCBhZnRlciB0aGUgY2FsbCB0aGUgdXNlciBpcyBub3QgYSBtZW1iZXIgb2YgdGhlIGNoYXQsIGJ1dCB3aWxsIGJlIGFibGUgdG8gam9pbiBpdC4gU28gaWYgdGhlIHVzZXIgaXMgYSBtZW1iZXIgb2YgdGhlIGNoYXQgdGhleSB3aWxsIGFsc28gYmUgcmVtb3ZlZCBmcm9tIHRoZSBjaGF0LiBJZiB5b3UgZG9uJ3Qgd2FudCB0aGlzLCB1c2UgdGhlIHBhcmFtZXRlciBvbmx5X2lmX2Jhbm5lZC4gUmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdXNlcl9pZCBVbmlxdWUgaWRlbnRpZmllciBvZiB0aGUgdGFyZ2V0IHVzZXJcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSN1bmJhbmNoYXRtZW1iZXJcbiAgICAgKi9cbiAgICB1bmJhbkNoYXRNZW1iZXIoXG4gICAgICAgIHVzZXJfaWQ6IG51bWJlcixcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcInVuYmFuQ2hhdE1lbWJlclwiLCBcImNoYXRfaWRcIiB8IFwidXNlcl9pZFwiPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaS51bmJhbkNoYXRNZW1iZXIoXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJ1bmJhbkNoYXRNZW1iZXJcIikuaWQsXG4gICAgICAgICAgICB1c2VyX2lkLFxuICAgICAgICAgICAgb3RoZXIsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5yZXN0cmljdENoYXRNZW1iZXJgLiBVc2UgdGhpcyBtZXRob2QgdG8gcmVzdHJpY3QgYSB1c2VyIGluIGEgc3VwZXJncm91cC4gVGhlIGJvdCBtdXN0IGJlIGFuIGFkbWluaXN0cmF0b3IgaW4gdGhlIHN1cGVyZ3JvdXAgZm9yIHRoaXMgdG8gd29yayBhbmQgbXVzdCBoYXZlIHRoZSBhcHByb3ByaWF0ZSBhZG1pbmlzdHJhdG9yIHJpZ2h0cy4gUGFzcyBUcnVlIGZvciBhbGwgcGVybWlzc2lvbnMgdG8gbGlmdCByZXN0cmljdGlvbnMgZnJvbSBhIHVzZXIuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBlcm1pc3Npb25zIEFuIG9iamVjdCBmb3IgbmV3IHVzZXIgcGVybWlzc2lvbnNcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNyZXN0cmljdGNoYXRtZW1iZXJcbiAgICAgKi9cbiAgICByZXN0cmljdEF1dGhvcihcbiAgICAgICAgcGVybWlzc2lvbnM6IENoYXRQZXJtaXNzaW9ucyxcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcbiAgICAgICAgICAgIFwicmVzdHJpY3RDaGF0TWVtYmVyXCIsXG4gICAgICAgICAgICBcImNoYXRfaWRcIiB8IFwidXNlcl9pZFwiIHwgXCJwZXJtaXNzaW9uc1wiXG4gICAgICAgID4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGkucmVzdHJpY3RDaGF0TWVtYmVyKFxuICAgICAgICAgICAgb3JUaHJvdyh0aGlzLmNoYXQsIFwicmVzdHJpY3RBdXRob3JcIikuaWQsXG4gICAgICAgICAgICBvclRocm93KHRoaXMuZnJvbSwgXCJyZXN0cmljdEF1dGhvclwiKS5pZCxcbiAgICAgICAgICAgIHBlcm1pc3Npb25zLFxuICAgICAgICAgICAgb3RoZXIsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5yZXN0cmljdENoYXRNZW1iZXJgLiBVc2UgdGhpcyBtZXRob2QgdG8gcmVzdHJpY3QgYSB1c2VyIGluIGEgc3VwZXJncm91cC4gVGhlIGJvdCBtdXN0IGJlIGFuIGFkbWluaXN0cmF0b3IgaW4gdGhlIHN1cGVyZ3JvdXAgZm9yIHRoaXMgdG8gd29yayBhbmQgbXVzdCBoYXZlIHRoZSBhcHByb3ByaWF0ZSBhZG1pbmlzdHJhdG9yIHJpZ2h0cy4gUGFzcyBUcnVlIGZvciBhbGwgcGVybWlzc2lvbnMgdG8gbGlmdCByZXN0cmljdGlvbnMgZnJvbSBhIHVzZXIuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHVzZXJfaWQgVW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHRhcmdldCB1c2VyXG4gICAgICogQHBhcmFtIHBlcm1pc3Npb25zIEFuIG9iamVjdCBmb3IgbmV3IHVzZXIgcGVybWlzc2lvbnNcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNyZXN0cmljdGNoYXRtZW1iZXJcbiAgICAgKi9cbiAgICByZXN0cmljdENoYXRNZW1iZXIoXG4gICAgICAgIHVzZXJfaWQ6IG51bWJlcixcbiAgICAgICAgcGVybWlzc2lvbnM6IENoYXRQZXJtaXNzaW9ucyxcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcbiAgICAgICAgICAgIFwicmVzdHJpY3RDaGF0TWVtYmVyXCIsXG4gICAgICAgICAgICBcImNoYXRfaWRcIiB8IFwidXNlcl9pZFwiIHwgXCJwZXJtaXNzaW9uc1wiXG4gICAgICAgID4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGkucmVzdHJpY3RDaGF0TWVtYmVyKFxuICAgICAgICAgICAgb3JUaHJvdyh0aGlzLmNoYXQsIFwicmVzdHJpY3RDaGF0TWVtYmVyXCIpLmlkLFxuICAgICAgICAgICAgdXNlcl9pZCxcbiAgICAgICAgICAgIHBlcm1pc3Npb25zLFxuICAgICAgICAgICAgb3RoZXIsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5wcm9tb3RlQ2hhdE1lbWJlcmAuIFVzZSB0aGlzIG1ldGhvZCB0byBwcm9tb3RlIG9yIGRlbW90ZSBhIHVzZXIgaW4gYSBzdXBlcmdyb3VwIG9yIGEgY2hhbm5lbC4gVGhlIGJvdCBtdXN0IGJlIGFuIGFkbWluaXN0cmF0b3IgaW4gdGhlIGNoYXQgZm9yIHRoaXMgdG8gd29yayBhbmQgbXVzdCBoYXZlIHRoZSBhcHByb3ByaWF0ZSBhZG1pbmlzdHJhdG9yIHJpZ2h0cy4gUGFzcyBGYWxzZSBmb3IgYWxsIGJvb2xlYW4gcGFyYW1ldGVycyB0byBkZW1vdGUgYSB1c2VyLiBSZXR1cm5zIFRydWUgb24gc3VjY2Vzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3Byb21vdGVjaGF0bWVtYmVyXG4gICAgICovXG4gICAgcHJvbW90ZUF1dGhvcihcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcInByb21vdGVDaGF0TWVtYmVyXCIsIFwiY2hhdF9pZFwiIHwgXCJ1c2VyX2lkXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLnByb21vdGVDaGF0TWVtYmVyKFxuICAgICAgICAgICAgb3JUaHJvdyh0aGlzLmNoYXQsIFwicHJvbW90ZUF1dGhvclwiKS5pZCxcbiAgICAgICAgICAgIG9yVGhyb3codGhpcy5mcm9tLCBcInByb21vdGVBdXRob3JcIikuaWQsXG4gICAgICAgICAgICBvdGhlcixcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb250ZXh0LWF3YXJlIGFsaWFzIGZvciBgYXBpLnByb21vdGVDaGF0TWVtYmVyYC4gVXNlIHRoaXMgbWV0aG9kIHRvIHByb21vdGUgb3IgZGVtb3RlIGEgdXNlciBpbiBhIHN1cGVyZ3JvdXAgb3IgYSBjaGFubmVsLiBUaGUgYm90IG11c3QgYmUgYW4gYWRtaW5pc3RyYXRvciBpbiB0aGUgY2hhdCBmb3IgdGhpcyB0byB3b3JrIGFuZCBtdXN0IGhhdmUgdGhlIGFwcHJvcHJpYXRlIGFkbWluaXN0cmF0b3IgcmlnaHRzLiBQYXNzIEZhbHNlIGZvciBhbGwgYm9vbGVhbiBwYXJhbWV0ZXJzIHRvIGRlbW90ZSBhIHVzZXIuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHVzZXJfaWQgVW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHRhcmdldCB1c2VyXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjcHJvbW90ZWNoYXRtZW1iZXJcbiAgICAgKi9cbiAgICBwcm9tb3RlQ2hhdE1lbWJlcihcbiAgICAgICAgdXNlcl9pZDogbnVtYmVyLFxuICAgICAgICBvdGhlcj86IE90aGVyPFwicHJvbW90ZUNoYXRNZW1iZXJcIiwgXCJjaGF0X2lkXCIgfCBcInVzZXJfaWRcIj4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGkucHJvbW90ZUNoYXRNZW1iZXIoXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJwcm9tb3RlQ2hhdE1lbWJlclwiKS5pZCxcbiAgICAgICAgICAgIHVzZXJfaWQsXG4gICAgICAgICAgICBvdGhlcixcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb250ZXh0LWF3YXJlIGFsaWFzIGZvciBgYXBpLnNldENoYXRBZG1pbmlzdHJhdG9yQ3VzdG9tVGl0bGVgLiBVc2UgdGhpcyBtZXRob2QgdG8gc2V0IGEgY3VzdG9tIHRpdGxlIGZvciBhbiBhZG1pbmlzdHJhdG9yIGluIGEgc3VwZXJncm91cCBwcm9tb3RlZCBieSB0aGUgYm90LiBSZXR1cm5zIFRydWUgb24gc3VjY2Vzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjdXN0b21fdGl0bGUgTmV3IGN1c3RvbSB0aXRsZSBmb3IgdGhlIGFkbWluaXN0cmF0b3I7IDAtMTYgY2hhcmFjdGVycywgZW1vamkgYXJlIG5vdCBhbGxvd2VkXG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNzZXRjaGF0YWRtaW5pc3RyYXRvcmN1c3RvbXRpdGxlXG4gICAgICovXG4gICAgc2V0Q2hhdEFkbWluaXN0cmF0b3JBdXRob3JDdXN0b21UaXRsZShcbiAgICAgICAgY3VzdG9tX3RpdGxlOiBzdHJpbmcsXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGkuc2V0Q2hhdEFkbWluaXN0cmF0b3JDdXN0b21UaXRsZShcbiAgICAgICAgICAgIG9yVGhyb3codGhpcy5jaGF0LCBcInNldENoYXRBZG1pbmlzdHJhdG9yQXV0aG9yQ3VzdG9tVGl0bGVcIikuaWQsXG4gICAgICAgICAgICBvclRocm93KHRoaXMuZnJvbSwgXCJzZXRDaGF0QWRtaW5pc3RyYXRvckF1dGhvckN1c3RvbVRpdGxlXCIpLmlkLFxuICAgICAgICAgICAgY3VzdG9tX3RpdGxlLFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRleHQtYXdhcmUgYWxpYXMgZm9yIGBhcGkuc2V0Q2hhdEFkbWluaXN0cmF0b3JDdXN0b21UaXRsZWAuIFVzZSB0aGlzIG1ldGhvZCB0byBzZXQgYSBjdXN0b20gdGl0bGUgZm9yIGFuIGFkbWluaXN0cmF0b3IgaW4gYSBzdXBlcmdyb3VwIHByb21vdGVkIGJ5IHRoZSBib3QuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHVzZXJfaWQgVW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHRhcmdldCB1c2VyXG4gICAgICogQHBhcmFtIGN1c3RvbV90aXRsZSBOZXcgY3VzdG9tIHRpdGxlIGZvciB0aGUgYWRtaW5pc3RyYXRvcjsgMC0xNiBjaGFyYWN0ZXJzLCBlbW9qaSBhcmUgbm90IGFsbG93ZWRcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NldGNoYXRhZG1pbmlzdHJhdG9yY3VzdG9tdGl0bGVcbiAgICAgKi9cbiAgICBzZXRDaGF0QWRtaW5pc3RyYXRvckN1c3RvbVRpdGxlKFxuICAgICAgICB1c2VyX2lkOiBudW1iZXIsXG4gICAgICAgIGN1c3RvbV90aXRsZTogc3RyaW5nLFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLnNldENoYXRBZG1pbmlzdHJhdG9yQ3VzdG9tVGl0bGUoXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJzZXRDaGF0QWRtaW5pc3RyYXRvckN1c3RvbVRpdGxlXCIpLmlkLFxuICAgICAgICAgICAgdXNlcl9pZCxcbiAgICAgICAgICAgIGN1c3RvbV90aXRsZSxcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb250ZXh0LWF3YXJlIGFsaWFzIGZvciBgYXBpLmJhbkNoYXRTZW5kZXJDaGF0YC4gVXNlIHRoaXMgbWV0aG9kIHRvIGJhbiBhIGNoYW5uZWwgY2hhdCBpbiBhIHN1cGVyZ3JvdXAgb3IgYSBjaGFubmVsLiBVbnRpbCB0aGUgY2hhdCBpcyB1bmJhbm5lZCwgdGhlIG93bmVyIG9mIHRoZSBiYW5uZWQgY2hhdCB3b24ndCBiZSBhYmxlIHRvIHNlbmQgbWVzc2FnZXMgb24gYmVoYWxmIG9mIGFueSBvZiB0aGVpciBjaGFubmVscy4gVGhlIGJvdCBtdXN0IGJlIGFuIGFkbWluaXN0cmF0b3IgaW4gdGhlIHN1cGVyZ3JvdXAgb3IgY2hhbm5lbCBmb3IgdGhpcyB0byB3b3JrIGFuZCBtdXN0IGhhdmUgdGhlIGFwcHJvcHJpYXRlIGFkbWluaXN0cmF0b3IgcmlnaHRzLiBSZXR1cm5zIFRydWUgb24gc3VjY2Vzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZW5kZXJfY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBvZiB0aGUgdGFyZ2V0IHNlbmRlciBjaGF0XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNiYW5jaGF0c2VuZGVyY2hhdFxuICAgICAqL1xuICAgIGJhbkNoYXRTZW5kZXJDaGF0KHNlbmRlcl9jaGF0X2lkOiBudW1iZXIsIHNpZ25hbD86IEFib3J0U2lnbmFsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaS5iYW5DaGF0U2VuZGVyQ2hhdChcbiAgICAgICAgICAgIG9yVGhyb3codGhpcy5jaGF0LCBcImJhbkNoYXRTZW5kZXJDaGF0XCIpLmlkLFxuICAgICAgICAgICAgc2VuZGVyX2NoYXRfaWQsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS51bmJhbkNoYXRTZW5kZXJDaGF0YC4gVXNlIHRoaXMgbWV0aG9kIHRvIHVuYmFuIGEgcHJldmlvdXNseSBiYW5uZWQgY2hhbm5lbCBjaGF0IGluIGEgc3VwZXJncm91cCBvciBjaGFubmVsLiBUaGUgYm90IG11c3QgYmUgYW4gYWRtaW5pc3RyYXRvciBmb3IgdGhpcyB0byB3b3JrIGFuZCBtdXN0IGhhdmUgdGhlIGFwcHJvcHJpYXRlIGFkbWluaXN0cmF0b3IgcmlnaHRzLiBSZXR1cm5zIFRydWUgb24gc3VjY2Vzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZW5kZXJfY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBvZiB0aGUgdGFyZ2V0IHNlbmRlciBjaGF0XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSN1bmJhbmNoYXRzZW5kZXJjaGF0XG4gICAgICovXG4gICAgdW5iYW5DaGF0U2VuZGVyQ2hhdChcbiAgICAgICAgc2VuZGVyX2NoYXRfaWQ6IG51bWJlcixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaS51bmJhbkNoYXRTZW5kZXJDaGF0KFxuICAgICAgICAgICAgb3JUaHJvdyh0aGlzLmNoYXQsIFwidW5iYW5DaGF0U2VuZGVyQ2hhdFwiKS5pZCxcbiAgICAgICAgICAgIHNlbmRlcl9jaGF0X2lkLFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRleHQtYXdhcmUgYWxpYXMgZm9yIGBhcGkuc2V0Q2hhdFBlcm1pc3Npb25zYC4gVXNlIHRoaXMgbWV0aG9kIHRvIHNldCBkZWZhdWx0IGNoYXQgcGVybWlzc2lvbnMgZm9yIGFsbCBtZW1iZXJzLiBUaGUgYm90IG11c3QgYmUgYW4gYWRtaW5pc3RyYXRvciBpbiB0aGUgZ3JvdXAgb3IgYSBzdXBlcmdyb3VwIGZvciB0aGlzIHRvIHdvcmsgYW5kIG11c3QgaGF2ZSB0aGUgY2FuX3Jlc3RyaWN0X21lbWJlcnMgYWRtaW5pc3RyYXRvciByaWdodHMuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBlcm1pc3Npb25zIE5ldyBkZWZhdWx0IGNoYXQgcGVybWlzc2lvbnNcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NldGNoYXRwZXJtaXNzaW9uc1xuICAgICAqL1xuICAgIHNldENoYXRQZXJtaXNzaW9ucyhwZXJtaXNzaW9uczogQ2hhdFBlcm1pc3Npb25zLCBzaWduYWw/OiBBYm9ydFNpZ25hbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGkuc2V0Q2hhdFBlcm1pc3Npb25zKFxuICAgICAgICAgICAgb3JUaHJvdyh0aGlzLmNoYXQsIFwic2V0Q2hhdFBlcm1pc3Npb25zXCIpLmlkLFxuICAgICAgICAgICAgcGVybWlzc2lvbnMsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5leHBvcnRDaGF0SW52aXRlTGlua2AuIFVzZSB0aGlzIG1ldGhvZCB0byBnZW5lcmF0ZSBhIG5ldyBwcmltYXJ5IGludml0ZSBsaW5rIGZvciBhIGNoYXQ7IGFueSBwcmV2aW91c2x5IGdlbmVyYXRlZCBwcmltYXJ5IGxpbmsgaXMgcmV2b2tlZC4gVGhlIGJvdCBtdXN0IGJlIGFuIGFkbWluaXN0cmF0b3IgaW4gdGhlIGNoYXQgZm9yIHRoaXMgdG8gd29yayBhbmQgbXVzdCBoYXZlIHRoZSBhcHByb3ByaWF0ZSBhZG1pbmlzdHJhdG9yIHJpZ2h0cy4gUmV0dXJucyB0aGUgbmV3IGludml0ZSBsaW5rIGFzIFN0cmluZyBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogTm90ZTogRWFjaCBhZG1pbmlzdHJhdG9yIGluIGEgY2hhdCBnZW5lcmF0ZXMgdGhlaXIgb3duIGludml0ZSBsaW5rcy4gQm90cyBjYW4ndCB1c2UgaW52aXRlIGxpbmtzIGdlbmVyYXRlZCBieSBvdGhlciBhZG1pbmlzdHJhdG9ycy4gSWYgeW91IHdhbnQgeW91ciBib3QgdG8gd29yayB3aXRoIGludml0ZSBsaW5rcywgaXQgd2lsbCBuZWVkIHRvIGdlbmVyYXRlIGl0cyBvd24gbGluayB1c2luZyBleHBvcnRDaGF0SW52aXRlTGluayBvciBieSBjYWxsaW5nIHRoZSBnZXRDaGF0IG1ldGhvZC4gSWYgeW91ciBib3QgbmVlZHMgdG8gZ2VuZXJhdGUgYSBuZXcgcHJpbWFyeSBpbnZpdGUgbGluayByZXBsYWNpbmcgaXRzIHByZXZpb3VzIG9uZSwgdXNlIGV4cG9ydENoYXRJbnZpdGVMaW5rIGFnYWluLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNleHBvcnRjaGF0aW52aXRlbGlua1xuICAgICAqL1xuICAgIGV4cG9ydENoYXRJbnZpdGVMaW5rKHNpZ25hbD86IEFib3J0U2lnbmFsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaS5leHBvcnRDaGF0SW52aXRlTGluayhcbiAgICAgICAgICAgIG9yVGhyb3codGhpcy5jaGF0LCBcImV4cG9ydENoYXRJbnZpdGVMaW5rXCIpLmlkLFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRleHQtYXdhcmUgYWxpYXMgZm9yIGBhcGkuY3JlYXRlQ2hhdEludml0ZUxpbmtgLiBVc2UgdGhpcyBtZXRob2QgdG8gY3JlYXRlIGFuIGFkZGl0aW9uYWwgaW52aXRlIGxpbmsgZm9yIGEgY2hhdC4gVGhlIGJvdCBtdXN0IGJlIGFuIGFkbWluaXN0cmF0b3IgaW4gdGhlIGNoYXQgZm9yIHRoaXMgdG8gd29yayBhbmQgbXVzdCBoYXZlIHRoZSBhcHByb3ByaWF0ZSBhZG1pbmlzdHJhdG9yIHJpZ2h0cy4gVGhlIGxpbmsgY2FuIGJlIHJldm9rZWQgdXNpbmcgdGhlIG1ldGhvZCByZXZva2VDaGF0SW52aXRlTGluay4gUmV0dXJucyB0aGUgbmV3IGludml0ZSBsaW5rIGFzIENoYXRJbnZpdGVMaW5rIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI2NyZWF0ZWNoYXRpbnZpdGVsaW5rXG4gICAgICovXG4gICAgY3JlYXRlQ2hhdEludml0ZUxpbmsoXG4gICAgICAgIG90aGVyPzogT3RoZXI8XCJjcmVhdGVDaGF0SW52aXRlTGlua1wiLCBcImNoYXRfaWRcIj4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGkuY3JlYXRlQ2hhdEludml0ZUxpbmsoXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJjcmVhdGVDaGF0SW52aXRlTGlua1wiKS5pZCxcbiAgICAgICAgICAgIG90aGVyLFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqICBDb250ZXh0LWF3YXJlIGFsaWFzIGZvciBgYXBpLmVkaXRDaGF0SW52aXRlTGlua2AuIFVzZSB0aGlzIG1ldGhvZCB0byBlZGl0IGEgbm9uLXByaW1hcnkgaW52aXRlIGxpbmsgY3JlYXRlZCBieSB0aGUgYm90LiBUaGUgYm90IG11c3QgYmUgYW4gYWRtaW5pc3RyYXRvciBpbiB0aGUgY2hhdCBmb3IgdGhpcyB0byB3b3JrIGFuZCBtdXN0IGhhdmUgdGhlIGFwcHJvcHJpYXRlIGFkbWluaXN0cmF0b3IgcmlnaHRzLiBSZXR1cm5zIHRoZSBlZGl0ZWQgaW52aXRlIGxpbmsgYXMgYSBDaGF0SW52aXRlTGluayBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW52aXRlX2xpbmsgVGhlIGludml0ZSBsaW5rIHRvIGVkaXRcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNlZGl0Y2hhdGludml0ZWxpbmtcbiAgICAgKi9cbiAgICBlZGl0Q2hhdEludml0ZUxpbmsoXG4gICAgICAgIGludml0ZV9saW5rOiBzdHJpbmcsXG4gICAgICAgIG90aGVyPzogT3RoZXI8XCJlZGl0Q2hhdEludml0ZUxpbmtcIiwgXCJjaGF0X2lkXCIgfCBcImludml0ZV9saW5rXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLmVkaXRDaGF0SW52aXRlTGluayhcbiAgICAgICAgICAgIG9yVGhyb3codGhpcy5jaGF0LCBcImVkaXRDaGF0SW52aXRlTGlua1wiKS5pZCxcbiAgICAgICAgICAgIGludml0ZV9saW5rLFxuICAgICAgICAgICAgb3RoZXIsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogIENvbnRleHQtYXdhcmUgYWxpYXMgZm9yIGBhcGkucmV2b2tlQ2hhdEludml0ZUxpbmtgLiBVc2UgdGhpcyBtZXRob2QgdG8gcmV2b2tlIGFuIGludml0ZSBsaW5rIGNyZWF0ZWQgYnkgdGhlIGJvdC4gSWYgdGhlIHByaW1hcnkgbGluayBpcyByZXZva2VkLCBhIG5ldyBsaW5rIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkLiBUaGUgYm90IG11c3QgYmUgYW4gYWRtaW5pc3RyYXRvciBpbiB0aGUgY2hhdCBmb3IgdGhpcyB0byB3b3JrIGFuZCBtdXN0IGhhdmUgdGhlIGFwcHJvcHJpYXRlIGFkbWluaXN0cmF0b3IgcmlnaHRzLiBSZXR1cm5zIHRoZSByZXZva2VkIGludml0ZSBsaW5rIGFzIENoYXRJbnZpdGVMaW5rIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbnZpdGVfbGluayBUaGUgaW52aXRlIGxpbmsgdG8gcmV2b2tlXG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNyZXZva2VjaGF0aW52aXRlbGlua1xuICAgICAqL1xuICAgIHJldm9rZUNoYXRJbnZpdGVMaW5rKGludml0ZV9saW5rOiBzdHJpbmcsIHNpZ25hbD86IEFib3J0U2lnbmFsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaS5yZXZva2VDaGF0SW52aXRlTGluayhcbiAgICAgICAgICAgIG9yVGhyb3codGhpcy5jaGF0LCBcImVkaXRDaGF0SW52aXRlTGlua1wiKS5pZCxcbiAgICAgICAgICAgIGludml0ZV9saW5rLFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRleHQtYXdhcmUgYWxpYXMgZm9yIGBhcGkuYXBwcm92ZUNoYXRKb2luUmVxdWVzdGAuIFVzZSB0aGlzIG1ldGhvZCB0byBhcHByb3ZlIGEgY2hhdCBqb2luIHJlcXVlc3QuIFRoZSBib3QgbXVzdCBiZSBhbiBhZG1pbmlzdHJhdG9yIGluIHRoZSBjaGF0IGZvciB0aGlzIHRvIHdvcmsgYW5kIG11c3QgaGF2ZSB0aGUgY2FuX2ludml0ZV91c2VycyBhZG1pbmlzdHJhdG9yIHJpZ2h0LiBSZXR1cm5zIFRydWUgb24gc3VjY2Vzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB1c2VyX2lkIFVuaXF1ZSBpZGVudGlmaWVyIG9mIHRoZSB0YXJnZXQgdXNlclxuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjYXBwcm92ZWNoYXRqb2lucmVxdWVzdFxuICAgICAqL1xuICAgIGFwcHJvdmVDaGF0Sm9pblJlcXVlc3QoXG4gICAgICAgIHVzZXJfaWQ6IG51bWJlcixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaS5hcHByb3ZlQ2hhdEpvaW5SZXF1ZXN0KFxuICAgICAgICAgICAgb3JUaHJvdyh0aGlzLmNoYXQsIFwiYXBwcm92ZUNoYXRKb2luUmVxdWVzdFwiKS5pZCxcbiAgICAgICAgICAgIHVzZXJfaWQsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5kZWNsaW5lQ2hhdEpvaW5SZXF1ZXN0YC4gVXNlIHRoaXMgbWV0aG9kIHRvIGRlY2xpbmUgYSBjaGF0IGpvaW4gcmVxdWVzdC4gVGhlIGJvdCBtdXN0IGJlIGFuIGFkbWluaXN0cmF0b3IgaW4gdGhlIGNoYXQgZm9yIHRoaXMgdG8gd29yayBhbmQgbXVzdCBoYXZlIHRoZSBjYW5faW52aXRlX3VzZXJzIGFkbWluaXN0cmF0b3IgcmlnaHQuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHVzZXJfaWQgVW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHRhcmdldCB1c2VyXG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNkZWNsaW5lY2hhdGpvaW5yZXF1ZXN0XG4gICAgICovXG4gICAgZGVjbGluZUNoYXRKb2luUmVxdWVzdChcbiAgICAgICAgdXNlcl9pZDogbnVtYmVyLFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLmRlY2xpbmVDaGF0Sm9pblJlcXVlc3QoXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJkZWNsaW5lQ2hhdEpvaW5SZXF1ZXN0XCIpLmlkLFxuICAgICAgICAgICAgdXNlcl9pZCxcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb250ZXh0LWF3YXJlIGFsaWFzIGZvciBgYXBpLnNldENoYXRQaG90b2AuIFVzZSB0aGlzIG1ldGhvZCB0byBzZXQgYSBuZXcgcHJvZmlsZSBwaG90byBmb3IgdGhlIGNoYXQuIFBob3RvcyBjYW4ndCBiZSBjaGFuZ2VkIGZvciBwcml2YXRlIGNoYXRzLiBUaGUgYm90IG11c3QgYmUgYW4gYWRtaW5pc3RyYXRvciBpbiB0aGUgY2hhdCBmb3IgdGhpcyB0byB3b3JrIGFuZCBtdXN0IGhhdmUgdGhlIGFwcHJvcHJpYXRlIGFkbWluaXN0cmF0b3IgcmlnaHRzLiBSZXR1cm5zIFRydWUgb24gc3VjY2Vzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwaG90byBOZXcgY2hhdCBwaG90bywgdXBsb2FkZWQgdXNpbmcgbXVsdGlwYXJ0L2Zvcm0tZGF0YVxuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2V0Y2hhdHBob3RvXG4gICAgICovXG4gICAgc2V0Q2hhdFBob3RvKHBob3RvOiBJbnB1dEZpbGUsIHNpZ25hbD86IEFib3J0U2lnbmFsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaS5zZXRDaGF0UGhvdG8oXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJzZXRDaGF0UGhvdG9cIikuaWQsXG4gICAgICAgICAgICBwaG90byxcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb250ZXh0LWF3YXJlIGFsaWFzIGZvciBgYXBpLmRlbGV0ZUNoYXRQaG90b2AuIFVzZSB0aGlzIG1ldGhvZCB0byBkZWxldGUgYSBjaGF0IHBob3RvLiBQaG90b3MgY2FuJ3QgYmUgY2hhbmdlZCBmb3IgcHJpdmF0ZSBjaGF0cy4gVGhlIGJvdCBtdXN0IGJlIGFuIGFkbWluaXN0cmF0b3IgaW4gdGhlIGNoYXQgZm9yIHRoaXMgdG8gd29yayBhbmQgbXVzdCBoYXZlIHRoZSBhcHByb3ByaWF0ZSBhZG1pbmlzdHJhdG9yIHJpZ2h0cy4gUmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI2RlbGV0ZWNoYXRwaG90b1xuICAgICAqL1xuICAgIGRlbGV0ZUNoYXRQaG90byhzaWduYWw/OiBBYm9ydFNpZ25hbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGkuZGVsZXRlQ2hhdFBob3RvKFxuICAgICAgICAgICAgb3JUaHJvdyh0aGlzLmNoYXQsIFwiZGVsZXRlQ2hhdFBob3RvXCIpLmlkLFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRleHQtYXdhcmUgYWxpYXMgZm9yIGBhcGkuc2V0Q2hhdFRpdGxlYC4gVXNlIHRoaXMgbWV0aG9kIHRvIGNoYW5nZSB0aGUgdGl0bGUgb2YgYSBjaGF0LiBUaXRsZXMgY2FuJ3QgYmUgY2hhbmdlZCBmb3IgcHJpdmF0ZSBjaGF0cy4gVGhlIGJvdCBtdXN0IGJlIGFuIGFkbWluaXN0cmF0b3IgaW4gdGhlIGNoYXQgZm9yIHRoaXMgdG8gd29yayBhbmQgbXVzdCBoYXZlIHRoZSBhcHByb3ByaWF0ZSBhZG1pbmlzdHJhdG9yIHJpZ2h0cy4gUmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGl0bGUgTmV3IGNoYXQgdGl0bGUsIDEtMjU1IGNoYXJhY3RlcnNcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NldGNoYXR0aXRsZVxuICAgICAqL1xuICAgIHNldENoYXRUaXRsZSh0aXRsZTogc3RyaW5nLCBzaWduYWw/OiBBYm9ydFNpZ25hbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGkuc2V0Q2hhdFRpdGxlKFxuICAgICAgICAgICAgb3JUaHJvdyh0aGlzLmNoYXQsIFwic2V0Q2hhdFRpdGxlXCIpLmlkLFxuICAgICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5zZXRDaGF0RGVzY3JpcHRpb25gLiBVc2UgdGhpcyBtZXRob2QgdG8gY2hhbmdlIHRoZSBkZXNjcmlwdGlvbiBvZiBhIGdyb3VwLCBhIHN1cGVyZ3JvdXAgb3IgYSBjaGFubmVsLiBUaGUgYm90IG11c3QgYmUgYW4gYWRtaW5pc3RyYXRvciBpbiB0aGUgY2hhdCBmb3IgdGhpcyB0byB3b3JrIGFuZCBtdXN0IGhhdmUgdGhlIGFwcHJvcHJpYXRlIGFkbWluaXN0cmF0b3IgcmlnaHRzLiBSZXR1cm5zIFRydWUgb24gc3VjY2Vzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkZXNjcmlwdGlvbiBOZXcgY2hhdCBkZXNjcmlwdGlvbiwgMC0yNTUgY2hhcmFjdGVyc1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2V0Y2hhdGRlc2NyaXB0aW9uXG4gICAgICovXG4gICAgc2V0Q2hhdERlc2NyaXB0aW9uKGRlc2NyaXB0aW9uOiBzdHJpbmcgfCB1bmRlZmluZWQsIHNpZ25hbD86IEFib3J0U2lnbmFsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaS5zZXRDaGF0RGVzY3JpcHRpb24oXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJzZXRDaGF0RGVzY3JpcHRpb25cIikuaWQsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb250ZXh0LWF3YXJlIGFsaWFzIGZvciBgYXBpLnBpbkNoYXRNZXNzYWdlYC4gVXNlIHRoaXMgbWV0aG9kIHRvIGFkZCBhIG1lc3NhZ2UgdG8gdGhlIGxpc3Qgb2YgcGlubmVkIG1lc3NhZ2VzIGluIGEgY2hhdC4gSWYgdGhlIGNoYXQgaXMgbm90IGEgcHJpdmF0ZSBjaGF0LCB0aGUgYm90IG11c3QgYmUgYW4gYWRtaW5pc3RyYXRvciBpbiB0aGUgY2hhdCBmb3IgdGhpcyB0byB3b3JrIGFuZCBtdXN0IGhhdmUgdGhlICdjYW5fcGluX21lc3NhZ2VzJyBhZG1pbmlzdHJhdG9yIHJpZ2h0IGluIGEgc3VwZXJncm91cCBvciAnY2FuX2VkaXRfbWVzc2FnZXMnIGFkbWluaXN0cmF0b3IgcmlnaHQgaW4gYSBjaGFubmVsLiBSZXR1cm5zIFRydWUgb24gc3VjY2Vzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtZXNzYWdlX2lkIElkZW50aWZpZXIgb2YgYSBtZXNzYWdlIHRvIHBpblxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3BpbmNoYXRtZXNzYWdlXG4gICAgICovXG4gICAgcGluQ2hhdE1lc3NhZ2UoXG4gICAgICAgIG1lc3NhZ2VfaWQ6IG51bWJlcixcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcInBpbkNoYXRNZXNzYWdlXCIsIFwiY2hhdF9pZFwiIHwgXCJtZXNzYWdlX2lkXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLnBpbkNoYXRNZXNzYWdlKFxuICAgICAgICAgICAgb3JUaHJvdyh0aGlzLmNoYXQsIFwicGluQ2hhdE1lc3NhZ2VcIikuaWQsXG4gICAgICAgICAgICBtZXNzYWdlX2lkLFxuICAgICAgICAgICAgb3RoZXIsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS51bnBpbkNoYXRNZXNzYWdlYC4gVXNlIHRoaXMgbWV0aG9kIHRvIHJlbW92ZSBhIG1lc3NhZ2UgZnJvbSB0aGUgbGlzdCBvZiBwaW5uZWQgbWVzc2FnZXMgaW4gYSBjaGF0LiBJZiB0aGUgY2hhdCBpcyBub3QgYSBwcml2YXRlIGNoYXQsIHRoZSBib3QgbXVzdCBiZSBhbiBhZG1pbmlzdHJhdG9yIGluIHRoZSBjaGF0IGZvciB0aGlzIHRvIHdvcmsgYW5kIG11c3QgaGF2ZSB0aGUgJ2Nhbl9waW5fbWVzc2FnZXMnIGFkbWluaXN0cmF0b3IgcmlnaHQgaW4gYSBzdXBlcmdyb3VwIG9yICdjYW5fZWRpdF9tZXNzYWdlcycgYWRtaW5pc3RyYXRvciByaWdodCBpbiBhIGNoYW5uZWwuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1lc3NhZ2VfaWQgSWRlbnRpZmllciBvZiBhIG1lc3NhZ2UgdG8gdW5waW4uIElmIG5vdCBzcGVjaWZpZWQsIHRoZSBtb3N0IHJlY2VudCBwaW5uZWQgbWVzc2FnZSAoYnkgc2VuZGluZyBkYXRlKSB3aWxsIGJlIHVucGlubmVkLlxuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjdW5waW5jaGF0bWVzc2FnZVxuICAgICAqL1xuICAgIHVucGluQ2hhdE1lc3NhZ2UobWVzc2FnZV9pZD86IG51bWJlciwgc2lnbmFsPzogQWJvcnRTaWduYWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLnVucGluQ2hhdE1lc3NhZ2UoXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJ1bnBpbkNoYXRNZXNzYWdlXCIpLmlkLFxuICAgICAgICAgICAgbWVzc2FnZV9pZCxcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb250ZXh0LWF3YXJlIGFsaWFzIGZvciBgYXBpLnVucGluQWxsQ2hhdE1lc3NhZ2VzYC4gVXNlIHRoaXMgbWV0aG9kIHRvIGNsZWFyIHRoZSBsaXN0IG9mIHBpbm5lZCBtZXNzYWdlcyBpbiBhIGNoYXQuIElmIHRoZSBjaGF0IGlzIG5vdCBhIHByaXZhdGUgY2hhdCwgdGhlIGJvdCBtdXN0IGJlIGFuIGFkbWluaXN0cmF0b3IgaW4gdGhlIGNoYXQgZm9yIHRoaXMgdG8gd29yayBhbmQgbXVzdCBoYXZlIHRoZSAnY2FuX3Bpbl9tZXNzYWdlcycgYWRtaW5pc3RyYXRvciByaWdodCBpbiBhIHN1cGVyZ3JvdXAgb3IgJ2Nhbl9lZGl0X21lc3NhZ2VzJyBhZG1pbmlzdHJhdG9yIHJpZ2h0IGluIGEgY2hhbm5lbC4gUmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3VucGluYWxsY2hhdG1lc3NhZ2VzXG4gICAgICovXG4gICAgdW5waW5BbGxDaGF0TWVzc2FnZXMoc2lnbmFsPzogQWJvcnRTaWduYWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLnVucGluQWxsQ2hhdE1lc3NhZ2VzKFxuICAgICAgICAgICAgb3JUaHJvdyh0aGlzLmNoYXQsIFwidW5waW5BbGxDaGF0TWVzc2FnZXNcIikuaWQsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5sZWF2ZUNoYXRgLiBVc2UgdGhpcyBtZXRob2QgZm9yIHlvdXIgYm90IHRvIGxlYXZlIGEgZ3JvdXAsIHN1cGVyZ3JvdXAgb3IgY2hhbm5lbC4gUmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI2xlYXZlY2hhdFxuICAgICAqL1xuICAgIGxlYXZlQ2hhdChzaWduYWw/OiBBYm9ydFNpZ25hbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGkubGVhdmVDaGF0KG9yVGhyb3codGhpcy5jaGF0LCBcImxlYXZlQ2hhdFwiKS5pZCwgc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb250ZXh0LWF3YXJlIGFsaWFzIGZvciBgYXBpLmdldENoYXRgLiBVc2UgdGhpcyBtZXRob2QgdG8gZ2V0IHVwIHRvIGRhdGUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNoYXQgKGN1cnJlbnQgbmFtZSBvZiB0aGUgdXNlciBmb3Igb25lLW9uLW9uZSBjb252ZXJzYXRpb25zLCBjdXJyZW50IHVzZXJuYW1lIG9mIGEgdXNlciwgZ3JvdXAgb3IgY2hhbm5lbCwgZXRjLikuIFJldHVybnMgYSBDaGF0IG9iamVjdCBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNnZXRjaGF0XG4gICAgICovXG4gICAgZ2V0Q2hhdChzaWduYWw/OiBBYm9ydFNpZ25hbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGkuZ2V0Q2hhdChvclRocm93KHRoaXMuY2hhdCwgXCJnZXRDaGF0XCIpLmlkLCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRleHQtYXdhcmUgYWxpYXMgZm9yIGBhcGkuZ2V0Q2hhdEFkbWluaXN0cmF0b3JzYC4gVXNlIHRoaXMgbWV0aG9kIHRvIGdldCBhIGxpc3Qgb2YgYWRtaW5pc3RyYXRvcnMgaW4gYSBjaGF0LiBPbiBzdWNjZXNzLCByZXR1cm5zIGFuIEFycmF5IG9mIENoYXRNZW1iZXIgb2JqZWN0cyB0aGF0IGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IGFsbCBjaGF0IGFkbWluaXN0cmF0b3JzIGV4Y2VwdCBvdGhlciBib3RzLiBJZiB0aGUgY2hhdCBpcyBhIGdyb3VwIG9yIGEgc3VwZXJncm91cCBhbmQgbm8gYWRtaW5pc3RyYXRvcnMgd2VyZSBhcHBvaW50ZWQsIG9ubHkgdGhlIGNyZWF0b3Igd2lsbCBiZSByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjZ2V0Y2hhdGFkbWluaXN0cmF0b3JzXG4gICAgICovXG4gICAgZ2V0Q2hhdEFkbWluaXN0cmF0b3JzKHNpZ25hbD86IEFib3J0U2lnbmFsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaS5nZXRDaGF0QWRtaW5pc3RyYXRvcnMoXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJnZXRDaGF0QWRtaW5pc3RyYXRvcnNcIikuaWQsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqIEBkZXByZWNhdGVkIFVzZSBgZ2V0Q2hhdE1lbWJlcnNDb3VudGAgaW5zdGVhZC4gKi9cbiAgICBnZXRDaGF0TWVtYmVyc0NvdW50KC4uLmFyZ3M6IFBhcmFtZXRlcnM8Q29udGV4dFtcImdldENoYXRNZW1iZXJDb3VudFwiXT4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2hhdE1lbWJlckNvdW50KC4uLmFyZ3MpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRleHQtYXdhcmUgYWxpYXMgZm9yIGBhcGkuZ2V0Q2hhdE1lbWJlckNvdW50YC4gVXNlIHRoaXMgbWV0aG9kIHRvIGdldCB0aGUgbnVtYmVyIG9mIG1lbWJlcnMgaW4gYSBjaGF0LiBSZXR1cm5zIEludCBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNnZXRjaGF0bWVtYmVyY291bnRcbiAgICAgKi9cbiAgICBnZXRDaGF0TWVtYmVyQ291bnQoc2lnbmFsPzogQWJvcnRTaWduYWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLmdldENoYXRNZW1iZXJDb3VudChcbiAgICAgICAgICAgIG9yVGhyb3codGhpcy5jaGF0LCBcImdldENoYXRNZW1iZXJDb3VudFwiKS5pZCxcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb250ZXh0LWF3YXJlIGFsaWFzIGZvciBgYXBpLmdldENoYXRNZW1iZXJgLiBVc2UgdGhpcyBtZXRob2QgdG8gZ2V0IGluZm9ybWF0aW9uIGFib3V0IGEgbWVtYmVyIG9mIGEgY2hhdC4gUmV0dXJucyBhIENoYXRNZW1iZXIgb2JqZWN0IG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI2dldGNoYXRtZW1iZXJcbiAgICAgKi9cbiAgICBnZXRBdXRob3Ioc2lnbmFsPzogQWJvcnRTaWduYWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLmdldENoYXRNZW1iZXIoXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJnZXRBdXRob3JcIikuaWQsXG4gICAgICAgICAgICBvclRocm93KHRoaXMuZnJvbSwgXCJnZXRBdXRob3JcIikuaWQsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5nZXRDaGF0TWVtYmVyYC4gVXNlIHRoaXMgbWV0aG9kIHRvIGdldCBpbmZvcm1hdGlvbiBhYm91dCBhIG1lbWJlciBvZiBhIGNoYXQuIFJldHVybnMgYSBDaGF0TWVtYmVyIG9iamVjdCBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHVzZXJfaWQgVW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHRhcmdldCB1c2VyXG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNnZXRjaGF0bWVtYmVyXG4gICAgICovXG4gICAgZ2V0Q2hhdE1lbWJlcih1c2VyX2lkOiBudW1iZXIsIHNpZ25hbD86IEFib3J0U2lnbmFsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaS5nZXRDaGF0TWVtYmVyKFxuICAgICAgICAgICAgb3JUaHJvdyh0aGlzLmNoYXQsIFwiZ2V0Q2hhdE1lbWJlclwiKS5pZCxcbiAgICAgICAgICAgIHVzZXJfaWQsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5zZXRDaGF0U3RpY2tlclNldGAuIFVzZSB0aGlzIG1ldGhvZCB0byBzZXQgYSBuZXcgZ3JvdXAgc3RpY2tlciBzZXQgZm9yIGEgc3VwZXJncm91cC4gVGhlIGJvdCBtdXN0IGJlIGFuIGFkbWluaXN0cmF0b3IgaW4gdGhlIGNoYXQgZm9yIHRoaXMgdG8gd29yayBhbmQgbXVzdCBoYXZlIHRoZSBhcHByb3ByaWF0ZSBhZG1pbmlzdHJhdG9yIHJpZ2h0cy4gVXNlIHRoZSBmaWVsZCBjYW5fc2V0X3N0aWNrZXJfc2V0IGx5IHJldHVybmVkIGluIGdldENoYXQgcmVxdWVzdHMgdG8gY2hlY2sgaWYgdGhlIGJvdCBjYW4gdXNlIHRoaXMgbWV0aG9kLiBSZXR1cm5zIFRydWUgb24gc3VjY2Vzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGlja2VyX3NldF9uYW1lIE5hbWUgb2YgdGhlIHN0aWNrZXIgc2V0IHRvIGJlIHNldCBhcyB0aGUgZ3JvdXAgc3RpY2tlciBzZXRcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NldGNoYXRzdGlja2Vyc2V0XG4gICAgICovXG4gICAgc2V0Q2hhdFN0aWNrZXJTZXQoc3RpY2tlcl9zZXRfbmFtZTogc3RyaW5nLCBzaWduYWw/OiBBYm9ydFNpZ25hbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGkuc2V0Q2hhdFN0aWNrZXJTZXQoXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJzZXRDaGF0U3RpY2tlclNldFwiKS5pZCxcbiAgICAgICAgICAgIHN0aWNrZXJfc2V0X25hbWUsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5kZWxldGVDaGF0U3RpY2tlclNldGAuIFVzZSB0aGlzIG1ldGhvZCB0byBkZWxldGUgYSBncm91cCBzdGlja2VyIHNldCBmcm9tIGEgc3VwZXJncm91cC4gVGhlIGJvdCBtdXN0IGJlIGFuIGFkbWluaXN0cmF0b3IgaW4gdGhlIGNoYXQgZm9yIHRoaXMgdG8gd29yayBhbmQgbXVzdCBoYXZlIHRoZSBhcHByb3ByaWF0ZSBhZG1pbmlzdHJhdG9yIHJpZ2h0cy4gVXNlIHRoZSBmaWVsZCBjYW5fc2V0X3N0aWNrZXJfc2V0IGx5IHJldHVybmVkIGluIGdldENoYXQgcmVxdWVzdHMgdG8gY2hlY2sgaWYgdGhlIGJvdCBjYW4gdXNlIHRoaXMgbWV0aG9kLiBSZXR1cm5zIFRydWUgb24gc3VjY2Vzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjZGVsZXRlY2hhdHN0aWNrZXJzZXRcbiAgICAgKi9cbiAgICBkZWxldGVDaGF0U3RpY2tlclNldChzaWduYWw/OiBBYm9ydFNpZ25hbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGkuZGVsZXRlQ2hhdFN0aWNrZXJTZXQoXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJkZWxldGVDaGF0U3RpY2tlclNldFwiKS5pZCxcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb250ZXh0LWF3YXJlIGFsaWFzIGZvciBgYXBpLmFuc3dlckNhbGxiYWNrUXVlcnlgLiBVc2UgdGhpcyBtZXRob2QgdG8gc2VuZCBhbnN3ZXJzIHRvIGNhbGxiYWNrIHF1ZXJpZXMgc2VudCBmcm9tIGlubGluZSBrZXlib2FyZHMuIFRoZSBhbnN3ZXIgd2lsbCBiZSBkaXNwbGF5ZWQgdG8gdGhlIHVzZXIgYXMgYSBub3RpZmljYXRpb24gYXQgdGhlIHRvcCBvZiB0aGUgY2hhdCBzY3JlZW4gb3IgYXMgYW4gYWxlcnQuIE9uIHN1Y2Nlc3MsIFRydWUgaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBBbHRlcm5hdGl2ZWx5LCB0aGUgdXNlciBjYW4gYmUgcmVkaXJlY3RlZCB0byB0aGUgc3BlY2lmaWVkIEdhbWUgVVJMLiBGb3IgdGhpcyBvcHRpb24gdG8gd29yaywgeW91IG11c3QgZmlyc3QgY3JlYXRlIGEgZ2FtZSBmb3IgeW91ciBib3QgdmlhIEBCb3RmYXRoZXIgYW5kIGFjY2VwdCB0aGUgdGVybXMuIE90aGVyd2lzZSwgeW91IG1heSB1c2UgbGlua3MgbGlrZSB0Lm1lL3lvdXJfYm90P3N0YXJ0PVhYWFggdGhhdCBvcGVuIHlvdXIgYm90IHdpdGggYSBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNhbnN3ZXJjYWxsYmFja3F1ZXJ5XG4gICAgICovXG4gICAgYW5zd2VyQ2FsbGJhY2tRdWVyeShcbiAgICAgICAgb3RoZXI/OiBzdHJpbmcgfCBPdGhlcjxcImFuc3dlckNhbGxiYWNrUXVlcnlcIiwgXCJjYWxsYmFja19xdWVyeV9pZFwiPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaS5hbnN3ZXJDYWxsYmFja1F1ZXJ5KFxuICAgICAgICAgICAgb3JUaHJvdyh0aGlzLmNhbGxiYWNrUXVlcnksIFwiYW5zd2VyQ2FsbGJhY2tRdWVyeVwiKS5pZCxcbiAgICAgICAgICAgIHR5cGVvZiBvdGhlciA9PT0gXCJzdHJpbmdcIiA/IHsgdGV4dDogb3RoZXIgfSA6IG90aGVyLFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRleHQtYXdhcmUgYWxpYXMgZm9yIGBhcGkuc2V0Q2hhdE1lbnVCdXR0b25gLiBVc2UgdGhpcyBtZXRob2QgdG8gY2hhbmdlIHRoZSBib3QncyBtZW51IGJ1dHRvbiBpbiBhIHByaXZhdGUgY2hhdCwgb3IgdGhlIGRlZmF1bHQgbWVudSBidXR0b24uIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2V0Y2hhdG1lbnVidXR0b25cbiAgICAgKi9cbiAgICBzZXRDaGF0TWVudUJ1dHRvbihcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcInNldENoYXRNZW51QnV0dG9uXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLnNldENoYXRNZW51QnV0dG9uKG90aGVyLCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRleHQtYXdhcmUgYWxpYXMgZm9yIGBhcGkuZ2V0Q2hhdE1lbnVCdXR0b25gLiBVc2UgdGhpcyBtZXRob2QgdG8gZ2V0IHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSBib3QncyBtZW51IGJ1dHRvbiBpbiBhIHByaXZhdGUgY2hhdCwgb3IgdGhlIGRlZmF1bHQgbWVudSBidXR0b24uIFJldHVybnMgTWVudUJ1dHRvbiBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2V0Y2hhdG1lbnVidXR0b25cbiAgICAgKi9cbiAgICBnZXRDaGF0TWVudUJ1dHRvbihcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcImdldENoYXRNZW51QnV0dG9uXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLmdldENoYXRNZW51QnV0dG9uKG90aGVyLCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRleHQtYXdhcmUgYWxpYXMgZm9yIGBhcGkuc2V0TXlEZWZhdWx0QWRtaW5pc3RyYXRvclJpZ2h0c2AuIFVzZSB0aGlzIG1ldGhvZCB0byB0aGUgY2hhbmdlIHRoZSBkZWZhdWx0IGFkbWluaXN0cmF0b3IgcmlnaHRzIHJlcXVlc3RlZCBieSB0aGUgYm90IHdoZW4gaXQncyBhZGRlZCBhcyBhbiBhZG1pbmlzdHJhdG9yIHRvIGdyb3VwcyBvciBjaGFubmVscy4gVGhlc2UgcmlnaHRzIHdpbGwgYmUgc3VnZ2VzdGVkIHRvIHVzZXJzLCBidXQgdGhleSBhcmUgYXJlIGZyZWUgdG8gbW9kaWZ5IHRoZSBsaXN0IGJlZm9yZSBhZGRpbmcgdGhlIGJvdC4gUmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNzZXRteWRlZmF1bHRhZG1pbmlzdHJhdG9ycmlnaHRzXG4gICAgICovXG4gICAgc2V0TXlEZWZhdWx0QWRtaW5pc3RyYXRvclJpZ2h0cyhcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcInNldE15RGVmYXVsdEFkbWluaXN0cmF0b3JSaWdodHNcIj4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGkuc2V0TXlEZWZhdWx0QWRtaW5pc3RyYXRvclJpZ2h0cyhvdGhlciwgc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb250ZXh0LWF3YXJlIGFsaWFzIGZvciBgYXBpLmdldE15RGVmYXVsdEFkbWluaXN0cmF0b3JSaWdodHNgLiBVc2UgdGhpcyBtZXRob2QgdG8gZ2V0IHRoZSBjdXJyZW50IGRlZmF1bHQgYWRtaW5pc3RyYXRvciByaWdodHMgb2YgdGhlIGJvdC4gUmV0dXJucyBDaGF0QWRtaW5pc3RyYXRvclJpZ2h0cyBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKi9cbiAgICBnZXRNeURlZmF1bHRBZG1pbmlzdHJhdG9yUmlnaHRzKFxuICAgICAgICBvdGhlcj86IE90aGVyPFwiZ2V0TXlEZWZhdWx0QWRtaW5pc3RyYXRvclJpZ2h0c1wiPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaS5nZXRNeURlZmF1bHRBZG1pbmlzdHJhdG9yUmlnaHRzKG90aGVyLCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRleHQtYXdhcmUgYWxpYXMgZm9yIGBhcGkuZWRpdE1lc3NhZ2VUZXh0YC4gVXNlIHRoaXMgbWV0aG9kIHRvIGVkaXQgdGV4dCBhbmQgZ2FtZSBtZXNzYWdlcy4gT24gc3VjY2VzcywgaWYgdGhlIGVkaXRlZCBtZXNzYWdlIGlzIG5vdCBhbiBpbmxpbmUgbWVzc2FnZSwgdGhlIGVkaXRlZCBNZXNzYWdlIGlzIHJldHVybmVkLCBvdGhlcndpc2UgVHJ1ZSBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0ZXh0IE5ldyB0ZXh0IG9mIHRoZSBtZXNzYWdlLCAxLTQwOTYgY2hhcmFjdGVycyBhZnRlciBlbnRpdGllcyBwYXJzaW5nXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjZWRpdG1lc3NhZ2V0ZXh0XG4gICAgICovXG4gICAgZWRpdE1lc3NhZ2VUZXh0KFxuICAgICAgICB0ZXh0OiBzdHJpbmcsXG4gICAgICAgIG90aGVyPzogT3RoZXI8XG4gICAgICAgICAgICBcImVkaXRNZXNzYWdlVGV4dFwiLFxuICAgICAgICAgICAgXCJjaGF0X2lkXCIgfCBcIm1lc3NhZ2VfaWRcIiB8IFwiaW5saW5lX21lc3NhZ2VfaWRcIiB8IFwidGV4dFwiXG4gICAgICAgID4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICBjb25zdCBpbmxpbmVJZCA9IHRoaXMuaW5saW5lTWVzc2FnZUlkO1xuICAgICAgICByZXR1cm4gaW5saW5lSWQgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyB0aGlzLmFwaS5lZGl0TWVzc2FnZVRleHRJbmxpbmUoaW5saW5lSWQsIHRleHQsIG90aGVyKVxuICAgICAgICAgICAgOiB0aGlzLmFwaS5lZGl0TWVzc2FnZVRleHQoXG4gICAgICAgICAgICAgICAgb3JUaHJvdyh0aGlzLmNoYXQsIFwiZWRpdE1lc3NhZ2VUZXh0XCIpLmlkLFxuICAgICAgICAgICAgICAgIG9yVGhyb3codGhpcy5tc2csIFwiZWRpdE1lc3NhZ2VUZXh0XCIpLm1lc3NhZ2VfaWQsXG4gICAgICAgICAgICAgICAgdGV4dCxcbiAgICAgICAgICAgICAgICBvdGhlcixcbiAgICAgICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRleHQtYXdhcmUgYWxpYXMgZm9yIGBhcGkuZWRpdE1lc3NhZ2VDYXB0aW9uYC4gVXNlIHRoaXMgbWV0aG9kIHRvIGVkaXQgY2FwdGlvbnMgb2YgbWVzc2FnZXMuIE9uIHN1Y2Nlc3MsIGlmIHRoZSBlZGl0ZWQgbWVzc2FnZSBpcyBub3QgYW4gaW5saW5lIG1lc3NhZ2UsIHRoZSBlZGl0ZWQgTWVzc2FnZSBpcyByZXR1cm5lZCwgb3RoZXJ3aXNlIFRydWUgaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNlZGl0bWVzc2FnZWNhcHRpb25cbiAgICAgKi9cbiAgICBlZGl0TWVzc2FnZUNhcHRpb24oXG4gICAgICAgIG90aGVyPzogT3RoZXI8XG4gICAgICAgICAgICBcImVkaXRNZXNzYWdlQ2FwdGlvblwiLFxuICAgICAgICAgICAgXCJjaGF0X2lkXCIgfCBcIm1lc3NhZ2VfaWRcIiB8IFwiaW5saW5lX21lc3NhZ2VfaWRcIlxuICAgICAgICA+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgY29uc3QgaW5saW5lSWQgPSB0aGlzLmlubGluZU1lc3NhZ2VJZDtcbiAgICAgICAgcmV0dXJuIGlubGluZUlkICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gdGhpcy5hcGkuZWRpdE1lc3NhZ2VDYXB0aW9uSW5saW5lKGlubGluZUlkLCBvdGhlcilcbiAgICAgICAgICAgIDogdGhpcy5hcGkuZWRpdE1lc3NhZ2VDYXB0aW9uKFxuICAgICAgICAgICAgICAgIG9yVGhyb3codGhpcy5jaGF0LCBcImVkaXRNZXNzYWdlQ2FwdGlvblwiKS5pZCxcbiAgICAgICAgICAgICAgICBvclRocm93KHRoaXMubXNnLCBcImVkaXRNZXNzYWdlQ2FwdGlvblwiKS5tZXNzYWdlX2lkLFxuICAgICAgICAgICAgICAgIG90aGVyLFxuICAgICAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5lZGl0TWVzc2FnZU1lZGlhYC4gVXNlIHRoaXMgbWV0aG9kIHRvIGVkaXQgYW5pbWF0aW9uLCBhdWRpbywgZG9jdW1lbnQsIHBob3RvLCBvciB2aWRlbyBtZXNzYWdlcy4gSWYgYSBtZXNzYWdlIGlzIHBhcnQgb2YgYSBtZXNzYWdlIGFsYnVtLCB0aGVuIGl0IGNhbiBiZSBlZGl0ZWQgb25seSB0byBhbiBhdWRpbyBmb3IgYXVkaW8gYWxidW1zLCBvbmx5IHRvIGEgZG9jdW1lbnQgZm9yIGRvY3VtZW50IGFsYnVtcyBhbmQgdG8gYSBwaG90byBvciBhIHZpZGVvIG90aGVyd2lzZS4gV2hlbiBhbiBpbmxpbmUgbWVzc2FnZSBpcyBlZGl0ZWQsIGEgbmV3IGZpbGUgY2FuJ3QgYmUgdXBsb2FkZWQ7IHVzZSBhIHByZXZpb3VzbHkgdXBsb2FkZWQgZmlsZSB2aWEgaXRzIGZpbGVfaWQgb3Igc3BlY2lmeSBhIFVSTC4gT24gc3VjY2VzcywgaWYgdGhlIGVkaXRlZCBtZXNzYWdlIGlzIG5vdCBhbiBpbmxpbmUgbWVzc2FnZSwgdGhlIGVkaXRlZCBNZXNzYWdlIGlzIHJldHVybmVkLCBvdGhlcndpc2UgVHJ1ZSBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtZWRpYSBBbiBvYmplY3QgZm9yIGEgbmV3IG1lZGlhIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNlZGl0bWVzc2FnZW1lZGlhXG4gICAgICovXG4gICAgZWRpdE1lc3NhZ2VNZWRpYShcbiAgICAgICAgbWVkaWE6IElucHV0TWVkaWEsXG4gICAgICAgIG90aGVyPzogT3RoZXI8XG4gICAgICAgICAgICBcImVkaXRNZXNzYWdlTWVkaWFcIixcbiAgICAgICAgICAgIFwiY2hhdF9pZFwiIHwgXCJtZXNzYWdlX2lkXCIgfCBcImlubGluZV9tZXNzYWdlX2lkXCIgfCBcIm1lZGlhXCJcbiAgICAgICAgPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IGlubGluZUlkID0gdGhpcy5pbmxpbmVNZXNzYWdlSWQ7XG4gICAgICAgIHJldHVybiBpbmxpbmVJZCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IHRoaXMuYXBpLmVkaXRNZXNzYWdlTWVkaWFJbmxpbmUoaW5saW5lSWQsIG1lZGlhLCBvdGhlcilcbiAgICAgICAgICAgIDogdGhpcy5hcGkuZWRpdE1lc3NhZ2VNZWRpYShcbiAgICAgICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJlZGl0TWVzc2FnZU1lZGlhXCIpLmlkLFxuICAgICAgICAgICAgICAgIG9yVGhyb3codGhpcy5tc2csIFwiZWRpdE1lc3NhZ2VNZWRpYVwiKS5tZXNzYWdlX2lkLFxuICAgICAgICAgICAgICAgIG1lZGlhLFxuICAgICAgICAgICAgICAgIG90aGVyLFxuICAgICAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5lZGl0TWVzc2FnZVJlcGx5TWFya3VwYC4gVXNlIHRoaXMgbWV0aG9kIHRvIGVkaXQgb25seSB0aGUgcmVwbHkgbWFya3VwIG9mIG1lc3NhZ2VzLiBPbiBzdWNjZXNzLCBpZiB0aGUgZWRpdGVkIG1lc3NhZ2UgaXMgbm90IGFuIGlubGluZSBtZXNzYWdlLCB0aGUgZWRpdGVkIE1lc3NhZ2UgaXMgcmV0dXJuZWQsIG90aGVyd2lzZSBUcnVlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjZWRpdG1lc3NhZ2VyZXBseW1hcmt1cFxuICAgICAqL1xuICAgIGVkaXRNZXNzYWdlUmVwbHlNYXJrdXAoXG4gICAgICAgIG90aGVyPzogT3RoZXI8XG4gICAgICAgICAgICBcImVkaXRNZXNzYWdlUmVwbHlNYXJrdXBcIixcbiAgICAgICAgICAgIFwiY2hhdF9pZFwiIHwgXCJtZXNzYWdlX2lkXCIgfCBcImlubGluZV9tZXNzYWdlX2lkXCJcbiAgICAgICAgPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IGlubGluZUlkID0gdGhpcy5pbmxpbmVNZXNzYWdlSWQ7XG4gICAgICAgIHJldHVybiBpbmxpbmVJZCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IHRoaXMuYXBpLmVkaXRNZXNzYWdlUmVwbHlNYXJrdXBJbmxpbmUoaW5saW5lSWQsIG90aGVyKVxuICAgICAgICAgICAgOiB0aGlzLmFwaS5lZGl0TWVzc2FnZVJlcGx5TWFya3VwKFxuICAgICAgICAgICAgICAgIG9yVGhyb3codGhpcy5jaGF0LCBcImVkaXRNZXNzYWdlUmVwbHlNYXJrdXBcIikuaWQsXG4gICAgICAgICAgICAgICAgb3JUaHJvdyh0aGlzLm1zZywgXCJlZGl0TWVzc2FnZVJlcGx5TWFya3VwXCIpLm1lc3NhZ2VfaWQsXG4gICAgICAgICAgICAgICAgb3RoZXIsXG4gICAgICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb250ZXh0LWF3YXJlIGFsaWFzIGZvciBgYXBpLnN0b3BQb2xsYC4gVXNlIHRoaXMgbWV0aG9kIHRvIHN0b3AgYSBwb2xsIHdoaWNoIHdhcyBzZW50IGJ5IHRoZSBib3QuIE9uIHN1Y2Nlc3MsIHRoZSBzdG9wcGVkIFBvbGwgaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNzdG9wcG9sbFxuICAgICAqL1xuICAgIHN0b3BQb2xsKFxuICAgICAgICBvdGhlcj86IE90aGVyPFwic3RvcFBvbGxcIiwgXCJjaGF0X2lkXCIgfCBcIm1lc3NhZ2VfaWRcIj4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGkuc3RvcFBvbGwoXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJzdG9wUG9sbFwiKS5pZCxcbiAgICAgICAgICAgIG9yVGhyb3codGhpcy5tc2csIFwic3RvcFBvbGxcIikubWVzc2FnZV9pZCxcbiAgICAgICAgICAgIG90aGVyLFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRleHQtYXdhcmUgYWxpYXMgZm9yIGBhcGkuZGVsZXRlTWVzc2FnZWAuIFVzZSB0aGlzIG1ldGhvZCB0byBkZWxldGUgYSBtZXNzYWdlLCBpbmNsdWRpbmcgc2VydmljZSBtZXNzYWdlcywgd2l0aCB0aGUgZm9sbG93aW5nIGxpbWl0YXRpb25zOlxuICAgICAqIC0gQSBtZXNzYWdlIGNhbiBvbmx5IGJlIGRlbGV0ZWQgaWYgaXQgd2FzIHNlbnQgbGVzcyB0aGFuIDQ4IGhvdXJzIGFnby5cbiAgICAgKiAtIEEgZGljZSBtZXNzYWdlIGluIGEgcHJpdmF0ZSBjaGF0IGNhbiBvbmx5IGJlIGRlbGV0ZWQgaWYgaXQgd2FzIHNlbnQgbW9yZSB0aGFuIDI0IGhvdXJzIGFnby5cbiAgICAgKiAtIEJvdHMgY2FuIGRlbGV0ZSBvdXRnb2luZyBtZXNzYWdlcyBpbiBwcml2YXRlIGNoYXRzLCBncm91cHMsIGFuZCBzdXBlcmdyb3Vwcy5cbiAgICAgKiAtIEJvdHMgY2FuIGRlbGV0ZSBpbmNvbWluZyBtZXNzYWdlcyBpbiBwcml2YXRlIGNoYXRzLlxuICAgICAqIC0gQm90cyBncmFudGVkIGNhbl9wb3N0X21lc3NhZ2VzIHBlcm1pc3Npb25zIGNhbiBkZWxldGUgb3V0Z29pbmcgbWVzc2FnZXMgaW4gY2hhbm5lbHMuXG4gICAgICogLSBJZiB0aGUgYm90IGlzIGFuIGFkbWluaXN0cmF0b3Igb2YgYSBncm91cCwgaXQgY2FuIGRlbGV0ZSBhbnkgbWVzc2FnZSB0aGVyZS5cbiAgICAgKiAtIElmIHRoZSBib3QgaGFzIGNhbl9kZWxldGVfbWVzc2FnZXMgcGVybWlzc2lvbiBpbiBhIHN1cGVyZ3JvdXAgb3IgYSBjaGFubmVsLCBpdCBjYW4gZGVsZXRlIGFueSBtZXNzYWdlIHRoZXJlLlxuICAgICAqIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNkZWxldGVtZXNzYWdlXG4gICAgICovXG4gICAgZGVsZXRlTWVzc2FnZShzaWduYWw/OiBBYm9ydFNpZ25hbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGkuZGVsZXRlTWVzc2FnZShcbiAgICAgICAgICAgIG9yVGhyb3codGhpcy5jaGF0LCBcImRlbGV0ZU1lc3NhZ2VcIikuaWQsXG4gICAgICAgICAgICBvclRocm93KHRoaXMubXNnLCBcImRlbGV0ZU1lc3NhZ2VcIikubWVzc2FnZV9pZCxcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb250ZXh0LWF3YXJlIGFsaWFzIGZvciBgYXBpLnNlbmRTdGlja2VyYC4gVXNlIHRoaXMgbWV0aG9kIHRvIHNlbmQgc3RhdGljIC5XRUJQLCBhbmltYXRlZCAuVEdTLCBvciB2aWRlbyAuV0VCTSBzdGlja2Vycy4gT24gc3VjY2VzcywgdGhlIHNlbnQgTWVzc2FnZSBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGlja2VyIFN0aWNrZXIgdG8gc2VuZC4gUGFzcyBhIGZpbGVfaWQgYXMgU3RyaW5nIHRvIHNlbmQgYSBmaWxlIHRoYXQgZXhpc3RzIG9uIHRoZSBUZWxlZ3JhbSBzZXJ2ZXJzIChyZWNvbW1lbmRlZCksIHBhc3MgYW4gSFRUUCBVUkwgYXMgYSBTdHJpbmcgZm9yIFRlbGVncmFtIHRvIGdldCBhIC5XRUJQIGZpbGUgZnJvbSB0aGUgSW50ZXJuZXQsIG9yIHVwbG9hZCBhIG5ldyBvbmUgdXNpbmcgbXVsdGlwYXJ0L2Zvcm0tZGF0YS5cbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNzZW5kc3RpY2tlclxuICAgICAqL1xuICAgIHJlcGx5V2l0aFN0aWNrZXIoXG4gICAgICAgIHN0aWNrZXI6IElucHV0RmlsZSB8IHN0cmluZyxcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcInNlbmRTdGlja2VyXCIsIFwiY2hhdF9pZFwiIHwgXCJzdGlja2VyXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLnNlbmRTdGlja2VyKFxuICAgICAgICAgICAgb3JUaHJvdyh0aGlzLmNoYXQsIFwic2VuZFN0aWNrZXJcIikuaWQsXG4gICAgICAgICAgICBzdGlja2VyLFxuICAgICAgICAgICAgb3RoZXIsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5hbnN3ZXJJbmxpbmVRdWVyeWAuIFVzZSB0aGlzIG1ldGhvZCB0byBzZW5kIGFuc3dlcnMgdG8gYW4gaW5saW5lIHF1ZXJ5LiBPbiBzdWNjZXNzLCBUcnVlIGlzIHJldHVybmVkLlxuICAgICAqIE5vIG1vcmUgdGhhbiA1MCByZXN1bHRzIHBlciBxdWVyeSBhcmUgYWxsb3dlZC5cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6IEFuIGlubGluZSBib3QgdGhhdCBzZW5kcyBZb3VUdWJlIHZpZGVvcyBjYW4gYXNrIHRoZSB1c2VyIHRvIGNvbm5lY3QgdGhlIGJvdCB0byB0aGVpciBZb3VUdWJlIGFjY291bnQgdG8gYWRhcHQgc2VhcmNoIHJlc3VsdHMgYWNjb3JkaW5nbHkuIFRvIGRvIHRoaXMsIGl0IGRpc3BsYXlzIGEgJ0Nvbm5lY3QgeW91ciBZb3VUdWJlIGFjY291bnQnIGJ1dHRvbiBhYm92ZSB0aGUgcmVzdWx0cywgb3IgZXZlbiBiZWZvcmUgc2hvd2luZyBhbnkuIFRoZSB1c2VyIHByZXNzZXMgdGhlIGJ1dHRvbiwgc3dpdGNoZXMgdG8gYSBwcml2YXRlIGNoYXQgd2l0aCB0aGUgYm90IGFuZCwgaW4gZG9pbmcgc28sIHBhc3NlcyBhIHN0YXJ0IHBhcmFtZXRlciB0aGF0IGluc3RydWN0cyB0aGUgYm90IHRvIHJldHVybiBhbiBPQXV0aCBsaW5rLiBPbmNlIGRvbmUsIHRoZSBib3QgY2FuIG9mZmVyIGEgc3dpdGNoX2lubGluZSBidXR0b24gc28gdGhhdCB0aGUgdXNlciBjYW4gZWFzaWx5IHJldHVybiB0byB0aGUgY2hhdCB3aGVyZSB0aGV5IHdhbnRlZCB0byB1c2UgdGhlIGJvdCdzIGlubGluZSBjYXBhYmlsaXRpZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVzdWx0cyBBbiBhcnJheSBvZiByZXN1bHRzIGZvciB0aGUgaW5saW5lIHF1ZXJ5XG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjYW5zd2VyaW5saW5lcXVlcnlcbiAgICAgKi9cbiAgICBhbnN3ZXJJbmxpbmVRdWVyeShcbiAgICAgICAgcmVzdWx0czogcmVhZG9ubHkgSW5saW5lUXVlcnlSZXN1bHRbXSxcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcImFuc3dlcklubGluZVF1ZXJ5XCIsIFwiaW5saW5lX3F1ZXJ5X2lkXCIgfCBcInJlc3VsdHNcIj4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGkuYW5zd2VySW5saW5lUXVlcnkoXG4gICAgICAgICAgICBvclRocm93KHRoaXMuaW5saW5lUXVlcnksIFwiYW5zd2VySW5saW5lUXVlcnlcIikuaWQsXG4gICAgICAgICAgICByZXN1bHRzLFxuICAgICAgICAgICAgb3RoZXIsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5zZW5kSW52b2ljZWAuIFVzZSB0aGlzIG1ldGhvZCB0byBzZW5kIGludm9pY2VzLiBPbiBzdWNjZXNzLCB0aGUgc2VudCBNZXNzYWdlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRpdGxlIFByb2R1Y3QgbmFtZSwgMS0zMiBjaGFyYWN0ZXJzXG4gICAgICogQHBhcmFtIGRlc2NyaXB0aW9uIFByb2R1Y3QgZGVzY3JpcHRpb24sIDEtMjU1IGNoYXJhY3RlcnNcbiAgICAgKiBAcGFyYW0gcGF5bG9hZCBCb3QtZGVmaW5lZCBpbnZvaWNlIHBheWxvYWQsIDEtMTI4IGJ5dGVzLiBUaGlzIHdpbGwgbm90IGJlIGRpc3BsYXllZCB0byB0aGUgdXNlciwgdXNlIGZvciB5b3VyIGludGVybmFsIHByb2Nlc3Nlcy5cbiAgICAgKiBAcGFyYW0gcHJvdmlkZXJfdG9rZW4gUGF5bWVudHMgcHJvdmlkZXIgdG9rZW4sIG9idGFpbmVkIHZpYSBCb3RmYXRoZXJcbiAgICAgKiBAcGFyYW0gY3VycmVuY3kgVGhyZWUtbGV0dGVyIElTTyA0MjE3IGN1cnJlbmN5IGNvZGUsIHNlZSBtb3JlIG9uIGN1cnJlbmNpZXNcbiAgICAgKiBAcGFyYW0gcHJpY2VzIFByaWNlIGJyZWFrZG93biwgYSBsaXN0IG9mIGNvbXBvbmVudHMgKGUuZy4gcHJvZHVjdCBwcmljZSwgdGF4LCBkaXNjb3VudCwgZGVsaXZlcnkgY29zdCwgZGVsaXZlcnkgdGF4LCBib251cywgZXRjLilcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNzZW5kaW52b2ljZVxuICAgICAqL1xuICAgIHJlcGx5V2l0aEludm9pY2UoXG4gICAgICAgIHRpdGxlOiBzdHJpbmcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBzdHJpbmcsXG4gICAgICAgIHBheWxvYWQ6IHN0cmluZyxcbiAgICAgICAgcHJvdmlkZXJfdG9rZW46IHN0cmluZyxcbiAgICAgICAgY3VycmVuY3k6IHN0cmluZyxcbiAgICAgICAgcHJpY2VzOiByZWFkb25seSBMYWJlbGVkUHJpY2VbXSxcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcbiAgICAgICAgICAgIFwic2VuZEludm9pY2VcIixcbiAgICAgICAgICAgIHwgXCJjaGF0X2lkXCJcbiAgICAgICAgICAgIHwgXCJ0aXRsZVwiXG4gICAgICAgICAgICB8IFwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgfCBcInBheWxvYWRcIlxuICAgICAgICAgICAgfCBcInByb3ZpZGVyX3Rva2VuXCJcbiAgICAgICAgICAgIHwgXCJjdXJyZW5jeVwiXG4gICAgICAgICAgICB8IFwicHJpY2VzXCJcbiAgICAgICAgPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaS5zZW5kSW52b2ljZShcbiAgICAgICAgICAgIG9yVGhyb3codGhpcy5jaGF0LCBcInNlbmRJbnZvaWNlXCIpLmlkLFxuICAgICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHBheWxvYWQsXG4gICAgICAgICAgICBwcm92aWRlcl90b2tlbixcbiAgICAgICAgICAgIGN1cnJlbmN5LFxuICAgICAgICAgICAgcHJpY2VzLFxuICAgICAgICAgICAgb3RoZXIsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5hbnN3ZXJTaGlwcGluZ1F1ZXJ5YC4gSWYgeW91IHNlbnQgYW4gaW52b2ljZSByZXF1ZXN0aW5nIGEgc2hpcHBpbmcgYWRkcmVzcyBhbmQgdGhlIHBhcmFtZXRlciBpc19mbGV4aWJsZSB3YXMgc3BlY2lmaWVkLCB0aGUgQm90IEFQSSB3aWxsIHNlbmQgYW4gVXBkYXRlIHdpdGggYSBzaGlwcGluZ19xdWVyeSBmaWVsZCB0byB0aGUgYm90LiBVc2UgdGhpcyBtZXRob2QgdG8gcmVwbHkgdG8gc2hpcHBpbmcgcXVlcmllcy4gT24gc3VjY2VzcywgVHJ1ZSBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzaGlwcGluZ19xdWVyeV9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHF1ZXJ5IHRvIGJlIGFuc3dlcmVkXG4gICAgICogQHBhcmFtIG9rIFNwZWNpZnkgVHJ1ZSBpZiBkZWxpdmVyeSB0byB0aGUgc3BlY2lmaWVkIGFkZHJlc3MgaXMgcG9zc2libGUgYW5kIEZhbHNlIGlmIHRoZXJlIGFyZSBhbnkgcHJvYmxlbXMgKGZvciBleGFtcGxlLCBpZiBkZWxpdmVyeSB0byB0aGUgc3BlY2lmaWVkIGFkZHJlc3MgaXMgbm90IHBvc3NpYmxlKVxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI2Fuc3dlcnNoaXBwaW5ncXVlcnlcbiAgICAgKi9cbiAgICBhbnN3ZXJTaGlwcGluZ1F1ZXJ5KFxuICAgICAgICBvazogYm9vbGVhbixcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcImFuc3dlclNoaXBwaW5nUXVlcnlcIiwgXCJzaGlwcGluZ19xdWVyeV9pZFwiIHwgXCJva1wiPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaS5hbnN3ZXJTaGlwcGluZ1F1ZXJ5KFxuICAgICAgICAgICAgb3JUaHJvdyh0aGlzLnNoaXBwaW5nUXVlcnksIFwiYW5zd2VyU2hpcHBpbmdRdWVyeVwiKS5pZCxcbiAgICAgICAgICAgIG9rLFxuICAgICAgICAgICAgb3RoZXIsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5hbnN3ZXJQcmVDaGVja291dFF1ZXJ5YC4gT25jZSB0aGUgdXNlciBoYXMgY29uZmlybWVkIHRoZWlyIHBheW1lbnQgYW5kIHNoaXBwaW5nIGRldGFpbHMsIHRoZSBCb3QgQVBJIHNlbmRzIHRoZSBmaW5hbCBjb25maXJtYXRpb24gaW4gdGhlIGZvcm0gb2YgYW4gVXBkYXRlIHdpdGggdGhlIGZpZWxkIHByZV9jaGVja291dF9xdWVyeS4gVXNlIHRoaXMgbWV0aG9kIHRvIHJlc3BvbmQgdG8gc3VjaCBwcmUtY2hlY2tvdXQgcXVlcmllcy4gT24gc3VjY2VzcywgVHJ1ZSBpcyByZXR1cm5lZC4gTm90ZTogVGhlIEJvdCBBUEkgbXVzdCByZWNlaXZlIGFuIGFuc3dlciB3aXRoaW4gMTAgc2Vjb25kcyBhZnRlciB0aGUgcHJlLWNoZWNrb3V0IHF1ZXJ5IHdhcyBzZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIG9rIFNwZWNpZnkgVHJ1ZSBpZiBldmVyeXRoaW5nIGlzIGFscmlnaHQgKGdvb2RzIGFyZSBhdmFpbGFibGUsIGV0Yy4pIGFuZCB0aGUgYm90IGlzIHJlYWR5IHRvIHByb2NlZWQgd2l0aCB0aGUgb3JkZXIuIFVzZSBGYWxzZSBpZiB0aGVyZSBhcmUgYW55IHByb2JsZW1zLlxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI2Fuc3dlcnByZWNoZWNrb3V0cXVlcnlcbiAgICAgKi9cbiAgICBhbnN3ZXJQcmVDaGVja291dFF1ZXJ5KFxuICAgICAgICBvazogYm9vbGVhbixcbiAgICAgICAgb3RoZXI/OlxuICAgICAgICAgICAgfCBzdHJpbmdcbiAgICAgICAgICAgIHwgT3RoZXI8XCJhbnN3ZXJQcmVDaGVja291dFF1ZXJ5XCIsIFwicHJlX2NoZWNrb3V0X3F1ZXJ5X2lkXCIgfCBcIm9rXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLmFuc3dlclByZUNoZWNrb3V0UXVlcnkoXG4gICAgICAgICAgICBvclRocm93KHRoaXMucHJlQ2hlY2tvdXRRdWVyeSwgXCJhbnN3ZXJQcmVDaGVja291dFF1ZXJ5XCIpLmlkLFxuICAgICAgICAgICAgb2ssXG4gICAgICAgICAgICB0eXBlb2Ygb3RoZXIgPT09IFwic3RyaW5nXCIgPyB7IGVycm9yX21lc3NhZ2U6IG90aGVyIH0gOiBvdGhlcixcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb250ZXh0LWF3YXJlIGFsaWFzIGZvciBgYXBpLnNldFBhc3Nwb3J0RGF0YUVycm9yc2AuIEluZm9ybXMgYSB1c2VyIHRoYXQgc29tZSBvZiB0aGUgVGVsZWdyYW0gUGFzc3BvcnQgZWxlbWVudHMgdGhleSBwcm92aWRlZCBjb250YWlucyBlcnJvcnMuIFRoZSB1c2VyIHdpbGwgbm90IGJlIGFibGUgdG8gcmUtc3VibWl0IHRoZWlyIFBhc3Nwb3J0IHRvIHlvdSB1bnRpbCB0aGUgZXJyb3JzIGFyZSBmaXhlZCAodGhlIGNvbnRlbnRzIG9mIHRoZSBmaWVsZCBmb3Igd2hpY2ggeW91IHJldHVybmVkIHRoZSBlcnJvciBtdXN0IGNoYW5nZSkuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogVXNlIHRoaXMgaWYgdGhlIGRhdGEgc3VibWl0dGVkIGJ5IHRoZSB1c2VyIGRvZXNuJ3Qgc2F0aXNmeSB0aGUgc3RhbmRhcmRzIHlvdXIgc2VydmljZSByZXF1aXJlcyBmb3IgYW55IHJlYXNvbi4gRm9yIGV4YW1wbGUsIGlmIGEgYmlydGhkYXkgZGF0ZSBzZWVtcyBpbnZhbGlkLCBhIHN1Ym1pdHRlZCBkb2N1bWVudCBpcyBibHVycnksIGEgc2NhbiBzaG93cyBldmlkZW5jZSBvZiB0YW1wZXJpbmcsIGV0Yy4gU3VwcGx5IHNvbWUgZGV0YWlscyBpbiB0aGUgZXJyb3IgbWVzc2FnZSB0byBtYWtlIHN1cmUgdGhlIHVzZXIga25vd3MgaG93IHRvIGNvcnJlY3QgdGhlIGlzc3Vlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlcnJvcnMgQW4gYXJyYXkgZGVzY3JpYmluZyB0aGUgZXJyb3JzXG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNzZXRwYXNzcG9ydGRhdGFlcnJvcnNcbiAgICAgKi9cbiAgICBzZXRQYXNzcG9ydERhdGFFcnJvcnMoXG4gICAgICAgIGVycm9yczogcmVhZG9ubHkgUGFzc3BvcnRFbGVtZW50RXJyb3JbXSxcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaS5zZXRQYXNzcG9ydERhdGFFcnJvcnMoXG4gICAgICAgICAgICBvclRocm93KHRoaXMuZnJvbSwgXCJzZXRQYXNzcG9ydERhdGFFcnJvcnNcIikuaWQsXG4gICAgICAgICAgICBlcnJvcnMsXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udGV4dC1hd2FyZSBhbGlhcyBmb3IgYGFwaS5zZW5kR2FtZWAuIFVzZSB0aGlzIG1ldGhvZCB0byBzZW5kIGEgZ2FtZS4gT24gc3VjY2VzcywgdGhlIHNlbnQgTWVzc2FnZSBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBnYW1lX3Nob3J0X25hbWUgU2hvcnQgbmFtZSBvZiB0aGUgZ2FtZSwgc2VydmVzIGFzIHRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGdhbWUuIFNldCB1cCB5b3VyIGdhbWVzIHZpYSBCb3RmYXRoZXIuXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2VuZGdhbWVcbiAgICAgKi9cbiAgICByZXBseVdpdGhHYW1lKFxuICAgICAgICBnYW1lX3Nob3J0X25hbWU6IHN0cmluZyxcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcInNlbmRHYW1lXCIsIFwiY2hhdF9pZFwiIHwgXCJnYW1lX3Nob3J0X25hbWVcIj4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGkuc2VuZEdhbWUoXG4gICAgICAgICAgICBvclRocm93KHRoaXMuY2hhdCwgXCJzZW5kR2FtZVwiKS5pZCxcbiAgICAgICAgICAgIGdhbWVfc2hvcnRfbmFtZSxcbiAgICAgICAgICAgIG90aGVyLFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cbn1cblxuLy8gPT09IEZpbHRlcmVkIGNvbnRleHQgdHlwZXNcbi8qKlxuICogVHlwZSBvZiB0aGUgY29udGV4dCBvYmplY3QgdGhhdCBpcyBhdmFpbGFibGUgaW5zaWRlIHRoZSBoYW5kbGVycyBmb3JcbiAqIGBib3QuaGVhcnNgLlxuICpcbiAqIFRoaXMgaGVscGVyIHR5cGUgY2FuIGJlIHVzZWQgdG8gbmFycm93IGRvd24gY29udGV4dCBvYmplY3RzIHRoZSBzYW1lIHdheSBob3dcbiAqIGBib3QuaGVhcnNgIGRvZXMgaXQuIFRoaXMgYWxsb3dzIHlvdSB0byBhbm5vdGF0ZSBjb250ZXh0IG9iamVjdHMgaW5cbiAqIG1pZGRsZXdhcmUgdGhhdCBpcyBub3QgZGlyZWN0bHkgcGFzc2VkIHRvIGBib3QuaGVhcnNgLCBoZW5jZSBub3QgaW5mZXJyaW5nXG4gKiB0aGUgY29ycmVjdCB0eXBlIGF1dG9tYXRpY2FsbHkuIFRoYXQgd2F5LCBoYW5kbGVycyBjYW4gYmUgZGVmaW5lZCBpbiBzZXBhcmF0ZVxuICogZmlsZXMgYW5kIHN0aWxsIGhhdmUgdGhlIGNvcnJlY3QgdHlwZXMuXG4gKi9cbmV4cG9ydCB0eXBlIEhlYXJzQ29udGV4dDxDIGV4dGVuZHMgQ29udGV4dD4gPSBGaWx0ZXI8XG4gICAgTmFycm93TWF0Y2g8Qywgc3RyaW5nIHwgUmVnRXhwTWF0Y2hBcnJheT4sXG4gICAgXCI6dGV4dFwiIHwgXCI6Y2FwdGlvblwiXG4+O1xuLyoqXG4gKiBUeXBlIG9mIHRoZSBjb250ZXh0IG9iamVjdCB0aGF0IGlzIGF2YWlsYWJsZSBpbnNpZGUgdGhlIGhhbmRsZXJzIGZvclxuICogYGJvdC5jb21tYW5kYC5cbiAqXG4gKiBUaGlzIGhlbHBlciB0eXBlIGNhbiBiZSB1c2VkIHRvIG5hcnJvdyBkb3duIGNvbnRleHQgb2JqZWN0cyB0aGUgc2FtZSB3YXkgaG93XG4gKiBgYm90LmNvbW1hbmRgIGRvZXMgaXQuIFRoaXMgYWxsb3dzIHlvdSB0byBhbm5vdGF0ZSBjb250ZXh0IG9iamVjdHMgaW5cbiAqIG1pZGRsZXdhcmUgdGhhdCBpcyBub3QgZGlyZWN0bHkgcGFzc2VkIHRvIGBib3QuY29tbWFuZGAsIGhlbmNlIG5vdCBpbmZlcnJpbmdcbiAqIHRoZSBjb3JyZWN0IHR5cGUgYXV0b21hdGljYWxseS4gVGhhdCB3YXksIGhhbmRsZXJzIGNhbiBiZSBkZWZpbmVkIGluIHNlcGFyYXRlXG4gKiBmaWxlcyBhbmQgc3RpbGwgaGF2ZSB0aGUgY29ycmVjdCB0eXBlcy5cbiAqL1xuZXhwb3J0IHR5cGUgQ29tbWFuZENvbnRleHQ8QyBleHRlbmRzIENvbnRleHQ+ID0gRmlsdGVyPFxuICAgIE5hcnJvd01hdGNoPEMsIHN0cmluZz4sXG4gICAgXCI6ZW50aXRpZXM6Ym90X2NvbW1hbmRcIlxuPjtcbnR5cGUgTmFycm93TWF0Y2g8QyBleHRlbmRzIENvbnRleHQsIFQgZXh0ZW5kcyBDW1wibWF0Y2hcIl0+ID0ge1xuICAgIFtLIGluIGtleW9mIENdOiBLIGV4dGVuZHMgXCJtYXRjaFwiID8gKFQgZXh0ZW5kcyBDW0tdID8gVCA6IG5ldmVyKSA6IENbS107XG59O1xuLyoqXG4gKiBUeXBlIG9mIHRoZSBjb250ZXh0IG9iamVjdCB0aGF0IGlzIGF2YWlsYWJsZSBpbnNpZGUgdGhlIGhhbmRsZXJzIGZvclxuICogYGJvdC5jYWxsYmFja1F1ZXJ5YC5cbiAqXG4gKiBUaGlzIGhlbHBlciB0eXBlIGNhbiBiZSB1c2VkIHRvIGFubm90YXRlIG5hcnJvdyBkb3duIGNvbnRleHQgb2JqZWN0cyB0aGUgc2FtZVxuICogd2F5IGBib3QuY2FsbGJhY2tRdWVyeWAgZG9lcyBpdC4gVGhpcyBhbGxvd3MgeW91IHRvIGhvdyBjb250ZXh0IG9iamVjdHMgaW5cbiAqIG1pZGRsZXdhcmUgdGhhdCBpcyBub3QgZGlyZWN0bHkgcGFzc2VkIHRvIGBib3QuY2FsbGJhY2tRdWVyeWAsIGhlbmNlIG5vdFxuICogaW5mZXJyaW5nIHRoZSBjb3JyZWN0IHR5cGUgYXV0b21hdGljYWxseS4gVGhhdCB3YXksIGhhbmRsZXJzIGNhbiBiZSBkZWZpbmVkXG4gKiBpbiBzZXBhcmF0ZSBmaWxlcyBhbmQgc3RpbGwgaGF2ZSB0aGUgY29ycmVjdCB0eXBlcy5cbiAqL1xuZXhwb3J0IHR5cGUgQ2FsbGJhY2tRdWVyeUNvbnRleHQ8QyBleHRlbmRzIENvbnRleHQ+ID0gRmlsdGVyPFxuICAgIEMsXG4gICAgXCJjYWxsYmFja19xdWVyeTpkYXRhXCJcbj47XG4vKipcbiAqIFR5cGUgb2YgdGhlIGNvbnRleHQgb2JqZWN0IHRoYXQgaXMgYXZhaWxhYmxlIGluc2lkZSB0aGUgaGFuZGxlcnMgZm9yXG4gKiBgYm90LmdhbWVRdWVyeWAuXG4gKlxuICogVGhpcyBoZWxwZXIgdHlwZSBjYW4gYmUgdXNlZCB0byBuYXJyb3cgZG93biBjb250ZXh0IG9iamVjdHMgdGhlIHNhbWUgd2F5IGhvd1xuICogYGJvdC5nYW1lUXVlcnlgIGRvZXMgaXQuIFRoaXMgYWxsb3dzIHlvdSB0byBhbm5vdGF0ZSBjb250ZXh0IG9iamVjdHMgaW5cbiAqIG1pZGRsZXdhcmUgdGhhdCBpcyBub3QgZGlyZWN0bHkgcGFzc2VkIHRvIGBib3QuZ2FtZVF1ZXJ5YCwgaGVuY2Ugbm90XG4gKiBpbmZlcnJpbmcgdGhlIGNvcnJlY3QgdHlwZSBhdXRvbWF0aWNhbGx5LiBUaGF0IHdheSwgaGFuZGxlcnMgY2FuIGJlIGRlZmluZWRcbiAqIGluIHNlcGFyYXRlIGZpbGVzIGFuZCBzdGlsbCBoYXZlIHRoZSBjb3JyZWN0IHR5cGVzLlxuICovXG5leHBvcnQgdHlwZSBHYW1lUXVlcnlDb250ZXh0PEMgZXh0ZW5kcyBDb250ZXh0PiA9IEZpbHRlcjxcbiAgICBDLFxuICAgIFwiY2FsbGJhY2tfcXVlcnk6Z2FtZV9zaG9ydF9uYW1lXCJcbj47XG4vKipcbiAqIFR5cGUgb2YgdGhlIGNvbnRleHQgb2JqZWN0IHRoYXQgaXMgYXZhaWxhYmxlIGluc2lkZSB0aGUgaGFuZGxlcnMgZm9yXG4gKiBgYm90LmlubGluZVF1ZXJ5YC5cbiAqXG4gKiBUaGlzIGhlbHBlciB0eXBlIGNhbiBiZSB1c2VkIHRvIG5hcnJvdyBkb3duIGNvbnRleHQgb2JqZWN0cyB0aGUgc2FtZSB3YXkgaG93XG4gKiBhbm5vdGF0ZSBgYm90LmlubGluZVF1ZXJ5YCBkb2VzIGl0LiBUaGlzIGFsbG93cyB5b3UgdG8gY29udGV4dCBvYmplY3RzIGluXG4gKiBtaWRkbGV3YXJlIHRoYXQgaXMgbm90IGRpcmVjdGx5IHBhc3NlZCB0byBgYm90LmlubGluZVF1ZXJ5YCwgaGVuY2Ugbm90XG4gKiBpbmZlcnJpbmcgdGhlIGNvcnJlY3QgdHlwZSBhdXRvbWF0aWNhbGx5LiBUaGF0IHdheSwgaGFuZGxlcnMgY2FuIGJlIGRlZmluZWRcbiAqIGluIHNlcGFyYXRlIGZpbGVzIGFuZCBzdGlsbCBoYXZlIHRoZSBjb3JyZWN0IHR5cGVzLlxuICovXG5leHBvcnQgdHlwZSBJbmxpbmVRdWVyeUNvbnRleHQ8QyBleHRlbmRzIENvbnRleHQ+ID0gRmlsdGVyPFxuICAgIEMsXG4gICAgXCJpbmxpbmVfcXVlcnlcIlxuPjtcbi8qKlxuICogVHlwZSBvZiB0aGUgY29udGV4dCBvYmplY3QgdGhhdCBpcyBhdmFpbGFibGUgaW5zaWRlIHRoZSBoYW5kbGVycyBmb3JcbiAqIGBib3QuY2hhdFR5cGVgLlxuICpcbiAqIFRoaXMgaGVscGVyIHR5cGUgY2FuIGJlIHVzZWQgdG8gbmFycm93IGRvd24gY29udGV4dCBvYmplY3RzIHRoZSBzYW1lIHdheSBob3dcbiAqIGBib3QuY2hhdFR5cGVgIGRvZXMgaXQuIFRoaXMgYWxsb3dzIHlvdSB0byBhbm5vdGF0ZSBjb250ZXh0IG9iamVjdHMgaW5cbiAqIG1pZGRsZXdhcmUgdGhhdCBpcyBub3QgZGlyZWN0bHkgcGFzc2VkIHRvIGBib3QuY2hhdFR5cGVgLCBoZW5jZSBub3QgaW5mZXJyaW5nXG4gKiB0aGUgY29ycmVjdCB0eXBlIGF1dG9tYXRpY2FsbHkuIFRoYXQgd2F5LCBoYW5kbGVycyBjYW4gYmUgZGVmaW5lZCBpbiBzZXBhcmF0ZVxuICogZmlsZXMgYW5kIHN0aWxsIGhhdmUgdGhlIGNvcnJlY3QgdHlwZXMuXG4gKi9cbmV4cG9ydCB0eXBlIENoYXRUeXBlQ29udGV4dDxDIGV4dGVuZHMgQ29udGV4dCwgVCBleHRlbmRzIENoYXRbXCJ0eXBlXCJdPiA9XG4gICAgJiBDXG4gICAgJiBSZWNvcmQ8XCJ1cGRhdGVcIiwgQ2hhdFR5cGVVcGRhdGU8VD4+IC8vIGN0eC51cGRhdGVcbiAgICAmIENoYXRUeXBlPFQ+IC8vIGN0eC5jaGF0XG4gICAgJiBDaGF0VHlwZVJlY29yZDxcIm1zZ1wiLCBUPiAvLyBjdHgubXNnXG4gICAgJiBBbGlhc1Byb3BzPENoYXRUeXBlVXBkYXRlPFQ+PjsgLy8gY3R4Lm1lc3NhZ2UgZXRjXG50eXBlIENoYXRUeXBlVXBkYXRlPFQgZXh0ZW5kcyBDaGF0W1widHlwZVwiXT4gPVxuICAgICYgQ2hhdFR5cGVSZWNvcmQ8XG4gICAgICAgIHwgXCJtZXNzYWdlXCJcbiAgICAgICAgfCBcImVkaXRlZF9tZXNzYWdlXCJcbiAgICAgICAgfCBcImNoYW5uZWxfcG9zdFwiXG4gICAgICAgIHwgXCJlZGl0ZWRfY2hhbm5lbF9wb3N0XCJcbiAgICAgICAgfCBcIm15X2NoYXRfbWVtYmVyXCJcbiAgICAgICAgfCBcImNoYXRfbWVtYmVyXCJcbiAgICAgICAgfCBcImNoYXRfam9pbl9yZXF1ZXN0XCIsXG4gICAgICAgIFRcbiAgICA+XG4gICAgJiBQYXJ0aWFsPFJlY29yZDxcImNhbGxiYWNrX3F1ZXJ5XCIsIENoYXRUeXBlUmVjb3JkPFwibWVzc2FnZVwiLCBUPj4+XG4gICAgJiBDb25zdHJhaW5VcGRhdGVzQnlDaGF0VHlwZTxUPjtcbnR5cGUgQ29uc3RyYWluVXBkYXRlc0J5Q2hhdFR5cGU8VCBleHRlbmRzIENoYXRbXCJ0eXBlXCJdPiA9IFJlY29yZDxcbiAgICBbVF0gZXh0ZW5kcyBbXCJjaGFubmVsXCJdID8gXCJtZXNzYWdlXCIgfCBcImVkaXRlZF9tZXNzYWdlXCJcbiAgICAgICAgOiBcImNoYW5uZWxfcG9zdFwiIHwgXCJlZGl0ZWRfY2hhbm5lbF9wb3N0XCIsXG4gICAgdW5kZWZpbmVkXG4+O1xuXG50eXBlIENoYXRUeXBlUmVjb3JkPEsgZXh0ZW5kcyBzdHJpbmcsIFQgZXh0ZW5kcyBDaGF0W1widHlwZVwiXT4gPSBQYXJ0aWFsPFxuICAgIFJlY29yZDxLLCBDaGF0VHlwZTxUPj5cbj47XG5pbnRlcmZhY2UgQ2hhdFR5cGU8VCBleHRlbmRzIENoYXRbXCJ0eXBlXCJdPiB7XG4gICAgY2hhdDogeyB0eXBlOiBUIH07XG59XG5cbi8vID09PSBVdGlsIGZ1bmN0aW9uc1xuZnVuY3Rpb24gb3JUaHJvdzxUPih2YWx1ZTogVCB8IHVuZGVmaW5lZCwgbWV0aG9kOiBzdHJpbmcpOiBUIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgaW5mb3JtYXRpb24gZm9yIEFQSSBjYWxsIHRvICR7bWV0aG9kfWApO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIHRyaWdnZXJGbih0cmlnZ2VyOiBNYXliZUFycmF5PHN0cmluZyB8IFJlZ0V4cD4pIHtcbiAgICByZXR1cm4gdG9BcnJheSh0cmlnZ2VyKS5tYXAoKHQpID0+XG4gICAgICAgIHR5cGVvZiB0ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/ICh0eHQ6IHN0cmluZykgPT4gKHR4dCA9PT0gdCA/IHQgOiBudWxsKVxuICAgICAgICAgICAgOiAodHh0OiBzdHJpbmcpID0+IHR4dC5tYXRjaCh0KVxuICAgICk7XG59XG5cbmZ1bmN0aW9uIG1hdGNoPEMgZXh0ZW5kcyBDb250ZXh0PihcbiAgICBjdHg6IEMsXG4gICAgY29udGVudDogc3RyaW5nLFxuICAgIHRyaWdnZXJzOiBBcnJheTwoY29udGVudDogc3RyaW5nKSA9PiBzdHJpbmcgfCBSZWdFeHBNYXRjaEFycmF5IHwgbnVsbD4sXG4pOiBib29sZWFuIHtcbiAgICBmb3IgKGNvbnN0IHQgb2YgdHJpZ2dlcnMpIHtcbiAgICAgICAgY29uc3QgcmVzID0gdChjb250ZW50KTtcbiAgICAgICAgaWYgKHJlcykge1xuICAgICAgICAgICAgY3R4Lm1hdGNoID0gcmVzO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gdG9BcnJheTxFPihlOiBNYXliZUFycmF5PEU+KTogRVtdIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShlKSA/IGUgOiBbZV07XG59XG4iLCJpbXBvcnQge1xuICAgIHR5cGUgQ2FsbGJhY2tRdWVyeUNvbnRleHQsXG4gICAgdHlwZSBDaGF0VHlwZUNvbnRleHQsXG4gICAgdHlwZSBDb21tYW5kQ29udGV4dCxcbiAgICBDb250ZXh0LFxuICAgIHR5cGUgR2FtZVF1ZXJ5Q29udGV4dCxcbiAgICB0eXBlIEhlYXJzQ29udGV4dCxcbiAgICB0eXBlIElubGluZVF1ZXJ5Q29udGV4dCxcbiAgICB0eXBlIE1heWJlQXJyYXksXG4gICAgdHlwZSBTdHJpbmdXaXRoU3VnZ2VzdGlvbnMsXG59IGZyb20gXCIuL2NvbnRleHQudHNcIjtcbmltcG9ydCB7IEZpbHRlciwgRmlsdGVyUXVlcnkgfSBmcm9tIFwiLi9maWx0ZXIudHNcIjtcbmltcG9ydCB7IHR5cGUgQ2hhdCB9IGZyb20gXCIuL3R5cGVzLnRzXCI7XG5cbnR5cGUgTWF5YmVQcm9taXNlPFQ+ID0gVCB8IFByb21pc2U8VD47XG5cbi8vID09PSBNaWRkbGV3YXJlIHR5cGVzXG4vKipcbiAqIEEgZnVuY3Rpb24gb2YgdGhpcyB0eXBlIGlzIHBhc3NlZCBhcyB0aGUgc2Vjb25kIHBhcmFtZXRlciB0byBhbGwgbWlkZGxld2FyZS5cbiAqIEludm9rZSBpdCB0byBjYWxsIHRoZSBkb3duc3RyZWFtIG1pZGRsZXdhcmUgYW5kIHBhc3Mgb24gdGhlIGNvbnRyb2wgZmxvdy5cbiAqXG4gKiBJbiBvdGhlciB3b3JkcywgaWYgeW91ciBtaWRkbGV3YXJlIGlzIGRvbmUgaGFuZGxpbmcgdGhlIGNvbnRleHQgb2JqZWN0LCBhbmRcbiAqIG90aGVyIG1pZGRsZXdhcmUgc2hvdWxkIHRha2Ugb3ZlciwgdGhpcyBmdW5jdGlvbiBzaG91bGQgYmUgY2FsbGVkIGFuZFxuICogYGF3YWl0YGVkLlxuICpcbiAqIE9uY2UgdGhlIGBQcm9taXNlYCByZXR1cm5lZCBieSB0aGlzIGZ1bmN0aW9uIHJlc29sdmVzLCB0aGUgZG93bnN0cmVhbVxuICogbWlkZGxld2FyZSBpcyBkb25lIGV4ZWN1dGluZywgaGVuY2UgcmV0dXJuaW5nIHRoZSBjb250cm9sLlxuICovXG5leHBvcnQgdHlwZSBOZXh0RnVuY3Rpb24gPSAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuXG4vKipcbiAqIE1pZGRsZXdhcmUgaW4gdGhlIGZvcm0gb2YgYSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IHR5cGUgTWlkZGxld2FyZUZuPEMgZXh0ZW5kcyBDb250ZXh0ID0gQ29udGV4dD4gPSAoXG4gICAgY3R4OiBDLFxuICAgIG5leHQ6IE5leHRGdW5jdGlvbixcbikgPT4gTWF5YmVQcm9taXNlPHVua25vd24+O1xuLyoqXG4gKiBNaWRkbGV3YXJlIGluIHRoZSBmb3JtIG9mIGEgY29udGFpbmVyIGZvciBhIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1pZGRsZXdhcmVPYmo8QyBleHRlbmRzIENvbnRleHQgPSBDb250ZXh0PiB7XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY29udGFpbmVkIG1pZGRsZXdhcmUuXG4gICAgICovXG4gICAgbWlkZGxld2FyZTogKCkgPT4gTWlkZGxld2FyZUZuPEM+O1xufVxuLyoqXG4gKiBNaWRkbGV3YXJlIGZvciBncmFtbVksIGVpdGhlciBhcyBhIGZ1bmN0aW9uIG9yIGFzIGEgY29udGFpbmVyIGZvciBhIGZ1bmN0aW9uLlxuICpcbiAqIFNpbXBseSBwdXQsIG1pZGRsZXdhcmUgaXMganVzdCBhIGZhbmN5IHRlcm0gZm9yIGEgX2xpc3RlbmVyXy4gWW91IGNhblxuICogcmVnaXN0ZXIgbWlkZGxld2FyZSBvbiBhIGJvdCB0byBsaXN0ZW4gZm9yIHVwZGF0ZXMuIEV4YW1wbGU6XG4gKlxuICogYGBgdHNcbiAqIGJvdC5vbignbWVzc2FnZScsIGN0eCA9PiBjdHgucmVwbHkoJ0kgZ290IHlvdXIgbWVzc2FnZSEnKSlcbiAqIC8vICAgICAgICAgICAgICAgIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flxuICogLy8gICAgICAgICAgICAgICAgXlxuICogLy8gICAgICAgICAgICAgICAgfFxuICogLy8gICAgICAgICAgICAgICBUaGlzIGlzIG1pZGRsZXdhcmUhXG4gKiBgYGBcbiAqXG4gKiBNaWRkbGV3YXJlIHJlY2VpdmVzIG9uZSBvYmplY3QgdGhhdCB3ZSBjYWxsIHRoZSBfY29udGV4dCBvYmplY3RfLiBUaGlzIGlzXG4gKiBhbm90aGVyIGZhbmN5IHRlcm0gZm9yIGEgc2ltcGxlIG9iamVjdCB0aGF0IGhvbGRzIGluZm9ybWF0aW9uIGFib3V0IHRoZVxuICogdXBkYXRlIHlvdSdyZSBwcm9jZXNzaW5nLiBGb3IgaW5zdGFuY2UsIHRoZSBjb250ZXh0IG9iamVjdCBnaXZlcyB5b3UgYWNjZXNzXG4gKiB0byB0aGUgbWVzc2FnZSB0aGF0IHdhcyBzZW50IHRvIHlvdXIgYm90IChgY3R4Lm1lc3NhZ2VgKSwgaW5jbHVkaW5nIHRoZSB0ZXh0XG4gKiAob3IgcGhvdG8gb3Igd2hhdGV2ZXIgbWVzc2FnZSB0aGUgdXNlciBoYXMgc2VudCkuIFRoZSBjb250ZXh0IG9iamVjdCBpc1xuICogY29tbW9ubHkgbmFtZWQgYGN0eGAuXG4gKlxuICogSXQgYWxzbyBwcm92aWRlcyB5b3Ugd2l0aCB0aGUgYGN0eC5hcGlgIG9iamVjdCB0aGF0IHlvdSBhbHNvIGZpbmQgb25cbiAqIGBib3QuYXBpYC4gQXMgYSByZXN1bHQsIHlvdSBjYW4gY2FsbCBgY3R4LmFwaS5zZW5kTWVzc2FnZWAgaW5zdGVhZCBvZlxuICogYGJvdC5hcGkuc2VuZE1lc3NhZ2VgLiBUaGlzIHByZXZlbnRzIHlvdSBmcm9tIGhhdmluZyB0byBwYXNzIGFyb3VuZCB5b3VyXG4gKiBgYm90YCBpbnN0YW5jZSBhbGwgb3ZlciB5b3VyIGNvZGUuXG4gKlxuICogTW9zdCBpbXBvcnRhbnRseSwgdGhlIGNvbnRleHQgb2JqZWN0IGdpdmVzIHlvdSBhIGhhbmRmdWwgb2YgcmVhbGx5IHVzZWZ1bFxuICogc2hvcnRjdXRzLCBzdWNoIGFzIGEgYHJlcGx5YCBtZXRob2QgKHNlZSBhYm92ZSkuIFRoaXMgbWV0aG9kIGlzIG5vdGhpbmcgZWxzZVxuICogdGhhbiBhIHdyYXBwZXIgYXJvdW5kIGBjdHguYXBpLnNlbmRNZXNzYWdlYOKAlGJ1dCB3aXRoIHNvbWUgYXJndW1lbnRzXG4gKiBwcmUtZmlsbGVkIGZvciB5b3UuIEFzIHlvdSBjYW4gc2VlIGFib3ZlLCB5b3Ugbm8gbG9uZ2VyIGhhdmUgdG8gc3BlY2lmeSBhXG4gKiBgY2hhdF9pZGAgb3IgYW55dGhpbmc7IHRoZSBjb250ZXh0IG9iamVjdCBrbm93cyB3aGljaCBjaGF0IGl0IGJlbG9uZ3MgdG8sIHNvXG4gKiB3aGVuIHlvdSBjYWxsIGByZXBseWAsIHRoZSBjb250ZXh0IHdpbGwgY2FsbCBgc2VuZE1lc3NhZ2VgIHdpdGggdGhlIGNvcnJlY3RcbiAqIGBjaGF0X2lkYCwgbmFtZWx5IHRoZSBvbmUgZm9yIHRoZSBzYW1lIGNoYXQgdGhhdCB0aGUgaW5jb21pbmcgbWVzc2FnZVxuICogb3JpZ2luYXRlcyBmcm9tLiBUaGlzIG1ha2VzIGl0IHZlcnkgY29udmVuaWVudCB0byByZXBseSB0byBhIG1lc3NhZ2UuXG4gKlxuICogTWlkZGxld2FyZSBpcyBhbiBleHRyZW1lbHkgcG93ZXJmdWwgY29uY2VwdCBhbmQgdGhpcyBzaG9ydCBleHBsYW5hdGlvbiBvbmx5XG4gKiBzY3JhdGNoZWQgdGhlIHN1cmZhY2Ugb2Ygd2hhdCBpcyBwb3NzaWJsZSB3aXRoIGdyYW1tWS4gSWYgeW91IHdhbnQgdG8ga25vd1xuICogbW9yZSBhZHZhbmNlZCB0aGluZ3MgYWJvdXQgbWlkZGxld2FyZSwgY2hlY2sgb3V0IHRoZVxuICogW2RvY3VtZW50YXRpb25dKGh0dHBzOi8vZ3JhbW15LmRldi9ndWlkZS9taWRkbGV3YXJlLmh0bWwpIG9uIHRoZSB3ZWJzaXRlLlxuICovXG5leHBvcnQgdHlwZSBNaWRkbGV3YXJlPEMgZXh0ZW5kcyBDb250ZXh0ID0gQ29udGV4dD4gPVxuICAgIHwgTWlkZGxld2FyZUZuPEM+XG4gICAgfCBNaWRkbGV3YXJlT2JqPEM+O1xuXG4vLyA9PT0gTWlkZGxld2FyZSBlcnJvcnNcbi8qKlxuICogVGhpcyBlcnJvciBpcyB0aHJvd24gd2hlbiBtaWRkbGV3YXJlIHRocm93cy4gSXQgc2ltcGx5IHdyYXBzIHRoZSBvcmlnaW5hbFxuICogZXJyb3IgKGFjY2Vzc2libGUgdmlhIHRoZSBgZXJyb3JgIHByb3BlcnR5KSwgYnV0IGFsc28gcHJvdmlkZXMgYWNjZXNzIHRvIHRoZVxuICogcmVzcGVjdGl2ZSBjb250ZXh0IG9iamVjdCB0aGF0IHdhcyBwcm9jZXNzZWQgd2hpbGUgdGhlIGVycm9yIG9jY3VycmVkLlxuICovXG5leHBvcnQgY2xhc3MgQm90RXJyb3I8QyBleHRlbmRzIENvbnRleHQgPSBDb250ZXh0PiBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgcmVhZG9ubHkgZXJyb3I6IHVua25vd24sIHB1YmxpYyByZWFkb25seSBjdHg6IEMpIHtcbiAgICAgICAgc3VwZXIoZ2VuZXJhdGVCb3RFcnJvck1lc3NhZ2UoZXJyb3IpKTtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJCb3RFcnJvclwiO1xuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikgdGhpcy5zdGFjayA9IGVycm9yLnN0YWNrO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdlbmVyYXRlQm90RXJyb3JNZXNzYWdlKGVycm9yOiB1bmtub3duKSB7XG4gICAgbGV0IG1zZzogc3RyaW5nO1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIG1zZyA9IGAke2Vycm9yLm5hbWV9IGluIG1pZGRsZXdhcmU6ICR7ZXJyb3IubWVzc2FnZX1gO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgZXJyb3I7XG4gICAgICAgIG1zZyA9IGBOb24tZXJyb3IgdmFsdWUgb2YgdHlwZSAke3R5cGV9IHRocm93biBpbiBtaWRkbGV3YXJlYDtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwiYmlnaW50XCI6XG4gICAgICAgICAgICBjYXNlIFwiYm9vbGVhblwiOlxuICAgICAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxuICAgICAgICAgICAgICAgIG1zZyArPSBgOiAke2Vycm9yfWA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICAgICAgbXNnICs9IGA6ICR7U3RyaW5nKGVycm9yKS5zdWJzdHJpbmcoMCwgNTApfWA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIG1zZyArPSBcIiFcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbXNnO1xufVxuXG4vLyA9PT0gTWlkZGxld2FyZSBiYXNlIGZ1bmN0aW9uc1xuZnVuY3Rpb24gZmxhdHRlbjxDIGV4dGVuZHMgQ29udGV4dD4obXc6IE1pZGRsZXdhcmU8Qz4pOiBNaWRkbGV3YXJlRm48Qz4ge1xuICAgIHJldHVybiB0eXBlb2YgbXcgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICA/IG13XG4gICAgICAgIDogKGN0eCwgbmV4dCkgPT4gbXcubWlkZGxld2FyZSgpKGN0eCwgbmV4dCk7XG59XG5mdW5jdGlvbiBjb25jYXQ8QyBleHRlbmRzIENvbnRleHQ+KFxuICAgIGZpcnN0OiBNaWRkbGV3YXJlRm48Qz4sXG4gICAgYW5kVGhlbjogTWlkZGxld2FyZUZuPEM+LFxuKTogTWlkZGxld2FyZUZuPEM+IHtcbiAgICByZXR1cm4gYXN5bmMgKGN0eCwgbmV4dCkgPT4ge1xuICAgICAgICBsZXQgbmV4dENhbGxlZCA9IGZhbHNlO1xuICAgICAgICBhd2FpdCBmaXJzdChjdHgsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChuZXh0Q2FsbGVkKSB0aHJvdyBuZXcgRXJyb3IoXCJgbmV4dGAgYWxyZWFkeSBjYWxsZWQgYmVmb3JlIVwiKTtcbiAgICAgICAgICAgIGVsc2UgbmV4dENhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICBhd2FpdCBhbmRUaGVuKGN0eCwgbmV4dCk7XG4gICAgICAgIH0pO1xuICAgIH07XG59XG5mdW5jdGlvbiBwYXNzPEMgZXh0ZW5kcyBDb250ZXh0PihfY3R4OiBDLCBuZXh0OiBOZXh0RnVuY3Rpb24pIHtcbiAgICByZXR1cm4gbmV4dCgpO1xufVxuXG5jb25zdCBsZWFmOiBOZXh0RnVuY3Rpb24gPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoKTtcbi8qKlxuICogUnVucyBzb21lIGdpdmVuIG1pZGRsZXdhcmUgZnVuY3Rpb24gd2l0aCBhIGdpdmVuIGNvbnRleHQgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSBtaWRkbGV3YXJlIFRoZSBtaWRkbGV3YXJlIHRvIHJ1blxuICogQHBhcmFtIGN0eCBUaGUgY29udGV4dCB0byB1c2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJ1bjxDIGV4dGVuZHMgQ29udGV4dD4oXG4gICAgbWlkZGxld2FyZTogTWlkZGxld2FyZUZuPEM+LFxuICAgIGN0eDogQyxcbikge1xuICAgIGF3YWl0IG1pZGRsZXdhcmUoY3R4LCBsZWFmKTtcbn1cblxuLy8gPT09IENvbXBvc2VyXG4vKipcbiAqIFRoZSBjb21wb3NlciBpcyB0aGUgaGVhcnQgb2YgdGhlIG1pZGRsZXdhcmUgc3lzdGVtIGluIGdyYW1tWS4gSXQgaXMgYWxzbyB0aGVcbiAqIHN1cGVyY2xhc3Mgb2YgYEJvdGAuIFdoZW5ldmVyIHlvdSBjYWxsIGB1c2VgIG9yIGBvbmAgb3Igc29tZSBvZiB0aGUgb3RoZXJcbiAqIG1ldGhvZHMgb24geW91ciBib3QsIHlvdSBhcmUgaW4gZmFjdCB1c2luZyB0aGUgdW5kZXJseWluZyBjb21wb3NlciBpbnN0YW5jZVxuICogdG8gcmVnaXN0ZXIgeW91ciBtaWRkbGV3YXJlLlxuICpcbiAqIElmIHlvdSdyZSBqdXN0IGdldHRpbmcgc3RhcnRlZCwgeW91IGRvIG5vdCBuZWVkIHRvIHdvcnJ5IGFib3V0IHdoYXRcbiAqIG1pZGRsZXdhcmUgaXMsIG9yIGFib3V0IGhvdyB0byB1c2UgYSBjb21wb3Nlci5cbiAqXG4gKiBPbiB0aGUgb3RoZXIgaGFuZCwgaWYgeW91IHdhbnQgdG8gZGlnIGRlZXBlciBpbnRvIGhvdyBncmFtbVkgaW1wbGVtZW50c1xuICogbWlkZGxld2FyZSwgY2hlY2sgb3V0IHRoZVxuICogW2RvY3VtZW50YXRpb25dKGh0dHBzOi8vZ3JhbW15LmRldi9hZHZhbmNlZC9taWRkbGV3YXJlLmh0bWwpIG9uIHRoZSB3ZWJzaXRlLlxuICovXG5leHBvcnQgY2xhc3MgQ29tcG9zZXI8QyBleHRlbmRzIENvbnRleHQ+IGltcGxlbWVudHMgTWlkZGxld2FyZU9iajxDPiB7XG4gICAgcHJpdmF0ZSBoYW5kbGVyOiBNaWRkbGV3YXJlRm48Qz47XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IGNvbXBvc2VyIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBtaWRkbGV3YXJlLiBJZiBub1xuICAgICAqIG1pZGRsZXdhcmUgaXMgZ2l2ZW4sIHRoZSBjb21wb3NlciBpbnN0YW5jZSB3aWxsIHNpbXBseSBtYWtlIGFsbCBjb250ZXh0XG4gICAgICogb2JqZWN0cyBwYXNzIHRocm91Z2ggd2l0aG91dCB0b3VjaGluZyB0aGVtLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1pZGRsZXdhcmUgVGhlIG1pZGRsZXdhcmUgdG8gY29tcG9zZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKC4uLm1pZGRsZXdhcmU6IEFycmF5PE1pZGRsZXdhcmU8Qz4+KSB7XG4gICAgICAgIHRoaXMuaGFuZGxlciA9IG1pZGRsZXdhcmUubGVuZ3RoID09PSAwXG4gICAgICAgICAgICA/IHBhc3NcbiAgICAgICAgICAgIDogbWlkZGxld2FyZS5tYXAoZmxhdHRlbikucmVkdWNlKGNvbmNhdCk7XG4gICAgfVxuXG4gICAgbWlkZGxld2FyZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgc29tZSBtaWRkbGV3YXJlIHRoYXQgcmVjZWl2ZXMgYWxsIHVwZGF0ZXMuIEl0IGlzIGluc3RhbGxlZCBieVxuICAgICAqIGNvbmNhdGVuYXRpbmcgaXQgdG8gdGhlIGVuZCBvZiBhbGwgcHJldmlvdXNseSBpbnN0YWxsZWQgbWlkZGxld2FyZS5cbiAgICAgKlxuICAgICAqIE9mdGVuLCB0aGlzIG1ldGhvZCBpcyB1c2VkIHRvIGluc3RhbGwgbWlkZGxld2FyZSB0aGF0IGJlaGF2ZXMgbGlrZSBhXG4gICAgICogcGx1Z2luLCBmb3IgZXhhbXBsZSBzZXNzaW9uIG1pZGRsZXdhcmUuXG4gICAgICogYGBgdHNcbiAgICAgKiBib3QudXNlKHNlc3Npb24oKSlcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIHJldHVybnMgYSBuZXcgaW5zdGFuY2Ugb2YgY29tcG9zZXIuIFRoZSByZXR1cm5lZCBpbnN0YW5jZSBjYW5cbiAgICAgKiBiZSBmdXJ0aGVyIGV4dGVuZGVkLCBhbmQgYWxsIGNoYW5nZXMgd2lsbCBiZSByZWdhcmRlZCBoZXJlLiBDb25mZXIgdGhlXG4gICAgICogW2RvY3VtZW50YXRpb25dKGh0dHBzOi8vZ3JhbW15LmRldi9hZHZhbmNlZC9taWRkbGV3YXJlLmh0bWwpIG9uIHRoZVxuICAgICAqIHdlYnNpdGUgaWYgeW91IHdhbnQgdG8ga25vdyBtb3JlIGFib3V0IGhvdyB0aGUgbWlkZGxld2FyZSBzeXN0ZW0gaW5cbiAgICAgKiBncmFtbVkgd29ya3MsIGVzcGVjaWFsbHkgd2hlbiBpdCBjb21lcyB0byBjaGFpbmluZyB0aGUgbWV0aG9kIGNhbGxzXG4gICAgICogKGB1c2UoIC4uLiApLnVzZSggLi4uICkudXNlKCAuLi4gKWApLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1pZGRsZXdhcmUgVGhlIG1pZGRsZXdhcmUgdG8gcmVnaXN0ZXJcbiAgICAgKi9cbiAgICB1c2UoLi4ubWlkZGxld2FyZTogQXJyYXk8TWlkZGxld2FyZTxDPj4pIHtcbiAgICAgICAgY29uc3QgY29tcG9zZXIgPSBuZXcgQ29tcG9zZXIoLi4ubWlkZGxld2FyZSk7XG4gICAgICAgIHRoaXMuaGFuZGxlciA9IGNvbmNhdCh0aGlzLmhhbmRsZXIsIGZsYXR0ZW4oY29tcG9zZXIpKTtcbiAgICAgICAgcmV0dXJuIGNvbXBvc2VyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBzb21lIG1pZGRsZXdhcmUgdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgZm9yIHNvbWUgc3BlY2lmaWNcbiAgICAgKiB1cGRhdGVzLCBuYW1lbHkgdGhvc2UgbWF0Y2hpbmcgdGhlIHByb3ZpZGVkIGZpbHRlciBxdWVyeS4gRmlsdGVyIHF1ZXJpZXNcbiAgICAgKiBhcmUgYSBjb25jaXNlIHdheSB0byBzcGVjaWZ5IHdoaWNoIHVwZGF0ZXMgeW91IGFyZSBpbnRlcmVzdGVkIGluLlxuICAgICAqXG4gICAgICogSGVyZSBhcmUgc29tZSBleGFtcGxlcyBvZiB2YWxpZCBmaWx0ZXIgcXVlcmllczpcbiAgICAgKiBgYGB0c1xuICAgICAqIC8vIEFsbCBraW5kcyBvZiBtZXNzYWdlIHVwZGF0ZXNcbiAgICAgKiBib3Qub24oJ21lc3NhZ2UnLCBjdHggPT4geyAuLi4gfSlcbiAgICAgKlxuICAgICAqIC8vIE9ubHkgdGV4dCBtZXNzYWdlc1xuICAgICAqIGJvdC5vbignbWVzc2FnZTp0ZXh0JywgY3R4ID0+IHsgLi4uIH0pXG4gICAgICpcbiAgICAgKiAvLyBPbmx5IHRleHQgbWVzc2FnZXMgd2l0aCBVUkxcbiAgICAgKiBib3Qub24oJ21lc3NhZ2U6ZW50aXRpZXM6dXJsJywgY3R4ID0+IHsgLi4uIH0pXG4gICAgICpcbiAgICAgKiAvLyBUZXh0IG1lc3NhZ2VzIGFuZCB0ZXh0IGNoYW5uZWwgcG9zdHNcbiAgICAgKiBib3Qub24oJzp0ZXh0JywgY3R4ID0+IHsgLi4uIH0pXG4gICAgICpcbiAgICAgKiAvLyBNZXNzYWdlcyB3aXRoIFVSTCBpbiB0ZXh0IG9yIGNhcHRpb24gKGkuZS4gZW50aXRpZXMgb3IgY2FwdGlvbiBlbnRpdGllcylcbiAgICAgKiBib3Qub24oJ21lc3NhZ2U6OnVybCcsIGN0eCA9PiB7IC4uLiB9KVxuICAgICAqXG4gICAgICogLy8gTWVzc2FnZXMgb3IgY2hhbm5lbCBwb3N0cyB3aXRoIFVSTCBpbiB0ZXh0IG9yIGNhcHRpb25cbiAgICAgKiBib3Qub24oJzo6dXJsJywgY3R4ID0+IHsgLi4uIH0pXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIHVzZSBhdXRvY29tcGxldGUgaW4gVlNDb2RlIHRvIHNlZSBhbGwgYXZhaWxhYmxlIGZpbHRlciBxdWVyaWVzLlxuICAgICAqIENoZWNrIG91dCB0aGVcbiAgICAgKiBbZG9jdW1lbnRhdGlvbl0oaHR0cHM6Ly9ncmFtbXkuZGV2L2d1aWRlL2ZpbHRlci1xdWVyaWVzLmh0bWwpIG9uIHRoZVxuICAgICAqIHdlYnNpdGUgdG8gbGVhcm4gbW9yZSBhYm91dCBmaWx0ZXIgcXVlcmllcyBpbiBncmFtbVkuXG4gICAgICpcbiAgICAgKiBJdCBpcyBwb3NzaWJsZSB0byBwYXNzIG11bHRpcGxlIGZpbHRlciBxdWVyaWVzIGluIGFuIGFycmF5LCBpLmUuXG4gICAgICogYGBgdHNcbiAgICAgKiAvLyBNYXRjaGVzIGFsbCB0ZXh0IG1lc3NhZ2VzIGFuZCBlZGl0ZWQgdGV4dCBtZXNzYWdlcyB0aGF0IGNvbnRhaW4gYSBVUkxcbiAgICAgKiBib3Qub24oWydtZXNzYWdlOmVudGl0aWVzOnVybCcsICdlZGl0ZWRfbWVzc2FnZTplbnRpdGllczp1cmwnXSwgY3R4ID0+IHsgLi4uIH0pXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBZb3VyIG1pZGRsZXdhcmUgd2lsbCBiZSBleGVjdXRlZCBpZiBfYW55IG9mIHRoZSBwcm92aWRlZCBmaWx0ZXIgcXVlcmllc19cbiAgICAgKiBtYXRjaGVzIChsb2dpY2FsIE9SKS5cbiAgICAgKlxuICAgICAqIElmIHlvdSBpbnN0ZWFkIHdhbnQgdG8gbWF0Y2ggX2FsbCBvZiB0aGUgcHJvdmlkZWQgZmlsdGVyIHF1ZXJpZXNfXG4gICAgICogKGxvZ2ljYWwgQU5EKSwgeW91IGNhbiBjaGFpbiB0aGUgYC5vbmAgY2FsbHM6XG4gICAgICogYGBgdHNcbiAgICAgKiAvLyBNYXRjaGVzIGFsbCBtZXNzYWdlcyBhbmQgY2hhbm5lbCBwb3N0cyB0aGF0IGJvdGggYSkgY29udGFpbiBhIFVSTCBhbmQgYikgYXJlIGZvcndhcmRzXG4gICAgICogYm90Lm9uKCc6OnVybCcpLm9uKCc6Zm9yd2FyZF9kYXRlJywgY3R4ID0+IHsgLi4uIH0pXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmlsdGVyIFRoZSBmaWx0ZXIgcXVlcnkgdG8gdXNlLCBtYXkgYWxzbyBiZSBhbiBhcnJheSBvZiBxdWVyaWVzXG4gICAgICogQHBhcmFtIG1pZGRsZXdhcmUgVGhlIG1pZGRsZXdhcmUgdG8gcmVnaXN0ZXIgYmVoaW5kIHRoZSBnaXZlbiBmaWx0ZXJcbiAgICAgKi9cbiAgICBvbjxRIGV4dGVuZHMgRmlsdGVyUXVlcnk+KFxuICAgICAgICBmaWx0ZXI6IFEgfCBRW10sXG4gICAgICAgIC4uLm1pZGRsZXdhcmU6IEFycmF5PE1pZGRsZXdhcmU8RmlsdGVyPEMsIFE+Pj5cbiAgICApOiBDb21wb3NlcjxGaWx0ZXI8QywgUT4+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyKENvbnRleHQuaGFzLmZpbHRlclF1ZXJ5KGZpbHRlciksIC4uLm1pZGRsZXdhcmUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBzb21lIG1pZGRsZXdhcmUgdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgd2hlbiB0aGUgbWVzc2FnZVxuICAgICAqIGNvbnRhaW5zIHNvbWUgdGV4dC4gSXMgaXQgcG9zc2libGUgdG8gcGFzcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaDpcbiAgICAgKiBgYGB0c1xuICAgICAqIC8vIE1hdGNoIHNvbWUgdGV4dCAoZXhhY3QgbWF0Y2gpXG4gICAgICogYm90LmhlYXJzKCdJIGxvdmUgZ3JhbW1ZJywgY3R4ID0+IGN0eC5yZXBseSgnQW5kIGdyYW1tWSBsb3ZlcyB5b3UhIDwzJykpXG4gICAgICogLy8gTWF0Y2ggYSByZWd1bGFyIGV4cHJlc3Npb25cbiAgICAgKiBib3QuaGVhcnMoL1xcL2VjaG8gKC4rKS8sIGN0eCA9PiBjdHgucmVwbHkoY3R4Lm1hdGNoWzFdKSlcbiAgICAgKiBgYGBcbiAgICAgKiBOb3RlIGhvdyBgY3R4Lm1hdGNoYCB3aWxsIGNvbnRhaW4gdGhlIHJlc3VsdCBvZiB0aGUgcmVndWxhciBleHByZXNzaW9uLlxuICAgICAqIEhlcmUgaXQgaXMgYSBgUmVnRXhwTWF0Y2hBcnJheWAgb2JqZWN0LCBzbyBgY3R4Lm1hdGNoWzFdYCByZWZlcnMgdG8gdGhlXG4gICAgICogcGFydCBvZiB0aGUgcmVnZXggdGhhdCB3YXMgbWF0Y2hlZCBieSBgKC4rKWAsIGkuZS4gdGhlIHRleHQgdGhhdCBjb21lc1xuICAgICAqIGFmdGVyIOKAnC9lY2hv4oCdLlxuICAgICAqXG4gICAgICogWW91IGNhbiBwYXNzIGFuIGFycmF5IG9mIHRyaWdnZXJzLiBZb3VyIG1pZGRsZXdhcmUgd2lsbCBiZSBleGVjdXRlZCBpZiBhdFxuICAgICAqIGxlYXN0IG9uZSBvZiB0aGVtIG1hdGNoZXMuXG4gICAgICpcbiAgICAgKiBCb3RoIHRleHQgYW5kIGNhcHRpb25zIG9mIHRoZSByZWNlaXZlZCBtZXNzYWdlcyB3aWxsIGJlIHNjYW5uZWQuIEZvclxuICAgICAqIGV4YW1wbGUsIHdoZW4gYSBwaG90byBpcyBzZW50IHRvIHRoZSBjaGF0IGFuZCBpdHMgY2FwdGlvbiBtYXRjaGVzIHRoZVxuICAgICAqIHRyaWdnZXIsIHlvdXIgbWlkZGxld2FyZSB3aWxsIGJlIGV4ZWN1dGVkLlxuICAgICAqXG4gICAgICogSWYgeW91IG9ubHkgd2FudCB0byBtYXRjaCB0ZXh0IG1lc3NhZ2VzIGFuZCBub3QgY2FwdGlvbnMsIHlvdSBjYW4gZG9cbiAgICAgKiB0aGlzOlxuICAgICAqIGBgYHRzXG4gICAgICogLy8gT25seSBtYXRjaGVzIHRleHQgbWVzc2FnZXMgKGFuZCBjaGFubmVsIHBvc3RzKSBmb3IgdGhlIHJlZ2V4XG4gICAgICogYm90Lm9uKCc6dGV4dCcpLmhlYXJzKC9cXC9lY2hvICguKykvLCBjdHggPT4geyAuLi4gfSlcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmlnZ2VyIFRoZSB0ZXh0IHRvIGxvb2sgZm9yXG4gICAgICogQHBhcmFtIG1pZGRsZXdhcmUgVGhlIG1pZGRsZXdhcmUgdG8gcmVnaXN0ZXJcbiAgICAgKi9cbiAgICBoZWFycyhcbiAgICAgICAgdHJpZ2dlcjogTWF5YmVBcnJheTxzdHJpbmcgfCBSZWdFeHA+LFxuICAgICAgICAuLi5taWRkbGV3YXJlOiBBcnJheTxIZWFyc01pZGRsZXdhcmU8Qz4+XG4gICAgKTogQ29tcG9zZXI8SGVhcnNDb250ZXh0PEM+PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbHRlcihDb250ZXh0Lmhhcy50ZXh0KHRyaWdnZXIpLCAuLi5taWRkbGV3YXJlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgc29tZSBtaWRkbGV3YXJlIHRoYXQgd2lsbCBvbmx5IGJlIGV4ZWN1dGVkIHdoZW4gYSBjZXJ0YWluXG4gICAgICogY29tbWFuZCBpcyBmb3VuZC5cbiAgICAgKiBgYGB0c1xuICAgICAqIC8vIFJlYWN0cyB0byAvc3RhcnQgY29tbWFuZHNcbiAgICAgKiBib3QuY29tbWFuZCgnc3RhcnQnLCBjdHggPT4geyAuLi4gfSlcbiAgICAgKiAvLyBSZWFjdHMgdG8gL2hlbHAgY29tbWFuZHNcbiAgICAgKiBib3QuY29tbWFuZCgnaGVscCcsIGN0eCA9PiB7IC4uLiB9KVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogVGhlIHJlc3Qgb2YgdGhlIG1lc3NhZ2UgKGV4Y2x1ZGluZyB0aGUgY29tbWFuZCwgYW5kIHRyaW1tZWQpIGlzIHByb3ZpZGVkXG4gICAgICogdmlhIGBjdHgubWF0Y2hgLlxuICAgICAqXG4gICAgICogPiAqKkRpZCB5b3Uga25vdz8qKiBZb3UgY2FuIHVzZSBkZWVwIGxpbmtpbmdcbiAgICAgKiA+IChodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMjZGVlcC1saW5raW5nKSB0byBsZXQgdXNlcnMgc3RhcnQgeW91clxuICAgICAqID4gYm90IHdpdGggYSBjdXN0b20gcGF5bG9hZC4gQXMgYW4gZXhhbXBsZSwgc2VuZCBzb21lb25lIHRoZSBsaW5rXG4gICAgICogPiBodHRwczovL3QubWUvbmFtZS1vZi15b3VyLWJvdD9zdGFydD1jdXN0b20tcGF5bG9hZCBhbmQgcmVnaXN0ZXIgYSBzdGFydFxuICAgICAqID4gY29tbWFuZCBoYW5kbGVyIG9uIHlvdXIgYm90IHdpdGggZ3JhbW1ZLiBBcyBzb29uIGFzIHRoZSB1c2VyIHN0YXJ0c1xuICAgICAqID4geW91ciBib3QsIHlvdSB3aWxsIHJlY2VpdmUgYGN1c3RvbS1wYXlsb2FkYCBpbiB0aGUgYGN0eC5tYXRjaGBcbiAgICAgKiA+IHByb3BlcnR5IVxuICAgICAqID4gYGBgdHNcbiAgICAgKiA+IGJvdC5jb21tYW5kKCdzdGFydCcsIGN0eCA9PiB7XG4gICAgICogPiAgIGNvbnN0IHBheWxvYWQgPSBjdHgubWF0Y2ggLy8gd2lsbCBiZSAnY3VzdG9tLXBheWxvYWQnXG4gICAgICogPiB9KVxuICAgICAqID4gYGBgXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgY29tbWFuZHMgYXJlIG5vdCBtYXRjaGVkIGluIGNhcHRpb25zIG9yIGluIHRoZSBtaWRkbGUgb2YgdGhlXG4gICAgICogdGV4dC5cbiAgICAgKiBgYGB0c1xuICAgICAqIGJvdC5jb21tYW5kKCdzdGFydCcsIGN0eCA9PiB7IC4uLiB9KVxuICAgICAqIC8vIC4uLiBkb2VzIG5vdCBtYXRjaDpcbiAgICAgKiAvLyBBIG1lc3NhZ2Ugc2F5aW5nOiDigJxzb21lIHRleHQgL3N0YXJ0IHNvbWUgbW9yZSB0ZXh04oCdXG4gICAgICogLy8gQSBwaG90byBtZXNzYWdlIHdpdGggdGhlIGNhcHRpb24g4oCcL3N0YXJ04oCdXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCBjb21tYW5kcyBhcmUgZGV0ZWN0ZWQgaW4gY2hhbm5lbCBwb3N0cywgdG9vLiBUaGlzIG1lYW5zIHRoYXRcbiAgICAgKiBgY3R4Lm1lc3NhZ2VgIGlzIHBvdGVudGlhbGx5IGB1bmRlZmluZWRgLCBzbyB5b3Ugc2hvdWxkIHVzZSBgY3R4Lm1zZ2BcbiAgICAgKiBpbnN0ZWFkIHRvIGdyYWIgYm90aCBtZXNzYWdlcyBhbmQgY2hhbm5lbCBwb3N0cy4gQWx0ZXJuYXRpdmVseSwgaWYgeW91XG4gICAgICogd2FudCB0byBsaW1pdCB5b3VyIGJvdCB0byBmaW5kaW5nIGNvbW1hbmRzIG9ubHkgaW4gcHJpdmF0ZSBhbmQgZ3JvdXBcbiAgICAgKiBjaGF0cywgeW91IGNhbiB1c2UgYGJvdC5vbignbWVzc2FnZScpLmNvbW1hbmQoJ3N0YXJ0JywgY3R4ID0+IHsgLi4uIH0pYCxcbiAgICAgKiBvciBldmVuIHN0b3JlIGEgbWVzc2FnZS1vbmx5IHZlcnNpb24gb2YgeW91ciBib3QgaW4gYSB2YXJpYWJsZSBsaWtlIHNvOlxuICAgICAqIGBgYHRzXG4gICAgICogY29uc3QgbSA9IGJvdC5vbignbWVzc2FnZScpXG4gICAgICpcbiAgICAgKiBtLmNvbW1hbmQoJ3N0YXJ0JywgY3R4ID0+IHsgLi4uIH0pXG4gICAgICogbS5jb21tYW5kKCdoZWxwJywgY3R4ID0+IHsgLi4uIH0pXG4gICAgICogLy8gZXRjXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBJZiB5b3UgbmVlZCBtb3JlIGZyZWVkb20gbWF0Y2hpbmcgeW91ciBjb21tYW5kcywgY2hlY2sgb3V0IHRoZVxuICAgICAqIGBjb21tYW5kLWZpbHRlcmAgcGx1Z2luLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbW1hbmQgVGhlIGNvbW1hbmQgdG8gbG9vayBmb3JcbiAgICAgKiBAcGFyYW0gbWlkZGxld2FyZSBUaGUgbWlkZGxld2FyZSB0byByZWdpc3RlclxuICAgICAqL1xuICAgIGNvbW1hbmQ8UyBleHRlbmRzIHN0cmluZz4oXG4gICAgICAgIGNvbW1hbmQ6IE1heWJlQXJyYXk8XG4gICAgICAgICAgICBTdHJpbmdXaXRoU3VnZ2VzdGlvbnM8UyB8IFwic3RhcnRcIiB8IFwiaGVscFwiIHwgXCJzZXR0aW5nc1wiPlxuICAgICAgICA+LFxuICAgICAgICAuLi5taWRkbGV3YXJlOiBBcnJheTxDb21tYW5kTWlkZGxld2FyZTxDPj5cbiAgICApOiBDb21wb3NlcjxDb21tYW5kQ29udGV4dDxDPj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXIoQ29udGV4dC5oYXMuY29tbWFuZChjb21tYW5kKSwgLi4ubWlkZGxld2FyZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIHNvbWUgbWlkZGxld2FyZSBmb3IgY2VydGFpbiBjaGF0IHR5cGVzIG9ubHkuIEZvciBleGFtcGxlLCB5b3VcbiAgICAgKiBjYW4gdXNlIHRoaXMgbWV0aG9kIHRvIG9ubHkgcmVjZWl2ZSB1cGRhdGVzIGZyb20gcHJpdmF0ZSBjaGF0cy4gVGhlIGZvdXJcbiAgICAgKiBjaGF0IHR5cGVzIGFyZSBgXCJjaGFubmVsXCJgLCBgXCJzdXBlcmdyb3VwXCJgLCBgXCJncm91cFwiYCwgYW5kIGBcInByaXZhdGVcImAuXG4gICAgICogVGhpcyBpcyBlc3BlY2lhbGx5IHVzZWZ1bCB3aGVuIGNvbWJpbmVkIHdpdGggb3RoZXIgZmlsdGVyaW5nIGxvZ2ljLiBGb3JcbiAgICAgKiBleGFtcGxlLCB0aGlzIGlzIGhvdyBjYW4geW91IHJlc3BvbmQgdG8gYC9zdGFydGAgY29tbWFuZHMgb25seSBmcm9tXG4gICAgICogcHJpdmF0ZSBjaGF0czpcbiAgICAgKiBgYGB0c1xuICAgICAqIGJvdC5jaGF0VHlwZShcInByaXZhdGVcIikuY29tbWFuZChcInN0YXJ0XCIsIGN0eCA9PiB7IC4uLiB9KVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogTmF0dXJhbGx5LCB5b3UgY2FuIGFsc28gdXNlIHRoaXMgbWV0aG9kIG9uIGl0cyBvd24uXG4gICAgICogYGBgdHNcbiAgICAgKiAvLyBQcml2YXRlIGNoYXRzIG9ubHlcbiAgICAgKiBib3QuY2hhdFR5cGUoXCJwcml2YXRlXCIsIGN0eCA9PiB7IC4uLiB9KTtcbiAgICAgKiAvLyBDaGFubmVscyBvbmx5XG4gICAgICogYm90LmNoYXRUeXBlKFwiY2hhbm5lbFwiLCBjdHggPT4geyAuLi4gfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIHBhc3MgYW4gYXJyYXkgb2YgY2hhdCB0eXBlcyBpZiB5b3Ugd2FudCB5b3VyIG1pZGRsZXdhcmUgdG8gcnVuXG4gICAgICogZm9yIGFueSBvZiBzZXZlcmFsIHByb3ZpZGVkIGNoYXQgdHlwZXMuXG4gICAgICogYGBgdHNcbiAgICAgKiAvLyBHcm91cHMgYW5kIHN1cGVyZ3JvdXBzIG9ubHlcbiAgICAgKiBib3QuY2hhdFR5cGUoW1wiZ3JvdXBcIiwgXCJzdXBlcmdyb3VwXCJdLCBjdHggPT4geyAuLi4gfSk7XG4gICAgICogYGBgXG4gICAgICogW1JlbWVtYmVyXShodHRwczovL2dyYW1teS5kZXYvZ3VpZGUvY29udGV4dC5odG1sI3Nob3J0Y3V0cykgYWxzbyB0aGF0IHlvdVxuICAgICAqIGNhbiBhY2Nlc3MgdGhlIGNoYXQgdHlwZSB2aWEgYGN0eC5jaGF0LnR5cGVgLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRUeXBlIFRoZSBjaGF0IHR5cGVcbiAgICAgKiBAcGFyYW0gbWlkZGxld2FyZSBUaGUgbWlkZGxld2FyZSB0byByZWdpc3RlclxuICAgICAqL1xuICAgIGNoYXRUeXBlPFQgZXh0ZW5kcyBDaGF0W1widHlwZVwiXT4oXG4gICAgICAgIGNoYXRUeXBlOiBNYXliZUFycmF5PFQ+LFxuICAgICAgICAuLi5taWRkbGV3YXJlOiBBcnJheTxNaWRkbGV3YXJlPENoYXRUeXBlQ29udGV4dDxDLCBUPj4+XG4gICAgKTogQ29tcG9zZXI8Q2hhdFR5cGVDb250ZXh0PEMsIFQ+PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbHRlcihDb250ZXh0Lmhhcy5jaGF0VHlwZShjaGF0VHlwZSksIC4uLm1pZGRsZXdhcmUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBzb21lIG1pZGRsZXdhcmUgZm9yIGNhbGxiYWNrIHF1ZXJpZXMsIGkuZS4gdGhlIHVwZGF0ZXMgdGhhdFxuICAgICAqIFRlbGVncmFtIGRlbGl2ZXJzIHRvIHlvdXIgYm90IHdoZW4gYSB1c2VyIGNsaWNrcyBhbiBpbmxpbmUgYnV0dG9uICh0aGF0XG4gICAgICogaXMgYSBidXR0b24gdW5kZXIgYSBtZXNzYWdlKS5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGVzc2VudGlhbGx5IHRoZSBzYW1lIGFzIGNhbGxpbmdcbiAgICAgKiBgYGB0c1xuICAgICAqIGJvdC5vbignY2FsbGJhY2tfcXVlcnk6ZGF0YScsIGN0eCA9PiB7IC4uLiB9KVxuICAgICAqIGBgYFxuICAgICAqIGJ1dCBpdCBhbHNvIGFsbG93cyB5b3UgbWF0Y2ggdGhlIHF1ZXJ5IGRhdGEgYWdhaW5zIGEgZ2l2ZW4gdGV4dCBvclxuICAgICAqIHJlZ3VsYXIgZXhwcmVzc2lvbi5cbiAgICAgKlxuICAgICAqIGBgYHRzXG4gICAgICogLy8gQ3JlYXRlIGFuIGlubGluZSBrZXlib2FyZFxuICAgICAqIGNvbnN0IGtleWJvYXJkID0gbmV3IElubGluZUtleWJvYXJkKCkudGV4dCgnR28hJywgJ2J1dHRvbi1wYXlsb2FkJylcbiAgICAgKiAvLyBTZW5kIGEgbWVzc2FnZSB3aXRoIHRoZSBrZXlib2FyZFxuICAgICAqIGF3YWl0IGJvdC5hcGkuc2VuZE1lc3NhZ2UoY2hhdF9pZCwgJ1ByZXNzIGEgYnV0dG9uIScsIHtcbiAgICAgKiAgIHJlcGx5X21hcmt1cDoga2V5Ym9hcmRcbiAgICAgKiB9KVxuICAgICAqIC8vIExpc3RlbiB0byB1c2VycyBwcmVzc2luZyBidXR0b25zIHdpdGggdGhhdCBzcGVjaWZpYyBwYXlsb2FkXG4gICAgICogYm90LmNhbGxiYWNrUXVlcnkoJ2J1dHRvbi1wYXlsb2FkJywgY3R4ID0+IHsgLi4uIH0pXG4gICAgICpcbiAgICAgKiAvLyBMaXN0ZW4gdG8gdXNlcnMgcHJlc3NpbmcgYW55IGJ1dHRvbiB5b3VyIGJvdCBldmVyIHNlbnRcbiAgICAgKiBib3Qub24oJ2NhbGxiYWNrX3F1ZXJ5OmRhdGEnLCBjdHggPT4geyAuLi4gfSlcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEFsd2F5cyByZW1lbWJlciB0byBjYWxsIGBhbnN3ZXJDYWxsYmFja1F1ZXJ5YOKAlGV2ZW4gaWYgeW91IGRvbid0IHBlcmZvcm1cbiAgICAgKiBhbnkgYWN0aW9uOiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI2Fuc3dlcmNhbGxiYWNrcXVlcnlcbiAgICAgKiBgYGB0c1xuICAgICAqIGJvdC5vbignY2FsbGJhY2tfcXVlcnk6ZGF0YScsIGFzeW5jIGN0eCA9PiB7XG4gICAgICogICBhd2FpdCBjdHguYW5zd2VyQ2FsbGJhY2tRdWVyeSgpXG4gICAgICogfSlcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFlvdSBjYW4gcGFzcyBhbiBhcnJheSBvZiB0cmlnZ2Vycy4gWW91ciBtaWRkbGV3YXJlIHdpbGwgYmUgZXhlY3V0ZWQgaWYgYXRcbiAgICAgKiBsZWFzdCBvbmUgb2YgdGhlbSBtYXRjaGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyaWdnZXIgVGhlIHN0cmluZyB0byBsb29rIGZvciBpbiB0aGUgcGF5bG9hZFxuICAgICAqIEBwYXJhbSBtaWRkbGV3YXJlIFRoZSBtaWRkbGV3YXJlIHRvIHJlZ2lzdGVyXG4gICAgICovXG4gICAgY2FsbGJhY2tRdWVyeShcbiAgICAgICAgdHJpZ2dlcjogTWF5YmVBcnJheTxzdHJpbmcgfCBSZWdFeHA+LFxuICAgICAgICAuLi5taWRkbGV3YXJlOiBBcnJheTxDYWxsYmFja1F1ZXJ5TWlkZGxld2FyZTxDPj5cbiAgICApOiBDb21wb3NlcjxDYWxsYmFja1F1ZXJ5Q29udGV4dDxDPj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXIoQ29udGV4dC5oYXMuY2FsbGJhY2tRdWVyeSh0cmlnZ2VyKSwgLi4ubWlkZGxld2FyZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIHNvbWUgbWlkZGxld2FyZSBmb3IgZ2FtZSBxdWVyaWVzLCBpLmUuIHRoZSB1cGRhdGVzIHRoYXRcbiAgICAgKiBUZWxlZ3JhbSBkZWxpdmVycyB0byB5b3VyIGJvdCB3aGVuIGEgdXNlciBjbGlja3MgYW4gaW5saW5lIGJ1dHRvbiBmb3IgdGhlXG4gICAgICogSFRNTDUgZ2FtZXMgcGxhdGZvcm0gb24gVGVsZWdyYW0uXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBlc3NlbnRpYWxseSB0aGUgc2FtZSBhcyBjYWxsaW5nXG4gICAgICogYGBgdHNcbiAgICAgKiBib3Qub24oJ2NhbGxiYWNrX3F1ZXJ5OmdhbWVfc2hvcnRfbmFtZScsIGN0eCA9PiB7IC4uLiB9KVxuICAgICAqIGBgYFxuICAgICAqIGJ1dCBpdCBhbHNvIGFsbG93cyB5b3UgbWF0Y2ggdGhlIHF1ZXJ5IGRhdGEgYWdhaW5zIGEgZ2l2ZW4gdGV4dCBvclxuICAgICAqIHJlZ3VsYXIgZXhwcmVzc2lvbi5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gcGFzcyBhbiBhcnJheSBvZiB0cmlnZ2Vycy4gWW91ciBtaWRkbGV3YXJlIHdpbGwgYmUgZXhlY3V0ZWQgaWYgYXRcbiAgICAgKiBsZWFzdCBvbmUgb2YgdGhlbSBtYXRjaGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyaWdnZXIgVGhlIHN0cmluZyB0byBsb29rIGZvciBpbiB0aGUgcGF5bG9hZFxuICAgICAqIEBwYXJhbSBtaWRkbGV3YXJlIFRoZSBtaWRkbGV3YXJlIHRvIHJlZ2lzdGVyXG4gICAgICovXG4gICAgZ2FtZVF1ZXJ5KFxuICAgICAgICB0cmlnZ2VyOiBNYXliZUFycmF5PHN0cmluZyB8IFJlZ0V4cD4sXG4gICAgICAgIC4uLm1pZGRsZXdhcmU6IEFycmF5PEdhbWVRdWVyeU1pZGRsZXdhcmU8Qz4+XG4gICAgKTogQ29tcG9zZXI8R2FtZVF1ZXJ5Q29udGV4dDxDPj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXIoQ29udGV4dC5oYXMuZ2FtZVF1ZXJ5KHRyaWdnZXIpLCAuLi5taWRkbGV3YXJlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgbWlkZGxld2FyZSBmb3IgaW5saW5lIHF1ZXJpZXMuIFRlbGVncmFtIHNlbmRzIGFuIGlubGluZSBxdWVyeVxuICAgICAqIHRvIHlvdXIgYm90IHdoZW5ldmVyIGEgdXNlciB0eXBlcyDigJxAeW91cl9ib3RfbmFtZSAuLi7igJ0gaW50byBhIHRleHQgZmllbGRcbiAgICAgKiBpbiBUZWxlZ3JhbS4gWW91IGJvdCB3aWxsIHRoZW4gcmVjZWl2ZSB0aGUgZW50ZXJlZCBzZWFyY2ggcXVlcnkgYW5kIGNhblxuICAgICAqIHJlc3BvbmQgd2l0aCBhIG51bWJlciBvZiByZXN1bHRzICh0ZXh0LCBpbWFnZXMsIGV0YykgdGhhdCB0aGUgdXNlciBjYW5cbiAgICAgKiBwaWNrIGZyb20gdG8gc2VuZCBhIG1lc3NhZ2UgX3ZpYV8geW91ciBib3QgdG8gdGhlIHJlc3BlY3RpdmUgY2hhdC4gQ2hlY2tcbiAgICAgKiBvdXQgaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2lubGluZSB0byByZWFkIG1vcmUgYWJvdXQgaW5saW5lIGJvdHMuXG4gICAgICpcbiAgICAgKiA+IE5vdGUgdGhhdCB5b3UgaGF2ZSB0byBlbmFibGUgaW5saW5lIG1vZGUgZm9yIHlvdSBib3QgYnkgY29udGFjdGluZ1xuICAgICAqID4gQEJvdEZhdGhlciBmaXJzdC5cbiAgICAgKlxuICAgICAqIGBgYHRzXG4gICAgICogLy8gTGlzdGVuIGZvciB1c2VycyB0eXBpbmcg4oCcQHlvdXJfYm90X25hbWUgcXVlcnnigJ1cbiAgICAgKiBib3QuaW5saW5lUXVlcnkoJ3F1ZXJ5JywgYXN5bmMgY3R4ID0+IHtcbiAgICAgKiAgIC8vIEFuc3dlciB0aGUgaW5saW5lIHF1ZXJ5LCBjb25mZXIgaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNhbnN3ZXJpbmxpbmVxdWVyeVxuICAgICAqICAgYXdhaXQgY3R4LmFuc3dlcklubGluZVF1ZXJ5KCAuLi4gKVxuICAgICAqIH0pXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJpZ2dlciBUaGUgaW5saW5lIHF1ZXJ5IHRleHQgdG8gbWF0Y2hcbiAgICAgKiBAcGFyYW0gbWlkZGxld2FyZSBUaGUgbWlkZGxld2FyZSB0byByZWdpc3RlclxuICAgICAqL1xuICAgIGlubGluZVF1ZXJ5KFxuICAgICAgICB0cmlnZ2VyOiBNYXliZUFycmF5PHN0cmluZyB8IFJlZ0V4cD4sXG4gICAgICAgIC4uLm1pZGRsZXdhcmU6IEFycmF5PElubGluZVF1ZXJ5TWlkZGxld2FyZTxDPj5cbiAgICApOiBDb21wb3NlcjxJbmxpbmVRdWVyeUNvbnRleHQ8Qz4+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyKENvbnRleHQuaGFzLmlubGluZVF1ZXJ5KHRyaWdnZXIpLCAuLi5taWRkbGV3YXJlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiA+IFRoaXMgaXMgYW4gYWR2YW5jZWQgbWV0aG9kIG9mIGdyYW1tWS5cbiAgICAgKlxuICAgICAqIFJlZ2lzdGVycyBtaWRkbGV3YXJlIGJlaGluZCBhIGN1c3RvbSBmaWx0ZXIgZnVuY3Rpb24gdGhhdCBvcGVyYXRlcyBvbiB0aGVcbiAgICAgKiBjb250ZXh0IG9iamVjdCBhbmQgZGVjaWRlcyB3aGV0aGVyIG9yIG5vdCB0byBleGVjdXRlIHRoZSBtaWRkbGV3YXJlLiBJblxuICAgICAqIG90aGVyIHdvcmRzLCB0aGUgbWlkZGxld2FyZSB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgaWYgdGhlIGdpdmVuIHByZWRpY2F0ZVxuICAgICAqIHJldHVybnMgYHRydWVgIGZvciB0aGUgZ2l2ZW4gY29udGV4dCBvYmplY3QuIE90aGVyd2lzZSwgaXQgd2lsbCBiZVxuICAgICAqIHNraXBwZWQgYW5kIHRoZSBuZXh0IG1pZGRsZXdhcmUgd2lsbCBiZSBleGVjdXRlZC5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGhhcyB0d28gc2lnbmF0dXJlcy4gVGhlIGZpcnN0IG9uZSBpcyBzdHJhaWdodGZvcndhcmQsIGl0IGlzXG4gICAgICogdGhlIG9uZSBkZXNjcmliZWQgYWJvdmUuIE5vdGUgdGhhdCB0aGUgcHJlZGljYXRlIG1heSBiZSBhc3luY3Jvbm91cywgaS5lLlxuICAgICAqIGl0IGNhbiByZXR1cm4gYSBQcm9taXNlIG9mIGEgYm9vbGVhbi5cbiAgICAgKlxuICAgICAqIEFsdGVybmF0aXZlbHksIHlvdSBjYW4gcGFzcyBhIGZ1bmN0aW9uIHRoYXQgaGFzIGEgdHlwZSBwcmVkaWNhdGUgYXNcbiAgICAgKiByZXR1cm4gdHlwZS4gVGhpcyB3aWxsIGFsbG93IHlvdSB0byBuYXJyb3cgZG93biB0aGUgY29udGV4dCBvYmplY3QuIFRoZVxuICAgICAqIGluc3RhbGxlZCBtaWRkbGV3YXJlIGlzIHRoZW4gYWJsZSB0byBvcGVyYXRlIG9uIHRoaXMgY29uc3RyYWluZWQgY29udGV4dFxuICAgICAqIG9iamVjdC5cbiAgICAgKiBgYGB0c1xuICAgICAqIC8vIE5PUk1BTCBVU0FHRVxuICAgICAqIC8vIE9ubHkgcHJvY2VzcyBldmVyeSBzZWNvbmQgdXBkYXRlXG4gICAgICogYm90LmZpbHRlcihjdHggPT4gY3R4LnVwZGF0ZS51cGRhdGVfaWQgJSAyID09PSAwLCBjdHggPT4geyAuLi4gfSlcbiAgICAgKlxuICAgICAqIC8vIFRZUEUgUFJFRElDQVRFIFVTQUdFXG4gICAgICogZnVuY3Rpb24gcHJlZGljYXRlKGN0eCk6IGN0eCBpcyBDb250ZXh0ICYgeyBtZXNzYWdlOiB1bmRlZmluZWQgfSB7XG4gICAgICogICByZXR1cm4gY3R4Lm1lc3NhZ2UgPT09IHVuZGVmaW5lZFxuICAgICAqIH1cbiAgICAgKiAvLyBPbmx5IHByb2Nlc3MgdXBkYXRlcyB3aGVyZSBgbWVzc2FnZWAgaXMgYHVuZGVmaW5lZGBcbiAgICAgKiBib3QuZmlsdGVyKHByZWRpY2F0ZSwgY3R4ID0+IHtcbiAgICAgKiAgIGNvbnN0IG0gPSBjdHgubWVzc2FnZSAvLyBpbmZlcnJlZCBhcyBhbHdheXMgdW5kZWZpbmVkIVxuICAgICAqICAgY29uc3QgbTIgPSBjdHgudXBkYXRlLm1lc3NhZ2UgLy8gYWxzbyBpbmZlcnJlZCBhcyBhbHdheXMgdW5kZWZpbmVkIVxuICAgICAqIH0pXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJlZGljYXRlIFRoZSBwcmVkaWNhdGUgdG8gY2hlY2tcbiAgICAgKiBAcGFyYW0gbWlkZGxld2FyZSBUaGUgbWlkZGxld2FyZSB0byByZWdpc3RlclxuICAgICAqL1xuICAgIGZpbHRlcjxEIGV4dGVuZHMgQz4oXG4gICAgICAgIHByZWRpY2F0ZTogKGN0eDogQykgPT4gY3R4IGlzIEQsXG4gICAgICAgIC4uLm1pZGRsZXdhcmU6IEFycmF5PE1pZGRsZXdhcmU8RD4+XG4gICAgKTogQ29tcG9zZXI8RD47XG4gICAgZmlsdGVyKFxuICAgICAgICBwcmVkaWNhdGU6IChjdHg6IEMpID0+IE1heWJlUHJvbWlzZTxib29sZWFuPixcbiAgICAgICAgLi4ubWlkZGxld2FyZTogQXJyYXk8TWlkZGxld2FyZTxDPj5cbiAgICApOiBDb21wb3NlcjxDPjtcbiAgICBmaWx0ZXIoXG4gICAgICAgIHByZWRpY2F0ZTogKGN0eDogQykgPT4gTWF5YmVQcm9taXNlPGJvb2xlYW4+LFxuICAgICAgICAuLi5taWRkbGV3YXJlOiBBcnJheTxNaWRkbGV3YXJlPEM+PlxuICAgICkge1xuICAgICAgICBjb25zdCBjb21wb3NlciA9IG5ldyBDb21wb3NlciguLi5taWRkbGV3YXJlKTtcbiAgICAgICAgdGhpcy5icmFuY2gocHJlZGljYXRlLCBjb21wb3NlciwgcGFzcyk7XG4gICAgICAgIHJldHVybiBjb21wb3NlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiA+IFRoaXMgaXMgYW4gYWR2YW5jZWQgbWV0aG9kIG9mIGdyYW1tWS5cbiAgICAgKlxuICAgICAqIFJlZ2lzdGVycyBtaWRkbGV3YXJlIGJlaGluZCBhIGN1c3RvbSBmaWx0ZXIgZnVuY3Rpb24gdGhhdCBvcGVyYXRlcyBvbiB0aGVcbiAgICAgKiBjb250ZXh0IG9iamVjdCBhbmQgZGVjaWRlcyB3aGV0aGVyIG9yIG5vdCB0byBleGVjdXRlIHRoZSBtaWRkbGV3YXJlLiBJblxuICAgICAqIG90aGVyIHdvcmRzLCB0aGUgbWlkZGxld2FyZSB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgaWYgdGhlIGdpdmVuIHByZWRpY2F0ZVxuICAgICAqIHJldHVybnMgYGZhbHNlYCBmb3IgdGhlIGdpdmVuIGNvbnRleHQgb2JqZWN0LiBPdGhlcndpc2UsIGl0IHdpbGwgYmVcbiAgICAgKiBza2lwcGVkIGFuZCB0aGUgbmV4dCBtaWRkbGV3YXJlIHdpbGwgYmUgZXhlY3V0ZWQuIE5vdGUgdGhhdCB0aGUgcHJlZGljYXRlXG4gICAgICogbWF5IGJlIGFzeW5jcm9ub3VzLCBpLmUuIGl0IGNhbiByZXR1cm4gYSBQcm9taXNlIG9mIGEgYm9vbGVhbi5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHRoZSBzYW1lIHVzaW5nIGBmaWx0ZXJgIChub3JtYWwgdXNhZ2UpIHdpdGggYSBuZWdhdGVkXG4gICAgICogcHJlZGljYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByZWRpY2F0ZSBUaGUgcHJlZGljYXRlIHRvIGNoZWNrXG4gICAgICogQHBhcmFtIG1pZGRsZXdhcmUgVGhlIG1pZGRsZXdhcmUgdG8gcmVnaXN0ZXJcbiAgICAgKi9cbiAgICBkcm9wKFxuICAgICAgICBwcmVkaWNhdGU6IChjdHg6IEMpID0+IE1heWJlUHJvbWlzZTxib29sZWFuPixcbiAgICAgICAgLi4ubWlkZGxld2FyZTogQXJyYXk8TWlkZGxld2FyZTxDPj5cbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyKFxuICAgICAgICAgICAgYXN5bmMgKGN0eDogQykgPT4gIShhd2FpdCBwcmVkaWNhdGUoY3R4KSksXG4gICAgICAgICAgICAuLi5taWRkbGV3YXJlLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqID4gVGhpcyBpcyBhbiBhZHZhbmNlZCBtZXRob2Qgb2YgZ3JhbW1ZLlxuICAgICAqXG4gICAgICogUmVnaXN0ZXJzIHNvbWUgbWlkZGxld2FyZSB0aGF0IHJ1bnMgY29uY3VycmVudGx5IHRvIHRoZSBleGVjdXRpbmdcbiAgICAgKiBtaWRkbGV3YXJlIHN0YWNrLlxuICAgICAqIGBgYHRzXG4gICAgICogYm90LnVzZSggLi4uICkgLy8gd2lsbCBydW4gZmlyc3RcbiAgICAgKiBib3QuZm9yayggLi4uICkgLy8gd2lsbCBiZSBzdGFydGVkIHNlY29uZCwgYnV0IHJ1biBjb25jdXJyZW50bHlcbiAgICAgKiBib3QudXNlKCAuLi4gKSAvLyB3aWxsIGFsc28gYmUgcnVuIHNlY29uZFxuICAgICAqIGBgYFxuICAgICAqIEluIHRoZSBmaXJzdCBtaWRkbGV3YXJlLCBhcyBzb29uIGFzIGBuZXh0YCdzIFByb21pc2UgcmVzb2x2ZXMsIGJvdGggZm9ya3NcbiAgICAgKiBoYXZlIGNvbXBsZXRlZC5cbiAgICAgKlxuICAgICAqIEJvdGggdGhlIGZvcmsgYW5kIHRoZSBkb3duc3RyZWFtIG1pZGRsZXdhcmUgYXJlIGF3YWl0ZWQgd2l0aFxuICAgICAqIGBQcm9taXNlLmFsbGAsIHNvIHlvdSB3aWxsIG9ubHkgYmUgdG8gY2F0Y2ggdXAgdG8gb25lIGVycm9yICh0aGUgb25lIHRoYXRcbiAgICAgKiBpcyB0aHJvd24gZmlyc3QpLlxuICAgICAqXG4gICAgICogSW4gb3Bwb3NpdGUgdG8gdGhlIG90aGVyIG1pZGRsZXdhcmUgbWV0aG9kcyBvbiBjb21wb3NlciwgYGZvcmtgIGRvZXMgbm90XG4gICAgICogcmV0dXJuIHNpbXBseSByZXR1cm4gdGhlIGNvbXBvc2VyIGNvbm5lY3RlZCB0byB0aGUgbWFpbiBtaWRkbGV3YXJlIHN0YWNrLlxuICAgICAqIEluc3RlYWQsIGl0IHJldHVybnMgdGhlIGNyZWF0ZWQgY29tcG9zZXIgX29mIHRoZSBmb3JrXyBjb25uZWN0ZWQgdG8gdGhlXG4gICAgICogbWlkZGxld2FyZSBzdGFjay4gVGhpcyBhbGxvd3MgZm9yIHRoZSBmb2xsb3dpbmcgcGF0dGVybi5cbiAgICAgKiBgYGB0c1xuICAgICAqIC8vIE1pZGRsZXdhcmUgd2lsbCBiZSBydW4gY29uY3VycmVudGx5IVxuICAgICAqIGJvdC5mb3JrKCkub24oJ21lc3NhZ2UnLCBjdHggPT4geyAuLi4gfSlcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBtaWRkbGV3YXJlIFRoZSBtaWRkbGV3YXJlIHRvIHJ1biBjb25jdXJyZW50bHlcbiAgICAgKi9cbiAgICBmb3JrKC4uLm1pZGRsZXdhcmU6IEFycmF5PE1pZGRsZXdhcmU8Qz4+KSB7XG4gICAgICAgIGNvbnN0IGNvbXBvc2VyID0gbmV3IENvbXBvc2VyKC4uLm1pZGRsZXdhcmUpO1xuICAgICAgICBjb25zdCBmb3JrID0gZmxhdHRlbihjb21wb3Nlcik7XG4gICAgICAgIHRoaXMudXNlKChjdHgsIG5leHQpID0+IFByb21pc2UuYWxsKFtuZXh0KCksIHJ1bihmb3JrLCBjdHgpXSkpO1xuICAgICAgICByZXR1cm4gY29tcG9zZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogPiBUaGlzIGlzIGFuIGFkdmFuY2VkIG1ldGhvZCBvZiBncmFtbVkuXG4gICAgICpcbiAgICAgKiBFeGVjdXRlcyBzb21lIG1pZGRsZXdhcmUgdGhhdCBjYW4gYmUgZ2VuZXJhdGVkIG9uIHRoZSBmbHkgZm9yIGVhY2hcbiAgICAgKiBjb250ZXh0LiBQYXNzIGEgZmFjdG9yeSBmdW5jdGlvbiB0aGF0IGNyZWF0ZXMgc29tZSBtaWRkbGV3YXJlIChvciBhXG4gICAgICogbWlkZGxld2FyZSBhcnJheSBldmVuKS4gVGhlIGZhY3RvcnkgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgb25jZSBwZXJcbiAgICAgKiBjb250ZXh0LCBhbmQgaXRzIHJlc3VsdCB3aWxsIGJlIGV4ZWN1dGVkIHdpdGggdGhlIGNvbnRleHQgb2JqZWN0LlxuICAgICAqIGBgYHRzXG4gICAgICogLy8gVGhlIG1pZGRsZXdhcmUgcmV0dXJuZWQgYnkgYGNyZWF0ZU15TWlkZGxld2FyZWAgd2lsbCBiZSB1c2VkIG9ubHkgb25jZVxuICAgICAqIGJvdC5sYXp5KGN0eCA9PiBjcmVhdGVNeU1pZGRsZXdhcmUoY3R4KSlcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFlvdSBtYXkgZ2VuZXJhdGUgdGhpcyBtaWRkbGV3YXJlIGluIGFuIGBhc3luY2AgZmFzaGlvbi5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gZGVjaWRlIHRvIHJldHVybiBhbiBlbXB0eSBhcnJheSAoYFtdYCkgaWYgeW91IGRvbid0IHdhbnQgdG8gcnVuXG4gICAgICogYW55IG1pZGRsZXdhcmUgZm9yIGEgZ2l2ZW4gY29udGV4dCBvYmplY3QuIFRoaXMgaXMgZXF1aXZhbGVudCB0b1xuICAgICAqIHJldHVybmluZyBhbiBlbXB0eSBpbnN0YW5jZSBvZiBgQ29tcG9zZXJgLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1pZGRsZXdhcmVGYWN0b3J5IFRoZSBmYWN0b3J5IGZ1bmN0aW9uIGNyZWF0aW5nIHRoZSBtaWRkbGV3YXJlXG4gICAgICovXG4gICAgbGF6eShcbiAgICAgICAgbWlkZGxld2FyZUZhY3Rvcnk6IChjdHg6IEMpID0+IE1heWJlUHJvbWlzZTxNYXliZUFycmF5PE1pZGRsZXdhcmU8Qz4+PixcbiAgICApOiBDb21wb3NlcjxDPiB7XG4gICAgICAgIHJldHVybiB0aGlzLnVzZShhc3luYyAoY3R4LCBuZXh0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtaWRkbGV3YXJlID0gYXdhaXQgbWlkZGxld2FyZUZhY3RvcnkoY3R4KTtcbiAgICAgICAgICAgIGNvbnN0IGFyciA9IEFycmF5LmlzQXJyYXkobWlkZGxld2FyZSkgPyBtaWRkbGV3YXJlIDogW21pZGRsZXdhcmVdO1xuICAgICAgICAgICAgYXdhaXQgZmxhdHRlbihuZXcgQ29tcG9zZXIoLi4uYXJyKSkoY3R4LCBuZXh0KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogPiBUaGlzIGlzIGFuIGFkdmFuY2VkIG1ldGhvZCBvZiBncmFtbVkuXG4gICAgICpcbiAgICAgKiBfTm90IHRvIGJlIGNvbmZ1c2VkIHdpdGggdGhlIGByb3V0ZXJgIHBsdWdpbi5fXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBhbiBhbHRlcm5hdGl2ZSB0byB0aGUgYHJvdXRlcmAgcGx1Z2luLiBJdCBhbGxvd3MgeW91IHRvXG4gICAgICogYnJhbmNoIGJldHdlZW4gZGlmZmVyZW50IG1pZGRsZXdhcmUgcGVyIGNvbnRleHQgb2JqZWN0LiBZb3UgY2FuIHBhc3MgdHdvXG4gICAgICogdGhpbmdzIHRvIGl0OlxuICAgICAqIDEuIEEgcm91dGluZyBmdW5jdGlvblxuICAgICAqIDIuIERpZmZlcmVudCBtaWRkbGV3YXJlIGlkZW50aWZpZWQgYnkga2V5XG4gICAgICpcbiAgICAgKiBUaGUgcm91dGluZyBmdW5jdGlvbiBkZWNpZGVzIGJhc2VkIG9uIHRoZSBjb250ZXh0IG9iamVjdCB3aGljaCBtaWRkbGV3YXJlXG4gICAgICogdG8gcnVuLiBFYWNoIG1pZGRsZXdhcmUgaXMgaWRlbnRpZmllZCBieSBhIGtleSwgc28gdGhlIHJvdXRpbmcgZnVuY3Rpb25cbiAgICAgKiBzaW1wbHkgcmV0dXJucyB0aGUga2V5IG9mIHRoYXQgbWlkZGxld2FyZS5cbiAgICAgKiBgYGB0c1xuICAgICAqIC8vIERlZmluZSBkaWZmZXJlbnQgcm91dGUgaGFuZGxlcnNcbiAgICAgKiBjb25zdCByb3V0ZUhhbmRsZXJzID0ge1xuICAgICAqICAgZXZlblVwZGF0ZXM6IChjdHg6IENvbnRleHQpID0+IHsgLi4uIH1cbiAgICAgKiAgIG9kZFVwZGF0ZXM6IChjdHg6IENvbnRleHQpID0+IHsgLi4uIH1cbiAgICAgKiB9XG4gICAgICogLy8gRGVjaWRlIGZvciBhIGNvbnRleHQgb2JqZWN0IHdoaWNoIG9uZSB0byBwaWNrXG4gICAgICogY29uc3Qgcm91dGVyID0gKGN0eDogQ29udGV4dCkgPT4gY3R4LnVwZGF0ZS51cGRhdGVfaWQgJSAyID09PSAwXG4gICAgICogICA/ICdldmVuVXBkYXRlcydcbiAgICAgKiAgIDogJ29kZFVwZGF0ZXMnXG4gICAgICogLy8gUm91dGUgaXQhXG4gICAgICogYm90LnJvdXRlKHJvdXRlciwgcm91dGVIYW5kbGVycylcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIE9wdGlvbmFsbHksIHlvdSBjYW4gcGFzcyBhIHRoaXJkIG9wdGlvbiB0aGF0IGlzIHVzZWQgYXMgZmFsbGJhY2tcbiAgICAgKiBtaWRkbGV3YXJlIGlmIHlvdXIgcm91dGUgZnVuY3Rpb24gcmV0dXJucyBgdW5kZWZpbmVkYCwgb3IgaWYgdGhlIGtleVxuICAgICAqIHJldHVybmVkIGJ5IHlvdXIgcm91dGVyIGhhcyBubyBtaWRkbGV3YXJlIGFzc29jaWF0ZWQgd2l0aCBpdC5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIG1heSBuZWVkIGxlc3Mgc2V0dXAgdGhhbiBmaXJzdCBpbnN0YW5jaWF0aW5nIGEgYFJvdXRlcmAsIGJ1dFxuICAgICAqIGZvciBtb3JlIGNvbXBsZXggc2V0dXBzLCBoYXZpbmcgYSBgUm91dGVyYCBtYXkgYmUgbW9yZSByZWFkYWJsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSByb3V0ZXIgVGhlIHJvdXRpbmcgZnVuY3Rpb24gdG8gdXNlXG4gICAgICogQHBhcmFtIHJvdXRlSGFuZGxlcnMgSGFuZGxlcnMgZm9yIGV2ZXJ5IHJvdXRlXG4gICAgICogQHBhcmFtIGZhbGxiYWNrIE9wdGlvbmFsIGZhbGxiYWNrIG1pZGRsZXdhcmUgaWYgbm8gcm91dGUgbWF0Y2hlc1xuICAgICAqL1xuICAgIHJvdXRlPFIgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBNaWRkbGV3YXJlPEM+Pj4oXG4gICAgICAgIHJvdXRlcjogKGN0eDogQykgPT4gTWF5YmVQcm9taXNlPHVuZGVmaW5lZCB8IGtleW9mIFI+LFxuICAgICAgICByb3V0ZUhhbmRsZXJzOiBSLFxuICAgICAgICBmYWxsYmFjazogTWlkZGxld2FyZTxDPiA9IHBhc3MsXG4gICAgKTogQ29tcG9zZXI8Qz4ge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXp5KGFzeW5jIChjdHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJvdXRlID0gYXdhaXQgcm91dGVyKGN0eCk7XG4gICAgICAgICAgICByZXR1cm4gKHJvdXRlID09PSB1bmRlZmluZWQgfHwgIXJvdXRlSGFuZGxlcnNbcm91dGVdXG4gICAgICAgICAgICAgICAgPyBmYWxsYmFja1xuICAgICAgICAgICAgICAgIDogcm91dGVIYW5kbGVyc1tyb3V0ZV0pID8/IFtdO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiA+IFRoaXMgaXMgYW4gYWR2YW5jZWQgbWV0aG9kIG9mIGdyYW1tWS5cbiAgICAgKlxuICAgICAqIEFsbG93cyB5b3UgdG8gYnJhbmNoIGJldHdlZW4gdHdvIGNhc2VzIGZvciBhIGdpdmVuIGNvbnRleHQgb2JqZWN0LlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgdGFrZXMgYSBwcmVkaWNhdGUgZnVuY3Rpb24gdGhhdCBpcyB0ZXN0ZWQgb25jZSBwZXIgY29udGV4dFxuICAgICAqIG9iamVjdC4gSWYgaXQgcmV0dXJucyBgdHJ1ZWAsIHRoZSBmaXJzdCBzdXBwbGllZCBtaWRkbGV3YXJlIGlzIGV4ZWN1dGVkLlxuICAgICAqIElmIGl0IHJldHVybnMgYGZhbHNlYCwgdGhlIHNlY29uZCBzdXBwbGllZCBtaWRkbGV3YXJlIGlzIGV4ZWN1dGVkLiBOb3RlXG4gICAgICogdGhhdCB0aGUgcHJlZGljYXRlIG1heSBiZSBhc3luY3Jvbm91cywgaS5lLiBpdCBjYW4gcmV0dXJuIGEgUHJvbWlzZSBvZiBhXG4gICAgICogYm9vbGVhbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwcmVkaWNhdGUgVGhlIHByZWRpY2F0ZSB0byBjaGVja1xuICAgICAqIEBwYXJhbSB0cnVlTWlkZGxld2FyZSBUaGUgbWlkZGxld2FyZSBmb3IgdGhlIGB0cnVlYCBjYXNlXG4gICAgICogQHBhcmFtIGZhbHNlTWlkZGxld2FyZSBUaGUgbWlkZGxld2FyZSBmb3IgdGhlIGBmYWxzZWAgY2FzZVxuICAgICAqL1xuICAgIGJyYW5jaChcbiAgICAgICAgcHJlZGljYXRlOiAoY3R4OiBDKSA9PiBNYXliZVByb21pc2U8Ym9vbGVhbj4sXG4gICAgICAgIHRydWVNaWRkbGV3YXJlOiBNYXliZUFycmF5PE1pZGRsZXdhcmU8Qz4+LFxuICAgICAgICBmYWxzZU1pZGRsZXdhcmU6IE1heWJlQXJyYXk8TWlkZGxld2FyZTxDPj4sXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxhenkoYXN5bmMgKGN0eCkgPT5cbiAgICAgICAgICAgIChhd2FpdCBwcmVkaWNhdGUoY3R4KSkgPyB0cnVlTWlkZGxld2FyZSA6IGZhbHNlTWlkZGxld2FyZVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqID4gVGhpcyBpcyBhbiBhZHZhbmNlZCBmdW5jdGlvbiBvZiBncmFtbVkuXG4gICAgICpcbiAgICAgKiBJbnN0YWxscyBhbiBlcnJvciBib3VuZGFyeSB0aGF0IGNhdGNoZXMgZXJyb3JzIHRoYXQgaGFwcGVuIG9ubHkgaW5zaWRlXG4gICAgICogdGhlIGdpdmVuIG1pZGRsZXdhcmUuIFRoaXMgYWxsb3dzIHlvdSB0byBpbnN0YWxsIGN1c3RvbSBlcnJvciBoYW5kbGVyc1xuICAgICAqIHRoYXQgcHJvdGVjdCBzb21lIHBhcnRzIG9mIHlvdXIgYm90LiBFcnJvcnMgd2lsbCBub3QgYmUgYWJsZSB0byBidWJibGVcbiAgICAgKiBvdXQgb2YgdGhpcyBwYXJ0IG9mIHlvdXIgbWlkZGxld2FyZSBzeXN0ZW0sIHVubGVzcyB0aGUgc3VwcGxpZWQgZXJyb3JcbiAgICAgKiBoYW5kbGVyIHJldGhyb3dzIHRoZW0sIGluIHdoaWNoIGNhc2UgdGhlIG5leHQgc3Vycm91bmRpbmcgZXJyb3IgYm91bmRhcnlcbiAgICAgKiB3aWxsIGNhdGNoIHRoZSBlcnJvci5cbiAgICAgKlxuICAgICAqIEV4YW1wbGUgdXNhZ2U6XG4gICAgICogYGBgdHNcbiAgICAgKiBmdW5jdGlvbiBlcnJIYW5kbGVyKGVycjogQm90RXJyb3IpIHtcbiAgICAgKiAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGJvdW5kYXJ5IGNhdWdodCBlcnJvciEnLCBlcnIpXG4gICAgICogfVxuICAgICAqXG4gICAgICogY29uc3Qgc2FmZSA9XG4gICAgICogICAvLyBBbGwgcGFzc2VkIG1pZGRsZXdhcmUgd2lsbCBiZSBwcm90ZWN0ZWQgYnkgdGhlIGVycm9yIGJvdW5kYXJ5LlxuICAgICAqICAgYm90LmVycm9yQm91bmRhcnkoZXJySGFuZGxlciwgbWlkZGxld2FyZTAsIG1pZGRsZXdhcmUxLCBtaWRkbGV3YXJlMilcbiAgICAgKlxuICAgICAqIC8vIFRob3NlIHdpbGwgYWxzbyBiZSBwcm90ZWN0ZWQhXG4gICAgICogc2FmZS5vbignbWVzc2FnZScsIG1pZGRsZXdhcmUzKVxuICAgICAqXG4gICAgICogLy8gTm8gZXJyb3IgZnJvbSBgbWlkZGxld2FyZTRgIHdpbGwgcmVhY2ggdGhlIGBlcnJIYW5kbGVyYCBmcm9tIGFib3ZlLFxuICAgICAqIC8vIGFzIGVycm9ycyBhcmUgc3VwcHJlc3NlZC5cbiAgICAgKlxuICAgICAqIC8vIGRvIG5vdGhpbmcgb24gZXJyb3IgKHN1cHByZXNzIGVycm9yKSwgYW5kIHJ1biBvdXRzaWRlIG1pZGRsZXdhcmVcbiAgICAgKiBjb25zdCBzdXBwcmVzcyA9IChfZXJyOiBCb3RFcnJvciwgbmV4dDogTmV4dEZ1bmN0aW9uKSA9PiB7IHJldHVybiBuZXh0KCkgfVxuICAgICAqIHNhZmUuZXJyb3JCb3VuZGFyeShzdXBwcmVzcykub24oJ2VkaXRlZF9tZXNzYWdlJywgbWlkZGxld2FyZTQpXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBDaGVjayBvdXQgdGhlXG4gICAgICogW2RvY3VtZW50YXRpb25dKGh0dHBzOi8vZ3JhbW15LmRldi9ndWlkZS9lcnJvcnMuaHRtbCNlcnJvci1ib3VuZGFyaWVzKSBvblxuICAgICAqIHRoZSB3ZWJzaXRlIHRvIGxlYXJuIG1vcmUgYWJvdXQgZXJyb3IgYm91bmRhcmllcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlcnJvckhhbmRsZXIgVGhlIGVycm9yIGhhbmRsZXIgdG8gdXNlXG4gICAgICogQHBhcmFtIG1pZGRsZXdhcmUgVGhlIG1pZGRsZXdhcmUgdG8gcHJvdGVjdFxuICAgICAqL1xuICAgIGVycm9yQm91bmRhcnkoXG4gICAgICAgIGVycm9ySGFuZGxlcjogKFxuICAgICAgICAgICAgZXJyb3I6IEJvdEVycm9yPEM+LFxuICAgICAgICAgICAgbmV4dDogTmV4dEZ1bmN0aW9uLFxuICAgICAgICApID0+IE1heWJlUHJvbWlzZTx1bmtub3duPixcbiAgICAgICAgLi4ubWlkZGxld2FyZTogQXJyYXk8TWlkZGxld2FyZTxDPj5cbiAgICApIHtcbiAgICAgICAgY29uc3QgY29tcG9zZXIgPSBuZXcgQ29tcG9zZXI8Qz4oLi4ubWlkZGxld2FyZSk7XG4gICAgICAgIGNvbnN0IGJvdW5kID0gZmxhdHRlbihjb21wb3Nlcik7XG4gICAgICAgIHRoaXMudXNlKGFzeW5jIChjdHgsIG5leHQpID0+IHtcbiAgICAgICAgICAgIGxldCBuZXh0Q2FsbGVkID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBjb250ID0gKCkgPT4gKChuZXh0Q2FsbGVkID0gdHJ1ZSksIFByb21pc2UucmVzb2x2ZSgpKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgYm91bmQoY3R4LCBjb250KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIG5leHRDYWxsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBhd2FpdCBlcnJvckhhbmRsZXIobmV3IEJvdEVycm9yPEM+KGVyciwgY3R4KSwgY29udCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV4dENhbGxlZCkgYXdhaXQgbmV4dCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNvbXBvc2VyO1xuICAgIH1cbn1cblxuLy8gPT09IEZpbHRlcmVkIGNvbnRleHQgbWlkZGxld2FyZSB0eXBlc1xuLyoqXG4gKiBUeXBlIG9mIHRoZSBtaWRkbGV3YXJlIHRoYXQgY2FuIGJlIHBhc3NlZCB0byBgYm90LmhlYXJzYC5cbiAqXG4gKiBUaGlzIGhlbHBlciB0eXBlIGNhbiBiZSB1c2VkIHRvIGFubm90YXRlIG1pZGRsZXdhcmUgZnVuY3Rpb25zIHRoYXQgYXJlXG4gKiBkZWZpbmVkIGluIG9uZSBwbGFjZSwgc28gdGhhdCB0aGV5IGhhdmUgdGhlIGNvcnJlY3QgdHlwZSB3aGVuIHBhc3NlZCB0b1xuICogYGJvdC5oZWFyc2AgaW4gYSBkaWZmZXJlbnQgcGxhY2UuIEZvciBpbnN0YW5jZSwgdGhpcyBhbGxvd3MgZm9yIG1vcmUgbW9kdWxhclxuICogY29kZSB3aGVyZSBoYW5kbGVycyBhcmUgZGVmaW5lZCBpbiBzZXBhcmF0ZSBmaWxlcy5cbiAqL1xuZXhwb3J0IHR5cGUgSGVhcnNNaWRkbGV3YXJlPEMgZXh0ZW5kcyBDb250ZXh0PiA9IE1pZGRsZXdhcmU8XG4gICAgSGVhcnNDb250ZXh0PEM+XG4+O1xuLyoqXG4gKiBUeXBlIG9mIHRoZSBtaWRkbGV3YXJlIHRoYXQgY2FuIGJlIHBhc3NlZCB0byBgYm90LmNvbW1hbmRgLlxuICpcbiAqIFRoaXMgaGVscGVyIHR5cGUgY2FuIGJlIHVzZWQgdG8gYW5ub3RhdGUgbWlkZGxld2FyZSBmdW5jdGlvbnMgdGhhdCBhcmVcbiAqIGRlZmluZWQgaW4gb25lIHBsYWNlLCBzbyB0aGF0IHRoZXkgaGF2ZSB0aGUgY29ycmVjdCB0eXBlIHdoZW4gcGFzc2VkIHRvXG4gKiBgYm90LmNvbW1hbmRgIGluIGEgZGlmZmVyZW50IHBsYWNlLiBGb3IgaW5zdGFuY2UsIHRoaXMgYWxsb3dzIGZvciBtb3JlXG4gKiBtb2R1bGFyIGNvZGUgd2hlcmUgaGFuZGxlcnMgYXJlIGRlZmluZWQgaW4gc2VwYXJhdGUgZmlsZXMuXG4gKi9cbmV4cG9ydCB0eXBlIENvbW1hbmRNaWRkbGV3YXJlPEMgZXh0ZW5kcyBDb250ZXh0PiA9IE1pZGRsZXdhcmU8XG4gICAgQ29tbWFuZENvbnRleHQ8Qz5cbj47XG4vKipcbiAqIFR5cGUgb2YgdGhlIG1pZGRsZXdhcmUgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIGBib3QuY2FsbGJhY2tRdWVyeWAuXG4gKlxuICogVGhpcyBoZWxwZXIgdHlwZSBjYW4gYmUgdXNlZCB0byBhbm5vdGF0ZSBtaWRkbGV3YXJlIGZ1bmN0aW9ucyB0aGF0IGFyZVxuICogZGVmaW5lZCBpbiBvbmUgcGxhY2UsIHNvIHRoYXQgdGhleSBoYXZlIHRoZSBjb3JyZWN0IHR5cGUgd2hlbiBwYXNzZWQgdG9cbiAqIGBib3QuY2FsbGJhY2tRdWVyeWAgaW4gYSBkaWZmZXJlbnQgcGxhYyBGb3IgaW5zdGFuY2UsIHRoaXMgYWxsb3dzIGZvciBtb3JlXG4gKiBtb2R1bGFyIGNvZGUgd2hlcmUgaGFuZGxlcnMgYXJlIGRlZmluZWQgaW4gc2VwYXJhdGUgZmlsZXMuZS5cbiAqL1xuZXhwb3J0IHR5cGUgQ2FsbGJhY2tRdWVyeU1pZGRsZXdhcmU8QyBleHRlbmRzIENvbnRleHQ+ID0gTWlkZGxld2FyZTxcbiAgICBDYWxsYmFja1F1ZXJ5Q29udGV4dDxDPlxuPjtcbi8qKlxuICogVHlwZSBvZiB0aGUgbWlkZGxld2FyZSB0aGF0IGNhbiBiZSBwYXNzZWQgdG8gYGJvdC5nYW1lUXVlcnlgLlxuICpcbiAqIFRoaXMgaGVscGVyIHR5cGUgY2FuIGJlIHVzZWQgdG8gYW5ub3RhdGUgbWlkZGxld2FyZSBmdW5jdGlvbnMgdGhhdCBhcmVcbiAqIGRlZmluZWQgaW4gb25lIHBsYWNlLCBzbyB0aGF0IHRoZXkgaGF2ZSB0aGUgY29ycmVjdCB0eXBlIHdoZW4gcGFzc2VkIHRvXG4gKiBgYm90LmdhbWVRdWVyeWAgaW4gYSBkaWZmZXJlbnQgcGxhY2UuIEZvciBpbnN0YW5jZSwgdGhpcyBhbGxvd3MgZm9yIG1vcmVcbiAqIG1vZHVsYXIgY29kZSB3aGVyZSBoYW5kbGVycyBhcmUgZGVmaW5lZCBpbiBzZXBhcmF0ZSBmaWxlcy5cbiAqL1xuZXhwb3J0IHR5cGUgR2FtZVF1ZXJ5TWlkZGxld2FyZTxDIGV4dGVuZHMgQ29udGV4dD4gPSBNaWRkbGV3YXJlPFxuICAgIEdhbWVRdWVyeUNvbnRleHQ8Qz5cbj47XG4vKipcbiAqIFR5cGUgb2YgdGhlIG1pZGRsZXdhcmUgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIGBib3QuaW5saW5lUXVlcnlgLlxuICpcbiAqIFRoaXMgaGVscGVyIHR5cGUgY2FuIGJlIHVzZWQgdG8gYW5ub3RhdGUgbWlkZGxld2FyZSBmdW5jdGlvbnMgdGhhdCBhcmVcbiAqIGRlZmluZWQgaW4gb25lIHBsYWNlLCBzbyB0aGF0IHRoZXkgaGF2ZSB0aGUgY29ycmVjdCB0eXBlIHdoZW4gcGFzc2VkIHRvXG4gKiBgYm90LmlubGluZVF1ZXJ5YCBpbiBhIGRpZmZlcmVudCBwbGFjZS4gRm9yIGluc3RhbmNlLCB0aGlzIGFsbG93cyBmb3IgbW9yZVxuICogbW9kdWxhciBjb2RlIHdoZXJlIGhhbmRsZXJzIGFyZSBkZWZpbmVkIGluIHNlcGFyYXRlIGZpbGVzLlxuICovXG5leHBvcnQgdHlwZSBJbmxpbmVRdWVyeU1pZGRsZXdhcmU8QyBleHRlbmRzIENvbnRleHQ+ID0gTWlkZGxld2FyZTxcbiAgICBJbmxpbmVRdWVyeUNvbnRleHQ8Qz5cbj47XG4vKipcbiAqIFR5cGUgb2YgdGhlIG1pZGRsZXdhcmUgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIGBib3QuY2hhdFR5cGVgLlxuICpcbiAqIFRoaXMgaGVscGVyIHR5cGUgY2FuIGJlIHVzZWQgdG8gYW5ub3RhdGUgbWlkZGxld2FyZSBmdW5jdGlvbnMgdGhhdCBhcmVcbiAqIGRlZmluZWQgaW4gb25lIHBsYWNlLCBzbyB0aGF0IHRoZXkgaGF2ZSB0aGUgY29ycmVjdCB0eXBlIHdoZW4gcGFzc2VkIHRvXG4gKiBgYm90LmNoYXRUeXBlYCBpbiBhIGRpZmZlcmVudCBwbGFjZS4gRm9yIGluc3RhbmNlLCB0aGlzIGFsbG93cyBmb3IgbW9yZVxuICogbW9kdWxhciBjb2RlIHdoZXJlIGhhbmRsZXJzIGFyZSBkZWZpbmVkIGluIHNlcGFyYXRlIGZpbGVzLlxuICovXG5leHBvcnQgdHlwZSBDaGF0VHlwZU1pZGRsZXdhcmU8QyBleHRlbmRzIENvbnRleHQsIFQgZXh0ZW5kcyBDaGF0W1widHlwZVwiXT4gPVxuICAgIE1pZGRsZXdhcmU8Q2hhdFR5cGVDb250ZXh0PEMsIFQ+PjtcbiIsInZhciBzID0gMWUzO1xudmFyIG0gPSBzICogNjA7XG52YXIgaCA9IG0gKiA2MDtcbnZhciBkID0gaCAqIDI0O1xudmFyIHcgPSBkICogNztcbnZhciB5ID0gZCAqIDM2NS4yNTtcbnZhciBtcyA9IGZ1bmN0aW9uKHZhbCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsO1xuICBpZiAodHlwZSA9PT0gXCJzdHJpbmdcIiAmJiB2YWwubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBwYXJzZSh2YWwpO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IFwibnVtYmVyXCIgJiYgaXNGaW5pdGUodmFsKSkge1xuICAgIHJldHVybiBvcHRpb25zLmxvbmcgPyBmbXRMb25nKHZhbCkgOiBmbXRTaG9ydCh2YWwpO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihcInZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgdmFsaWQgbnVtYmVyLiB2YWw9XCIgKyBKU09OLnN0cmluZ2lmeSh2YWwpKTtcbn07XG5mdW5jdGlvbiBwYXJzZShzdHIpIHtcbiAgc3RyID0gU3RyaW5nKHN0cik7XG4gIGlmIChzdHIubGVuZ3RoID4gMTAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBtYXRjaCA9IC9eKC0/KD86XFxkKyk/XFwuP1xcZCspICoobWlsbGlzZWNvbmRzP3xtc2Vjcz98bXN8c2Vjb25kcz98c2Vjcz98c3xtaW51dGVzP3xtaW5zP3xtfGhvdXJzP3xocnM/fGh8ZGF5cz98ZHx3ZWVrcz98d3x5ZWFycz98eXJzP3x5KT8kL2kuZXhlYyhzdHIpO1xuICBpZiAoIW1hdGNoKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBuID0gcGFyc2VGbG9hdChtYXRjaFsxXSk7XG4gIHZhciB0eXBlID0gKG1hdGNoWzJdIHx8IFwibXNcIikudG9Mb3dlckNhc2UoKTtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBcInllYXJzXCI6XG4gICAgY2FzZSBcInllYXJcIjpcbiAgICBjYXNlIFwieXJzXCI6XG4gICAgY2FzZSBcInlyXCI6XG4gICAgY2FzZSBcInlcIjpcbiAgICAgIHJldHVybiBuICogeTtcbiAgICBjYXNlIFwid2Vla3NcIjpcbiAgICBjYXNlIFwid2Vla1wiOlxuICAgIGNhc2UgXCJ3XCI6XG4gICAgICByZXR1cm4gbiAqIHc7XG4gICAgY2FzZSBcImRheXNcIjpcbiAgICBjYXNlIFwiZGF5XCI6XG4gICAgY2FzZSBcImRcIjpcbiAgICAgIHJldHVybiBuICogZDtcbiAgICBjYXNlIFwiaG91cnNcIjpcbiAgICBjYXNlIFwiaG91clwiOlxuICAgIGNhc2UgXCJocnNcIjpcbiAgICBjYXNlIFwiaHJcIjpcbiAgICBjYXNlIFwiaFwiOlxuICAgICAgcmV0dXJuIG4gKiBoO1xuICAgIGNhc2UgXCJtaW51dGVzXCI6XG4gICAgY2FzZSBcIm1pbnV0ZVwiOlxuICAgIGNhc2UgXCJtaW5zXCI6XG4gICAgY2FzZSBcIm1pblwiOlxuICAgIGNhc2UgXCJtXCI6XG4gICAgICByZXR1cm4gbiAqIG07XG4gICAgY2FzZSBcInNlY29uZHNcIjpcbiAgICBjYXNlIFwic2Vjb25kXCI6XG4gICAgY2FzZSBcInNlY3NcIjpcbiAgICBjYXNlIFwic2VjXCI6XG4gICAgY2FzZSBcInNcIjpcbiAgICAgIHJldHVybiBuICogcztcbiAgICBjYXNlIFwibWlsbGlzZWNvbmRzXCI6XG4gICAgY2FzZSBcIm1pbGxpc2Vjb25kXCI6XG4gICAgY2FzZSBcIm1zZWNzXCI6XG4gICAgY2FzZSBcIm1zZWNcIjpcbiAgICBjYXNlIFwibXNcIjpcbiAgICAgIHJldHVybiBuO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICB9XG59XG5mdW5jdGlvbiBmbXRTaG9ydChtczIpIHtcbiAgdmFyIG1zQWJzID0gTWF0aC5hYnMobXMyKTtcbiAgaWYgKG1zQWJzID49IGQpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtczIgLyBkKSArIFwiZFwiO1xuICB9XG4gIGlmIChtc0FicyA+PSBoKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMyIC8gaCkgKyBcImhcIjtcbiAgfVxuICBpZiAobXNBYnMgPj0gbSkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zMiAvIG0pICsgXCJtXCI7XG4gIH1cbiAgaWYgKG1zQWJzID49IHMpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtczIgLyBzKSArIFwic1wiO1xuICB9XG4gIHJldHVybiBtczIgKyBcIm1zXCI7XG59XG5mdW5jdGlvbiBmbXRMb25nKG1zMikge1xuICB2YXIgbXNBYnMgPSBNYXRoLmFicyhtczIpO1xuICBpZiAobXNBYnMgPj0gZCkge1xuICAgIHJldHVybiBwbHVyYWwobXMyLCBtc0FicywgZCwgXCJkYXlcIik7XG4gIH1cbiAgaWYgKG1zQWJzID49IGgpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zMiwgbXNBYnMsIGgsIFwiaG91clwiKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gbSkge1xuICAgIHJldHVybiBwbHVyYWwobXMyLCBtc0FicywgbSwgXCJtaW51dGVcIik7XG4gIH1cbiAgaWYgKG1zQWJzID49IHMpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zMiwgbXNBYnMsIHMsIFwic2Vjb25kXCIpO1xuICB9XG4gIHJldHVybiBtczIgKyBcIiBtc1wiO1xufVxuZnVuY3Rpb24gcGx1cmFsKG1zMiwgbXNBYnMsIG4sIG5hbWUpIHtcbiAgdmFyIGlzUGx1cmFsID0gbXNBYnMgPj0gbiAqIDEuNTtcbiAgcmV0dXJuIE1hdGgucm91bmQobXMyIC8gbikgKyBcIiBcIiArIG5hbWUgKyAoaXNQbHVyYWwgPyBcInNcIiA6IFwiXCIpO1xufVxuZXhwb3J0IGRlZmF1bHQgbXM7XG4iLCJpbXBvcnQgcmVxdWlyZSQkMCBmcm9tIFwiLy0vbXNAdjIuMS4yLWdpQkRaMUlBNWxtUTNaWGFhODdWL2Rpc3Q9ZXMyMDE5LG1vZGU9aW1wb3J0cy9vcHRpbWl6ZWQvbXMuanNcIjtcbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gIHRocm93IG5ldyBFcnJvcihcInNldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWRcIik7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0KCkge1xuICB0aHJvdyBuZXcgRXJyb3IoXCJjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWRcIik7XG59XG52YXIgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbnZhciBnbG9iYWxDb250ZXh0O1xuaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgZ2xvYmFsQ29udGV4dCA9IHdpbmRvdztcbn0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgZ2xvYmFsQ29udGV4dCA9IHNlbGY7XG59IGVsc2Uge1xuICBnbG9iYWxDb250ZXh0ID0ge307XG59XG5pZiAodHlwZW9mIGdsb2JhbENvbnRleHQuc2V0VGltZW91dCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xufVxuaWYgKHR5cGVvZiBnbG9iYWxDb250ZXh0LmNsZWFyVGltZW91dCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbn1cbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgfVxuICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICB9XG4gIHRyeSB7XG4gICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgfSBjYXRjaCAoZTIpIHtcbiAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICB9XG4gIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gIH1cbiAgdHJ5IHtcbiAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZTIpIHtcbiAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgIH1cbiAgfVxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICB9IGVsc2Uge1xuICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgfVxuICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgZHJhaW5RdWV1ZSgpO1xuICB9XG59XG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICBpZiAoZHJhaW5pbmcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gIGRyYWluaW5nID0gdHJ1ZTtcbiAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgd2hpbGUgKGxlbikge1xuICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgIHF1ZXVlID0gW107XG4gICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gIH1cbiAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuZnVuY3Rpb24gbmV4dFRpY2soZnVuKSB7XG4gIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgIH1cbiAgfVxuICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICB0aGlzLmZ1biA9IGZ1bjtcbiAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnZhciB0aXRsZSA9IFwiYnJvd3NlclwiO1xudmFyIHBsYXRmb3JtID0gXCJicm93c2VyXCI7XG52YXIgYnJvd3NlciA9IHRydWU7XG52YXIgYXJndiA9IFtdO1xudmFyIHZlcnNpb24gPSBcIlwiO1xudmFyIHZlcnNpb25zID0ge307XG52YXIgcmVsZWFzZSA9IHt9O1xudmFyIGNvbmZpZyA9IHt9O1xuZnVuY3Rpb24gbm9vcCgpIHtcbn1cbnZhciBvbiA9IG5vb3A7XG52YXIgYWRkTGlzdGVuZXIgPSBub29wO1xudmFyIG9uY2UgPSBub29wO1xudmFyIG9mZiA9IG5vb3A7XG52YXIgcmVtb3ZlTGlzdGVuZXIgPSBub29wO1xudmFyIHJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG52YXIgZW1pdCA9IG5vb3A7XG5mdW5jdGlvbiBiaW5kaW5nKG5hbWUpIHtcbiAgdGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWRcIik7XG59XG5mdW5jdGlvbiBjd2QoKSB7XG4gIHJldHVybiBcIi9cIjtcbn1cbmZ1bmN0aW9uIGNoZGlyKGRpcikge1xuICB0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWRcIik7XG59XG5mdW5jdGlvbiB1bWFzaygpIHtcbiAgcmV0dXJuIDA7XG59XG52YXIgcGVyZm9ybWFuY2UgPSBnbG9iYWxDb250ZXh0LnBlcmZvcm1hbmNlIHx8IHt9O1xudmFyIHBlcmZvcm1hbmNlTm93ID0gcGVyZm9ybWFuY2Uubm93IHx8IHBlcmZvcm1hbmNlLm1vek5vdyB8fCBwZXJmb3JtYW5jZS5tc05vdyB8fCBwZXJmb3JtYW5jZS5vTm93IHx8IHBlcmZvcm1hbmNlLndlYmtpdE5vdyB8fCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xufTtcbmZ1bmN0aW9uIGhydGltZShwcmV2aW91c1RpbWVzdGFtcCkge1xuICB2YXIgY2xvY2t0aW1lID0gcGVyZm9ybWFuY2VOb3cuY2FsbChwZXJmb3JtYW5jZSkgKiAxZS0zO1xuICB2YXIgc2Vjb25kcyA9IE1hdGguZmxvb3IoY2xvY2t0aW1lKTtcbiAgdmFyIG5hbm9zZWNvbmRzID0gTWF0aC5mbG9vcihjbG9ja3RpbWUgJSAxICogMWU5KTtcbiAgaWYgKHByZXZpb3VzVGltZXN0YW1wKSB7XG4gICAgc2Vjb25kcyA9IHNlY29uZHMgLSBwcmV2aW91c1RpbWVzdGFtcFswXTtcbiAgICBuYW5vc2Vjb25kcyA9IG5hbm9zZWNvbmRzIC0gcHJldmlvdXNUaW1lc3RhbXBbMV07XG4gICAgaWYgKG5hbm9zZWNvbmRzIDwgMCkge1xuICAgICAgc2Vjb25kcy0tO1xuICAgICAgbmFub3NlY29uZHMgKz0gMWU5O1xuICAgIH1cbiAgfVxuICByZXR1cm4gW3NlY29uZHMsIG5hbm9zZWNvbmRzXTtcbn1cbnZhciBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpO1xuZnVuY3Rpb24gdXB0aW1lKCkge1xuICB2YXIgY3VycmVudFRpbWUgPSBuZXcgRGF0ZSgpO1xuICB2YXIgZGlmID0gY3VycmVudFRpbWUgLSBzdGFydFRpbWU7XG4gIHJldHVybiBkaWYgLyAxZTM7XG59XG52YXIgcHJvY2VzcyA9IHtcbiAgbmV4dFRpY2ssXG4gIHRpdGxlLFxuICBicm93c2VyLFxuICBlbnY6IHtOT0RFX0VOVjogXCJwcm9kdWN0aW9uXCJ9LFxuICBhcmd2LFxuICB2ZXJzaW9uLFxuICB2ZXJzaW9ucyxcbiAgb24sXG4gIGFkZExpc3RlbmVyLFxuICBvbmNlLFxuICBvZmYsXG4gIHJlbW92ZUxpc3RlbmVyLFxuICByZW1vdmVBbGxMaXN0ZW5lcnMsXG4gIGVtaXQsXG4gIGJpbmRpbmcsXG4gIGN3ZCxcbiAgY2hkaXIsXG4gIHVtYXNrLFxuICBocnRpbWUsXG4gIHBsYXRmb3JtLFxuICByZWxlYXNlLFxuICBjb25maWcsXG4gIHVwdGltZVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZuLCBiYXNlZGlyLCBtb2R1bGUpIHtcbiAgcmV0dXJuIG1vZHVsZSA9IHtcbiAgICBwYXRoOiBiYXNlZGlyLFxuICAgIGV4cG9ydHM6IHt9LFxuICAgIHJlcXVpcmU6IGZ1bmN0aW9uKHBhdGgsIGJhc2UpIHtcbiAgICAgIHJldHVybiBjb21tb25qc1JlcXVpcmUocGF0aCwgYmFzZSA9PT0gdm9pZCAwIHx8IGJhc2UgPT09IG51bGwgPyBtb2R1bGUucGF0aCA6IGJhc2UpO1xuICAgIH1cbiAgfSwgZm4obW9kdWxlLCBtb2R1bGUuZXhwb3J0cyksIG1vZHVsZS5leHBvcnRzO1xufVxuZnVuY3Rpb24gY29tbW9uanNSZXF1aXJlKCkge1xuICB0aHJvdyBuZXcgRXJyb3IoXCJEeW5hbWljIHJlcXVpcmVzIGFyZSBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBieSBAcm9sbHVwL3BsdWdpbi1jb21tb25qc1wiKTtcbn1cbmZ1bmN0aW9uIHNldHVwKGVudikge1xuICBjcmVhdGVEZWJ1Zy5kZWJ1ZyA9IGNyZWF0ZURlYnVnO1xuICBjcmVhdGVEZWJ1Zy5kZWZhdWx0ID0gY3JlYXRlRGVidWc7XG4gIGNyZWF0ZURlYnVnLmNvZXJjZSA9IGNvZXJjZTtcbiAgY3JlYXRlRGVidWcuZGlzYWJsZSA9IGRpc2FibGU7XG4gIGNyZWF0ZURlYnVnLmVuYWJsZSA9IGVuYWJsZTtcbiAgY3JlYXRlRGVidWcuZW5hYmxlZCA9IGVuYWJsZWQ7XG4gIGNyZWF0ZURlYnVnLmh1bWFuaXplID0gcmVxdWlyZSQkMDtcbiAgY3JlYXRlRGVidWcuZGVzdHJveSA9IGRlc3Ryb3kyO1xuICBPYmplY3Qua2V5cyhlbnYpLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGNyZWF0ZURlYnVnW2tleV0gPSBlbnZba2V5XTtcbiAgfSk7XG4gIGNyZWF0ZURlYnVnLm5hbWVzID0gW107XG4gIGNyZWF0ZURlYnVnLnNraXBzID0gW107XG4gIGNyZWF0ZURlYnVnLmZvcm1hdHRlcnMgPSB7fTtcbiAgZnVuY3Rpb24gc2VsZWN0Q29sb3IobmFtZXNwYWNlKSB7XG4gICAgbGV0IGhhc2ggPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmFtZXNwYWNlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBoYXNoID0gKGhhc2ggPDwgNSkgLSBoYXNoICsgbmFtZXNwYWNlLmNoYXJDb2RlQXQoaSk7XG4gICAgICBoYXNoIHw9IDA7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVEZWJ1Zy5jb2xvcnNbTWF0aC5hYnMoaGFzaCkgJSBjcmVhdGVEZWJ1Zy5jb2xvcnMubGVuZ3RoXTtcbiAgfVxuICBjcmVhdGVEZWJ1Zy5zZWxlY3RDb2xvciA9IHNlbGVjdENvbG9yO1xuICBmdW5jdGlvbiBjcmVhdGVEZWJ1ZyhuYW1lc3BhY2UpIHtcbiAgICBsZXQgcHJldlRpbWU7XG4gICAgbGV0IGVuYWJsZU92ZXJyaWRlID0gbnVsbDtcbiAgICBsZXQgbmFtZXNwYWNlc0NhY2hlO1xuICAgIGxldCBlbmFibGVkQ2FjaGU7XG4gICAgZnVuY3Rpb24gZGVidWcoLi4uYXJncykge1xuICAgICAgaWYgKCFkZWJ1Zy5lbmFibGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNlbGYyID0gZGVidWc7XG4gICAgICBjb25zdCBjdXJyID0gTnVtYmVyKG5ldyBEYXRlKCkpO1xuICAgICAgY29uc3QgbXMyID0gY3VyciAtIChwcmV2VGltZSB8fCBjdXJyKTtcbiAgICAgIHNlbGYyLmRpZmYgPSBtczI7XG4gICAgICBzZWxmMi5wcmV2ID0gcHJldlRpbWU7XG4gICAgICBzZWxmMi5jdXJyID0gY3VycjtcbiAgICAgIHByZXZUaW1lID0gY3VycjtcbiAgICAgIGFyZ3NbMF0gPSBjcmVhdGVEZWJ1Zy5jb2VyY2UoYXJnc1swXSk7XG4gICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgYXJncy51bnNoaWZ0KFwiJU9cIik7XG4gICAgICB9XG4gICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgYXJnc1swXSA9IGFyZ3NbMF0ucmVwbGFjZSgvJShbYS16QS1aJV0pL2csIChtYXRjaCwgZm9ybWF0KSA9PiB7XG4gICAgICAgIGlmIChtYXRjaCA9PT0gXCIlJVwiKSB7XG4gICAgICAgICAgcmV0dXJuIFwiJVwiO1xuICAgICAgICB9XG4gICAgICAgIGluZGV4Kys7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlciA9IGNyZWF0ZURlYnVnLmZvcm1hdHRlcnNbZm9ybWF0XTtcbiAgICAgICAgaWYgKHR5cGVvZiBmb3JtYXR0ZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIGNvbnN0IHZhbCA9IGFyZ3NbaW5kZXhdO1xuICAgICAgICAgIG1hdGNoID0gZm9ybWF0dGVyLmNhbGwoc2VsZjIsIHZhbCk7XG4gICAgICAgICAgYXJncy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgIGluZGV4LS07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgfSk7XG4gICAgICBjcmVhdGVEZWJ1Zy5mb3JtYXRBcmdzLmNhbGwoc2VsZjIsIGFyZ3MpO1xuICAgICAgY29uc3QgbG9nRm4gPSBzZWxmMi5sb2cgfHwgY3JlYXRlRGVidWcubG9nO1xuICAgICAgbG9nRm4uYXBwbHkoc2VsZjIsIGFyZ3MpO1xuICAgIH1cbiAgICBkZWJ1Zy5uYW1lc3BhY2UgPSBuYW1lc3BhY2U7XG4gICAgZGVidWcudXNlQ29sb3JzID0gY3JlYXRlRGVidWcudXNlQ29sb3JzKCk7XG4gICAgZGVidWcuY29sb3IgPSBjcmVhdGVEZWJ1Zy5zZWxlY3RDb2xvcihuYW1lc3BhY2UpO1xuICAgIGRlYnVnLmV4dGVuZCA9IGV4dGVuZDtcbiAgICBkZWJ1Zy5kZXN0cm95ID0gY3JlYXRlRGVidWcuZGVzdHJveTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZGVidWcsIFwiZW5hYmxlZFwiLCB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgIGdldDogKCkgPT4ge1xuICAgICAgICBpZiAoZW5hYmxlT3ZlcnJpZGUgIT09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gZW5hYmxlT3ZlcnJpZGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hbWVzcGFjZXNDYWNoZSAhPT0gY3JlYXRlRGVidWcubmFtZXNwYWNlcykge1xuICAgICAgICAgIG5hbWVzcGFjZXNDYWNoZSA9IGNyZWF0ZURlYnVnLm5hbWVzcGFjZXM7XG4gICAgICAgICAgZW5hYmxlZENhY2hlID0gY3JlYXRlRGVidWcuZW5hYmxlZChuYW1lc3BhY2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbmFibGVkQ2FjaGU7XG4gICAgICB9LFxuICAgICAgc2V0OiAodikgPT4ge1xuICAgICAgICBlbmFibGVPdmVycmlkZSA9IHY7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHR5cGVvZiBjcmVhdGVEZWJ1Zy5pbml0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGNyZWF0ZURlYnVnLmluaXQoZGVidWcpO1xuICAgIH1cbiAgICByZXR1cm4gZGVidWc7XG4gIH1cbiAgZnVuY3Rpb24gZXh0ZW5kKG5hbWVzcGFjZSwgZGVsaW1pdGVyKSB7XG4gICAgY29uc3QgbmV3RGVidWcgPSBjcmVhdGVEZWJ1Zyh0aGlzLm5hbWVzcGFjZSArICh0eXBlb2YgZGVsaW1pdGVyID09PSBcInVuZGVmaW5lZFwiID8gXCI6XCIgOiBkZWxpbWl0ZXIpICsgbmFtZXNwYWNlKTtcbiAgICBuZXdEZWJ1Zy5sb2cgPSB0aGlzLmxvZztcbiAgICByZXR1cm4gbmV3RGVidWc7XG4gIH1cbiAgZnVuY3Rpb24gZW5hYmxlKG5hbWVzcGFjZXMpIHtcbiAgICBjcmVhdGVEZWJ1Zy5zYXZlKG5hbWVzcGFjZXMpO1xuICAgIGNyZWF0ZURlYnVnLm5hbWVzcGFjZXMgPSBuYW1lc3BhY2VzO1xuICAgIGNyZWF0ZURlYnVnLm5hbWVzID0gW107XG4gICAgY3JlYXRlRGVidWcuc2tpcHMgPSBbXTtcbiAgICBsZXQgaTtcbiAgICBjb25zdCBzcGxpdCA9ICh0eXBlb2YgbmFtZXNwYWNlcyA9PT0gXCJzdHJpbmdcIiA/IG5hbWVzcGFjZXMgOiBcIlwiKS5zcGxpdCgvW1xccyxdKy8pO1xuICAgIGNvbnN0IGxlbiA9IHNwbGl0Lmxlbmd0aDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGlmICghc3BsaXRbaV0pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBuYW1lc3BhY2VzID0gc3BsaXRbaV0ucmVwbGFjZSgvXFwqL2csIFwiLio/XCIpO1xuICAgICAgaWYgKG5hbWVzcGFjZXNbMF0gPT09IFwiLVwiKSB7XG4gICAgICAgIGNyZWF0ZURlYnVnLnNraXBzLnB1c2gobmV3IFJlZ0V4cChcIl5cIiArIG5hbWVzcGFjZXMuc2xpY2UoMSkgKyBcIiRcIikpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3JlYXRlRGVidWcubmFtZXMucHVzaChuZXcgUmVnRXhwKFwiXlwiICsgbmFtZXNwYWNlcyArIFwiJFwiKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgY29uc3QgbmFtZXNwYWNlcyA9IFtcbiAgICAgIC4uLmNyZWF0ZURlYnVnLm5hbWVzLm1hcCh0b05hbWVzcGFjZSksXG4gICAgICAuLi5jcmVhdGVEZWJ1Zy5za2lwcy5tYXAodG9OYW1lc3BhY2UpLm1hcCgobmFtZXNwYWNlKSA9PiBcIi1cIiArIG5hbWVzcGFjZSlcbiAgICBdLmpvaW4oXCIsXCIpO1xuICAgIGNyZWF0ZURlYnVnLmVuYWJsZShcIlwiKTtcbiAgICByZXR1cm4gbmFtZXNwYWNlcztcbiAgfVxuICBmdW5jdGlvbiBlbmFibGVkKG5hbWUpIHtcbiAgICBpZiAobmFtZVtuYW1lLmxlbmd0aCAtIDFdID09PSBcIipcIikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGxldCBpO1xuICAgIGxldCBsZW47XG4gICAgZm9yIChpID0gMCwgbGVuID0gY3JlYXRlRGVidWcuc2tpcHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGlmIChjcmVhdGVEZWJ1Zy5za2lwc1tpXS50ZXN0KG5hbWUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChpID0gMCwgbGVuID0gY3JlYXRlRGVidWcubmFtZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGlmIChjcmVhdGVEZWJ1Zy5uYW1lc1tpXS50ZXN0KG5hbWUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZnVuY3Rpb24gdG9OYW1lc3BhY2UocmVnZXhwKSB7XG4gICAgcmV0dXJuIHJlZ2V4cC50b1N0cmluZygpLnN1YnN0cmluZygyLCByZWdleHAudG9TdHJpbmcoKS5sZW5ndGggLSAyKS5yZXBsYWNlKC9cXC5cXCpcXD8kLywgXCIqXCIpO1xuICB9XG4gIGZ1bmN0aW9uIGNvZXJjZSh2YWwpIHtcbiAgICBpZiAodmFsIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHJldHVybiB2YWwuc3RhY2sgfHwgdmFsLm1lc3NhZ2U7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG4gIH1cbiAgZnVuY3Rpb24gZGVzdHJveTIoKSB7XG4gICAgY29uc29sZS53YXJuKFwiSW5zdGFuY2UgbWV0aG9kIGBkZWJ1Zy5kZXN0cm95KClgIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciBkb2VzIGFueXRoaW5nLiBJdCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbiBvZiBgZGVidWdgLlwiKTtcbiAgfVxuICBjcmVhdGVEZWJ1Zy5lbmFibGUoY3JlYXRlRGVidWcubG9hZCgpKTtcbiAgcmV0dXJuIGNyZWF0ZURlYnVnO1xufVxudmFyIGNvbW1vbiA9IHNldHVwO1xudmFyIGJyb3dzZXIkMSA9IGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuICBleHBvcnRzLmZvcm1hdEFyZ3MgPSBmb3JtYXRBcmdzMjtcbiAgZXhwb3J0cy5zYXZlID0gc2F2ZTI7XG4gIGV4cG9ydHMubG9hZCA9IGxvYWQyO1xuICBleHBvcnRzLnVzZUNvbG9ycyA9IHVzZUNvbG9yczI7XG4gIGV4cG9ydHMuc3RvcmFnZSA9IGxvY2Fsc3RvcmFnZSgpO1xuICBleHBvcnRzLmRlc3Ryb3kgPSAoKCkgPT4ge1xuICAgIGxldCB3YXJuZWQgPSBmYWxzZTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKCF3YXJuZWQpIHtcbiAgICAgICAgd2FybmVkID0gdHJ1ZTtcbiAgICAgICAgY29uc29sZS53YXJuKFwiSW5zdGFuY2UgbWV0aG9kIGBkZWJ1Zy5kZXN0cm95KClgIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciBkb2VzIGFueXRoaW5nLiBJdCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbiBvZiBgZGVidWdgLlwiKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KSgpO1xuICBleHBvcnRzLmNvbG9ycyA9IFtcbiAgICBcIiMwMDAwQ0NcIixcbiAgICBcIiMwMDAwRkZcIixcbiAgICBcIiMwMDMzQ0NcIixcbiAgICBcIiMwMDMzRkZcIixcbiAgICBcIiMwMDY2Q0NcIixcbiAgICBcIiMwMDY2RkZcIixcbiAgICBcIiMwMDk5Q0NcIixcbiAgICBcIiMwMDk5RkZcIixcbiAgICBcIiMwMENDMDBcIixcbiAgICBcIiMwMENDMzNcIixcbiAgICBcIiMwMENDNjZcIixcbiAgICBcIiMwMENDOTlcIixcbiAgICBcIiMwMENDQ0NcIixcbiAgICBcIiMwMENDRkZcIixcbiAgICBcIiMzMzAwQ0NcIixcbiAgICBcIiMzMzAwRkZcIixcbiAgICBcIiMzMzMzQ0NcIixcbiAgICBcIiMzMzMzRkZcIixcbiAgICBcIiMzMzY2Q0NcIixcbiAgICBcIiMzMzY2RkZcIixcbiAgICBcIiMzMzk5Q0NcIixcbiAgICBcIiMzMzk5RkZcIixcbiAgICBcIiMzM0NDMDBcIixcbiAgICBcIiMzM0NDMzNcIixcbiAgICBcIiMzM0NDNjZcIixcbiAgICBcIiMzM0NDOTlcIixcbiAgICBcIiMzM0NDQ0NcIixcbiAgICBcIiMzM0NDRkZcIixcbiAgICBcIiM2NjAwQ0NcIixcbiAgICBcIiM2NjAwRkZcIixcbiAgICBcIiM2NjMzQ0NcIixcbiAgICBcIiM2NjMzRkZcIixcbiAgICBcIiM2NkNDMDBcIixcbiAgICBcIiM2NkNDMzNcIixcbiAgICBcIiM5OTAwQ0NcIixcbiAgICBcIiM5OTAwRkZcIixcbiAgICBcIiM5OTMzQ0NcIixcbiAgICBcIiM5OTMzRkZcIixcbiAgICBcIiM5OUNDMDBcIixcbiAgICBcIiM5OUNDMzNcIixcbiAgICBcIiNDQzAwMDBcIixcbiAgICBcIiNDQzAwMzNcIixcbiAgICBcIiNDQzAwNjZcIixcbiAgICBcIiNDQzAwOTlcIixcbiAgICBcIiNDQzAwQ0NcIixcbiAgICBcIiNDQzAwRkZcIixcbiAgICBcIiNDQzMzMDBcIixcbiAgICBcIiNDQzMzMzNcIixcbiAgICBcIiNDQzMzNjZcIixcbiAgICBcIiNDQzMzOTlcIixcbiAgICBcIiNDQzMzQ0NcIixcbiAgICBcIiNDQzMzRkZcIixcbiAgICBcIiNDQzY2MDBcIixcbiAgICBcIiNDQzY2MzNcIixcbiAgICBcIiNDQzk5MDBcIixcbiAgICBcIiNDQzk5MzNcIixcbiAgICBcIiNDQ0NDMDBcIixcbiAgICBcIiNDQ0NDMzNcIixcbiAgICBcIiNGRjAwMDBcIixcbiAgICBcIiNGRjAwMzNcIixcbiAgICBcIiNGRjAwNjZcIixcbiAgICBcIiNGRjAwOTlcIixcbiAgICBcIiNGRjAwQ0NcIixcbiAgICBcIiNGRjAwRkZcIixcbiAgICBcIiNGRjMzMDBcIixcbiAgICBcIiNGRjMzMzNcIixcbiAgICBcIiNGRjMzNjZcIixcbiAgICBcIiNGRjMzOTlcIixcbiAgICBcIiNGRjMzQ0NcIixcbiAgICBcIiNGRjMzRkZcIixcbiAgICBcIiNGRjY2MDBcIixcbiAgICBcIiNGRjY2MzNcIixcbiAgICBcIiNGRjk5MDBcIixcbiAgICBcIiNGRjk5MzNcIixcbiAgICBcIiNGRkNDMDBcIixcbiAgICBcIiNGRkNDMzNcIlxuICBdO1xuICBmdW5jdGlvbiB1c2VDb2xvcnMyKCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5wcm9jZXNzICYmICh3aW5kb3cucHJvY2Vzcy50eXBlID09PSBcInJlbmRlcmVyXCIgfHwgd2luZG93LnByb2Nlc3MuX19ud2pzKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC8oZWRnZXx0cmlkZW50KVxcLyhcXGQrKS8pKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuV2Via2l0QXBwZWFyYW5jZSB8fCB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5jb25zb2xlICYmICh3aW5kb3cuY29uc29sZS5maXJlYnVnIHx8IHdpbmRvdy5jb25zb2xlLmV4Y2VwdGlvbiAmJiB3aW5kb3cuY29uc29sZS50YWJsZSkgfHwgdHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvZmlyZWZveFxcLyhcXGQrKS8pICYmIHBhcnNlSW50KFJlZ0V4cC4kMSwgMTApID49IDMxIHx8IHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2FwcGxld2Via2l0XFwvKFxcZCspLyk7XG4gIH1cbiAgZnVuY3Rpb24gZm9ybWF0QXJnczIoYXJncykge1xuICAgIGFyZ3NbMF0gPSAodGhpcy51c2VDb2xvcnMgPyBcIiVjXCIgOiBcIlwiKSArIHRoaXMubmFtZXNwYWNlICsgKHRoaXMudXNlQ29sb3JzID8gXCIgJWNcIiA6IFwiIFwiKSArIGFyZ3NbMF0gKyAodGhpcy51c2VDb2xvcnMgPyBcIiVjIFwiIDogXCIgXCIpICsgXCIrXCIgKyBtb2R1bGUuZXhwb3J0cy5odW1hbml6ZSh0aGlzLmRpZmYpO1xuICAgIGlmICghdGhpcy51c2VDb2xvcnMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYyA9IFwiY29sb3I6IFwiICsgdGhpcy5jb2xvcjtcbiAgICBhcmdzLnNwbGljZSgxLCAwLCBjLCBcImNvbG9yOiBpbmhlcml0XCIpO1xuICAgIGxldCBpbmRleCA9IDA7XG4gICAgbGV0IGxhc3RDID0gMDtcbiAgICBhcmdzWzBdLnJlcGxhY2UoLyVbYS16QS1aJV0vZywgKG1hdGNoKSA9PiB7XG4gICAgICBpZiAobWF0Y2ggPT09IFwiJSVcIikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpbmRleCsrO1xuICAgICAgaWYgKG1hdGNoID09PSBcIiVjXCIpIHtcbiAgICAgICAgbGFzdEMgPSBpbmRleDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBhcmdzLnNwbGljZShsYXN0QywgMCwgYyk7XG4gIH1cbiAgZXhwb3J0cy5sb2cgPSBjb25zb2xlLmRlYnVnIHx8IGNvbnNvbGUubG9nIHx8ICgoKSA9PiB7XG4gIH0pO1xuICBmdW5jdGlvbiBzYXZlMihuYW1lc3BhY2VzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChuYW1lc3BhY2VzKSB7XG4gICAgICAgIGV4cG9ydHMuc3RvcmFnZS5zZXRJdGVtKFwiZGVidWdcIiwgbmFtZXNwYWNlcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBleHBvcnRzLnN0b3JhZ2UucmVtb3ZlSXRlbShcImRlYnVnXCIpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGxvYWQyKCkge1xuICAgIGxldCByO1xuICAgIHRyeSB7XG4gICAgICByID0gZXhwb3J0cy5zdG9yYWdlLmdldEl0ZW0oXCJkZWJ1Z1wiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgIH1cbiAgICBpZiAoIXIgJiYgdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgXCJlbnZcIiBpbiBwcm9jZXNzKSB7XG4gICAgICByID0gcHJvY2Vzcy5lbnYuREVCVUc7XG4gICAgfVxuICAgIHJldHVybiByO1xuICB9XG4gIGZ1bmN0aW9uIGxvY2Fsc3RvcmFnZSgpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgIH1cbiAgfVxuICBtb2R1bGUuZXhwb3J0cyA9IGNvbW1vbihleHBvcnRzKTtcbiAgY29uc3Qge2Zvcm1hdHRlcnN9ID0gbW9kdWxlLmV4cG9ydHM7XG4gIGZvcm1hdHRlcnMuaiA9IGZ1bmN0aW9uKHYpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHYpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gXCJbVW5leHBlY3RlZEpTT05QYXJzZUVycm9yXTogXCIgKyBlcnJvci5tZXNzYWdlO1xuICAgIH1cbiAgfTtcbn0pO1xudmFyIGNvbG9ycyA9IGJyb3dzZXIkMS5jb2xvcnM7XG5leHBvcnQgZGVmYXVsdCBicm93c2VyJDE7XG52YXIgZGVzdHJveSA9IGJyb3dzZXIkMS5kZXN0cm95O1xudmFyIGZvcm1hdEFyZ3MgPSBicm93c2VyJDEuZm9ybWF0QXJncztcbnZhciBsb2FkID0gYnJvd3NlciQxLmxvYWQ7XG52YXIgbG9nID0gYnJvd3NlciQxLmxvZztcbnZhciBzYXZlID0gYnJvd3NlciQxLnNhdmU7XG52YXIgc3RvcmFnZSA9IGJyb3dzZXIkMS5zdG9yYWdlO1xudmFyIHVzZUNvbG9ycyA9IGJyb3dzZXIkMS51c2VDb2xvcnM7XG5leHBvcnQge2Jyb3dzZXIkMSBhcyBfX21vZHVsZUV4cG9ydHMsIGNvbG9ycywgZGVzdHJveSwgZm9ybWF0QXJncywgbG9hZCwgbG9nLCBzYXZlLCBzdG9yYWdlLCB1c2VDb2xvcnN9O1xuIiwiLyogZXNtLnNoIC0gZXNidWlsZCBidW5kbGUoQGdyYW1teWpzL3R5cGVzQDIuOC4yKSBkZW5vIHByb2R1Y3Rpb24gKi9cbnZhciBsPU9iamVjdC5jcmVhdGU7dmFyIG89T2JqZWN0LmRlZmluZVByb3BlcnR5O3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7dmFyIG09T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7dmFyIG49T2JqZWN0LmdldFByb3RvdHlwZU9mLHM9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTt2YXIgaT0odCxlKT0+KCk9PihlfHx0KChlPXtleHBvcnRzOnt9fSkuZXhwb3J0cyxlKSxlLmV4cG9ydHMpO3ZhciBwPSh0LGUsZCxmKT0+e2lmKGUmJnR5cGVvZiBlPT1cIm9iamVjdFwifHx0eXBlb2YgZT09XCJmdW5jdGlvblwiKWZvcihsZXQgXyBvZiBtKGUpKSFzLmNhbGwodCxfKSYmXyE9PWQmJm8odCxfLHtnZXQ6KCk9PmVbX10sZW51bWVyYWJsZTohKGY9cihlLF8pKXx8Zi5lbnVtZXJhYmxlfSk7cmV0dXJuIHR9O3ZhciBjPSh0LGUsZCk9PihkPXQhPW51bGw/bChuKHQpKTp7fSxwKGV8fCF0fHwhdC5fX2VzTW9kdWxlP28oZCxcImRlZmF1bHRcIix7dmFsdWU6dCxlbnVtZXJhYmxlOiEwfSk6ZCx0KSk7dmFyIHU9aSgoKT0+e30pO3ZhciB4PWModSgpKSx7ZGVmYXVsdDphLC4uLmJ9PXgsaz1hIT09dm9pZCAwP2E6YjtleHBvcnR7ayBhcyBkZWZhdWx0fTtcbiIsIi8vIENvcHlyaWdodCAyMDE4LTIwMjIgdGhlIERlbm8gYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4gTUlUIGxpY2Vuc2UuXG4vLyBUaGlzIG1vZHVsZSBpcyBicm93c2VyIGNvbXBhdGlibGUuXG5cbmV4cG9ydCBjbGFzcyBEZW5vU3RkSW50ZXJuYWxFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gXCJEZW5vU3RkSW50ZXJuYWxFcnJvclwiO1xuICB9XG59XG5cbi8qKiBNYWtlIGFuIGFzc2VydGlvbiwgaWYgbm90IGB0cnVlYCwgdGhlbiB0aHJvdy4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnQoZXhwcjogdW5rbm93biwgbXNnID0gXCJcIik6IGFzc2VydHMgZXhwciB7XG4gIGlmICghZXhwcikge1xuICAgIHRocm93IG5ldyBEZW5vU3RkSW50ZXJuYWxFcnJvcihtc2cpO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOC0yMDIyIHRoZSBEZW5vIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuIE1JVCBsaWNlbnNlLlxuLy8gVGhpcyBtb2R1bGUgaXMgYnJvd3NlciBjb21wYXRpYmxlLlxuXG4vKipcbiAqIFByb3ZpZGVzIGhlbHBlciBmdW5jdGlvbnMgdG8gbWFuaXB1bGF0ZSBgVWludDhBcnJheWAgYnl0ZSBzbGljZXMgdGhhdCBhcmUgbm90XG4gKiBpbmNsdWRlZCBvbiB0aGUgYFVpbnQ4QXJyYXlgIHByb3RvdHlwZS5cbiAqXG4gKiBAbW9kdWxlXG4gKi9cblxuLyoqIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIHRoZSBuZWVkbGUgYXJyYXkgaW4gdGhlIHNvdXJjZVxuICogYXJyYXksIG9yIC0xIGlmIGl0IGlzIG5vdCBwcmVzZW50LlxuICpcbiAqIEEgc3RhcnQgaW5kZXggY2FuIGJlIHNwZWNpZmllZCBhcyB0aGUgdGhpcmQgYXJndW1lbnQgdGhhdCBiZWdpbnMgdGhlIHNlYXJjaFxuICogYXQgdGhhdCBnaXZlbiBpbmRleC4gVGhlIHN0YXJ0IGluZGV4IGRlZmF1bHRzIHRvIHRoZSBzdGFydCBvZiB0aGUgYXJyYXkuXG4gKlxuICogVGhlIGNvbXBsZXhpdHkgb2YgdGhpcyBmdW5jdGlvbiBpcyBPKHNvdXJjZS5sZW50aCAqIG5lZWRsZS5sZW5ndGgpLlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBpbmRleE9mTmVlZGxlIH0gZnJvbSBcIi4vbW9kLnRzXCI7XG4gKiBjb25zdCBzb3VyY2UgPSBuZXcgVWludDhBcnJheShbMCwgMSwgMiwgMSwgMiwgMSwgMiwgM10pO1xuICogY29uc3QgbmVlZGxlID0gbmV3IFVpbnQ4QXJyYXkoWzEsIDJdKTtcbiAqIGNvbnNvbGUubG9nKGluZGV4T2ZOZWVkbGUoc291cmNlLCBuZWVkbGUpKTsgLy8gMVxuICogY29uc29sZS5sb2coaW5kZXhPZk5lZWRsZShzb3VyY2UsIG5lZWRsZSwgMikpOyAvLyAzXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluZGV4T2ZOZWVkbGUoXG4gIHNvdXJjZTogVWludDhBcnJheSxcbiAgbmVlZGxlOiBVaW50OEFycmF5LFxuICBzdGFydCA9IDAsXG4pOiBudW1iZXIge1xuICBpZiAoc3RhcnQgPj0gc291cmNlLmxlbmd0aCkge1xuICAgIHJldHVybiAtMTtcbiAgfVxuICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgc3RhcnQgPSBNYXRoLm1heCgwLCBzb3VyY2UubGVuZ3RoICsgc3RhcnQpO1xuICB9XG4gIGNvbnN0IHMgPSBuZWVkbGVbMF07XG4gIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IHNvdXJjZS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzb3VyY2VbaV0gIT09IHMpIGNvbnRpbnVlO1xuICAgIGNvbnN0IHBpbiA9IGk7XG4gICAgbGV0IG1hdGNoZWQgPSAxO1xuICAgIGxldCBqID0gaTtcbiAgICB3aGlsZSAobWF0Y2hlZCA8IG5lZWRsZS5sZW5ndGgpIHtcbiAgICAgIGorKztcbiAgICAgIGlmIChzb3VyY2Vbal0gIT09IG5lZWRsZVtqIC0gcGluXSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIG1hdGNoZWQrKztcbiAgICB9XG4gICAgaWYgKG1hdGNoZWQgPT09IG5lZWRsZS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBwaW47XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxuLyoqIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBsYXN0IG9jY3VycmVuY2Ugb2YgdGhlIG5lZWRsZSBhcnJheSBpbiB0aGUgc291cmNlXG4gKiBhcnJheSwgb3IgLTEgaWYgaXQgaXMgbm90IHByZXNlbnQuXG4gKlxuICogQSBzdGFydCBpbmRleCBjYW4gYmUgc3BlY2lmaWVkIGFzIHRoZSB0aGlyZCBhcmd1bWVudCB0aGF0IGJlZ2lucyB0aGUgc2VhcmNoXG4gKiBhdCB0aGF0IGdpdmVuIGluZGV4LiBUaGUgc3RhcnQgaW5kZXggZGVmYXVsdHMgdG8gdGhlIGVuZCBvZiB0aGUgYXJyYXkuXG4gKlxuICogVGhlIGNvbXBsZXhpdHkgb2YgdGhpcyBmdW5jdGlvbiBpcyBPKHNvdXJjZS5sZW50aCAqIG5lZWRsZS5sZW5ndGgpLlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBsYXN0SW5kZXhPZk5lZWRsZSB9IGZyb20gXCIuL21vZC50c1wiO1xuICogY29uc3Qgc291cmNlID0gbmV3IFVpbnQ4QXJyYXkoWzAsIDEsIDIsIDEsIDIsIDEsIDIsIDNdKTtcbiAqIGNvbnN0IG5lZWRsZSA9IG5ldyBVaW50OEFycmF5KFsxLCAyXSk7XG4gKiBjb25zb2xlLmxvZyhsYXN0SW5kZXhPZk5lZWRsZShzb3VyY2UsIG5lZWRsZSkpOyAvLyA1XG4gKiBjb25zb2xlLmxvZyhsYXN0SW5kZXhPZk5lZWRsZShzb3VyY2UsIG5lZWRsZSwgNCkpOyAvLyAzXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxhc3RJbmRleE9mTmVlZGxlKFxuICBzb3VyY2U6IFVpbnQ4QXJyYXksXG4gIG5lZWRsZTogVWludDhBcnJheSxcbiAgc3RhcnQgPSBzb3VyY2UubGVuZ3RoIC0gMSxcbik6IG51bWJlciB7XG4gIGlmIChzdGFydCA8IDApIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgaWYgKHN0YXJ0ID49IHNvdXJjZS5sZW5ndGgpIHtcbiAgICBzdGFydCA9IHNvdXJjZS5sZW5ndGggLSAxO1xuICB9XG4gIGNvbnN0IGUgPSBuZWVkbGVbbmVlZGxlLmxlbmd0aCAtIDFdO1xuICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPj0gMDsgaS0tKSB7XG4gICAgaWYgKHNvdXJjZVtpXSAhPT0gZSkgY29udGludWU7XG4gICAgY29uc3QgcGluID0gaTtcbiAgICBsZXQgbWF0Y2hlZCA9IDE7XG4gICAgbGV0IGogPSBpO1xuICAgIHdoaWxlIChtYXRjaGVkIDwgbmVlZGxlLmxlbmd0aCkge1xuICAgICAgai0tO1xuICAgICAgaWYgKHNvdXJjZVtqXSAhPT0gbmVlZGxlW25lZWRsZS5sZW5ndGggLSAxIC0gKHBpbiAtIGopXSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIG1hdGNoZWQrKztcbiAgICB9XG4gICAgaWYgKG1hdGNoZWQgPT09IG5lZWRsZS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBwaW4gLSBuZWVkbGUubGVuZ3RoICsgMTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIHRoZSBwcmVmaXggYXJyYXkgYXBwZWFycyBhdCB0aGUgc3RhcnQgb2YgdGhlIHNvdXJjZSBhcnJheSxcbiAqIGZhbHNlIG90aGVyd2lzZS5cbiAqXG4gKiBUaGUgY29tcGxleGl0eSBvZiB0aGlzIGZ1bmN0aW9uIGlzIE8ocHJlZml4Lmxlbmd0aCkuXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IHN0YXJ0c1dpdGggfSBmcm9tIFwiLi9tb2QudHNcIjtcbiAqIGNvbnN0IHNvdXJjZSA9IG5ldyBVaW50OEFycmF5KFswLCAxLCAyLCAxLCAyLCAxLCAyLCAzXSk7XG4gKiBjb25zdCBwcmVmaXggPSBuZXcgVWludDhBcnJheShbMCwgMSwgMl0pO1xuICogY29uc29sZS5sb2coc3RhcnRzV2l0aChzb3VyY2UsIHByZWZpeCkpOyAvLyB0cnVlXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0c1dpdGgoc291cmNlOiBVaW50OEFycmF5LCBwcmVmaXg6IFVpbnQ4QXJyYXkpOiBib29sZWFuIHtcbiAgZm9yIChsZXQgaSA9IDAsIG1heCA9IHByZWZpeC5sZW5ndGg7IGkgPCBtYXg7IGkrKykge1xuICAgIGlmIChzb3VyY2VbaV0gIT09IHByZWZpeFtpXSkgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIHRoZSBzdWZmaXggYXJyYXkgYXBwZWFycyBhdCB0aGUgZW5kIG9mIHRoZSBzb3VyY2UgYXJyYXksXG4gKiBmYWxzZSBvdGhlcndpc2UuXG4gKlxuICogVGhlIGNvbXBsZXhpdHkgb2YgdGhpcyBmdW5jdGlvbiBpcyBPKHN1ZmZpeC5sZW5ndGgpLlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBlbmRzV2l0aCB9IGZyb20gXCIuL21vZC50c1wiO1xuICogY29uc3Qgc291cmNlID0gbmV3IFVpbnQ4QXJyYXkoWzAsIDEsIDIsIDEsIDIsIDEsIDIsIDNdKTtcbiAqIGNvbnN0IHN1ZmZpeCA9IG5ldyBVaW50OEFycmF5KFsxLCAyLCAzXSk7XG4gKiBjb25zb2xlLmxvZyhlbmRzV2l0aChzb3VyY2UsIHN1ZmZpeCkpOyAvLyB0cnVlXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVuZHNXaXRoKHNvdXJjZTogVWludDhBcnJheSwgc3VmZml4OiBVaW50OEFycmF5KTogYm9vbGVhbiB7XG4gIGZvciAoXG4gICAgbGV0IHNyY2kgPSBzb3VyY2UubGVuZ3RoIC0gMSwgc2Z4aSA9IHN1ZmZpeC5sZW5ndGggLSAxO1xuICAgIHNmeGkgPj0gMDtcbiAgICBzcmNpLS0sIHNmeGktLVxuICApIHtcbiAgICBpZiAoc291cmNlW3NyY2ldICE9PSBzdWZmaXhbc2Z4aV0pIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqIFJldHVybnMgYSBuZXcgVWludDhBcnJheSBjb21wb3NlZCBvZiBgY291bnRgIHJlcGV0aXRpb25zIG9mIHRoZSBgc291cmNlYFxuICogYXJyYXkuXG4gKlxuICogSWYgYGNvdW50YCBpcyBuZWdhdGl2ZSwgYSBgUmFuZ2VFcnJvcmAgaXMgdGhyb3duLlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyByZXBlYXQgfSBmcm9tIFwiLi9tb2QudHNcIjtcbiAqIGNvbnN0IHNvdXJjZSA9IG5ldyBVaW50OEFycmF5KFswLCAxLCAyXSk7XG4gKiBjb25zb2xlLmxvZyhyZXBlYXQoc291cmNlLCAzKSk7IC8vIFswLCAxLCAyLCAwLCAxLCAyLCAwLCAxLCAyXVxuICogY29uc29sZS5sb2cocmVwZWF0KHNvdXJjZSwgMCkpOyAvLyBbXVxuICogY29uc29sZS5sb2cocmVwZWF0KHNvdXJjZSwgLTEpKTsgLy8gUmFuZ2VFcnJvclxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXBlYXQoc291cmNlOiBVaW50OEFycmF5LCBjb3VudDogbnVtYmVyKTogVWludDhBcnJheSB7XG4gIGlmIChjb3VudCA9PT0gMCkge1xuICAgIHJldHVybiBuZXcgVWludDhBcnJheSgpO1xuICB9XG5cbiAgaWYgKGNvdW50IDwgMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiYnl0ZXM6IG5lZ2F0aXZlIHJlcGVhdCBjb3VudFwiKTtcbiAgfSBlbHNlIGlmICgoc291cmNlLmxlbmd0aCAqIGNvdW50KSAvIGNvdW50ICE9PSBzb3VyY2UubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiYnl0ZXM6IHJlcGVhdCBjb3VudCBjYXVzZXMgb3ZlcmZsb3dcIik7XG4gIH1cblxuICBjb25zdCBpbnQgPSBNYXRoLmZsb29yKGNvdW50KTtcblxuICBpZiAoaW50ICE9PSBjb3VudCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcImJ5dGVzOiByZXBlYXQgY291bnQgbXVzdCBiZSBhbiBpbnRlZ2VyXCIpO1xuICB9XG5cbiAgY29uc3QgbmIgPSBuZXcgVWludDhBcnJheShzb3VyY2UubGVuZ3RoICogY291bnQpO1xuXG4gIGxldCBicCA9IGNvcHkoc291cmNlLCBuYik7XG5cbiAgZm9yICg7IGJwIDwgbmIubGVuZ3RoOyBicCAqPSAyKSB7XG4gICAgY29weShuYi5zbGljZSgwLCBicCksIG5iLCBicCk7XG4gIH1cblxuICByZXR1cm4gbmI7XG59XG5cbi8qKiBDb25jYXRlbmF0ZSB0aGUgZ2l2ZW4gYXJyYXlzIGludG8gYSBuZXcgVWludDhBcnJheS5cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgY29uY2F0IH0gZnJvbSBcIi4vbW9kLnRzXCI7XG4gKiBjb25zdCBhID0gbmV3IFVpbnQ4QXJyYXkoWzAsIDEsIDJdKTtcbiAqIGNvbnN0IGIgPSBuZXcgVWludDhBcnJheShbMywgNCwgNV0pO1xuICogY29uc29sZS5sb2coY29uY2F0KGEsIGIpKTsgLy8gWzAsIDEsIDIsIDMsIDQsIDVdXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXQoLi4uYnVmOiBVaW50OEFycmF5W10pOiBVaW50OEFycmF5IHtcbiAgbGV0IGxlbmd0aCA9IDA7XG4gIGZvciAoY29uc3QgYiBvZiBidWYpIHtcbiAgICBsZW5ndGggKz0gYi5sZW5ndGg7XG4gIH1cblxuICBjb25zdCBvdXRwdXQgPSBuZXcgVWludDhBcnJheShsZW5ndGgpO1xuICBsZXQgaW5kZXggPSAwO1xuICBmb3IgKGNvbnN0IGIgb2YgYnVmKSB7XG4gICAgb3V0cHV0LnNldChiLCBpbmRleCk7XG4gICAgaW5kZXggKz0gYi5sZW5ndGg7XG4gIH1cblxuICByZXR1cm4gb3V0cHV0O1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIHRoZSBzb3VyY2UgYXJyYXkgY29udGFpbnMgdGhlIG5lZWRsZSBhcnJheSwgZmFsc2Ugb3RoZXJ3aXNlLlxuICpcbiAqIEEgc3RhcnQgaW5kZXggY2FuIGJlIHNwZWNpZmllZCBhcyB0aGUgdGhpcmQgYXJndW1lbnQgdGhhdCBiZWdpbnMgdGhlIHNlYXJjaFxuICogYXQgdGhhdCBnaXZlbiBpbmRleC4gVGhlIHN0YXJ0IGluZGV4IGRlZmF1bHRzIHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFycmF5LlxuICpcbiAqIFRoZSBjb21wbGV4aXR5IG9mIHRoaXMgZnVuY3Rpb24gaXMgTyhzb3VyY2UubGVuZ3RoICogbmVlZGxlLmxlbmd0aCkuXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGluY2x1ZGVzTmVlZGxlIH0gZnJvbSBcIi4vbW9kLnRzXCI7XG4gKiBjb25zdCBzb3VyY2UgPSBuZXcgVWludDhBcnJheShbMCwgMSwgMiwgMSwgMiwgMSwgMiwgM10pO1xuICogY29uc3QgbmVlZGxlID0gbmV3IFVpbnQ4QXJyYXkoWzEsIDJdKTtcbiAqIGNvbnNvbGUubG9nKGluY2x1ZGVzTmVlZGxlKHNvdXJjZSwgbmVlZGxlKSk7IC8vIHRydWVcbiAqIGNvbnNvbGUubG9nKGluY2x1ZGVzTmVlZGxlKHNvdXJjZSwgbmVlZGxlLCA2KSk7IC8vIGZhbHNlXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluY2x1ZGVzTmVlZGxlKFxuICBzb3VyY2U6IFVpbnQ4QXJyYXksXG4gIG5lZWRsZTogVWludDhBcnJheSxcbiAgc3RhcnQgPSAwLFxuKTogYm9vbGVhbiB7XG4gIHJldHVybiBpbmRleE9mTmVlZGxlKHNvdXJjZSwgbmVlZGxlLCBzdGFydCkgIT09IC0xO1xufVxuXG4vKiogQ29weSBieXRlcyBmcm9tIHRoZSBgc3JjYCBhcnJheSB0byB0aGUgYGRzdGAgYXJyYXkuIFJldHVybnMgdGhlIG51bWJlciBvZlxuICogYnl0ZXMgY29waWVkLlxuICpcbiAqIElmIHRoZSBgc3JjYCBhcnJheSBpcyBsYXJnZXIgdGhhbiB3aGF0IHRoZSBgZHN0YCBhcnJheSBjYW4gaG9sZCwgb25seSB0aGVcbiAqIGFtb3VudCBvZiBieXRlcyB0aGF0IGZpdCBpbiB0aGUgYGRzdGAgYXJyYXkgYXJlIGNvcGllZC5cbiAqXG4gKiBBbiBvZmZzZXQgY2FuIGJlIHNwZWNpZmllZCBhcyB0aGUgdGhpcmQgYXJndW1lbnQgdGhhdCBiZWdpbnMgdGhlIGNvcHkgYXRcbiAqIHRoYXQgZ2l2ZW4gaW5kZXggaW4gdGhlIGBkc3RgIGFycmF5LiBUaGUgb2Zmc2V0IGRlZmF1bHRzIHRvIHRoZSBiZWdpbm5pbmcgb2ZcbiAqIHRoZSBhcnJheS5cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgY29weSB9IGZyb20gXCIuL21vZC50c1wiO1xuICogY29uc3Qgc3JjID0gbmV3IFVpbnQ4QXJyYXkoWzksIDgsIDddKTtcbiAqIGNvbnN0IGRzdCA9IG5ldyBVaW50OEFycmF5KFswLCAxLCAyLCAzLCA0LCA1XSk7XG4gKiBjb25zb2xlLmxvZyhjb3B5KHNyYywgZHN0KSk7IC8vIDNcbiAqIGNvbnNvbGUubG9nKGRzdCk7IC8vIFs5LCA4LCA3LCAzLCA0LCA1XVxuICogYGBgXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGNvcHkgfSBmcm9tIFwiLi9tb2QudHNcIjtcbiAqIGNvbnN0IHNyYyA9IG5ldyBVaW50OEFycmF5KFsxLCAxLCAxLCAxXSk7XG4gKiBjb25zdCBkc3QgPSBuZXcgVWludDhBcnJheShbMCwgMCwgMCwgMF0pO1xuICogY29uc29sZS5sb2coY29weShzcmMsIGRzdCwgMSkpOyAvLyAzXG4gKiBjb25zb2xlLmxvZyhkc3QpOyAvLyBbMCwgMSwgMSwgMV1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gY29weShzcmM6IFVpbnQ4QXJyYXksIGRzdDogVWludDhBcnJheSwgb2ZmID0gMCk6IG51bWJlciB7XG4gIG9mZiA9IE1hdGgubWF4KDAsIE1hdGgubWluKG9mZiwgZHN0LmJ5dGVMZW5ndGgpKTtcbiAgY29uc3QgZHN0Qnl0ZXNBdmFpbGFibGUgPSBkc3QuYnl0ZUxlbmd0aCAtIG9mZjtcbiAgaWYgKHNyYy5ieXRlTGVuZ3RoID4gZHN0Qnl0ZXNBdmFpbGFibGUpIHtcbiAgICBzcmMgPSBzcmMuc3ViYXJyYXkoMCwgZHN0Qnl0ZXNBdmFpbGFibGUpO1xuICB9XG4gIGRzdC5zZXQoc3JjLCBvZmYpO1xuICByZXR1cm4gc3JjLmJ5dGVMZW5ndGg7XG59XG5cbmV4cG9ydCB7IGVxdWFscyB9IGZyb20gXCIuL2VxdWFscy50c1wiO1xuIiwiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMiB0aGUgRGVubyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLiBNSVQgbGljZW5zZS5cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gXCIuLi9fdXRpbC9hc3NlcnQudHNcIjtcbmltcG9ydCB7IEJ5dGVzTGlzdCB9IGZyb20gXCIuLi9ieXRlcy9ieXRlc19saXN0LnRzXCI7XG5pbXBvcnQgeyBjb25jYXQsIGNvcHkgfSBmcm9tIFwiLi4vYnl0ZXMvbW9kLnRzXCI7XG5pbXBvcnQgdHlwZSB7IFJlYWRlciwgUmVhZGVyU3luYywgV3JpdGVyLCBXcml0ZXJTeW5jIH0gZnJvbSBcIi4vdHlwZXMuZC50c1wiO1xuXG4vLyBNSU5fUkVBRCBpcyB0aGUgbWluaW11bSBBcnJheUJ1ZmZlciBzaXplIHBhc3NlZCB0byBhIHJlYWQgY2FsbCBieVxuLy8gYnVmZmVyLlJlYWRGcm9tLiBBcyBsb25nIGFzIHRoZSBCdWZmZXIgaGFzIGF0IGxlYXN0IE1JTl9SRUFEIGJ5dGVzIGJleW9uZFxuLy8gd2hhdCBpcyByZXF1aXJlZCB0byBob2xkIHRoZSBjb250ZW50cyBvZiByLCByZWFkRnJvbSgpIHdpbGwgbm90IGdyb3cgdGhlXG4vLyB1bmRlcmx5aW5nIGJ1ZmZlci5cbmNvbnN0IE1JTl9SRUFEID0gMzIgKiAxMDI0O1xuY29uc3QgTUFYX1NJWkUgPSAyICoqIDMyIC0gMjtcblxuLyoqIEEgdmFyaWFibGUtc2l6ZWQgYnVmZmVyIG9mIGJ5dGVzIHdpdGggYHJlYWQoKWAgYW5kIGB3cml0ZSgpYCBtZXRob2RzLlxuICpcbiAqIEJ1ZmZlciBpcyBhbG1vc3QgYWx3YXlzIHVzZWQgd2l0aCBzb21lIEkvTyBsaWtlIGZpbGVzIGFuZCBzb2NrZXRzLiBJdCBhbGxvd3NcbiAqIG9uZSB0byBidWZmZXIgdXAgYSBkb3dubG9hZCBmcm9tIGEgc29ja2V0LiBCdWZmZXIgZ3Jvd3MgYW5kIHNocmlua3MgYXNcbiAqIG5lY2Vzc2FyeS5cbiAqXG4gKiBCdWZmZXIgaXMgTk9UIHRoZSBzYW1lIHRoaW5nIGFzIE5vZGUncyBCdWZmZXIuIE5vZGUncyBCdWZmZXIgd2FzIGNyZWF0ZWQgaW5cbiAqIDIwMDkgYmVmb3JlIEphdmFTY3JpcHQgaGFkIHRoZSBjb25jZXB0IG9mIEFycmF5QnVmZmVycy4gSXQncyBzaW1wbHkgYVxuICogbm9uLXN0YW5kYXJkIEFycmF5QnVmZmVyLlxuICpcbiAqIEFycmF5QnVmZmVyIGlzIGEgZml4ZWQgbWVtb3J5IGFsbG9jYXRpb24uIEJ1ZmZlciBpcyBpbXBsZW1lbnRlZCBvbiB0b3Agb2ZcbiAqIEFycmF5QnVmZmVyLlxuICpcbiAqIEJhc2VkIG9uIFtHbyBCdWZmZXJdKGh0dHBzOi8vZ29sYW5nLm9yZy9wa2cvYnl0ZXMvI0J1ZmZlcikuICovXG5cbmV4cG9ydCBjbGFzcyBCdWZmZXIge1xuICAjYnVmOiBVaW50OEFycmF5OyAvLyBjb250ZW50cyBhcmUgdGhlIGJ5dGVzIGJ1ZltvZmYgOiBsZW4oYnVmKV1cbiAgI29mZiA9IDA7IC8vIHJlYWQgYXQgYnVmW29mZl0sIHdyaXRlIGF0IGJ1ZltidWYuYnl0ZUxlbmd0aF1cblxuICBjb25zdHJ1Y3RvcihhYj86IEFycmF5QnVmZmVyTGlrZSB8IEFycmF5TGlrZTxudW1iZXI+KSB7XG4gICAgdGhpcy4jYnVmID0gYWIgPT09IHVuZGVmaW5lZCA/IG5ldyBVaW50OEFycmF5KDApIDogbmV3IFVpbnQ4QXJyYXkoYWIpO1xuICB9XG5cbiAgLyoqIFJldHVybnMgYSBzbGljZSBob2xkaW5nIHRoZSB1bnJlYWQgcG9ydGlvbiBvZiB0aGUgYnVmZmVyLlxuICAgKlxuICAgKiBUaGUgc2xpY2UgaXMgdmFsaWQgZm9yIHVzZSBvbmx5IHVudGlsIHRoZSBuZXh0IGJ1ZmZlciBtb2RpZmljYXRpb24gKHRoYXRcbiAgICogaXMsIG9ubHkgdW50aWwgdGhlIG5leHQgY2FsbCB0byBhIG1ldGhvZCBsaWtlIGByZWFkKClgLCBgd3JpdGUoKWAsXG4gICAqIGByZXNldCgpYCwgb3IgYHRydW5jYXRlKClgKS4gSWYgYG9wdGlvbnMuY29weWAgaXMgZmFsc2UgdGhlIHNsaWNlIGFsaWFzZXMgdGhlIGJ1ZmZlciBjb250ZW50IGF0XG4gICAqIGxlYXN0IHVudGlsIHRoZSBuZXh0IGJ1ZmZlciBtb2RpZmljYXRpb24sIHNvIGltbWVkaWF0ZSBjaGFuZ2VzIHRvIHRoZVxuICAgKiBzbGljZSB3aWxsIGFmZmVjdCB0aGUgcmVzdWx0IG9mIGZ1dHVyZSByZWFkcy5cbiAgICogQHBhcmFtIG9wdGlvbnMgRGVmYXVsdHMgdG8gYHsgY29weTogdHJ1ZSB9YFxuICAgKi9cbiAgYnl0ZXMob3B0aW9ucyA9IHsgY29weTogdHJ1ZSB9KTogVWludDhBcnJheSB7XG4gICAgaWYgKG9wdGlvbnMuY29weSA9PT0gZmFsc2UpIHJldHVybiB0aGlzLiNidWYuc3ViYXJyYXkodGhpcy4jb2ZmKTtcbiAgICByZXR1cm4gdGhpcy4jYnVmLnNsaWNlKHRoaXMuI29mZik7XG4gIH1cblxuICAvKiogUmV0dXJucyB3aGV0aGVyIHRoZSB1bnJlYWQgcG9ydGlvbiBvZiB0aGUgYnVmZmVyIGlzIGVtcHR5LiAqL1xuICBlbXB0eSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy4jYnVmLmJ5dGVMZW5ndGggPD0gdGhpcy4jb2ZmO1xuICB9XG5cbiAgLyoqIEEgcmVhZCBvbmx5IG51bWJlciBvZiBieXRlcyBvZiB0aGUgdW5yZWFkIHBvcnRpb24gb2YgdGhlIGJ1ZmZlci4gKi9cbiAgZ2V0IGxlbmd0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLiNidWYuYnl0ZUxlbmd0aCAtIHRoaXMuI29mZjtcbiAgfVxuXG4gIC8qKiBUaGUgcmVhZCBvbmx5IGNhcGFjaXR5IG9mIHRoZSBidWZmZXIncyB1bmRlcmx5aW5nIGJ5dGUgc2xpY2UsIHRoYXQgaXMsXG4gICAqIHRoZSB0b3RhbCBzcGFjZSBhbGxvY2F0ZWQgZm9yIHRoZSBidWZmZXIncyBkYXRhLiAqL1xuICBnZXQgY2FwYWNpdHkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy4jYnVmLmJ1ZmZlci5ieXRlTGVuZ3RoO1xuICB9XG5cbiAgLyoqIERpc2NhcmRzIGFsbCBidXQgdGhlIGZpcnN0IGBuYCB1bnJlYWQgYnl0ZXMgZnJvbSB0aGUgYnVmZmVyIGJ1dFxuICAgKiBjb250aW51ZXMgdG8gdXNlIHRoZSBzYW1lIGFsbG9jYXRlZCBzdG9yYWdlLiBJdCB0aHJvd3MgaWYgYG5gIGlzXG4gICAqIG5lZ2F0aXZlIG9yIGdyZWF0ZXIgdGhhbiB0aGUgbGVuZ3RoIG9mIHRoZSBidWZmZXIuICovXG4gIHRydW5jYXRlKG46IG51bWJlcik6IHZvaWQge1xuICAgIGlmIChuID09PSAwKSB7XG4gICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChuIDwgMCB8fCBuID4gdGhpcy5sZW5ndGgpIHtcbiAgICAgIHRocm93IEVycm9yKFwiYnl0ZXMuQnVmZmVyOiB0cnVuY2F0aW9uIG91dCBvZiByYW5nZVwiKTtcbiAgICB9XG4gICAgdGhpcy4jcmVzbGljZSh0aGlzLiNvZmYgKyBuKTtcbiAgfVxuXG4gIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuI3Jlc2xpY2UoMCk7XG4gICAgdGhpcy4jb2ZmID0gMDtcbiAgfVxuXG4gICN0cnlHcm93QnlSZXNsaWNlKG46IG51bWJlcikge1xuICAgIGNvbnN0IGwgPSB0aGlzLiNidWYuYnl0ZUxlbmd0aDtcbiAgICBpZiAobiA8PSB0aGlzLmNhcGFjaXR5IC0gbCkge1xuICAgICAgdGhpcy4jcmVzbGljZShsICsgbik7XG4gICAgICByZXR1cm4gbDtcbiAgICB9XG4gICAgcmV0dXJuIC0xO1xuICB9XG5cbiAgI3Jlc2xpY2UobGVuOiBudW1iZXIpIHtcbiAgICBhc3NlcnQobGVuIDw9IHRoaXMuI2J1Zi5idWZmZXIuYnl0ZUxlbmd0aCk7XG4gICAgdGhpcy4jYnVmID0gbmV3IFVpbnQ4QXJyYXkodGhpcy4jYnVmLmJ1ZmZlciwgMCwgbGVuKTtcbiAgfVxuXG4gIC8qKiBSZWFkcyB0aGUgbmV4dCBgcC5sZW5ndGhgIGJ5dGVzIGZyb20gdGhlIGJ1ZmZlciBvciB1bnRpbCB0aGUgYnVmZmVyIGlzXG4gICAqIGRyYWluZWQuIFJldHVybnMgdGhlIG51bWJlciBvZiBieXRlcyByZWFkLiBJZiB0aGUgYnVmZmVyIGhhcyBubyBkYXRhIHRvXG4gICAqIHJldHVybiwgdGhlIHJldHVybiBpcyBFT0YgKGBudWxsYCkuICovXG4gIHJlYWRTeW5jKHA6IFVpbnQ4QXJyYXkpOiBudW1iZXIgfCBudWxsIHtcbiAgICBpZiAodGhpcy5lbXB0eSgpKSB7XG4gICAgICAvLyBCdWZmZXIgaXMgZW1wdHksIHJlc2V0IHRvIHJlY292ZXIgc3BhY2UuXG4gICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICBpZiAocC5ieXRlTGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIHRoaXMgZWRnZSBjYXNlIGlzIHRlc3RlZCBpbiAnYnVmZmVyUmVhZEVtcHR5QXRFT0YnIHRlc3RcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgbnJlYWQgPSBjb3B5KHRoaXMuI2J1Zi5zdWJhcnJheSh0aGlzLiNvZmYpLCBwKTtcbiAgICB0aGlzLiNvZmYgKz0gbnJlYWQ7XG4gICAgcmV0dXJuIG5yZWFkO1xuICB9XG5cbiAgLyoqIFJlYWRzIHRoZSBuZXh0IGBwLmxlbmd0aGAgYnl0ZXMgZnJvbSB0aGUgYnVmZmVyIG9yIHVudGlsIHRoZSBidWZmZXIgaXNcbiAgICogZHJhaW5lZC4gUmVzb2x2ZXMgdG8gdGhlIG51bWJlciBvZiBieXRlcyByZWFkLiBJZiB0aGUgYnVmZmVyIGhhcyBub1xuICAgKiBkYXRhIHRvIHJldHVybiwgcmVzb2x2ZXMgdG8gRU9GIChgbnVsbGApLlxuICAgKlxuICAgKiBOT1RFOiBUaGlzIG1ldGhvZHMgcmVhZHMgYnl0ZXMgc3luY2hyb25vdXNseTsgaXQncyBwcm92aWRlZCBmb3JcbiAgICogY29tcGF0aWJpbGl0eSB3aXRoIGBSZWFkZXJgIGludGVyZmFjZXMuXG4gICAqL1xuICByZWFkKHA6IFVpbnQ4QXJyYXkpOiBQcm9taXNlPG51bWJlciB8IG51bGw+IHtcbiAgICBjb25zdCByciA9IHRoaXMucmVhZFN5bmMocCk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShycik7XG4gIH1cblxuICB3cml0ZVN5bmMocDogVWludDhBcnJheSk6IG51bWJlciB7XG4gICAgY29uc3QgbSA9IHRoaXMuI2dyb3cocC5ieXRlTGVuZ3RoKTtcbiAgICByZXR1cm4gY29weShwLCB0aGlzLiNidWYsIG0pO1xuICB9XG5cbiAgLyoqIE5PVEU6IFRoaXMgbWV0aG9kcyB3cml0ZXMgYnl0ZXMgc3luY2hyb25vdXNseTsgaXQncyBwcm92aWRlZCBmb3JcbiAgICogY29tcGF0aWJpbGl0eSB3aXRoIGBXcml0ZXJgIGludGVyZmFjZS4gKi9cbiAgd3JpdGUocDogVWludDhBcnJheSk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgY29uc3QgbiA9IHRoaXMud3JpdGVTeW5jKHApO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobik7XG4gIH1cblxuICAjZ3JvdyhuOiBudW1iZXIpIHtcbiAgICBjb25zdCBtID0gdGhpcy5sZW5ndGg7XG4gICAgLy8gSWYgYnVmZmVyIGlzIGVtcHR5LCByZXNldCB0byByZWNvdmVyIHNwYWNlLlxuICAgIGlmIChtID09PSAwICYmIHRoaXMuI29mZiAhPT0gMCkge1xuICAgICAgdGhpcy5yZXNldCgpO1xuICAgIH1cbiAgICAvLyBGYXN0OiBUcnkgdG8gZ3JvdyBieSBtZWFucyBvZiBhIHJlc2xpY2UuXG4gICAgY29uc3QgaSA9IHRoaXMuI3RyeUdyb3dCeVJlc2xpY2Uobik7XG4gICAgaWYgKGkgPj0gMCkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgIGNvbnN0IGMgPSB0aGlzLmNhcGFjaXR5O1xuICAgIGlmIChuIDw9IE1hdGguZmxvb3IoYyAvIDIpIC0gbSkge1xuICAgICAgLy8gV2UgY2FuIHNsaWRlIHRoaW5ncyBkb3duIGluc3RlYWQgb2YgYWxsb2NhdGluZyBhIG5ld1xuICAgICAgLy8gQXJyYXlCdWZmZXIuIFdlIG9ubHkgbmVlZCBtK24gPD0gYyB0byBzbGlkZSwgYnV0XG4gICAgICAvLyB3ZSBpbnN0ZWFkIGxldCBjYXBhY2l0eSBnZXQgdHdpY2UgYXMgbGFyZ2Ugc28gd2VcbiAgICAgIC8vIGRvbid0IHNwZW5kIGFsbCBvdXIgdGltZSBjb3B5aW5nLlxuICAgICAgY29weSh0aGlzLiNidWYuc3ViYXJyYXkodGhpcy4jb2ZmKSwgdGhpcy4jYnVmKTtcbiAgICB9IGVsc2UgaWYgKGMgKyBuID4gTUFYX1NJWkUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBidWZmZXIgY2Fubm90IGJlIGdyb3duIGJleW9uZCB0aGUgbWF4aW11bSBzaXplLlwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm90IGVub3VnaCBzcGFjZSBhbnl3aGVyZSwgd2UgbmVlZCB0byBhbGxvY2F0ZS5cbiAgICAgIGNvbnN0IGJ1ZiA9IG5ldyBVaW50OEFycmF5KE1hdGgubWluKDIgKiBjICsgbiwgTUFYX1NJWkUpKTtcbiAgICAgIGNvcHkodGhpcy4jYnVmLnN1YmFycmF5KHRoaXMuI29mZiksIGJ1Zik7XG4gICAgICB0aGlzLiNidWYgPSBidWY7XG4gICAgfVxuICAgIC8vIFJlc3RvcmUgdGhpcy4jb2ZmIGFuZCBsZW4odGhpcy4jYnVmKS5cbiAgICB0aGlzLiNvZmYgPSAwO1xuICAgIHRoaXMuI3Jlc2xpY2UoTWF0aC5taW4obSArIG4sIE1BWF9TSVpFKSk7XG4gICAgcmV0dXJuIG07XG4gIH1cblxuICAvKiogR3Jvd3MgdGhlIGJ1ZmZlcidzIGNhcGFjaXR5LCBpZiBuZWNlc3NhcnksIHRvIGd1YXJhbnRlZSBzcGFjZSBmb3JcbiAgICogYW5vdGhlciBgbmAgYnl0ZXMuIEFmdGVyIGAuZ3JvdyhuKWAsIGF0IGxlYXN0IGBuYCBieXRlcyBjYW4gYmUgd3JpdHRlbiB0b1xuICAgKiB0aGUgYnVmZmVyIHdpdGhvdXQgYW5vdGhlciBhbGxvY2F0aW9uLiBJZiBgbmAgaXMgbmVnYXRpdmUsIGAuZ3JvdygpYCB3aWxsXG4gICAqIHRocm93LiBJZiB0aGUgYnVmZmVyIGNhbid0IGdyb3cgaXQgd2lsbCB0aHJvdyBhbiBlcnJvci5cbiAgICpcbiAgICogQmFzZWQgb24gR28gTGFuZydzXG4gICAqIFtCdWZmZXIuR3Jvd10oaHR0cHM6Ly9nb2xhbmcub3JnL3BrZy9ieXRlcy8jQnVmZmVyLkdyb3cpLiAqL1xuICBncm93KG46IG51bWJlcik6IHZvaWQge1xuICAgIGlmIChuIDwgMCkge1xuICAgICAgdGhyb3cgRXJyb3IoXCJCdWZmZXIuZ3JvdzogbmVnYXRpdmUgY291bnRcIik7XG4gICAgfVxuICAgIGNvbnN0IG0gPSB0aGlzLiNncm93KG4pO1xuICAgIHRoaXMuI3Jlc2xpY2UobSk7XG4gIH1cblxuICAvKiogUmVhZHMgZGF0YSBmcm9tIGByYCB1bnRpbCBFT0YgKGBudWxsYCkgYW5kIGFwcGVuZHMgaXQgdG8gdGhlIGJ1ZmZlcixcbiAgICogZ3Jvd2luZyB0aGUgYnVmZmVyIGFzIG5lZWRlZC4gSXQgcmVzb2x2ZXMgdG8gdGhlIG51bWJlciBvZiBieXRlcyByZWFkLlxuICAgKiBJZiB0aGUgYnVmZmVyIGJlY29tZXMgdG9vIGxhcmdlLCBgLnJlYWRGcm9tKClgIHdpbGwgcmVqZWN0IHdpdGggYW4gZXJyb3IuXG4gICAqXG4gICAqIEJhc2VkIG9uIEdvIExhbmcnc1xuICAgKiBbQnVmZmVyLlJlYWRGcm9tXShodHRwczovL2dvbGFuZy5vcmcvcGtnL2J5dGVzLyNCdWZmZXIuUmVhZEZyb20pLiAqL1xuICBhc3luYyByZWFkRnJvbShyOiBSZWFkZXIpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIGxldCBuID0gMDtcbiAgICBjb25zdCB0bXAgPSBuZXcgVWludDhBcnJheShNSU5fUkVBRCk7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGNvbnN0IHNob3VsZEdyb3cgPSB0aGlzLmNhcGFjaXR5IC0gdGhpcy5sZW5ndGggPCBNSU5fUkVBRDtcbiAgICAgIC8vIHJlYWQgaW50byB0bXAgYnVmZmVyIGlmIHRoZXJlJ3Mgbm90IGVub3VnaCByb29tXG4gICAgICAvLyBvdGhlcndpc2UgcmVhZCBkaXJlY3RseSBpbnRvIHRoZSBpbnRlcm5hbCBidWZmZXJcbiAgICAgIGNvbnN0IGJ1ZiA9IHNob3VsZEdyb3dcbiAgICAgICAgPyB0bXBcbiAgICAgICAgOiBuZXcgVWludDhBcnJheSh0aGlzLiNidWYuYnVmZmVyLCB0aGlzLmxlbmd0aCk7XG5cbiAgICAgIGNvbnN0IG5yZWFkID0gYXdhaXQgci5yZWFkKGJ1Zik7XG4gICAgICBpZiAobnJlYWQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgICB9XG5cbiAgICAgIC8vIHdyaXRlIHdpbGwgZ3JvdyBpZiBuZWVkZWRcbiAgICAgIGlmIChzaG91bGRHcm93KSB0aGlzLndyaXRlU3luYyhidWYuc3ViYXJyYXkoMCwgbnJlYWQpKTtcbiAgICAgIGVsc2UgdGhpcy4jcmVzbGljZSh0aGlzLmxlbmd0aCArIG5yZWFkKTtcblxuICAgICAgbiArPSBucmVhZDtcbiAgICB9XG4gIH1cblxuICAvKiogUmVhZHMgZGF0YSBmcm9tIGByYCB1bnRpbCBFT0YgKGBudWxsYCkgYW5kIGFwcGVuZHMgaXQgdG8gdGhlIGJ1ZmZlcixcbiAgICogZ3Jvd2luZyB0aGUgYnVmZmVyIGFzIG5lZWRlZC4gSXQgcmV0dXJucyB0aGUgbnVtYmVyIG9mIGJ5dGVzIHJlYWQuIElmIHRoZVxuICAgKiBidWZmZXIgYmVjb21lcyB0b28gbGFyZ2UsIGAucmVhZEZyb21TeW5jKClgIHdpbGwgdGhyb3cgYW4gZXJyb3IuXG4gICAqXG4gICAqIEJhc2VkIG9uIEdvIExhbmcnc1xuICAgKiBbQnVmZmVyLlJlYWRGcm9tXShodHRwczovL2dvbGFuZy5vcmcvcGtnL2J5dGVzLyNCdWZmZXIuUmVhZEZyb20pLiAqL1xuICByZWFkRnJvbVN5bmMocjogUmVhZGVyU3luYyk6IG51bWJlciB7XG4gICAgbGV0IG4gPSAwO1xuICAgIGNvbnN0IHRtcCA9IG5ldyBVaW50OEFycmF5KE1JTl9SRUFEKTtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgY29uc3Qgc2hvdWxkR3JvdyA9IHRoaXMuY2FwYWNpdHkgLSB0aGlzLmxlbmd0aCA8IE1JTl9SRUFEO1xuICAgICAgLy8gcmVhZCBpbnRvIHRtcCBidWZmZXIgaWYgdGhlcmUncyBub3QgZW5vdWdoIHJvb21cbiAgICAgIC8vIG90aGVyd2lzZSByZWFkIGRpcmVjdGx5IGludG8gdGhlIGludGVybmFsIGJ1ZmZlclxuICAgICAgY29uc3QgYnVmID0gc2hvdWxkR3Jvd1xuICAgICAgICA/IHRtcFxuICAgICAgICA6IG5ldyBVaW50OEFycmF5KHRoaXMuI2J1Zi5idWZmZXIsIHRoaXMubGVuZ3RoKTtcblxuICAgICAgY29uc3QgbnJlYWQgPSByLnJlYWRTeW5jKGJ1Zik7XG4gICAgICBpZiAobnJlYWQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgICB9XG5cbiAgICAgIC8vIHdyaXRlIHdpbGwgZ3JvdyBpZiBuZWVkZWRcbiAgICAgIGlmIChzaG91bGRHcm93KSB0aGlzLndyaXRlU3luYyhidWYuc3ViYXJyYXkoMCwgbnJlYWQpKTtcbiAgICAgIGVsc2UgdGhpcy4jcmVzbGljZSh0aGlzLmxlbmd0aCArIG5yZWFkKTtcblxuICAgICAgbiArPSBucmVhZDtcbiAgICB9XG4gIH1cbn1cblxuY29uc3QgREVGQVVMVF9CVUZfU0laRSA9IDQwOTY7XG5jb25zdCBNSU5fQlVGX1NJWkUgPSAxNjtcbmNvbnN0IE1BWF9DT05TRUNVVElWRV9FTVBUWV9SRUFEUyA9IDEwMDtcbmNvbnN0IENSID0gXCJcXHJcIi5jaGFyQ29kZUF0KDApO1xuY29uc3QgTEYgPSBcIlxcblwiLmNoYXJDb2RlQXQoMCk7XG5cbmV4cG9ydCBjbGFzcyBCdWZmZXJGdWxsRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIG92ZXJyaWRlIG5hbWUgPSBcIkJ1ZmZlckZ1bGxFcnJvclwiO1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgcGFydGlhbDogVWludDhBcnJheSkge1xuICAgIHN1cGVyKFwiQnVmZmVyIGZ1bGxcIik7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFBhcnRpYWxSZWFkRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIG92ZXJyaWRlIG5hbWUgPSBcIlBhcnRpYWxSZWFkRXJyb3JcIjtcbiAgcGFydGlhbD86IFVpbnQ4QXJyYXk7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKFwiRW5jb3VudGVyZWQgVW5leHBlY3RlZEVvZiwgZGF0YSBvbmx5IHBhcnRpYWxseSByZWFkXCIpO1xuICB9XG59XG5cbi8qKiBSZXN1bHQgdHlwZSByZXR1cm5lZCBieSBvZiBCdWZSZWFkZXIucmVhZExpbmUoKS4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVhZExpbmVSZXN1bHQge1xuICBsaW5lOiBVaW50OEFycmF5O1xuICBtb3JlOiBib29sZWFuO1xufVxuXG4vKiogQnVmUmVhZGVyIGltcGxlbWVudHMgYnVmZmVyaW5nIGZvciBhIFJlYWRlciBvYmplY3QuICovXG5leHBvcnQgY2xhc3MgQnVmUmVhZGVyIGltcGxlbWVudHMgUmVhZGVyIHtcbiAgI2J1ZiE6IFVpbnQ4QXJyYXk7XG4gICNyZCE6IFJlYWRlcjsgLy8gUmVhZGVyIHByb3ZpZGVkIGJ5IGNhbGxlci5cbiAgI3IgPSAwOyAvLyBidWYgcmVhZCBwb3NpdGlvbi5cbiAgI3cgPSAwOyAvLyBidWYgd3JpdGUgcG9zaXRpb24uXG4gICNlb2YgPSBmYWxzZTtcbiAgLy8gcHJpdmF0ZSBsYXN0Qnl0ZTogbnVtYmVyO1xuICAvLyBwcml2YXRlIGxhc3RDaGFyU2l6ZTogbnVtYmVyO1xuXG4gIC8qKiByZXR1cm4gbmV3IEJ1ZlJlYWRlciB1bmxlc3MgciBpcyBCdWZSZWFkZXIgKi9cbiAgc3RhdGljIGNyZWF0ZShyOiBSZWFkZXIsIHNpemU6IG51bWJlciA9IERFRkFVTFRfQlVGX1NJWkUpOiBCdWZSZWFkZXIge1xuICAgIHJldHVybiByIGluc3RhbmNlb2YgQnVmUmVhZGVyID8gciA6IG5ldyBCdWZSZWFkZXIociwgc2l6ZSk7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihyZDogUmVhZGVyLCBzaXplOiBudW1iZXIgPSBERUZBVUxUX0JVRl9TSVpFKSB7XG4gICAgaWYgKHNpemUgPCBNSU5fQlVGX1NJWkUpIHtcbiAgICAgIHNpemUgPSBNSU5fQlVGX1NJWkU7XG4gICAgfVxuICAgIHRoaXMuI3Jlc2V0KG5ldyBVaW50OEFycmF5KHNpemUpLCByZCk7XG4gIH1cblxuICAvKiogUmV0dXJucyB0aGUgc2l6ZSBvZiB0aGUgdW5kZXJseWluZyBidWZmZXIgaW4gYnl0ZXMuICovXG4gIHNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy4jYnVmLmJ5dGVMZW5ndGg7XG4gIH1cblxuICBidWZmZXJlZCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLiN3IC0gdGhpcy4jcjtcbiAgfVxuXG4gIC8vIFJlYWRzIGEgbmV3IGNodW5rIGludG8gdGhlIGJ1ZmZlci5cbiAgI2ZpbGwgPSBhc3luYyAoKSA9PiB7XG4gICAgLy8gU2xpZGUgZXhpc3RpbmcgZGF0YSB0byBiZWdpbm5pbmcuXG4gICAgaWYgKHRoaXMuI3IgPiAwKSB7XG4gICAgICB0aGlzLiNidWYuY29weVdpdGhpbigwLCB0aGlzLiNyLCB0aGlzLiN3KTtcbiAgICAgIHRoaXMuI3cgLT0gdGhpcy4jcjtcbiAgICAgIHRoaXMuI3IgPSAwO1xuICAgIH1cblxuICAgIGlmICh0aGlzLiN3ID49IHRoaXMuI2J1Zi5ieXRlTGVuZ3RoKSB7XG4gICAgICB0aHJvdyBFcnJvcihcImJ1ZmlvOiB0cmllZCB0byBmaWxsIGZ1bGwgYnVmZmVyXCIpO1xuICAgIH1cblxuICAgIC8vIFJlYWQgbmV3IGRhdGE6IHRyeSBhIGxpbWl0ZWQgbnVtYmVyIG9mIHRpbWVzLlxuICAgIGZvciAobGV0IGkgPSBNQVhfQ09OU0VDVVRJVkVfRU1QVFlfUkVBRFM7IGkgPiAwOyBpLS0pIHtcbiAgICAgIGNvbnN0IHJyID0gYXdhaXQgdGhpcy4jcmQucmVhZCh0aGlzLiNidWYuc3ViYXJyYXkodGhpcy4jdykpO1xuICAgICAgaWYgKHJyID09PSBudWxsKSB7XG4gICAgICAgIHRoaXMuI2VvZiA9IHRydWU7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGFzc2VydChyciA+PSAwLCBcIm5lZ2F0aXZlIHJlYWRcIik7XG4gICAgICB0aGlzLiN3ICs9IHJyO1xuICAgICAgaWYgKHJyID4gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYE5vIHByb2dyZXNzIGFmdGVyICR7TUFYX0NPTlNFQ1VUSVZFX0VNUFRZX1JFQURTfSByZWFkKCkgY2FsbHNgLFxuICAgICk7XG4gIH07XG5cbiAgLyoqIERpc2NhcmRzIGFueSBidWZmZXJlZCBkYXRhLCByZXNldHMgYWxsIHN0YXRlLCBhbmQgc3dpdGNoZXNcbiAgICogdGhlIGJ1ZmZlcmVkIHJlYWRlciB0byByZWFkIGZyb20gci5cbiAgICovXG4gIHJlc2V0KHI6IFJlYWRlcik6IHZvaWQge1xuICAgIHRoaXMuI3Jlc2V0KHRoaXMuI2J1Ziwgcik7XG4gIH1cblxuICAjcmVzZXQgPSAoYnVmOiBVaW50OEFycmF5LCByZDogUmVhZGVyKTogdm9pZCA9PiB7XG4gICAgdGhpcy4jYnVmID0gYnVmO1xuICAgIHRoaXMuI3JkID0gcmQ7XG4gICAgdGhpcy4jZW9mID0gZmFsc2U7XG4gICAgLy8gdGhpcy5sYXN0Qnl0ZSA9IC0xO1xuICAgIC8vIHRoaXMubGFzdENoYXJTaXplID0gLTE7XG4gIH07XG5cbiAgLyoqIHJlYWRzIGRhdGEgaW50byBwLlxuICAgKiBJdCByZXR1cm5zIHRoZSBudW1iZXIgb2YgYnl0ZXMgcmVhZCBpbnRvIHAuXG4gICAqIFRoZSBieXRlcyBhcmUgdGFrZW4gZnJvbSBhdCBtb3N0IG9uZSBSZWFkIG9uIHRoZSB1bmRlcmx5aW5nIFJlYWRlcixcbiAgICogaGVuY2UgbiBtYXkgYmUgbGVzcyB0aGFuIGxlbihwKS5cbiAgICogVG8gcmVhZCBleGFjdGx5IGxlbihwKSBieXRlcywgdXNlIGlvLlJlYWRGdWxsKGIsIHApLlxuICAgKi9cbiAgYXN5bmMgcmVhZChwOiBVaW50OEFycmF5KTogUHJvbWlzZTxudW1iZXIgfCBudWxsPiB7XG4gICAgbGV0IHJyOiBudW1iZXIgfCBudWxsID0gcC5ieXRlTGVuZ3RoO1xuICAgIGlmIChwLmJ5dGVMZW5ndGggPT09IDApIHJldHVybiBycjtcblxuICAgIGlmICh0aGlzLiNyID09PSB0aGlzLiN3KSB7XG4gICAgICBpZiAocC5ieXRlTGVuZ3RoID49IHRoaXMuI2J1Zi5ieXRlTGVuZ3RoKSB7XG4gICAgICAgIC8vIExhcmdlIHJlYWQsIGVtcHR5IGJ1ZmZlci5cbiAgICAgICAgLy8gUmVhZCBkaXJlY3RseSBpbnRvIHAgdG8gYXZvaWQgY29weS5cbiAgICAgICAgY29uc3QgcnIgPSBhd2FpdCB0aGlzLiNyZC5yZWFkKHApO1xuICAgICAgICBjb25zdCBucmVhZCA9IHJyID8/IDA7XG4gICAgICAgIGFzc2VydChucmVhZCA+PSAwLCBcIm5lZ2F0aXZlIHJlYWRcIik7XG4gICAgICAgIC8vIGlmIChyci5ucmVhZCA+IDApIHtcbiAgICAgICAgLy8gICB0aGlzLmxhc3RCeXRlID0gcFtyci5ucmVhZCAtIDFdO1xuICAgICAgICAvLyAgIHRoaXMubGFzdENoYXJTaXplID0gLTE7XG4gICAgICAgIC8vIH1cbiAgICAgICAgcmV0dXJuIHJyO1xuICAgICAgfVxuXG4gICAgICAvLyBPbmUgcmVhZC5cbiAgICAgIC8vIERvIG5vdCB1c2UgdGhpcy5maWxsLCB3aGljaCB3aWxsIGxvb3AuXG4gICAgICB0aGlzLiNyID0gMDtcbiAgICAgIHRoaXMuI3cgPSAwO1xuICAgICAgcnIgPSBhd2FpdCB0aGlzLiNyZC5yZWFkKHRoaXMuI2J1Zik7XG4gICAgICBpZiAocnIgPT09IDAgfHwgcnIgPT09IG51bGwpIHJldHVybiBycjtcbiAgICAgIGFzc2VydChyciA+PSAwLCBcIm5lZ2F0aXZlIHJlYWRcIik7XG4gICAgICB0aGlzLiN3ICs9IHJyO1xuICAgIH1cblxuICAgIC8vIGNvcHkgYXMgbXVjaCBhcyB3ZSBjYW5cbiAgICBjb25zdCBjb3BpZWQgPSBjb3B5KHRoaXMuI2J1Zi5zdWJhcnJheSh0aGlzLiNyLCB0aGlzLiN3KSwgcCwgMCk7XG4gICAgdGhpcy4jciArPSBjb3BpZWQ7XG4gICAgLy8gdGhpcy5sYXN0Qnl0ZSA9IHRoaXMuYnVmW3RoaXMuciAtIDFdO1xuICAgIC8vIHRoaXMubGFzdENoYXJTaXplID0gLTE7XG4gICAgcmV0dXJuIGNvcGllZDtcbiAgfVxuXG4gIC8qKiByZWFkcyBleGFjdGx5IGBwLmxlbmd0aGAgYnl0ZXMgaW50byBgcGAuXG4gICAqXG4gICAqIElmIHN1Y2Nlc3NmdWwsIGBwYCBpcyByZXR1cm5lZC5cbiAgICpcbiAgICogSWYgdGhlIGVuZCBvZiB0aGUgdW5kZXJseWluZyBzdHJlYW0gaGFzIGJlZW4gcmVhY2hlZCwgYW5kIHRoZXJlIGFyZSBubyBtb3JlXG4gICAqIGJ5dGVzIGF2YWlsYWJsZSBpbiB0aGUgYnVmZmVyLCBgcmVhZEZ1bGwoKWAgcmV0dXJucyBgbnVsbGAgaW5zdGVhZC5cbiAgICpcbiAgICogQW4gZXJyb3IgaXMgdGhyb3duIGlmIHNvbWUgYnl0ZXMgY291bGQgYmUgcmVhZCwgYnV0IG5vdCBlbm91Z2ggdG8gZmlsbCBgcGBcbiAgICogZW50aXJlbHkgYmVmb3JlIHRoZSB1bmRlcmx5aW5nIHN0cmVhbSByZXBvcnRlZCBhbiBlcnJvciBvciBFT0YuIEFueSBlcnJvclxuICAgKiB0aHJvd24gd2lsbCBoYXZlIGEgYHBhcnRpYWxgIHByb3BlcnR5IHRoYXQgaW5kaWNhdGVzIHRoZSBzbGljZSBvZiB0aGVcbiAgICogYnVmZmVyIHRoYXQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGZpbGxlZCB3aXRoIGRhdGEuXG4gICAqXG4gICAqIFBvcnRlZCBmcm9tIGh0dHBzOi8vZ29sYW5nLm9yZy9wa2cvaW8vI1JlYWRGdWxsXG4gICAqL1xuICBhc3luYyByZWFkRnVsbChwOiBVaW50OEFycmF5KTogUHJvbWlzZTxVaW50OEFycmF5IHwgbnVsbD4ge1xuICAgIGxldCBieXRlc1JlYWQgPSAwO1xuICAgIHdoaWxlIChieXRlc1JlYWQgPCBwLmxlbmd0aCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcnIgPSBhd2FpdCB0aGlzLnJlYWQocC5zdWJhcnJheShieXRlc1JlYWQpKTtcbiAgICAgICAgaWYgKHJyID09PSBudWxsKSB7XG4gICAgICAgICAgaWYgKGJ5dGVzUmVhZCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXJ0aWFsUmVhZEVycm9yKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJ5dGVzUmVhZCArPSBycjtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgUGFydGlhbFJlYWRFcnJvcikge1xuICAgICAgICAgIGVyci5wYXJ0aWFsID0gcC5zdWJhcnJheSgwLCBieXRlc1JlYWQpO1xuICAgICAgICB9IGVsc2UgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgY29uc3QgZSA9IG5ldyBQYXJ0aWFsUmVhZEVycm9yKCk7XG4gICAgICAgICAgZS5wYXJ0aWFsID0gcC5zdWJhcnJheSgwLCBieXRlc1JlYWQpO1xuICAgICAgICAgIGUuc3RhY2sgPSBlcnIuc3RhY2s7XG4gICAgICAgICAgZS5tZXNzYWdlID0gZXJyLm1lc3NhZ2U7XG4gICAgICAgICAgZS5jYXVzZSA9IGVyci5jYXVzZTtcbiAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcDtcbiAgfVxuXG4gIC8qKiBSZXR1cm5zIHRoZSBuZXh0IGJ5dGUgWzAsIDI1NV0gb3IgYG51bGxgLiAqL1xuICBhc3luYyByZWFkQnl0ZSgpOiBQcm9taXNlPG51bWJlciB8IG51bGw+IHtcbiAgICB3aGlsZSAodGhpcy4jciA9PT0gdGhpcy4jdykge1xuICAgICAgaWYgKHRoaXMuI2VvZikgcmV0dXJuIG51bGw7XG4gICAgICBhd2FpdCB0aGlzLiNmaWxsKCk7IC8vIGJ1ZmZlciBpcyBlbXB0eS5cbiAgICB9XG4gICAgY29uc3QgYyA9IHRoaXMuI2J1Zlt0aGlzLiNyXTtcbiAgICB0aGlzLiNyKys7XG4gICAgLy8gdGhpcy5sYXN0Qnl0ZSA9IGM7XG4gICAgcmV0dXJuIGM7XG4gIH1cblxuICAvKiogcmVhZFN0cmluZygpIHJlYWRzIHVudGlsIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGRlbGltIGluIHRoZSBpbnB1dCxcbiAgICogcmV0dXJuaW5nIGEgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIGRhdGEgdXAgdG8gYW5kIGluY2x1ZGluZyB0aGUgZGVsaW1pdGVyLlxuICAgKiBJZiBSZWFkU3RyaW5nIGVuY291bnRlcnMgYW4gZXJyb3IgYmVmb3JlIGZpbmRpbmcgYSBkZWxpbWl0ZXIsXG4gICAqIGl0IHJldHVybnMgdGhlIGRhdGEgcmVhZCBiZWZvcmUgdGhlIGVycm9yIGFuZCB0aGUgZXJyb3IgaXRzZWxmXG4gICAqIChvZnRlbiBgbnVsbGApLlxuICAgKiBSZWFkU3RyaW5nIHJldHVybnMgZXJyICE9IG5pbCBpZiBhbmQgb25seSBpZiB0aGUgcmV0dXJuZWQgZGF0YSBkb2VzIG5vdCBlbmRcbiAgICogaW4gZGVsaW0uXG4gICAqIEZvciBzaW1wbGUgdXNlcywgYSBTY2FubmVyIG1heSBiZSBtb3JlIGNvbnZlbmllbnQuXG4gICAqL1xuICBhc3luYyByZWFkU3RyaW5nKGRlbGltOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgICBpZiAoZGVsaW0ubGVuZ3RoICE9PSAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEZWxpbWl0ZXIgc2hvdWxkIGJlIGEgc2luZ2xlIGNoYXJhY3RlclwiKTtcbiAgICB9XG4gICAgY29uc3QgYnVmZmVyID0gYXdhaXQgdGhpcy5yZWFkU2xpY2UoZGVsaW0uY2hhckNvZGVBdCgwKSk7XG4gICAgaWYgKGJ1ZmZlciA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShidWZmZXIpO1xuICB9XG5cbiAgLyoqIGByZWFkTGluZSgpYCBpcyBhIGxvdy1sZXZlbCBsaW5lLXJlYWRpbmcgcHJpbWl0aXZlLiBNb3N0IGNhbGxlcnMgc2hvdWxkXG4gICAqIHVzZSBgcmVhZFN0cmluZygnXFxuJylgIGluc3RlYWQgb3IgdXNlIGEgU2Nhbm5lci5cbiAgICpcbiAgICogYHJlYWRMaW5lKClgIHRyaWVzIHRvIHJldHVybiBhIHNpbmdsZSBsaW5lLCBub3QgaW5jbHVkaW5nIHRoZSBlbmQtb2YtbGluZVxuICAgKiBieXRlcy4gSWYgdGhlIGxpbmUgd2FzIHRvbyBsb25nIGZvciB0aGUgYnVmZmVyIHRoZW4gYG1vcmVgIGlzIHNldCBhbmQgdGhlXG4gICAqIGJlZ2lubmluZyBvZiB0aGUgbGluZSBpcyByZXR1cm5lZC4gVGhlIHJlc3Qgb2YgdGhlIGxpbmUgd2lsbCBiZSByZXR1cm5lZFxuICAgKiBmcm9tIGZ1dHVyZSBjYWxscy4gYG1vcmVgIHdpbGwgYmUgZmFsc2Ugd2hlbiByZXR1cm5pbmcgdGhlIGxhc3QgZnJhZ21lbnRcbiAgICogb2YgdGhlIGxpbmUuIFRoZSByZXR1cm5lZCBidWZmZXIgaXMgb25seSB2YWxpZCB1bnRpbCB0aGUgbmV4dCBjYWxsIHRvXG4gICAqIGByZWFkTGluZSgpYC5cbiAgICpcbiAgICogVGhlIHRleHQgcmV0dXJuZWQgZnJvbSBSZWFkTGluZSBkb2VzIG5vdCBpbmNsdWRlIHRoZSBsaW5lIGVuZCAoXCJcXHJcXG5cIiBvclxuICAgKiBcIlxcblwiKS5cbiAgICpcbiAgICogV2hlbiB0aGUgZW5kIG9mIHRoZSB1bmRlcmx5aW5nIHN0cmVhbSBpcyByZWFjaGVkLCB0aGUgZmluYWwgYnl0ZXMgaW4gdGhlXG4gICAqIHN0cmVhbSBhcmUgcmV0dXJuZWQuIE5vIGluZGljYXRpb24gb3IgZXJyb3IgaXMgZ2l2ZW4gaWYgdGhlIGlucHV0IGVuZHNcbiAgICogd2l0aG91dCBhIGZpbmFsIGxpbmUgZW5kLiBXaGVuIHRoZXJlIGFyZSBubyBtb3JlIHRyYWlsaW5nIGJ5dGVzIHRvIHJlYWQsXG4gICAqIGByZWFkTGluZSgpYCByZXR1cm5zIGBudWxsYC5cbiAgICpcbiAgICogQ2FsbGluZyBgdW5yZWFkQnl0ZSgpYCBhZnRlciBgcmVhZExpbmUoKWAgd2lsbCBhbHdheXMgdW5yZWFkIHRoZSBsYXN0IGJ5dGVcbiAgICogcmVhZCAocG9zc2libHkgYSBjaGFyYWN0ZXIgYmVsb25naW5nIHRvIHRoZSBsaW5lIGVuZCkgZXZlbiBpZiB0aGF0IGJ5dGUgaXNcbiAgICogbm90IHBhcnQgb2YgdGhlIGxpbmUgcmV0dXJuZWQgYnkgYHJlYWRMaW5lKClgLlxuICAgKi9cbiAgYXN5bmMgcmVhZExpbmUoKTogUHJvbWlzZTxSZWFkTGluZVJlc3VsdCB8IG51bGw+IHtcbiAgICBsZXQgbGluZTogVWludDhBcnJheSB8IG51bGwgPSBudWxsO1xuXG4gICAgdHJ5IHtcbiAgICAgIGxpbmUgPSBhd2FpdCB0aGlzLnJlYWRTbGljZShMRik7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBpZiAoZXJyIGluc3RhbmNlb2YgRGVuby5lcnJvcnMuQmFkUmVzb3VyY2UpIHtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuICAgICAgbGV0IHBhcnRpYWw7XG4gICAgICBpZiAoZXJyIGluc3RhbmNlb2YgUGFydGlhbFJlYWRFcnJvcikge1xuICAgICAgICBwYXJ0aWFsID0gZXJyLnBhcnRpYWw7XG4gICAgICAgIGFzc2VydChcbiAgICAgICAgICBwYXJ0aWFsIGluc3RhbmNlb2YgVWludDhBcnJheSxcbiAgICAgICAgICBcImJ1ZmlvOiBjYXVnaHQgZXJyb3IgZnJvbSBgcmVhZFNsaWNlKClgIHdpdGhvdXQgYHBhcnRpYWxgIHByb3BlcnR5XCIsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIC8vIERvbid0IHRocm93IGlmIGByZWFkU2xpY2UoKWAgZmFpbGVkIHdpdGggYEJ1ZmZlckZ1bGxFcnJvcmAsIGluc3RlYWQgd2VcbiAgICAgIC8vIGp1c3QgcmV0dXJuIHdoYXRldmVyIGlzIGF2YWlsYWJsZSBhbmQgc2V0IHRoZSBgbW9yZWAgZmxhZy5cbiAgICAgIGlmICghKGVyciBpbnN0YW5jZW9mIEJ1ZmZlckZ1bGxFcnJvcikpIHtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuXG4gICAgICBwYXJ0aWFsID0gZXJyLnBhcnRpYWw7XG5cbiAgICAgIC8vIEhhbmRsZSB0aGUgY2FzZSB3aGVyZSBcIlxcclxcblwiIHN0cmFkZGxlcyB0aGUgYnVmZmVyLlxuICAgICAgaWYgKFxuICAgICAgICAhdGhpcy4jZW9mICYmIHBhcnRpYWwgJiZcbiAgICAgICAgcGFydGlhbC5ieXRlTGVuZ3RoID4gMCAmJlxuICAgICAgICBwYXJ0aWFsW3BhcnRpYWwuYnl0ZUxlbmd0aCAtIDFdID09PSBDUlxuICAgICAgKSB7XG4gICAgICAgIC8vIFB1dCB0aGUgJ1xccicgYmFjayBvbiBidWYgYW5kIGRyb3AgaXQgZnJvbSBsaW5lLlxuICAgICAgICAvLyBMZXQgdGhlIG5leHQgY2FsbCB0byBSZWFkTGluZSBjaGVjayBmb3IgXCJcXHJcXG5cIi5cbiAgICAgICAgYXNzZXJ0KHRoaXMuI3IgPiAwLCBcImJ1ZmlvOiB0cmllZCB0byByZXdpbmQgcGFzdCBzdGFydCBvZiBidWZmZXJcIik7XG4gICAgICAgIHRoaXMuI3ItLTtcbiAgICAgICAgcGFydGlhbCA9IHBhcnRpYWwuc3ViYXJyYXkoMCwgcGFydGlhbC5ieXRlTGVuZ3RoIC0gMSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJ0aWFsKSB7XG4gICAgICAgIHJldHVybiB7IGxpbmU6IHBhcnRpYWwsIG1vcmU6ICF0aGlzLiNlb2YgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobGluZSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKGxpbmUuYnl0ZUxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHsgbGluZSwgbW9yZTogZmFsc2UgfTtcbiAgICB9XG5cbiAgICBpZiAobGluZVtsaW5lLmJ5dGVMZW5ndGggLSAxXSA9PSBMRikge1xuICAgICAgbGV0IGRyb3AgPSAxO1xuICAgICAgaWYgKGxpbmUuYnl0ZUxlbmd0aCA+IDEgJiYgbGluZVtsaW5lLmJ5dGVMZW5ndGggLSAyXSA9PT0gQ1IpIHtcbiAgICAgICAgZHJvcCA9IDI7XG4gICAgICB9XG4gICAgICBsaW5lID0gbGluZS5zdWJhcnJheSgwLCBsaW5lLmJ5dGVMZW5ndGggLSBkcm9wKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgbGluZSwgbW9yZTogZmFsc2UgfTtcbiAgfVxuXG4gIC8qKiBgcmVhZFNsaWNlKClgIHJlYWRzIHVudGlsIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGBkZWxpbWAgaW4gdGhlIGlucHV0LFxuICAgKiByZXR1cm5pbmcgYSBzbGljZSBwb2ludGluZyBhdCB0aGUgYnl0ZXMgaW4gdGhlIGJ1ZmZlci4gVGhlIGJ5dGVzIHN0b3BcbiAgICogYmVpbmcgdmFsaWQgYXQgdGhlIG5leHQgcmVhZC5cbiAgICpcbiAgICogSWYgYHJlYWRTbGljZSgpYCBlbmNvdW50ZXJzIGFuIGVycm9yIGJlZm9yZSBmaW5kaW5nIGEgZGVsaW1pdGVyLCBvciB0aGVcbiAgICogYnVmZmVyIGZpbGxzIHdpdGhvdXQgZmluZGluZyBhIGRlbGltaXRlciwgaXQgdGhyb3dzIGFuIGVycm9yIHdpdGggYVxuICAgKiBgcGFydGlhbGAgcHJvcGVydHkgdGhhdCBjb250YWlucyB0aGUgZW50aXJlIGJ1ZmZlci5cbiAgICpcbiAgICogSWYgYHJlYWRTbGljZSgpYCBlbmNvdW50ZXJzIHRoZSBlbmQgb2YgdGhlIHVuZGVybHlpbmcgc3RyZWFtIGFuZCB0aGVyZSBhcmVcbiAgICogYW55IGJ5dGVzIGxlZnQgaW4gdGhlIGJ1ZmZlciwgdGhlIHJlc3Qgb2YgdGhlIGJ1ZmZlciBpcyByZXR1cm5lZC4gSW4gb3RoZXJcbiAgICogd29yZHMsIEVPRiBpcyBhbHdheXMgdHJlYXRlZCBhcyBhIGRlbGltaXRlci4gT25jZSB0aGUgYnVmZmVyIGlzIGVtcHR5LFxuICAgKiBpdCByZXR1cm5zIGBudWxsYC5cbiAgICpcbiAgICogQmVjYXVzZSB0aGUgZGF0YSByZXR1cm5lZCBmcm9tIGByZWFkU2xpY2UoKWAgd2lsbCBiZSBvdmVyd3JpdHRlbiBieSB0aGVcbiAgICogbmV4dCBJL08gb3BlcmF0aW9uLCBtb3N0IGNsaWVudHMgc2hvdWxkIHVzZSBgcmVhZFN0cmluZygpYCBpbnN0ZWFkLlxuICAgKi9cbiAgYXN5bmMgcmVhZFNsaWNlKGRlbGltOiBudW1iZXIpOiBQcm9taXNlPFVpbnQ4QXJyYXkgfCBudWxsPiB7XG4gICAgbGV0IHMgPSAwOyAvLyBzZWFyY2ggc3RhcnQgaW5kZXhcbiAgICBsZXQgc2xpY2U6IFVpbnQ4QXJyYXkgfCB1bmRlZmluZWQ7XG5cbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgLy8gU2VhcmNoIGJ1ZmZlci5cbiAgICAgIGxldCBpID0gdGhpcy4jYnVmLnN1YmFycmF5KHRoaXMuI3IgKyBzLCB0aGlzLiN3KS5pbmRleE9mKGRlbGltKTtcbiAgICAgIGlmIChpID49IDApIHtcbiAgICAgICAgaSArPSBzO1xuICAgICAgICBzbGljZSA9IHRoaXMuI2J1Zi5zdWJhcnJheSh0aGlzLiNyLCB0aGlzLiNyICsgaSArIDEpO1xuICAgICAgICB0aGlzLiNyICs9IGkgKyAxO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgLy8gRU9GP1xuICAgICAgaWYgKHRoaXMuI2VvZikge1xuICAgICAgICBpZiAodGhpcy4jciA9PT0gdGhpcy4jdykge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHNsaWNlID0gdGhpcy4jYnVmLnN1YmFycmF5KHRoaXMuI3IsIHRoaXMuI3cpO1xuICAgICAgICB0aGlzLiNyID0gdGhpcy4jdztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIC8vIEJ1ZmZlciBmdWxsP1xuICAgICAgaWYgKHRoaXMuYnVmZmVyZWQoKSA+PSB0aGlzLiNidWYuYnl0ZUxlbmd0aCkge1xuICAgICAgICB0aGlzLiNyID0gdGhpcy4jdztcbiAgICAgICAgLy8gIzQ1MjEgVGhlIGludGVybmFsIGJ1ZmZlciBzaG91bGQgbm90IGJlIHJldXNlZCBhY3Jvc3MgcmVhZHMgYmVjYXVzZSBpdCBjYXVzZXMgY29ycnVwdGlvbiBvZiBkYXRhLlxuICAgICAgICBjb25zdCBvbGRidWYgPSB0aGlzLiNidWY7XG4gICAgICAgIGNvbnN0IG5ld2J1ZiA9IHRoaXMuI2J1Zi5zbGljZSgwKTtcbiAgICAgICAgdGhpcy4jYnVmID0gbmV3YnVmO1xuICAgICAgICB0aHJvdyBuZXcgQnVmZmVyRnVsbEVycm9yKG9sZGJ1Zik7XG4gICAgICB9XG5cbiAgICAgIHMgPSB0aGlzLiN3IC0gdGhpcy4jcjsgLy8gZG8gbm90IHJlc2NhbiBhcmVhIHdlIHNjYW5uZWQgYmVmb3JlXG5cbiAgICAgIC8vIEJ1ZmZlciBpcyBub3QgZnVsbC5cbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMuI2ZpbGwoKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgUGFydGlhbFJlYWRFcnJvcikge1xuICAgICAgICAgIGVyci5wYXJ0aWFsID0gc2xpY2U7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICBjb25zdCBlID0gbmV3IFBhcnRpYWxSZWFkRXJyb3IoKTtcbiAgICAgICAgICBlLnBhcnRpYWwgPSBzbGljZTtcbiAgICAgICAgICBlLnN0YWNrID0gZXJyLnN0YWNrO1xuICAgICAgICAgIGUubWVzc2FnZSA9IGVyci5tZXNzYWdlO1xuICAgICAgICAgIGUuY2F1c2UgPSBlcnIuY2F1c2U7XG4gICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgbGFzdCBieXRlLCBpZiBhbnkuXG4gICAgLy8gY29uc3QgaSA9IHNsaWNlLmJ5dGVMZW5ndGggLSAxO1xuICAgIC8vIGlmIChpID49IDApIHtcbiAgICAvLyAgIHRoaXMubGFzdEJ5dGUgPSBzbGljZVtpXTtcbiAgICAvLyAgIHRoaXMubGFzdENoYXJTaXplID0gLTFcbiAgICAvLyB9XG5cbiAgICByZXR1cm4gc2xpY2U7XG4gIH1cblxuICAvKiogYHBlZWsoKWAgcmV0dXJucyB0aGUgbmV4dCBgbmAgYnl0ZXMgd2l0aG91dCBhZHZhbmNpbmcgdGhlIHJlYWRlci4gVGhlXG4gICAqIGJ5dGVzIHN0b3AgYmVpbmcgdmFsaWQgYXQgdGhlIG5leHQgcmVhZCBjYWxsLlxuICAgKlxuICAgKiBXaGVuIHRoZSBlbmQgb2YgdGhlIHVuZGVybHlpbmcgc3RyZWFtIGlzIHJlYWNoZWQsIGJ1dCB0aGVyZSBhcmUgdW5yZWFkXG4gICAqIGJ5dGVzIGxlZnQgaW4gdGhlIGJ1ZmZlciwgdGhvc2UgYnl0ZXMgYXJlIHJldHVybmVkLiBJZiB0aGVyZSBhcmUgbm8gYnl0ZXNcbiAgICogbGVmdCBpbiB0aGUgYnVmZmVyLCBpdCByZXR1cm5zIGBudWxsYC5cbiAgICpcbiAgICogSWYgYW4gZXJyb3IgaXMgZW5jb3VudGVyZWQgYmVmb3JlIGBuYCBieXRlcyBhcmUgYXZhaWxhYmxlLCBgcGVlaygpYCB0aHJvd3NcbiAgICogYW4gZXJyb3Igd2l0aCB0aGUgYHBhcnRpYWxgIHByb3BlcnR5IHNldCB0byBhIHNsaWNlIG9mIHRoZSBidWZmZXIgdGhhdFxuICAgKiBjb250YWlucyB0aGUgYnl0ZXMgdGhhdCB3ZXJlIGF2YWlsYWJsZSBiZWZvcmUgdGhlIGVycm9yIG9jY3VycmVkLlxuICAgKi9cbiAgYXN5bmMgcGVlayhuOiBudW1iZXIpOiBQcm9taXNlPFVpbnQ4QXJyYXkgfCBudWxsPiB7XG4gICAgaWYgKG4gPCAwKSB7XG4gICAgICB0aHJvdyBFcnJvcihcIm5lZ2F0aXZlIGNvdW50XCIpO1xuICAgIH1cblxuICAgIGxldCBhdmFpbCA9IHRoaXMuI3cgLSB0aGlzLiNyO1xuICAgIHdoaWxlIChhdmFpbCA8IG4gJiYgYXZhaWwgPCB0aGlzLiNidWYuYnl0ZUxlbmd0aCAmJiAhdGhpcy4jZW9mKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLiNmaWxsKCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIFBhcnRpYWxSZWFkRXJyb3IpIHtcbiAgICAgICAgICBlcnIucGFydGlhbCA9IHRoaXMuI2J1Zi5zdWJhcnJheSh0aGlzLiNyLCB0aGlzLiN3KTtcbiAgICAgICAgfSBlbHNlIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgIGNvbnN0IGUgPSBuZXcgUGFydGlhbFJlYWRFcnJvcigpO1xuICAgICAgICAgIGUucGFydGlhbCA9IHRoaXMuI2J1Zi5zdWJhcnJheSh0aGlzLiNyLCB0aGlzLiN3KTtcbiAgICAgICAgICBlLnN0YWNrID0gZXJyLnN0YWNrO1xuICAgICAgICAgIGUubWVzc2FnZSA9IGVyci5tZXNzYWdlO1xuICAgICAgICAgIGUuY2F1c2UgPSBlcnIuY2F1c2U7XG4gICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICAgIGF2YWlsID0gdGhpcy4jdyAtIHRoaXMuI3I7XG4gICAgfVxuXG4gICAgaWYgKGF2YWlsID09PSAwICYmIHRoaXMuI2VvZikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIGlmIChhdmFpbCA8IG4gJiYgdGhpcy4jZW9mKSB7XG4gICAgICByZXR1cm4gdGhpcy4jYnVmLnN1YmFycmF5KHRoaXMuI3IsIHRoaXMuI3IgKyBhdmFpbCk7XG4gICAgfSBlbHNlIGlmIChhdmFpbCA8IG4pIHtcbiAgICAgIHRocm93IG5ldyBCdWZmZXJGdWxsRXJyb3IodGhpcy4jYnVmLnN1YmFycmF5KHRoaXMuI3IsIHRoaXMuI3cpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy4jYnVmLnN1YmFycmF5KHRoaXMuI3IsIHRoaXMuI3IgKyBuKTtcbiAgfVxufVxuXG5hYnN0cmFjdCBjbGFzcyBBYnN0cmFjdEJ1ZkJhc2Uge1xuICBidWY6IFVpbnQ4QXJyYXk7XG4gIHVzZWRCdWZmZXJCeXRlcyA9IDA7XG4gIGVycjogRXJyb3IgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihidWY6IFVpbnQ4QXJyYXkpIHtcbiAgICB0aGlzLmJ1ZiA9IGJ1ZjtcbiAgfVxuXG4gIC8qKiBTaXplIHJldHVybnMgdGhlIHNpemUgb2YgdGhlIHVuZGVybHlpbmcgYnVmZmVyIGluIGJ5dGVzLiAqL1xuICBzaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuYnVmLmJ5dGVMZW5ndGg7XG4gIH1cblxuICAvKiogUmV0dXJucyBob3cgbWFueSBieXRlcyBhcmUgdW51c2VkIGluIHRoZSBidWZmZXIuICovXG4gIGF2YWlsYWJsZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmJ1Zi5ieXRlTGVuZ3RoIC0gdGhpcy51c2VkQnVmZmVyQnl0ZXM7XG4gIH1cblxuICAvKiogYnVmZmVyZWQgcmV0dXJucyB0aGUgbnVtYmVyIG9mIGJ5dGVzIHRoYXQgaGF2ZSBiZWVuIHdyaXR0ZW4gaW50byB0aGVcbiAgICogY3VycmVudCBidWZmZXIuXG4gICAqL1xuICBidWZmZXJlZCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnVzZWRCdWZmZXJCeXRlcztcbiAgfVxufVxuXG4vKiogQnVmV3JpdGVyIGltcGxlbWVudHMgYnVmZmVyaW5nIGZvciBhbiBkZW5vLldyaXRlciBvYmplY3QuXG4gKiBJZiBhbiBlcnJvciBvY2N1cnMgd3JpdGluZyB0byBhIFdyaXRlciwgbm8gbW9yZSBkYXRhIHdpbGwgYmVcbiAqIGFjY2VwdGVkIGFuZCBhbGwgc3Vic2VxdWVudCB3cml0ZXMsIGFuZCBmbHVzaCgpLCB3aWxsIHJldHVybiB0aGUgZXJyb3IuXG4gKiBBZnRlciBhbGwgZGF0YSBoYXMgYmVlbiB3cml0dGVuLCB0aGUgY2xpZW50IHNob3VsZCBjYWxsIHRoZVxuICogZmx1c2goKSBtZXRob2QgdG8gZ3VhcmFudGVlIGFsbCBkYXRhIGhhcyBiZWVuIGZvcndhcmRlZCB0b1xuICogdGhlIHVuZGVybHlpbmcgZGVuby5Xcml0ZXIuXG4gKi9cbmV4cG9ydCBjbGFzcyBCdWZXcml0ZXIgZXh0ZW5kcyBBYnN0cmFjdEJ1ZkJhc2UgaW1wbGVtZW50cyBXcml0ZXIge1xuICAjd3JpdGVyOiBXcml0ZXI7XG5cbiAgLyoqIHJldHVybiBuZXcgQnVmV3JpdGVyIHVubGVzcyB3cml0ZXIgaXMgQnVmV3JpdGVyICovXG4gIHN0YXRpYyBjcmVhdGUod3JpdGVyOiBXcml0ZXIsIHNpemU6IG51bWJlciA9IERFRkFVTFRfQlVGX1NJWkUpOiBCdWZXcml0ZXIge1xuICAgIHJldHVybiB3cml0ZXIgaW5zdGFuY2VvZiBCdWZXcml0ZXIgPyB3cml0ZXIgOiBuZXcgQnVmV3JpdGVyKHdyaXRlciwgc2l6ZSk7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcih3cml0ZXI6IFdyaXRlciwgc2l6ZTogbnVtYmVyID0gREVGQVVMVF9CVUZfU0laRSkge1xuICAgIHN1cGVyKG5ldyBVaW50OEFycmF5KHNpemUgPD0gMCA/IERFRkFVTFRfQlVGX1NJWkUgOiBzaXplKSk7XG4gICAgdGhpcy4jd3JpdGVyID0gd3JpdGVyO1xuICB9XG5cbiAgLyoqIERpc2NhcmRzIGFueSB1bmZsdXNoZWQgYnVmZmVyZWQgZGF0YSwgY2xlYXJzIGFueSBlcnJvciwgYW5kXG4gICAqIHJlc2V0cyBidWZmZXIgdG8gd3JpdGUgaXRzIG91dHB1dCB0byB3LlxuICAgKi9cbiAgcmVzZXQodzogV3JpdGVyKTogdm9pZCB7XG4gICAgdGhpcy5lcnIgPSBudWxsO1xuICAgIHRoaXMudXNlZEJ1ZmZlckJ5dGVzID0gMDtcbiAgICB0aGlzLiN3cml0ZXIgPSB3O1xuICB9XG5cbiAgLyoqIEZsdXNoIHdyaXRlcyBhbnkgYnVmZmVyZWQgZGF0YSB0byB0aGUgdW5kZXJseWluZyBpby5Xcml0ZXIuICovXG4gIGFzeW5jIGZsdXNoKCkge1xuICAgIGlmICh0aGlzLmVyciAhPT0gbnVsbCkgdGhyb3cgdGhpcy5lcnI7XG4gICAgaWYgKHRoaXMudXNlZEJ1ZmZlckJ5dGVzID09PSAwKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcCA9IHRoaXMuYnVmLnN1YmFycmF5KDAsIHRoaXMudXNlZEJ1ZmZlckJ5dGVzKTtcbiAgICAgIGxldCBud3JpdHRlbiA9IDA7XG4gICAgICB3aGlsZSAobndyaXR0ZW4gPCBwLmxlbmd0aCkge1xuICAgICAgICBud3JpdHRlbiArPSBhd2FpdCB0aGlzLiN3cml0ZXIud3JpdGUocC5zdWJhcnJheShud3JpdHRlbikpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgdGhpcy5lcnIgPSBlO1xuICAgICAgfVxuICAgICAgdGhyb3cgZTtcbiAgICB9XG5cbiAgICB0aGlzLmJ1ZiA9IG5ldyBVaW50OEFycmF5KHRoaXMuYnVmLmxlbmd0aCk7XG4gICAgdGhpcy51c2VkQnVmZmVyQnl0ZXMgPSAwO1xuICB9XG5cbiAgLyoqIFdyaXRlcyB0aGUgY29udGVudHMgb2YgYGRhdGFgIGludG8gdGhlIGJ1ZmZlci4gIElmIHRoZSBjb250ZW50cyB3b24ndCBmdWxseVxuICAgKiBmaXQgaW50byB0aGUgYnVmZmVyLCB0aG9zZSBieXRlcyB0aGF0IGNhbiBhcmUgY29waWVkIGludG8gdGhlIGJ1ZmZlciwgdGhlXG4gICAqIGJ1ZmZlciBpcyB0aGUgZmx1c2hlZCB0byB0aGUgd3JpdGVyIGFuZCB0aGUgcmVtYWluaW5nIGJ5dGVzIGFyZSBjb3BpZWQgaW50b1xuICAgKiB0aGUgbm93IGVtcHR5IGJ1ZmZlci5cbiAgICpcbiAgICogQHJldHVybiB0aGUgbnVtYmVyIG9mIGJ5dGVzIHdyaXR0ZW4gdG8gdGhlIGJ1ZmZlci5cbiAgICovXG4gIGFzeW5jIHdyaXRlKGRhdGE6IFVpbnQ4QXJyYXkpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIGlmICh0aGlzLmVyciAhPT0gbnVsbCkgdGhyb3cgdGhpcy5lcnI7XG4gICAgaWYgKGRhdGEubGVuZ3RoID09PSAwKSByZXR1cm4gMDtcblxuICAgIGxldCB0b3RhbEJ5dGVzV3JpdHRlbiA9IDA7XG4gICAgbGV0IG51bUJ5dGVzV3JpdHRlbiA9IDA7XG4gICAgd2hpbGUgKGRhdGEuYnl0ZUxlbmd0aCA+IHRoaXMuYXZhaWxhYmxlKCkpIHtcbiAgICAgIGlmICh0aGlzLmJ1ZmZlcmVkKCkgPT09IDApIHtcbiAgICAgICAgLy8gTGFyZ2Ugd3JpdGUsIGVtcHR5IGJ1ZmZlci5cbiAgICAgICAgLy8gV3JpdGUgZGlyZWN0bHkgZnJvbSBkYXRhIHRvIGF2b2lkIGNvcHkuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbnVtQnl0ZXNXcml0dGVuID0gYXdhaXQgdGhpcy4jd3JpdGVyLndyaXRlKGRhdGEpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgdGhpcy5lcnIgPSBlO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBudW1CeXRlc1dyaXR0ZW4gPSBjb3B5KGRhdGEsIHRoaXMuYnVmLCB0aGlzLnVzZWRCdWZmZXJCeXRlcyk7XG4gICAgICAgIHRoaXMudXNlZEJ1ZmZlckJ5dGVzICs9IG51bUJ5dGVzV3JpdHRlbjtcbiAgICAgICAgYXdhaXQgdGhpcy5mbHVzaCgpO1xuICAgICAgfVxuICAgICAgdG90YWxCeXRlc1dyaXR0ZW4gKz0gbnVtQnl0ZXNXcml0dGVuO1xuICAgICAgZGF0YSA9IGRhdGEuc3ViYXJyYXkobnVtQnl0ZXNXcml0dGVuKTtcbiAgICB9XG5cbiAgICBudW1CeXRlc1dyaXR0ZW4gPSBjb3B5KGRhdGEsIHRoaXMuYnVmLCB0aGlzLnVzZWRCdWZmZXJCeXRlcyk7XG4gICAgdGhpcy51c2VkQnVmZmVyQnl0ZXMgKz0gbnVtQnl0ZXNXcml0dGVuO1xuICAgIHRvdGFsQnl0ZXNXcml0dGVuICs9IG51bUJ5dGVzV3JpdHRlbjtcbiAgICByZXR1cm4gdG90YWxCeXRlc1dyaXR0ZW47XG4gIH1cbn1cblxuLyoqIEJ1ZldyaXRlclN5bmMgaW1wbGVtZW50cyBidWZmZXJpbmcgZm9yIGEgZGVuby5Xcml0ZXJTeW5jIG9iamVjdC5cbiAqIElmIGFuIGVycm9yIG9jY3VycyB3cml0aW5nIHRvIGEgV3JpdGVyU3luYywgbm8gbW9yZSBkYXRhIHdpbGwgYmVcbiAqIGFjY2VwdGVkIGFuZCBhbGwgc3Vic2VxdWVudCB3cml0ZXMsIGFuZCBmbHVzaCgpLCB3aWxsIHJldHVybiB0aGUgZXJyb3IuXG4gKiBBZnRlciBhbGwgZGF0YSBoYXMgYmVlbiB3cml0dGVuLCB0aGUgY2xpZW50IHNob3VsZCBjYWxsIHRoZVxuICogZmx1c2goKSBtZXRob2QgdG8gZ3VhcmFudGVlIGFsbCBkYXRhIGhhcyBiZWVuIGZvcndhcmRlZCB0b1xuICogdGhlIHVuZGVybHlpbmcgZGVuby5Xcml0ZXJTeW5jLlxuICovXG5leHBvcnQgY2xhc3MgQnVmV3JpdGVyU3luYyBleHRlbmRzIEFic3RyYWN0QnVmQmFzZSBpbXBsZW1lbnRzIFdyaXRlclN5bmMge1xuICAjd3JpdGVyOiBXcml0ZXJTeW5jO1xuXG4gIC8qKiByZXR1cm4gbmV3IEJ1ZldyaXRlclN5bmMgdW5sZXNzIHdyaXRlciBpcyBCdWZXcml0ZXJTeW5jICovXG4gIHN0YXRpYyBjcmVhdGUoXG4gICAgd3JpdGVyOiBXcml0ZXJTeW5jLFxuICAgIHNpemU6IG51bWJlciA9IERFRkFVTFRfQlVGX1NJWkUsXG4gICk6IEJ1ZldyaXRlclN5bmMge1xuICAgIHJldHVybiB3cml0ZXIgaW5zdGFuY2VvZiBCdWZXcml0ZXJTeW5jXG4gICAgICA/IHdyaXRlclxuICAgICAgOiBuZXcgQnVmV3JpdGVyU3luYyh3cml0ZXIsIHNpemUpO1xuICB9XG5cbiAgY29uc3RydWN0b3Iod3JpdGVyOiBXcml0ZXJTeW5jLCBzaXplOiBudW1iZXIgPSBERUZBVUxUX0JVRl9TSVpFKSB7XG4gICAgc3VwZXIobmV3IFVpbnQ4QXJyYXkoc2l6ZSA8PSAwID8gREVGQVVMVF9CVUZfU0laRSA6IHNpemUpKTtcbiAgICB0aGlzLiN3cml0ZXIgPSB3cml0ZXI7XG4gIH1cblxuICAvKiogRGlzY2FyZHMgYW55IHVuZmx1c2hlZCBidWZmZXJlZCBkYXRhLCBjbGVhcnMgYW55IGVycm9yLCBhbmRcbiAgICogcmVzZXRzIGJ1ZmZlciB0byB3cml0ZSBpdHMgb3V0cHV0IHRvIHcuXG4gICAqL1xuICByZXNldCh3OiBXcml0ZXJTeW5jKTogdm9pZCB7XG4gICAgdGhpcy5lcnIgPSBudWxsO1xuICAgIHRoaXMudXNlZEJ1ZmZlckJ5dGVzID0gMDtcbiAgICB0aGlzLiN3cml0ZXIgPSB3O1xuICB9XG5cbiAgLyoqIEZsdXNoIHdyaXRlcyBhbnkgYnVmZmVyZWQgZGF0YSB0byB0aGUgdW5kZXJseWluZyBpby5Xcml0ZXJTeW5jLiAqL1xuICBmbHVzaCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5lcnIgIT09IG51bGwpIHRocm93IHRoaXMuZXJyO1xuICAgIGlmICh0aGlzLnVzZWRCdWZmZXJCeXRlcyA9PT0gMCkgcmV0dXJuO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHAgPSB0aGlzLmJ1Zi5zdWJhcnJheSgwLCB0aGlzLnVzZWRCdWZmZXJCeXRlcyk7XG4gICAgICBsZXQgbndyaXR0ZW4gPSAwO1xuICAgICAgd2hpbGUgKG53cml0dGVuIDwgcC5sZW5ndGgpIHtcbiAgICAgICAgbndyaXR0ZW4gKz0gdGhpcy4jd3JpdGVyLndyaXRlU3luYyhwLnN1YmFycmF5KG53cml0dGVuKSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKGUgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICB0aGlzLmVyciA9IGU7XG4gICAgICB9XG4gICAgICB0aHJvdyBlO1xuICAgIH1cblxuICAgIHRoaXMuYnVmID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5idWYubGVuZ3RoKTtcbiAgICB0aGlzLnVzZWRCdWZmZXJCeXRlcyA9IDA7XG4gIH1cblxuICAvKiogV3JpdGVzIHRoZSBjb250ZW50cyBvZiBgZGF0YWAgaW50byB0aGUgYnVmZmVyLiAgSWYgdGhlIGNvbnRlbnRzIHdvbid0IGZ1bGx5XG4gICAqIGZpdCBpbnRvIHRoZSBidWZmZXIsIHRob3NlIGJ5dGVzIHRoYXQgY2FuIGFyZSBjb3BpZWQgaW50byB0aGUgYnVmZmVyLCB0aGVcbiAgICogYnVmZmVyIGlzIHRoZSBmbHVzaGVkIHRvIHRoZSB3cml0ZXIgYW5kIHRoZSByZW1haW5pbmcgYnl0ZXMgYXJlIGNvcGllZCBpbnRvXG4gICAqIHRoZSBub3cgZW1wdHkgYnVmZmVyLlxuICAgKlxuICAgKiBAcmV0dXJuIHRoZSBudW1iZXIgb2YgYnl0ZXMgd3JpdHRlbiB0byB0aGUgYnVmZmVyLlxuICAgKi9cbiAgd3JpdGVTeW5jKGRhdGE6IFVpbnQ4QXJyYXkpOiBudW1iZXIge1xuICAgIGlmICh0aGlzLmVyciAhPT0gbnVsbCkgdGhyb3cgdGhpcy5lcnI7XG4gICAgaWYgKGRhdGEubGVuZ3RoID09PSAwKSByZXR1cm4gMDtcblxuICAgIGxldCB0b3RhbEJ5dGVzV3JpdHRlbiA9IDA7XG4gICAgbGV0IG51bUJ5dGVzV3JpdHRlbiA9IDA7XG4gICAgd2hpbGUgKGRhdGEuYnl0ZUxlbmd0aCA+IHRoaXMuYXZhaWxhYmxlKCkpIHtcbiAgICAgIGlmICh0aGlzLmJ1ZmZlcmVkKCkgPT09IDApIHtcbiAgICAgICAgLy8gTGFyZ2Ugd3JpdGUsIGVtcHR5IGJ1ZmZlci5cbiAgICAgICAgLy8gV3JpdGUgZGlyZWN0bHkgZnJvbSBkYXRhIHRvIGF2b2lkIGNvcHkuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbnVtQnl0ZXNXcml0dGVuID0gdGhpcy4jd3JpdGVyLndyaXRlU3luYyhkYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyID0gZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbnVtQnl0ZXNXcml0dGVuID0gY29weShkYXRhLCB0aGlzLmJ1ZiwgdGhpcy51c2VkQnVmZmVyQnl0ZXMpO1xuICAgICAgICB0aGlzLnVzZWRCdWZmZXJCeXRlcyArPSBudW1CeXRlc1dyaXR0ZW47XG4gICAgICAgIHRoaXMuZmx1c2goKTtcbiAgICAgIH1cbiAgICAgIHRvdGFsQnl0ZXNXcml0dGVuICs9IG51bUJ5dGVzV3JpdHRlbjtcbiAgICAgIGRhdGEgPSBkYXRhLnN1YmFycmF5KG51bUJ5dGVzV3JpdHRlbik7XG4gICAgfVxuXG4gICAgbnVtQnl0ZXNXcml0dGVuID0gY29weShkYXRhLCB0aGlzLmJ1ZiwgdGhpcy51c2VkQnVmZmVyQnl0ZXMpO1xuICAgIHRoaXMudXNlZEJ1ZmZlckJ5dGVzICs9IG51bUJ5dGVzV3JpdHRlbjtcbiAgICB0b3RhbEJ5dGVzV3JpdHRlbiArPSBudW1CeXRlc1dyaXR0ZW47XG4gICAgcmV0dXJuIHRvdGFsQnl0ZXNXcml0dGVuO1xuICB9XG59XG5cbi8qKiBHZW5lcmF0ZSBsb25nZXN0IHByb3BlciBwcmVmaXggd2hpY2ggaXMgYWxzbyBzdWZmaXggYXJyYXkuICovXG5mdW5jdGlvbiBjcmVhdGVMUFMocGF0OiBVaW50OEFycmF5KTogVWludDhBcnJheSB7XG4gIGNvbnN0IGxwcyA9IG5ldyBVaW50OEFycmF5KHBhdC5sZW5ndGgpO1xuICBscHNbMF0gPSAwO1xuICBsZXQgcHJlZml4RW5kID0gMDtcbiAgbGV0IGkgPSAxO1xuICB3aGlsZSAoaSA8IGxwcy5sZW5ndGgpIHtcbiAgICBpZiAocGF0W2ldID09IHBhdFtwcmVmaXhFbmRdKSB7XG4gICAgICBwcmVmaXhFbmQrKztcbiAgICAgIGxwc1tpXSA9IHByZWZpeEVuZDtcbiAgICAgIGkrKztcbiAgICB9IGVsc2UgaWYgKHByZWZpeEVuZCA9PT0gMCkge1xuICAgICAgbHBzW2ldID0gMDtcbiAgICAgIGkrKztcbiAgICB9IGVsc2Uge1xuICAgICAgcHJlZml4RW5kID0gbHBzW3ByZWZpeEVuZCAtIDFdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbHBzO1xufVxuXG4vKiogUmVhZCBkZWxpbWl0ZWQgYnl0ZXMgZnJvbSBhIFJlYWRlci4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiogcmVhZERlbGltKFxuICByZWFkZXI6IFJlYWRlcixcbiAgZGVsaW06IFVpbnQ4QXJyYXksXG4pOiBBc3luY0l0ZXJhYmxlSXRlcmF0b3I8VWludDhBcnJheT4ge1xuICAvLyBBdm9pZCB1bmljb2RlIHByb2JsZW1zXG4gIGNvbnN0IGRlbGltTGVuID0gZGVsaW0ubGVuZ3RoO1xuICBjb25zdCBkZWxpbUxQUyA9IGNyZWF0ZUxQUyhkZWxpbSk7XG4gIGNvbnN0IGNodW5rcyA9IG5ldyBCeXRlc0xpc3QoKTtcbiAgY29uc3QgYnVmU2l6ZSA9IE1hdGgubWF4KDEwMjQsIGRlbGltTGVuICsgMSk7XG5cbiAgLy8gTW9kaWZpZWQgS01QXG4gIGxldCBpbnNwZWN0SW5kZXggPSAwO1xuICBsZXQgbWF0Y2hJbmRleCA9IDA7XG4gIHdoaWxlICh0cnVlKSB7XG4gICAgY29uc3QgaW5zcGVjdEFyciA9IG5ldyBVaW50OEFycmF5KGJ1ZlNpemUpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlYWRlci5yZWFkKGluc3BlY3RBcnIpO1xuICAgIGlmIChyZXN1bHQgPT09IG51bGwpIHtcbiAgICAgIC8vIFlpZWxkIGxhc3QgY2h1bmsuXG4gICAgICB5aWVsZCBjaHVua3MuY29uY2F0KCk7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmIChyZXN1bHQgPCAwKSB7XG4gICAgICAvLyBEaXNjYXJkIGFsbCByZW1haW5pbmcgYW5kIHNpbGVudGx5IGZhaWwuXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNodW5rcy5hZGQoaW5zcGVjdEFyciwgMCwgcmVzdWx0KTtcbiAgICBsZXQgbG9jYWxJbmRleCA9IDA7XG4gICAgd2hpbGUgKGluc3BlY3RJbmRleCA8IGNodW5rcy5zaXplKCkpIHtcbiAgICAgIGlmIChpbnNwZWN0QXJyW2xvY2FsSW5kZXhdID09PSBkZWxpbVttYXRjaEluZGV4XSkge1xuICAgICAgICBpbnNwZWN0SW5kZXgrKztcbiAgICAgICAgbG9jYWxJbmRleCsrO1xuICAgICAgICBtYXRjaEluZGV4Kys7XG4gICAgICAgIGlmIChtYXRjaEluZGV4ID09PSBkZWxpbUxlbikge1xuICAgICAgICAgIC8vIEZ1bGwgbWF0Y2hcbiAgICAgICAgICBjb25zdCBtYXRjaEVuZCA9IGluc3BlY3RJbmRleCAtIGRlbGltTGVuO1xuICAgICAgICAgIGNvbnN0IHJlYWR5Qnl0ZXMgPSBjaHVua3Muc2xpY2UoMCwgbWF0Y2hFbmQpO1xuICAgICAgICAgIHlpZWxkIHJlYWR5Qnl0ZXM7XG4gICAgICAgICAgLy8gUmVzZXQgbWF0Y2gsIGRpZmZlcmVudCBmcm9tIEtNUC5cbiAgICAgICAgICBjaHVua3Muc2hpZnQoaW5zcGVjdEluZGV4KTtcbiAgICAgICAgICBpbnNwZWN0SW5kZXggPSAwO1xuICAgICAgICAgIG1hdGNoSW5kZXggPSAwO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobWF0Y2hJbmRleCA9PT0gMCkge1xuICAgICAgICAgIGluc3BlY3RJbmRleCsrO1xuICAgICAgICAgIGxvY2FsSW5kZXgrKztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtYXRjaEluZGV4ID0gZGVsaW1MUFNbbWF0Y2hJbmRleCAtIDFdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKiBSZWFkIGRlbGltaXRlZCBzdHJpbmdzIGZyb20gYSBSZWFkZXIuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24qIHJlYWRTdHJpbmdEZWxpbShcbiAgcmVhZGVyOiBSZWFkZXIsXG4gIGRlbGltOiBzdHJpbmcsXG4gIGRlY29kZXJPcHRzPzoge1xuICAgIGVuY29kaW5nPzogc3RyaW5nO1xuICAgIGZhdGFsPzogYm9vbGVhbjtcbiAgICBpZ25vcmVCT00/OiBib29sZWFuO1xuICB9LFxuKTogQXN5bmNJdGVyYWJsZUl0ZXJhdG9yPHN0cmluZz4ge1xuICBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4gIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoZGVjb2Rlck9wdHM/LmVuY29kaW5nLCBkZWNvZGVyT3B0cyk7XG4gIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgcmVhZERlbGltKHJlYWRlciwgZW5jb2Rlci5lbmNvZGUoZGVsaW0pKSkge1xuICAgIHlpZWxkIGRlY29kZXIuZGVjb2RlKGNodW5rKTtcbiAgfVxufVxuXG4vKiogUmVhZCBzdHJpbmdzIGxpbmUtYnktbGluZSBmcm9tIGEgUmVhZGVyLiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uKiByZWFkTGluZXMoXG4gIHJlYWRlcjogUmVhZGVyLFxuICBkZWNvZGVyT3B0cz86IHtcbiAgICBlbmNvZGluZz86IHN0cmluZztcbiAgICBmYXRhbD86IGJvb2xlYW47XG4gICAgaWdub3JlQk9NPzogYm9vbGVhbjtcbiAgfSxcbik6IEFzeW5jSXRlcmFibGVJdGVyYXRvcjxzdHJpbmc+IHtcbiAgY29uc3QgYnVmUmVhZGVyID0gbmV3IEJ1ZlJlYWRlcihyZWFkZXIpO1xuICBsZXQgY2h1bmtzOiBVaW50OEFycmF5W10gPSBbXTtcbiAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcihkZWNvZGVyT3B0cz8uZW5jb2RpbmcsIGRlY29kZXJPcHRzKTtcbiAgd2hpbGUgKHRydWUpIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBidWZSZWFkZXIucmVhZExpbmUoKTtcbiAgICBpZiAoIXJlcykge1xuICAgICAgaWYgKGNodW5rcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHlpZWxkIGRlY29kZXIuZGVjb2RlKGNvbmNhdCguLi5jaHVua3MpKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjaHVua3MucHVzaChyZXMubGluZSk7XG4gICAgaWYgKCFyZXMubW9yZSkge1xuICAgICAgeWllbGQgZGVjb2Rlci5kZWNvZGUoY29uY2F0KC4uLmNodW5rcykpO1xuICAgICAgY2h1bmtzID0gW107XG4gICAgfVxuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAxOC0yMDIyIHRoZSBEZW5vIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuIE1JVCBsaWNlbnNlLlxuXG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tIFwiLi4vaW8vYnVmZmVyLnRzXCI7XG5cbmNvbnN0IERFRkFVTFRfQ0hVTktfU0laRSA9IDE2XzY0MDtcbmNvbnN0IERFRkFVTFRfQlVGRkVSX1NJWkUgPSAzMiAqIDEwMjQ7XG5cbmZ1bmN0aW9uIGlzQ2xvc2VyKHZhbHVlOiB1bmtub3duKTogdmFsdWUgaXMgRGVuby5DbG9zZXIge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlICE9IG51bGwgJiYgXCJjbG9zZVwiIGluIHZhbHVlICYmXG4gICAgLy8gZGVuby1saW50LWlnbm9yZSBuby1leHBsaWNpdC1hbnlcbiAgICB0eXBlb2YgKHZhbHVlIGFzIFJlY29yZDxzdHJpbmcsIGFueT4pW1wiY2xvc2VcIl0gPT09IFwiZnVuY3Rpb25cIjtcbn1cblxuLyoqIENyZWF0ZSBhIGBEZW5vLlJlYWRlcmAgZnJvbSBhbiBpdGVyYWJsZSBvZiBgVWludDhBcnJheWBzLlxuICpcbiAqIGBgYHRzXG4gKiAgICAgIGltcG9ydCB7IHJlYWRlckZyb21JdGVyYWJsZSwgY29weSB9IGZyb20gXCIuL2NvbnZlcnNpb24udHNcIjtcbiAqXG4gKiAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCBEZW5vLm9wZW4oXCJtZXRyaWNzLnR4dFwiLCB7IHdyaXRlOiB0cnVlIH0pO1xuICogICAgICBjb25zdCByZWFkZXIgPSByZWFkZXJGcm9tSXRlcmFibGUoKGFzeW5jIGZ1bmN0aW9uKiAoKSB7XG4gKiAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAqICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyKSA9PiBzZXRUaW1lb3V0KHIsIDEwMDApKTtcbiAqICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgZGF0YTogJHtKU09OLnN0cmluZ2lmeShEZW5vLm1ldHJpY3MoKSl9XFxuXFxuYDtcbiAqICAgICAgICAgIHlpZWxkIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShtZXNzYWdlKTtcbiAqICAgICAgICB9XG4gKiAgICAgIH0pKCkpO1xuICogICAgICBhd2FpdCBjb3B5KHJlYWRlciwgZmlsZSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlYWRlckZyb21JdGVyYWJsZShcbiAgaXRlcmFibGU6IEl0ZXJhYmxlPFVpbnQ4QXJyYXk+IHwgQXN5bmNJdGVyYWJsZTxVaW50OEFycmF5Pixcbik6IERlbm8uUmVhZGVyIHtcbiAgY29uc3QgaXRlcmF0b3I6IEl0ZXJhdG9yPFVpbnQ4QXJyYXk+IHwgQXN5bmNJdGVyYXRvcjxVaW50OEFycmF5PiA9XG4gICAgKGl0ZXJhYmxlIGFzIEFzeW5jSXRlcmFibGU8VWludDhBcnJheT4pW1N5bWJvbC5hc3luY0l0ZXJhdG9yXT8uKCkgPz9cbiAgICAgIChpdGVyYWJsZSBhcyBJdGVyYWJsZTxVaW50OEFycmF5PilbU3ltYm9sLml0ZXJhdG9yXT8uKCk7XG4gIGNvbnN0IGJ1ZmZlciA9IG5ldyBCdWZmZXIoKTtcbiAgcmV0dXJuIHtcbiAgICBhc3luYyByZWFkKHA6IFVpbnQ4QXJyYXkpOiBQcm9taXNlPG51bWJlciB8IG51bGw+IHtcbiAgICAgIGlmIChidWZmZXIubGVuZ3RoID09IDApIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICBpZiAocmVzdWx0LmRvbmUpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAocmVzdWx0LnZhbHVlLmJ5dGVMZW5ndGggPD0gcC5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICBwLnNldChyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC52YWx1ZS5ieXRlTGVuZ3RoO1xuICAgICAgICAgIH1cbiAgICAgICAgICBwLnNldChyZXN1bHQudmFsdWUuc3ViYXJyYXkoMCwgcC5ieXRlTGVuZ3RoKSk7XG4gICAgICAgICAgYXdhaXQgd3JpdGVBbGwoYnVmZmVyLCByZXN1bHQudmFsdWUuc3ViYXJyYXkocC5ieXRlTGVuZ3RoKSk7XG4gICAgICAgICAgcmV0dXJuIHAuYnl0ZUxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgbiA9IGF3YWl0IGJ1ZmZlci5yZWFkKHApO1xuICAgICAgICBpZiAobiA9PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMucmVhZChwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbjtcbiAgICAgIH1cbiAgICB9LFxuICB9O1xufVxuXG4vKiogQ3JlYXRlIGEgYFdyaXRlcmAgZnJvbSBhIGBXcml0YWJsZVN0cmVhbURlZmF1bHRXcml0ZXJgLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdyaXRlckZyb21TdHJlYW1Xcml0ZXIoXG4gIHN0cmVhbVdyaXRlcjogV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyPFVpbnQ4QXJyYXk+LFxuKTogRGVuby5Xcml0ZXIge1xuICByZXR1cm4ge1xuICAgIGFzeW5jIHdyaXRlKHA6IFVpbnQ4QXJyYXkpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgICAgYXdhaXQgc3RyZWFtV3JpdGVyLnJlYWR5O1xuICAgICAgYXdhaXQgc3RyZWFtV3JpdGVyLndyaXRlKHApO1xuICAgICAgcmV0dXJuIHAubGVuZ3RoO1xuICAgIH0sXG4gIH07XG59XG5cbi8qKiBDcmVhdGUgYSBgUmVhZGVyYCBmcm9tIGEgYFJlYWRhYmxlU3RyZWFtRGVmYXVsdFJlYWRlcmAuICovXG5leHBvcnQgZnVuY3Rpb24gcmVhZGVyRnJvbVN0cmVhbVJlYWRlcihcbiAgc3RyZWFtUmVhZGVyOiBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXI8VWludDhBcnJheT4sXG4pOiBEZW5vLlJlYWRlciB7XG4gIGNvbnN0IGJ1ZmZlciA9IG5ldyBCdWZmZXIoKTtcblxuICByZXR1cm4ge1xuICAgIGFzeW5jIHJlYWQocDogVWludDhBcnJheSk6IFByb21pc2U8bnVtYmVyIHwgbnVsbD4ge1xuICAgICAgaWYgKGJ1ZmZlci5lbXB0eSgpKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHN0cmVhbVJlYWRlci5yZWFkKCk7XG4gICAgICAgIGlmIChyZXMuZG9uZSkge1xuICAgICAgICAgIHJldHVybiBudWxsOyAvLyBFT0ZcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHdyaXRlQWxsKGJ1ZmZlciwgcmVzLnZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJ1ZmZlci5yZWFkKHApO1xuICAgIH0sXG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV3JpdGFibGVTdHJlYW1Gcm9tV3JpdGVyT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBJZiB0aGUgYHdyaXRlcmAgaXMgYWxzbyBhIGBEZW5vLkNsb3NlcmAsIGF1dG9tYXRpY2FsbHkgY2xvc2UgdGhlIGB3cml0ZXJgXG4gICAqIHdoZW4gdGhlIHN0cmVhbSBpcyBjbG9zZWQsIGFib3J0ZWQsIG9yIGEgd3JpdGUgZXJyb3Igb2NjdXJzLlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byBgdHJ1ZWAuICovXG4gIGF1dG9DbG9zZT86IGJvb2xlYW47XG59XG5cbi8qKiBDcmVhdGUgYSBgV3JpdGFibGVTdHJlYW1gIGZyb20gYSBgV3JpdGVyYC4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3cml0YWJsZVN0cmVhbUZyb21Xcml0ZXIoXG4gIHdyaXRlcjogRGVuby5Xcml0ZXIsXG4gIG9wdGlvbnM6IFdyaXRhYmxlU3RyZWFtRnJvbVdyaXRlck9wdGlvbnMgPSB7fSxcbik6IFdyaXRhYmxlU3RyZWFtPFVpbnQ4QXJyYXk+IHtcbiAgY29uc3QgeyBhdXRvQ2xvc2UgPSB0cnVlIH0gPSBvcHRpb25zO1xuXG4gIHJldHVybiBuZXcgV3JpdGFibGVTdHJlYW0oe1xuICAgIGFzeW5jIHdyaXRlKGNodW5rLCBjb250cm9sbGVyKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB3cml0ZUFsbCh3cml0ZXIsIGNodW5rKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29udHJvbGxlci5lcnJvcihlKTtcbiAgICAgICAgaWYgKGlzQ2xvc2VyKHdyaXRlcikgJiYgYXV0b0Nsb3NlKSB7XG4gICAgICAgICAgd3JpdGVyLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGNsb3NlKCkge1xuICAgICAgaWYgKGlzQ2xvc2VyKHdyaXRlcikgJiYgYXV0b0Nsb3NlKSB7XG4gICAgICAgIHdyaXRlci5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgYWJvcnQoKSB7XG4gICAgICBpZiAoaXNDbG9zZXIod3JpdGVyKSAmJiBhdXRvQ2xvc2UpIHtcbiAgICAgICAgd3JpdGVyLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSxcbiAgfSk7XG59XG5cbi8qKiBDcmVhdGUgYSBgUmVhZGFibGVTdHJlYW1gIGZyb20gYW55IGtpbmQgb2YgaXRlcmFibGUuXG4gKlxuICogYGBgdHNcbiAqICAgICAgaW1wb3J0IHsgcmVhZGFibGVTdHJlYW1Gcm9tSXRlcmFibGUgfSBmcm9tIFwiLi9jb252ZXJzaW9uLnRzXCI7XG4gKlxuICogICAgICBjb25zdCByMSA9IHJlYWRhYmxlU3RyZWFtRnJvbUl0ZXJhYmxlKFtcImZvbywgYmFyLCBiYXpcIl0pO1xuICogICAgICBjb25zdCByMiA9IHJlYWRhYmxlU3RyZWFtRnJvbUl0ZXJhYmxlKGFzeW5jIGZ1bmN0aW9uKiAoKSB7XG4gKiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKChyKSA9PiBzZXRUaW1lb3V0KHIsIDEwMDApKSk7XG4gKiAgICAgICAgeWllbGQgXCJmb29cIjtcbiAqICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgoKHIpID0+IHNldFRpbWVvdXQociwgMTAwMCkpKTtcbiAqICAgICAgICB5aWVsZCBcImJhclwiO1xuICogICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKCgocikgPT4gc2V0VGltZW91dChyLCAxMDAwKSkpO1xuICogICAgICAgIHlpZWxkIFwiYmF6XCI7XG4gKiAgICAgIH0oKSk7XG4gKiBgYGBcbiAqXG4gKiBJZiB0aGUgcHJvZHVjZWQgaXRlcmF0b3IgKGBpdGVyYWJsZVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKWAgb3JcbiAqIGBpdGVyYWJsZVtTeW1ib2wuaXRlcmF0b3JdKClgKSBpcyBhIGdlbmVyYXRvciwgb3IgbW9yZSBzcGVjaWZpY2FsbHkgaXMgZm91bmRcbiAqIHRvIGhhdmUgYSBgLnRocm93KClgIG1ldGhvZCBvbiBpdCwgdGhhdCB3aWxsIGJlIGNhbGxlZCB1cG9uXG4gKiBgcmVhZGFibGVTdHJlYW0uY2FuY2VsKClgLiBUaGlzIGlzIHRoZSBjYXNlIGZvciB0aGUgc2Vjb25kIGlucHV0IHR5cGUgYWJvdmU6XG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IHJlYWRhYmxlU3RyZWFtRnJvbUl0ZXJhYmxlIH0gZnJvbSBcIi4vY29udmVyc2lvbi50c1wiO1xuICpcbiAqIGNvbnN0IHIzID0gcmVhZGFibGVTdHJlYW1Gcm9tSXRlcmFibGUoYXN5bmMgZnVuY3Rpb24qICgpIHtcbiAqICAgdHJ5IHtcbiAqICAgICB5aWVsZCBcImZvb1wiO1xuICogICB9IGNhdGNoIChlcnJvcikge1xuICogICAgIGNvbnNvbGUubG9nKGVycm9yKTsgLy8gRXJyb3I6IENhbmNlbGxlZCBieSBjb25zdW1lci5cbiAqICAgfVxuICogfSgpKTtcbiAqIGNvbnN0IHJlYWRlciA9IHIzLmdldFJlYWRlcigpO1xuICogY29uc29sZS5sb2coYXdhaXQgcmVhZGVyLnJlYWQoKSk7IC8vIHsgdmFsdWU6IFwiZm9vXCIsIGRvbmU6IGZhbHNlIH1cbiAqIGF3YWl0IHJlYWRlci5jYW5jZWwobmV3IEVycm9yKFwiQ2FuY2VsbGVkIGJ5IGNvbnN1bWVyLlwiKSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlYWRhYmxlU3RyZWFtRnJvbUl0ZXJhYmxlPFQ+KFxuICBpdGVyYWJsZTogSXRlcmFibGU8VD4gfCBBc3luY0l0ZXJhYmxlPFQ+LFxuKTogUmVhZGFibGVTdHJlYW08VD4ge1xuICBjb25zdCBpdGVyYXRvcjogSXRlcmF0b3I8VD4gfCBBc3luY0l0ZXJhdG9yPFQ+ID1cbiAgICAoaXRlcmFibGUgYXMgQXN5bmNJdGVyYWJsZTxUPilbU3ltYm9sLmFzeW5jSXRlcmF0b3JdPy4oKSA/P1xuICAgICAgKGl0ZXJhYmxlIGFzIEl0ZXJhYmxlPFQ+KVtTeW1ib2wuaXRlcmF0b3JdPy4oKTtcbiAgcmV0dXJuIG5ldyBSZWFkYWJsZVN0cmVhbSh7XG4gICAgYXN5bmMgcHVsbChjb250cm9sbGVyKSB7XG4gICAgICBjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBhd2FpdCBpdGVyYXRvci5uZXh0KCk7XG4gICAgICBpZiAoZG9uZSkge1xuICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250cm9sbGVyLmVucXVldWUodmFsdWUpO1xuICAgICAgfVxuICAgIH0sXG4gICAgYXN5bmMgY2FuY2VsKHJlYXNvbikge1xuICAgICAgaWYgKHR5cGVvZiBpdGVyYXRvci50aHJvdyA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCBpdGVyYXRvci50aHJvdyhyZWFzb24pO1xuICAgICAgICB9IGNhdGNoIHsgLyogYGl0ZXJhdG9yLnRocm93KClgIGFsd2F5cyB0aHJvd3Mgb24gc2l0ZS4gV2UgY2F0Y2ggaXQuICovIH1cbiAgICAgIH1cbiAgICB9LFxuICB9KTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IHRoZSBnZW5lcmF0b3IgZnVuY3Rpb24gaW50byBhIFRyYW5zZm9ybVN0cmVhbS5cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgcmVhZGFibGVTdHJlYW1Gcm9tSXRlcmFibGUsIHRvVHJhbnNmb3JtU3RyZWFtIH0gZnJvbSBcIi4vY29udmVyc2lvbi50c1wiO1xuICpcbiAqIGNvbnN0IHJlYWRhYmxlID0gcmVhZGFibGVTdHJlYW1Gcm9tSXRlcmFibGUoWzAsIDEsIDJdKVxuICogICAucGlwZVRocm91Z2godG9UcmFuc2Zvcm1TdHJlYW0oYXN5bmMgZnVuY3Rpb24qIChzcmMpIHtcbiAqICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHNyYykge1xuICogICAgICAgeWllbGQgY2h1bmsgKiAxMDA7XG4gKiAgICAgfVxuICogICB9KSk7XG4gKlxuICogZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiByZWFkYWJsZSkge1xuICogICBjb25zb2xlLmxvZyhjaHVuayk7XG4gKiB9XG4gKiAvLyBvdXRwdXQ6IDAsIDEwMCwgMjAwXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gdHJhbnNmb3JtZXIgQSBmdW5jdGlvbiB0byB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0gd3JpdGFibGVTdHJhdGVneSBBbiBvYmplY3QgdGhhdCBvcHRpb25hbGx5IGRlZmluZXMgYSBxdWV1aW5nIHN0cmF0ZWd5IGZvciB0aGUgc3RyZWFtLlxuICogQHBhcmFtIHJlYWRhYmxlU3RyYXRlZ3kgQW4gb2JqZWN0IHRoYXQgb3B0aW9uYWxseSBkZWZpbmVzIGEgcXVldWluZyBzdHJhdGVneSBmb3IgdGhlIHN0cmVhbS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvVHJhbnNmb3JtU3RyZWFtPEksIE8+KFxuICB0cmFuc2Zvcm1lcjogKHNyYzogUmVhZGFibGVTdHJlYW08ST4pID0+IEl0ZXJhYmxlPE8+IHwgQXN5bmNJdGVyYWJsZTxPPixcbiAgd3JpdGFibGVTdHJhdGVneT86IFF1ZXVpbmdTdHJhdGVneTxJPixcbiAgcmVhZGFibGVTdHJhdGVneT86IFF1ZXVpbmdTdHJhdGVneTxPPixcbik6IFRyYW5zZm9ybVN0cmVhbTxJLCBPPiB7XG4gIGNvbnN0IHtcbiAgICB3cml0YWJsZSxcbiAgICByZWFkYWJsZSxcbiAgfSA9IG5ldyBUcmFuc2Zvcm1TdHJlYW08SSwgST4odW5kZWZpbmVkLCB3cml0YWJsZVN0cmF0ZWd5KTtcblxuICBjb25zdCBpdGVyYWJsZSA9IHRyYW5zZm9ybWVyKHJlYWRhYmxlKTtcbiAgY29uc3QgaXRlcmF0b3I6IEl0ZXJhdG9yPE8+IHwgQXN5bmNJdGVyYXRvcjxPPiA9XG4gICAgKGl0ZXJhYmxlIGFzIEFzeW5jSXRlcmFibGU8Tz4pW1N5bWJvbC5hc3luY0l0ZXJhdG9yXT8uKCkgPz9cbiAgICAgIChpdGVyYWJsZSBhcyBJdGVyYWJsZTxPPilbU3ltYm9sLml0ZXJhdG9yXT8uKCk7XG4gIHJldHVybiB7XG4gICAgd3JpdGFibGUsXG4gICAgcmVhZGFibGU6IG5ldyBSZWFkYWJsZVN0cmVhbTxPPih7XG4gICAgICBhc3luYyBwdWxsKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgbGV0IHJlc3VsdDogSXRlcmF0b3JSZXN1bHQ8Tz47XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmVzdWx0ID0gYXdhaXQgaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIC8vIFByb3BhZ2F0ZSBlcnJvciB0byBzdHJlYW0gZnJvbSBpdGVyYXRvclxuICAgICAgICAgIC8vIElmIHRoZSBzdHJlYW0gc3RhdHVzIGlzIFwiZXJyb3JlZFwiLCBpdCB3aWxsIGJlIHRocm93biwgYnV0IGlnbm9yZS5cbiAgICAgICAgICBhd2FpdCByZWFkYWJsZS5jYW5jZWwoZXJyb3IpLmNhdGNoKCgpID0+IHt9KTtcbiAgICAgICAgICBjb250cm9sbGVyLmVycm9yKGVycm9yKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3VsdC5kb25lKSB7XG4gICAgICAgICAgY29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb250cm9sbGVyLmVucXVldWUocmVzdWx0LnZhbHVlKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBjYW5jZWwocmVhc29uKSB7XG4gICAgICAgIC8vIFByb3BhZ2F0ZSBjYW5jZWxsYXRpb24gdG8gcmVhZGFibGUgYW5kIGl0ZXJhdG9yXG4gICAgICAgIGlmICh0eXBlb2YgaXRlcmF0b3IudGhyb3cgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGl0ZXJhdG9yLnRocm93KHJlYXNvbik7XG4gICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAvKiBgaXRlcmF0b3IudGhyb3coKWAgYWx3YXlzIHRocm93cyBvbiBzaXRlLiBXZSBjYXRjaCBpdC4gKi9cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcmVhZGFibGUuY2FuY2VsKHJlYXNvbik7XG4gICAgICB9LFxuICAgIH0sIHJlYWRhYmxlU3RyYXRlZ3kpLFxuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlYWRhYmxlU3RyZWFtRnJvbVJlYWRlck9wdGlvbnMge1xuICAvKiogSWYgdGhlIGByZWFkZXJgIGlzIGFsc28gYSBgRGVuby5DbG9zZXJgLCBhdXRvbWF0aWNhbGx5IGNsb3NlIHRoZSBgcmVhZGVyYFxuICAgKiB3aGVuIGBFT0ZgIGlzIGVuY291bnRlcmVkLCBvciBhIHJlYWQgZXJyb3Igb2NjdXJzLlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byBgdHJ1ZWAuICovXG4gIGF1dG9DbG9zZT86IGJvb2xlYW47XG5cbiAgLyoqIFRoZSBzaXplIG9mIGNodW5rcyB0byBhbGxvY2F0ZSB0byByZWFkLCB0aGUgZGVmYXVsdCBpcyB+MTZLaUIsIHdoaWNoIGlzXG4gICAqIHRoZSBtYXhpbXVtIHNpemUgdGhhdCBEZW5vIG9wZXJhdGlvbnMgY2FuIGN1cnJlbnRseSBzdXBwb3J0LiAqL1xuICBjaHVua1NpemU/OiBudW1iZXI7XG5cbiAgLyoqIFRoZSBxdWV1aW5nIHN0cmF0ZWd5IHRvIGNyZWF0ZSB0aGUgYFJlYWRhYmxlU3RyZWFtYCB3aXRoLiAqL1xuICBzdHJhdGVneT86IHsgaGlnaFdhdGVyTWFyaz86IG51bWJlciB8IHVuZGVmaW5lZDsgc2l6ZT86IHVuZGVmaW5lZCB9O1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIGBSZWFkYWJsZVN0cmVhbTxVaW50OEFycmF5PmAgZnJvbSBmcm9tIGEgYERlbm8uUmVhZGVyYC5cbiAqXG4gKiBXaGVuIHRoZSBwdWxsIGFsZ29yaXRobSBpcyBjYWxsZWQgb24gdGhlIHN0cmVhbSwgYSBjaHVuayBmcm9tIHRoZSByZWFkZXJcbiAqIHdpbGwgYmUgcmVhZC4gIFdoZW4gYG51bGxgIGlzIHJldHVybmVkIGZyb20gdGhlIHJlYWRlciwgdGhlIHN0cmVhbSB3aWxsIGJlXG4gKiBjbG9zZWQgYWxvbmcgd2l0aCB0aGUgcmVhZGVyIChpZiBpdCBpcyBhbHNvIGEgYERlbm8uQ2xvc2VyYCkuXG4gKlxuICogQW4gZXhhbXBsZSBjb252ZXJ0aW5nIGEgYERlbm8uRnNGaWxlYCBpbnRvIGEgcmVhZGFibGUgc3RyZWFtOlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyByZWFkYWJsZVN0cmVhbUZyb21SZWFkZXIgfSBmcm9tIFwiLi9tb2QudHNcIjtcbiAqXG4gKiBjb25zdCBmaWxlID0gYXdhaXQgRGVuby5vcGVuKFwiLi9maWxlLnR4dFwiLCB7IHJlYWQ6IHRydWUgfSk7XG4gKiBjb25zdCBmaWxlU3RyZWFtID0gcmVhZGFibGVTdHJlYW1Gcm9tUmVhZGVyKGZpbGUpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWFkYWJsZVN0cmVhbUZyb21SZWFkZXIoXG4gIHJlYWRlcjogRGVuby5SZWFkZXIgfCAoRGVuby5SZWFkZXIgJiBEZW5vLkNsb3NlciksXG4gIG9wdGlvbnM6IFJlYWRhYmxlU3RyZWFtRnJvbVJlYWRlck9wdGlvbnMgPSB7fSxcbik6IFJlYWRhYmxlU3RyZWFtPFVpbnQ4QXJyYXk+IHtcbiAgY29uc3Qge1xuICAgIGF1dG9DbG9zZSA9IHRydWUsXG4gICAgY2h1bmtTaXplID0gREVGQVVMVF9DSFVOS19TSVpFLFxuICAgIHN0cmF0ZWd5LFxuICB9ID0gb3B0aW9ucztcblxuICByZXR1cm4gbmV3IFJlYWRhYmxlU3RyZWFtKHtcbiAgICBhc3luYyBwdWxsKGNvbnRyb2xsZXIpIHtcbiAgICAgIGNvbnN0IGNodW5rID0gbmV3IFVpbnQ4QXJyYXkoY2h1bmtTaXplKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlYWQgPSBhd2FpdCByZWFkZXIucmVhZChjaHVuayk7XG4gICAgICAgIGlmIChyZWFkID09PSBudWxsKSB7XG4gICAgICAgICAgaWYgKGlzQ2xvc2VyKHJlYWRlcikgJiYgYXV0b0Nsb3NlKSB7XG4gICAgICAgICAgICByZWFkZXIuY2xvc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb250cm9sbGVyLmVucXVldWUoY2h1bmsuc3ViYXJyYXkoMCwgcmVhZCkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb250cm9sbGVyLmVycm9yKGUpO1xuICAgICAgICBpZiAoaXNDbG9zZXIocmVhZGVyKSkge1xuICAgICAgICAgIHJlYWRlci5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBjYW5jZWwoKSB7XG4gICAgICBpZiAoaXNDbG9zZXIocmVhZGVyKSAmJiBhdXRvQ2xvc2UpIHtcbiAgICAgICAgcmVhZGVyLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSxcbiAgfSwgc3RyYXRlZ3kpO1xufVxuXG4vKiogUmVhZCBSZWFkZXIgYHJgIHVudGlsIEVPRiAoYG51bGxgKSBhbmQgcmVzb2x2ZSB0byB0aGUgY29udGVudCBhc1xuICogVWludDhBcnJheWAuXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IEJ1ZmZlciB9IGZyb20gXCIuLi9pby9idWZmZXIudHNcIjtcbiAqIGltcG9ydCB7IHJlYWRBbGwgfSBmcm9tIFwiLi9jb252ZXJzaW9uLnRzXCI7XG4gKlxuICogLy8gRXhhbXBsZSBmcm9tIHN0ZGluXG4gKiBjb25zdCBzdGRpbkNvbnRlbnQgPSBhd2FpdCByZWFkQWxsKERlbm8uc3RkaW4pO1xuICpcbiAqIC8vIEV4YW1wbGUgZnJvbSBmaWxlXG4gKiBjb25zdCBmaWxlID0gYXdhaXQgRGVuby5vcGVuKFwibXlfZmlsZS50eHRcIiwge3JlYWQ6IHRydWV9KTtcbiAqIGNvbnN0IG15RmlsZUNvbnRlbnQgPSBhd2FpdCByZWFkQWxsKGZpbGUpO1xuICogRGVuby5jbG9zZShmaWxlLnJpZCk7XG4gKlxuICogLy8gRXhhbXBsZSBmcm9tIGJ1ZmZlclxuICogY29uc3QgbXlEYXRhID0gbmV3IFVpbnQ4QXJyYXkoMTAwKTtcbiAqIC8vIC4uLiBmaWxsIG15RGF0YSBhcnJheSB3aXRoIGRhdGFcbiAqIGNvbnN0IHJlYWRlciA9IG5ldyBCdWZmZXIobXlEYXRhLmJ1ZmZlcik7XG4gKiBjb25zdCBidWZmZXJDb250ZW50ID0gYXdhaXQgcmVhZEFsbChyZWFkZXIpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWFkQWxsKHI6IERlbm8uUmVhZGVyKTogUHJvbWlzZTxVaW50OEFycmF5PiB7XG4gIGNvbnN0IGJ1ZiA9IG5ldyBCdWZmZXIoKTtcbiAgYXdhaXQgYnVmLnJlYWRGcm9tKHIpO1xuICByZXR1cm4gYnVmLmJ5dGVzKCk7XG59XG5cbi8qKiBTeW5jaHJvbm91c2x5IHJlYWRzIFJlYWRlciBgcmAgdW50aWwgRU9GIChgbnVsbGApIGFuZCByZXR1cm5zIHRoZSBjb250ZW50XG4gKiBhcyBgVWludDhBcnJheWAuXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IEJ1ZmZlciB9IGZyb20gXCIuLi9pby9idWZmZXIudHNcIjtcbiAqIGltcG9ydCB7IHJlYWRBbGxTeW5jIH0gZnJvbSBcIi4vY29udmVyc2lvbi50c1wiO1xuICpcbiAqIC8vIEV4YW1wbGUgZnJvbSBzdGRpblxuICogY29uc3Qgc3RkaW5Db250ZW50ID0gcmVhZEFsbFN5bmMoRGVuby5zdGRpbik7XG4gKlxuICogLy8gRXhhbXBsZSBmcm9tIGZpbGVcbiAqIGNvbnN0IGZpbGUgPSBEZW5vLm9wZW5TeW5jKFwibXlfZmlsZS50eHRcIiwge3JlYWQ6IHRydWV9KTtcbiAqIGNvbnN0IG15RmlsZUNvbnRlbnQgPSByZWFkQWxsU3luYyhmaWxlKTtcbiAqIERlbm8uY2xvc2UoZmlsZS5yaWQpO1xuICpcbiAqIC8vIEV4YW1wbGUgZnJvbSBidWZmZXJcbiAqIGNvbnN0IG15RGF0YSA9IG5ldyBVaW50OEFycmF5KDEwMCk7XG4gKiAvLyAuLi4gZmlsbCBteURhdGEgYXJyYXkgd2l0aCBkYXRhXG4gKiBjb25zdCByZWFkZXIgPSBuZXcgQnVmZmVyKG15RGF0YS5idWZmZXIpO1xuICogY29uc3QgYnVmZmVyQ29udGVudCA9IHJlYWRBbGxTeW5jKHJlYWRlcik7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlYWRBbGxTeW5jKHI6IERlbm8uUmVhZGVyU3luYyk6IFVpbnQ4QXJyYXkge1xuICBjb25zdCBidWYgPSBuZXcgQnVmZmVyKCk7XG4gIGJ1Zi5yZWFkRnJvbVN5bmMocik7XG4gIHJldHVybiBidWYuYnl0ZXMoKTtcbn1cblxuLyoqIFdyaXRlIGFsbCB0aGUgY29udGVudCBvZiB0aGUgYXJyYXkgYnVmZmVyIChgYXJyYCkgdG8gdGhlIHdyaXRlciAoYHdgKS5cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSBcIi4uL2lvL2J1ZmZlci50c1wiO1xuICogaW1wb3J0IHsgd3JpdGVBbGwgfSBmcm9tIFwiLi9jb252ZXJzaW9uLnRzXCI7XG5cbiAqIC8vIEV4YW1wbGUgd3JpdGluZyB0byBzdGRvdXRcbiAqIGxldCBjb250ZW50Qnl0ZXMgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoXCJIZWxsbyBXb3JsZFwiKTtcbiAqIGF3YWl0IHdyaXRlQWxsKERlbm8uc3Rkb3V0LCBjb250ZW50Qnl0ZXMpO1xuICpcbiAqIC8vIEV4YW1wbGUgd3JpdGluZyB0byBmaWxlXG4gKiBjb250ZW50Qnl0ZXMgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoXCJIZWxsbyBXb3JsZFwiKTtcbiAqIGNvbnN0IGZpbGUgPSBhd2FpdCBEZW5vLm9wZW4oJ3Rlc3QuZmlsZScsIHt3cml0ZTogdHJ1ZX0pO1xuICogYXdhaXQgd3JpdGVBbGwoZmlsZSwgY29udGVudEJ5dGVzKTtcbiAqIERlbm8uY2xvc2UoZmlsZS5yaWQpO1xuICpcbiAqIC8vIEV4YW1wbGUgd3JpdGluZyB0byBidWZmZXJcbiAqIGNvbnRlbnRCeXRlcyA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShcIkhlbGxvIFdvcmxkXCIpO1xuICogY29uc3Qgd3JpdGVyID0gbmV3IEJ1ZmZlcigpO1xuICogYXdhaXQgd3JpdGVBbGwod3JpdGVyLCBjb250ZW50Qnl0ZXMpO1xuICogY29uc29sZS5sb2cod3JpdGVyLmJ5dGVzKCkubGVuZ3RoKTsgIC8vIDExXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdyaXRlQWxsKHc6IERlbm8uV3JpdGVyLCBhcnI6IFVpbnQ4QXJyYXkpIHtcbiAgbGV0IG53cml0dGVuID0gMDtcbiAgd2hpbGUgKG53cml0dGVuIDwgYXJyLmxlbmd0aCkge1xuICAgIG53cml0dGVuICs9IGF3YWl0IHcud3JpdGUoYXJyLnN1YmFycmF5KG53cml0dGVuKSk7XG4gIH1cbn1cblxuLyoqIFN5bmNocm9ub3VzbHkgd3JpdGUgYWxsIHRoZSBjb250ZW50IG9mIHRoZSBhcnJheSBidWZmZXIgKGBhcnJgKSB0byB0aGVcbiAqIHdyaXRlciAoYHdgKS5cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSBcIi4uL2lvL2J1ZmZlci50c1wiO1xuICogaW1wb3J0IHsgd3JpdGVBbGxTeW5jIH0gZnJvbSBcIi4vY29udmVyc2lvbi50c1wiO1xuICpcbiAqIC8vIEV4YW1wbGUgd3JpdGluZyB0byBzdGRvdXRcbiAqIGxldCBjb250ZW50Qnl0ZXMgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoXCJIZWxsbyBXb3JsZFwiKTtcbiAqIHdyaXRlQWxsU3luYyhEZW5vLnN0ZG91dCwgY29udGVudEJ5dGVzKTtcbiAqXG4gKiAvLyBFeGFtcGxlIHdyaXRpbmcgdG8gZmlsZVxuICogY29udGVudEJ5dGVzID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKFwiSGVsbG8gV29ybGRcIik7XG4gKiBjb25zdCBmaWxlID0gRGVuby5vcGVuU3luYygndGVzdC5maWxlJywge3dyaXRlOiB0cnVlfSk7XG4gKiB3cml0ZUFsbFN5bmMoZmlsZSwgY29udGVudEJ5dGVzKTtcbiAqIERlbm8uY2xvc2UoZmlsZS5yaWQpO1xuICpcbiAqIC8vIEV4YW1wbGUgd3JpdGluZyB0byBidWZmZXJcbiAqIGNvbnRlbnRCeXRlcyA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShcIkhlbGxvIFdvcmxkXCIpO1xuICogY29uc3Qgd3JpdGVyID0gbmV3IEJ1ZmZlcigpO1xuICogd3JpdGVBbGxTeW5jKHdyaXRlciwgY29udGVudEJ5dGVzKTtcbiAqIGNvbnNvbGUubG9nKHdyaXRlci5ieXRlcygpLmxlbmd0aCk7ICAvLyAxMVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3cml0ZUFsbFN5bmModzogRGVuby5Xcml0ZXJTeW5jLCBhcnI6IFVpbnQ4QXJyYXkpOiB2b2lkIHtcbiAgbGV0IG53cml0dGVuID0gMDtcbiAgd2hpbGUgKG53cml0dGVuIDwgYXJyLmxlbmd0aCkge1xuICAgIG53cml0dGVuICs9IHcud3JpdGVTeW5jKGFyci5zdWJhcnJheShud3JpdHRlbikpO1xuICB9XG59XG5cbi8qKiBUdXJucyBhIFJlYWRlciwgYHJgLCBpbnRvIGFuIGFzeW5jIGl0ZXJhdG9yLlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBpdGVyYXRlUmVhZGVyIH0gZnJvbSBcIi4vY29udmVyc2lvbi50c1wiO1xuICpcbiAqIGxldCBmID0gYXdhaXQgRGVuby5vcGVuKFwiL2V0Yy9wYXNzd2RcIik7XG4gKiBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGl0ZXJhdGVSZWFkZXIoZikpIHtcbiAqICAgY29uc29sZS5sb2coY2h1bmspO1xuICogfVxuICogZi5jbG9zZSgpO1xuICogYGBgXG4gKlxuICogU2Vjb25kIGFyZ3VtZW50IGNhbiBiZSB1c2VkIHRvIHR1bmUgc2l6ZSBvZiBhIGJ1ZmZlci5cbiAqIERlZmF1bHQgc2l6ZSBvZiB0aGUgYnVmZmVyIGlzIDMya0IuXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGl0ZXJhdGVSZWFkZXIgfSBmcm9tIFwiLi9jb252ZXJzaW9uLnRzXCI7XG4gKlxuICogbGV0IGYgPSBhd2FpdCBEZW5vLm9wZW4oXCIvZXRjL3Bhc3N3ZFwiKTtcbiAqIGNvbnN0IGl0ID0gaXRlcmF0ZVJlYWRlcihmLCB7XG4gKiAgIGJ1ZlNpemU6IDEwMjQgKiAxMDI0XG4gKiB9KTtcbiAqIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgaXQpIHtcbiAqICAgY29uc29sZS5sb2coY2h1bmspO1xuICogfVxuICogZi5jbG9zZSgpO1xuICogYGBgXG4gKlxuICogSXRlcmF0b3IgdXNlcyBhbiBpbnRlcm5hbCBidWZmZXIgb2YgZml4ZWQgc2l6ZSBmb3IgZWZmaWNpZW5jeTsgaXQgcmV0dXJuc1xuICogYSB2aWV3IG9uIHRoYXQgYnVmZmVyIG9uIGVhY2ggaXRlcmF0aW9uLiBJdCBpcyB0aGVyZWZvcmUgY2FsbGVyJ3NcbiAqIHJlc3BvbnNpYmlsaXR5IHRvIGNvcHkgY29udGVudHMgb2YgdGhlIGJ1ZmZlciBpZiBuZWVkZWQ7IG90aGVyd2lzZSB0aGVcbiAqIG5leHQgaXRlcmF0aW9uIHdpbGwgb3ZlcndyaXRlIGNvbnRlbnRzIG9mIHByZXZpb3VzbHkgcmV0dXJuZWQgY2h1bmsuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiogaXRlcmF0ZVJlYWRlcihcbiAgcjogRGVuby5SZWFkZXIsXG4gIG9wdGlvbnM/OiB7XG4gICAgYnVmU2l6ZT86IG51bWJlcjtcbiAgfSxcbik6IEFzeW5jSXRlcmFibGVJdGVyYXRvcjxVaW50OEFycmF5PiB7XG4gIGNvbnN0IGJ1ZlNpemUgPSBvcHRpb25zPy5idWZTaXplID8/IERFRkFVTFRfQlVGRkVSX1NJWkU7XG4gIGNvbnN0IGIgPSBuZXcgVWludDhBcnJheShidWZTaXplKTtcbiAgd2hpbGUgKHRydWUpIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByLnJlYWQoYik7XG4gICAgaWYgKHJlc3VsdCA9PT0gbnVsbCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgeWllbGQgYi5zdWJhcnJheSgwLCByZXN1bHQpO1xuICB9XG59XG5cbi8qKiBUdXJucyBhIFJlYWRlclN5bmMsIGByYCwgaW50byBhbiBpdGVyYXRvci5cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgaXRlcmF0ZVJlYWRlclN5bmMgfSBmcm9tIFwiLi9jb252ZXJzaW9uLnRzXCI7XG4gKlxuICogbGV0IGYgPSBEZW5vLm9wZW5TeW5jKFwiL2V0Yy9wYXNzd2RcIik7XG4gKiBmb3IgKGNvbnN0IGNodW5rIG9mIGl0ZXJhdGVSZWFkZXJTeW5jKGYpKSB7XG4gKiAgIGNvbnNvbGUubG9nKGNodW5rKTtcbiAqIH1cbiAqIGYuY2xvc2UoKTtcbiAqIGBgYFxuICpcbiAqIFNlY29uZCBhcmd1bWVudCBjYW4gYmUgdXNlZCB0byB0dW5lIHNpemUgb2YgYSBidWZmZXIuXG4gKiBEZWZhdWx0IHNpemUgb2YgdGhlIGJ1ZmZlciBpcyAzMmtCLlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBpdGVyYXRlUmVhZGVyU3luYyB9IGZyb20gXCIuL2NvbnZlcnNpb24udHNcIjtcblxuICogbGV0IGYgPSBhd2FpdCBEZW5vLm9wZW4oXCIvZXRjL3Bhc3N3ZFwiKTtcbiAqIGNvbnN0IGl0ZXIgPSBpdGVyYXRlUmVhZGVyU3luYyhmLCB7XG4gKiAgIGJ1ZlNpemU6IDEwMjQgKiAxMDI0XG4gKiB9KTtcbiAqIGZvciAoY29uc3QgY2h1bmsgb2YgaXRlcikge1xuICogICBjb25zb2xlLmxvZyhjaHVuayk7XG4gKiB9XG4gKiBmLmNsb3NlKCk7XG4gKiBgYGBcbiAqXG4gKiBJdGVyYXRvciB1c2VzIGFuIGludGVybmFsIGJ1ZmZlciBvZiBmaXhlZCBzaXplIGZvciBlZmZpY2llbmN5OyBpdCByZXR1cm5zXG4gKiBhIHZpZXcgb24gdGhhdCBidWZmZXIgb24gZWFjaCBpdGVyYXRpb24uIEl0IGlzIHRoZXJlZm9yZSBjYWxsZXInc1xuICogcmVzcG9uc2liaWxpdHkgdG8gY29weSBjb250ZW50cyBvZiB0aGUgYnVmZmVyIGlmIG5lZWRlZDsgb3RoZXJ3aXNlIHRoZVxuICogbmV4dCBpdGVyYXRpb24gd2lsbCBvdmVyd3JpdGUgY29udGVudHMgb2YgcHJldmlvdXNseSByZXR1cm5lZCBjaHVuay5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uKiBpdGVyYXRlUmVhZGVyU3luYyhcbiAgcjogRGVuby5SZWFkZXJTeW5jLFxuICBvcHRpb25zPzoge1xuICAgIGJ1ZlNpemU/OiBudW1iZXI7XG4gIH0sXG4pOiBJdGVyYWJsZUl0ZXJhdG9yPFVpbnQ4QXJyYXk+IHtcbiAgY29uc3QgYnVmU2l6ZSA9IG9wdGlvbnM/LmJ1ZlNpemUgPz8gREVGQVVMVF9CVUZGRVJfU0laRTtcbiAgY29uc3QgYiA9IG5ldyBVaW50OEFycmF5KGJ1ZlNpemUpO1xuICB3aGlsZSAodHJ1ZSkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHIucmVhZFN5bmMoYik7XG4gICAgaWYgKHJlc3VsdCA9PT0gbnVsbCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgeWllbGQgYi5zdWJhcnJheSgwLCByZXN1bHQpO1xuICB9XG59XG5cbi8qKiBDb3BpZXMgZnJvbSBgc3JjYCB0byBgZHN0YCB1bnRpbCBlaXRoZXIgRU9GIChgbnVsbGApIGlzIHJlYWQgZnJvbSBgc3JjYCBvclxuICogYW4gZXJyb3Igb2NjdXJzLiBJdCByZXNvbHZlcyB0byB0aGUgbnVtYmVyIG9mIGJ5dGVzIGNvcGllZCBvciByZWplY3RzIHdpdGhcbiAqIHRoZSBmaXJzdCBlcnJvciBlbmNvdW50ZXJlZCB3aGlsZSBjb3B5aW5nLlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBjb3B5IH0gZnJvbSBcIi4vY29udmVyc2lvbi50c1wiO1xuICpcbiAqIGNvbnN0IHNvdXJjZSA9IGF3YWl0IERlbm8ub3BlbihcIm15X2ZpbGUudHh0XCIpO1xuICogY29uc3QgYnl0ZXNDb3BpZWQxID0gYXdhaXQgY29weShzb3VyY2UsIERlbm8uc3Rkb3V0KTtcbiAqIGNvbnN0IGRlc3RpbmF0aW9uID0gYXdhaXQgRGVuby5jcmVhdGUoXCJteV9maWxlXzIudHh0XCIpO1xuICogY29uc3QgYnl0ZXNDb3BpZWQyID0gYXdhaXQgY29weShzb3VyY2UsIGRlc3RpbmF0aW9uKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBzcmMgVGhlIHNvdXJjZSB0byBjb3B5IGZyb21cbiAqIEBwYXJhbSBkc3QgVGhlIGRlc3RpbmF0aW9uIHRvIGNvcHkgdG9cbiAqIEBwYXJhbSBvcHRpb25zIENhbiBiZSB1c2VkIHRvIHR1bmUgc2l6ZSBvZiB0aGUgYnVmZmVyLiBEZWZhdWx0IHNpemUgaXMgMzJrQlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29weShcbiAgc3JjOiBEZW5vLlJlYWRlcixcbiAgZHN0OiBEZW5vLldyaXRlcixcbiAgb3B0aW9ucz86IHtcbiAgICBidWZTaXplPzogbnVtYmVyO1xuICB9LFxuKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgbGV0IG4gPSAwO1xuICBjb25zdCBidWZTaXplID0gb3B0aW9ucz8uYnVmU2l6ZSA/PyBERUZBVUxUX0JVRkZFUl9TSVpFO1xuICBjb25zdCBiID0gbmV3IFVpbnQ4QXJyYXkoYnVmU2l6ZSk7XG4gIGxldCBnb3RFT0YgPSBmYWxzZTtcbiAgd2hpbGUgKGdvdEVPRiA9PT0gZmFsc2UpIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzcmMucmVhZChiKTtcbiAgICBpZiAocmVzdWx0ID09PSBudWxsKSB7XG4gICAgICBnb3RFT0YgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgbndyaXR0ZW4gPSAwO1xuICAgICAgd2hpbGUgKG53cml0dGVuIDwgcmVzdWx0KSB7XG4gICAgICAgIG53cml0dGVuICs9IGF3YWl0IGRzdC53cml0ZShiLnN1YmFycmF5KG53cml0dGVuLCByZXN1bHQpKTtcbiAgICAgIH1cbiAgICAgIG4gKz0gbndyaXR0ZW47XG4gICAgfVxuICB9XG4gIHJldHVybiBuO1xufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMiB0aGUgRGVubyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLiBNSVQgbGljZW5zZS5cbi8vIFRoaXMgbW9kdWxlIGlzIGJyb3dzZXIgY29tcGF0aWJsZS5cblxuaW1wb3J0IHsgQnl0ZXNMaXN0IH0gZnJvbSBcIi4uL2J5dGVzL2J5dGVzX2xpc3QudHNcIjtcblxuY29uc3QgQ1IgPSBcIlxcclwiLmNoYXJDb2RlQXQoMCk7XG5jb25zdCBMRiA9IFwiXFxuXCIuY2hhckNvZGVBdCgwKTtcblxuLyoqIEBkZXByZWNhdGVkIFVzZSBUZXh0TGluZVN0cmVhbSBpbnN0ZWFkLCBhcyBpdCBjYW4gaGFuZGxlIGVtcHR5IGxpbmVzLlxuICpcbiAqIFRyYW5zZm9ybSBhIHN0cmVhbSBpbnRvIGEgc3RyZWFtIHdoZXJlIGVhY2ggY2h1bmsgaXMgZGl2aWRlZCBieSBhIG5ld2xpbmUsXG4gKiBiZSBpdCBgXFxuYCBvciBgXFxyXFxuYC5cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgTGluZVN0cmVhbSB9IGZyb20gXCIuL2RlbGltaXRlci50c1wiO1xuICogY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXCJodHRwczovL2V4YW1wbGUuY29tXCIpO1xuICogY29uc3QgbGluZXMgPSByZXMuYm9keSEucGlwZVRocm91Z2gobmV3IExpbmVTdHJlYW0oKSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIExpbmVTdHJlYW0gZXh0ZW5kcyBUcmFuc2Zvcm1TdHJlYW08VWludDhBcnJheSwgVWludDhBcnJheT4ge1xuICAjYnVmcyA9IG5ldyBCeXRlc0xpc3QoKTtcbiAgI3ByZXZIYWRDUiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKHtcbiAgICAgIHRyYW5zZm9ybTogKGNodW5rLCBjb250cm9sbGVyKSA9PiB7XG4gICAgICAgIHRoaXMuI2hhbmRsZShjaHVuaywgY29udHJvbGxlcik7XG4gICAgICB9LFxuICAgICAgZmx1c2g6IChjb250cm9sbGVyKSA9PiB7XG4gICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh0aGlzLiNtZXJnZUJ1ZnMoZmFsc2UpKTtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAjaGFuZGxlKFxuICAgIGNodW5rOiBVaW50OEFycmF5LFxuICAgIGNvbnRyb2xsZXI6IFRyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyPFVpbnQ4QXJyYXk+LFxuICApIHtcbiAgICBjb25zdCBsZkluZGV4ID0gY2h1bmsuaW5kZXhPZihMRik7XG5cbiAgICBpZiAodGhpcy4jcHJldkhhZENSKSB7XG4gICAgICB0aGlzLiNwcmV2SGFkQ1IgPSBmYWxzZTtcbiAgICAgIGlmIChsZkluZGV4ID09PSAwKSB7XG4gICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh0aGlzLiNtZXJnZUJ1ZnModHJ1ZSkpO1xuICAgICAgICB0aGlzLiNoYW5kbGUoY2h1bmsuc3ViYXJyYXkoMSksIGNvbnRyb2xsZXIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGxmSW5kZXggPT09IC0xKSB7XG4gICAgICBpZiAoY2h1bmsuYXQoLTEpID09PSBDUikge1xuICAgICAgICB0aGlzLiNwcmV2SGFkQ1IgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy4jYnVmcy5hZGQoY2h1bmspO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgY3JPckxmSW5kZXggPSBsZkluZGV4O1xuICAgICAgaWYgKGNodW5rW2xmSW5kZXggLSAxXSA9PT0gQ1IpIHtcbiAgICAgICAgY3JPckxmSW5kZXgtLTtcbiAgICAgIH1cbiAgICAgIHRoaXMuI2J1ZnMuYWRkKGNodW5rLnN1YmFycmF5KDAsIGNyT3JMZkluZGV4KSk7XG4gICAgICBjb250cm9sbGVyLmVucXVldWUodGhpcy4jbWVyZ2VCdWZzKGZhbHNlKSk7XG4gICAgICB0aGlzLiNoYW5kbGUoY2h1bmsuc3ViYXJyYXkobGZJbmRleCArIDEpLCBjb250cm9sbGVyKTtcbiAgICB9XG4gIH1cblxuICAjbWVyZ2VCdWZzKHByZXZIYWRDUjogYm9vbGVhbik6IFVpbnQ4QXJyYXkge1xuICAgIGNvbnN0IG1lcmdlQnVmID0gdGhpcy4jYnVmcy5jb25jYXQoKTtcbiAgICB0aGlzLiNidWZzID0gbmV3IEJ5dGVzTGlzdCgpO1xuXG4gICAgaWYgKHByZXZIYWRDUikge1xuICAgICAgcmV0dXJuIG1lcmdlQnVmLnN1YmFycmF5KDAsIC0xKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG1lcmdlQnVmO1xuICAgIH1cbiAgfVxufVxuXG5pbnRlcmZhY2UgVGV4dExpbmVTdHJlYW1PcHRpb25zIHtcbiAgLyoqIEFsbG93IHNwbGl0dGluZyBieSBzb2xvIFxcciAqL1xuICBhbGxvd0NSOiBib29sZWFuO1xufVxuXG4vKiogVHJhbnNmb3JtIGEgc3RyZWFtIGludG8gYSBzdHJlYW0gd2hlcmUgZWFjaCBjaHVuayBpcyBkaXZpZGVkIGJ5IGEgbmV3bGluZSxcbiAqIGJlIGl0IGBcXG5gIG9yIGBcXHJcXG5gLiBgXFxyYCBjYW4gYmUgZW5hYmxlZCB2aWEgdGhlIGBhbGxvd0NSYCBvcHRpb24uXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IFRleHRMaW5lU3RyZWFtIH0gZnJvbSBcIi4vZGVsaW1pdGVyLnRzXCI7XG4gKiBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcImh0dHBzOi8vZXhhbXBsZS5jb21cIik7XG4gKiBjb25zdCBsaW5lcyA9IHJlcy5ib2R5IVxuICogICAucGlwZVRocm91Z2gobmV3IFRleHREZWNvZGVyU3RyZWFtKCkpXG4gKiAgIC5waXBlVGhyb3VnaChuZXcgVGV4dExpbmVTdHJlYW0oKSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFRleHRMaW5lU3RyZWFtIGV4dGVuZHMgVHJhbnNmb3JtU3RyZWFtPHN0cmluZywgc3RyaW5nPiB7XG4gIHJlYWRvbmx5ICNhbGxvd0NSOiBib29sZWFuO1xuICAjYnVmID0gXCJcIjtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zPzogVGV4dExpbmVTdHJlYW1PcHRpb25zKSB7XG4gICAgc3VwZXIoe1xuICAgICAgdHJhbnNmb3JtOiAoY2h1bmssIGNvbnRyb2xsZXIpID0+IHRoaXMuI2hhbmRsZShjaHVuaywgY29udHJvbGxlciksXG4gICAgICBmbHVzaDogKGNvbnRyb2xsZXIpID0+IHRoaXMuI2hhbmRsZShcIlxcclxcblwiLCBjb250cm9sbGVyKSxcbiAgICB9KTtcbiAgICB0aGlzLiNhbGxvd0NSID0gb3B0aW9ucz8uYWxsb3dDUiA/PyBmYWxzZTtcbiAgfVxuXG4gICNoYW5kbGUoY2h1bms6IHN0cmluZywgY29udHJvbGxlcjogVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8c3RyaW5nPikge1xuICAgIGNodW5rID0gdGhpcy4jYnVmICsgY2h1bms7XG5cbiAgICBmb3IgKDs7KSB7XG4gICAgICBjb25zdCBsZkluZGV4ID0gY2h1bmsuaW5kZXhPZihcIlxcblwiKTtcblxuICAgICAgaWYgKHRoaXMuI2FsbG93Q1IpIHtcbiAgICAgICAgY29uc3QgY3JJbmRleCA9IGNodW5rLmluZGV4T2YoXCJcXHJcIik7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNySW5kZXggIT09IC0xICYmIGNySW5kZXggIT09IChjaHVuay5sZW5ndGggLSAxKSAmJlxuICAgICAgICAgIChsZkluZGV4ID09PSAtMSB8fCAobGZJbmRleCAtIDEpID4gY3JJbmRleClcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGNodW5rLnNsaWNlKDAsIGNySW5kZXgpKTtcbiAgICAgICAgICBjaHVuayA9IGNodW5rLnNsaWNlKGNySW5kZXggKyAxKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAobGZJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgbGV0IGNyT3JMZkluZGV4ID0gbGZJbmRleDtcbiAgICAgICAgaWYgKGNodW5rW2xmSW5kZXggLSAxXSA9PT0gXCJcXHJcIikge1xuICAgICAgICAgIGNyT3JMZkluZGV4LS07XG4gICAgICAgIH1cbiAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGNodW5rLnNsaWNlKDAsIGNyT3JMZkluZGV4KSk7XG4gICAgICAgIGNodW5rID0gY2h1bmsuc2xpY2UobGZJbmRleCArIDEpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgdGhpcy4jYnVmID0gY2h1bms7XG4gIH1cbn1cblxuLyoqIFRyYW5zZm9ybSBhIHN0cmVhbSBpbnRvIGEgc3RyZWFtIHdoZXJlIGVhY2ggY2h1bmsgaXMgZGl2aWRlZCBieSBhIGdpdmVuIGRlbGltaXRlci5cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgRGVsaW1pdGVyU3RyZWFtIH0gZnJvbSBcIi4vZGVsaW1pdGVyLnRzXCI7XG4gKiBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcImh0dHBzOi8vZXhhbXBsZS5jb21cIik7XG4gKiBjb25zdCBwYXJ0cyA9IHJlcy5ib2R5IVxuICogICAucGlwZVRocm91Z2gobmV3IERlbGltaXRlclN0cmVhbShuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoXCJmb29cIikpKVxuICogICAucGlwZVRocm91Z2gobmV3IFRleHREZWNvZGVyU3RyZWFtKCkpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWxpbWl0ZXJTdHJlYW0gZXh0ZW5kcyBUcmFuc2Zvcm1TdHJlYW08VWludDhBcnJheSwgVWludDhBcnJheT4ge1xuICAjYnVmcyA9IG5ldyBCeXRlc0xpc3QoKTtcbiAgI2RlbGltaXRlcjogVWludDhBcnJheTtcbiAgI2luc3BlY3RJbmRleCA9IDA7XG4gICNtYXRjaEluZGV4ID0gMDtcbiAgI2RlbGltTGVuOiBudW1iZXI7XG4gICNkZWxpbUxQUzogVWludDhBcnJheTtcblxuICBjb25zdHJ1Y3RvcihkZWxpbWl0ZXI6IFVpbnQ4QXJyYXkpIHtcbiAgICBzdXBlcih7XG4gICAgICB0cmFuc2Zvcm06IChjaHVuaywgY29udHJvbGxlcikgPT4ge1xuICAgICAgICB0aGlzLiNoYW5kbGUoY2h1bmssIGNvbnRyb2xsZXIpO1xuICAgICAgfSxcbiAgICAgIGZsdXNoOiAoY29udHJvbGxlcikgPT4ge1xuICAgICAgICBjb250cm9sbGVyLmVucXVldWUodGhpcy4jYnVmcy5jb25jYXQoKSk7XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgdGhpcy4jZGVsaW1pdGVyID0gZGVsaW1pdGVyO1xuICAgIHRoaXMuI2RlbGltTGVuID0gZGVsaW1pdGVyLmxlbmd0aDtcbiAgICB0aGlzLiNkZWxpbUxQUyA9IGNyZWF0ZUxQUyhkZWxpbWl0ZXIpO1xuICB9XG5cbiAgI2hhbmRsZShcbiAgICBjaHVuazogVWludDhBcnJheSxcbiAgICBjb250cm9sbGVyOiBUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlcjxVaW50OEFycmF5PixcbiAgKSB7XG4gICAgdGhpcy4jYnVmcy5hZGQoY2h1bmspO1xuICAgIGxldCBsb2NhbEluZGV4ID0gMDtcbiAgICB3aGlsZSAodGhpcy4jaW5zcGVjdEluZGV4IDwgdGhpcy4jYnVmcy5zaXplKCkpIHtcbiAgICAgIGlmIChjaHVua1tsb2NhbEluZGV4XSA9PT0gdGhpcy4jZGVsaW1pdGVyW3RoaXMuI21hdGNoSW5kZXhdKSB7XG4gICAgICAgIHRoaXMuI2luc3BlY3RJbmRleCsrO1xuICAgICAgICBsb2NhbEluZGV4Kys7XG4gICAgICAgIHRoaXMuI21hdGNoSW5kZXgrKztcbiAgICAgICAgaWYgKHRoaXMuI21hdGNoSW5kZXggPT09IHRoaXMuI2RlbGltTGVuKSB7XG4gICAgICAgICAgLy8gRnVsbCBtYXRjaFxuICAgICAgICAgIGNvbnN0IG1hdGNoRW5kID0gdGhpcy4jaW5zcGVjdEluZGV4IC0gdGhpcy4jZGVsaW1MZW47XG4gICAgICAgICAgY29uc3QgcmVhZHlCeXRlcyA9IHRoaXMuI2J1ZnMuc2xpY2UoMCwgbWF0Y2hFbmQpO1xuICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShyZWFkeUJ5dGVzKTtcbiAgICAgICAgICAvLyBSZXNldCBtYXRjaCwgZGlmZmVyZW50IGZyb20gS01QLlxuICAgICAgICAgIHRoaXMuI2J1ZnMuc2hpZnQodGhpcy4jaW5zcGVjdEluZGV4KTtcbiAgICAgICAgICB0aGlzLiNpbnNwZWN0SW5kZXggPSAwO1xuICAgICAgICAgIHRoaXMuI21hdGNoSW5kZXggPSAwO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy4jbWF0Y2hJbmRleCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuI2luc3BlY3RJbmRleCsrO1xuICAgICAgICAgIGxvY2FsSW5kZXgrKztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLiNtYXRjaEluZGV4ID0gdGhpcy4jZGVsaW1MUFNbdGhpcy4jbWF0Y2hJbmRleCAtIDFdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKiBUcmFuc2Zvcm0gYSBzdHJlYW0gaW50byBhIHN0cmVhbSB3aGVyZSBlYWNoIGNodW5rIGlzIGRpdmlkZWQgYnkgYSBnaXZlbiBkZWxpbWl0ZXIuXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IFRleHREZWxpbWl0ZXJTdHJlYW0gfSBmcm9tIFwiLi9kZWxpbWl0ZXIudHNcIjtcbiAqIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFwiaHR0cHM6Ly9leGFtcGxlLmNvbVwiKTtcbiAqIGNvbnN0IHBhcnRzID0gcmVzLmJvZHkhXG4gKiAgIC5waXBlVGhyb3VnaChuZXcgVGV4dERlY29kZXJTdHJlYW0oKSlcbiAqICAgLnBpcGVUaHJvdWdoKG5ldyBUZXh0RGVsaW1pdGVyU3RyZWFtKFwiZm9vXCIpKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgVGV4dERlbGltaXRlclN0cmVhbSBleHRlbmRzIFRyYW5zZm9ybVN0cmVhbTxzdHJpbmcsIHN0cmluZz4ge1xuICAjYnVmID0gXCJcIjtcbiAgI2RlbGltaXRlcjogc3RyaW5nO1xuICAjaW5zcGVjdEluZGV4ID0gMDtcbiAgI21hdGNoSW5kZXggPSAwO1xuICAjZGVsaW1MUFM6IFVpbnQ4QXJyYXk7XG5cbiAgY29uc3RydWN0b3IoZGVsaW1pdGVyOiBzdHJpbmcpIHtcbiAgICBzdXBlcih7XG4gICAgICB0cmFuc2Zvcm06IChjaHVuaywgY29udHJvbGxlcikgPT4ge1xuICAgICAgICB0aGlzLiNoYW5kbGUoY2h1bmssIGNvbnRyb2xsZXIpO1xuICAgICAgfSxcbiAgICAgIGZsdXNoOiAoY29udHJvbGxlcikgPT4ge1xuICAgICAgICBjb250cm9sbGVyLmVucXVldWUodGhpcy4jYnVmKTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICB0aGlzLiNkZWxpbWl0ZXIgPSBkZWxpbWl0ZXI7XG4gICAgdGhpcy4jZGVsaW1MUFMgPSBjcmVhdGVMUFMobmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGRlbGltaXRlcikpO1xuICB9XG5cbiAgI2hhbmRsZShcbiAgICBjaHVuazogc3RyaW5nLFxuICAgIGNvbnRyb2xsZXI6IFRyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyPHN0cmluZz4sXG4gICkge1xuICAgIHRoaXMuI2J1ZiArPSBjaHVuaztcbiAgICBsZXQgbG9jYWxJbmRleCA9IDA7XG4gICAgd2hpbGUgKHRoaXMuI2luc3BlY3RJbmRleCA8IHRoaXMuI2J1Zi5sZW5ndGgpIHtcbiAgICAgIGlmIChjaHVua1tsb2NhbEluZGV4XSA9PT0gdGhpcy4jZGVsaW1pdGVyW3RoaXMuI21hdGNoSW5kZXhdKSB7XG4gICAgICAgIHRoaXMuI2luc3BlY3RJbmRleCsrO1xuICAgICAgICBsb2NhbEluZGV4Kys7XG4gICAgICAgIHRoaXMuI21hdGNoSW5kZXgrKztcbiAgICAgICAgaWYgKHRoaXMuI21hdGNoSW5kZXggPT09IHRoaXMuI2RlbGltaXRlci5sZW5ndGgpIHtcbiAgICAgICAgICAvLyBGdWxsIG1hdGNoXG4gICAgICAgICAgY29uc3QgbWF0Y2hFbmQgPSB0aGlzLiNpbnNwZWN0SW5kZXggLSB0aGlzLiNkZWxpbWl0ZXIubGVuZ3RoO1xuICAgICAgICAgIGNvbnN0IHJlYWR5U3RyaW5nID0gdGhpcy4jYnVmLnNsaWNlKDAsIG1hdGNoRW5kKTtcbiAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUocmVhZHlTdHJpbmcpO1xuICAgICAgICAgIC8vIFJlc2V0IG1hdGNoLCBkaWZmZXJlbnQgZnJvbSBLTVAuXG4gICAgICAgICAgdGhpcy4jYnVmID0gdGhpcy4jYnVmLnNsaWNlKHRoaXMuI2luc3BlY3RJbmRleCk7XG4gICAgICAgICAgdGhpcy4jaW5zcGVjdEluZGV4ID0gMDtcbiAgICAgICAgICB0aGlzLiNtYXRjaEluZGV4ID0gMDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMuI21hdGNoSW5kZXggPT09IDApIHtcbiAgICAgICAgICB0aGlzLiNpbnNwZWN0SW5kZXgrKztcbiAgICAgICAgICBsb2NhbEluZGV4Kys7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy4jbWF0Y2hJbmRleCA9IHRoaXMuI2RlbGltTFBTW3RoaXMuI21hdGNoSW5kZXggLSAxXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKiogR2VuZXJhdGUgbG9uZ2VzdCBwcm9wZXIgcHJlZml4IHdoaWNoIGlzIGFsc28gc3VmZml4IGFycmF5LiAqL1xuZnVuY3Rpb24gY3JlYXRlTFBTKHBhdDogVWludDhBcnJheSk6IFVpbnQ4QXJyYXkge1xuICBjb25zdCBscHMgPSBuZXcgVWludDhBcnJheShwYXQubGVuZ3RoKTtcbiAgbHBzWzBdID0gMDtcbiAgbGV0IHByZWZpeEVuZCA9IDA7XG4gIGxldCBpID0gMTtcbiAgd2hpbGUgKGkgPCBscHMubGVuZ3RoKSB7XG4gICAgaWYgKHBhdFtpXSA9PSBwYXRbcHJlZml4RW5kXSkge1xuICAgICAgcHJlZml4RW5kKys7XG4gICAgICBscHNbaV0gPSBwcmVmaXhFbmQ7XG4gICAgICBpKys7XG4gICAgfSBlbHNlIGlmIChwcmVmaXhFbmQgPT09IDApIHtcbiAgICAgIGxwc1tpXSA9IDA7XG4gICAgICBpKys7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByZWZpeEVuZCA9IGxwc1twcmVmaXhFbmQgLSAxXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGxwcztcbn1cbiIsIi8qKiBBcmUgd2UgcnVubmluZyBvbiBEZW5vIG9yIGluIGEgd2ViIGJyb3dzZXI/ICovXG5leHBvcnQgY29uc3QgaXNEZW5vID0gdHlwZW9mIERlbm8gIT09IFwidW5kZWZpbmVkXCI7XG5cbi8vID09PSBFeHBvcnQgYWxsIEFQSSB0eXBlc1xuZXhwb3J0ICogZnJvbSBcImh0dHBzOi8vZXNtLnNoL0BncmFtbXlqcy90eXBlc0AyLjguMlwiO1xuXG4vLyA9PT0gRXhwb3J0IGRlYnVnXG5pbXBvcnQgZCBmcm9tIFwiaHR0cHM6Ly9jZG4uc2t5cGFjay5kZXYvZGVidWdANC4zLjRcIjtcbmV4cG9ydCB7IGQgYXMgZGVidWcgfTtcbmNvbnN0IERFQlVHID0gXCJERUJVR1wiO1xuaWYgKGlzRGVubykge1xuICAgIGQudXNlQ29sb3JzID0gKCkgPT4gIURlbm8ubm9Db2xvcjtcbiAgICBjb25zdCBlbnYgPSB7IG5hbWU6IFwiZW52XCIsIHZhcmlhYmxlOiBERUJVRyB9IGFzIGNvbnN0O1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IERlbm8ucGVybWlzc2lvbnMucXVlcnkoZW52KTtcbiAgICBpZiAocmVzLnN0YXRlID09PSBcImdyYW50ZWRcIikge1xuICAgICAgICBjb25zdCB2YWwgPSBEZW5vLmVudi5nZXQoREVCVUcpO1xuICAgICAgICBpZiAodmFsKSBkLmVuYWJsZSh2YWwpO1xuICAgIH1cbn1cblxuLy8gPT09IEV4cG9ydCBzeXN0ZW0tc3BlY2lmaWMgb3BlcmF0aW9uc1xuLy8gVHVybiBhbiBBc3luY0l0ZXJhYmxlPFVpbnQ4QXJyYXk+IGludG8gYSBzdHJlYW1cbmV4cG9ydCB7IHJlYWRhYmxlU3RyZWFtRnJvbUl0ZXJhYmxlIGFzIGl0clRvU3RyZWFtIH0gZnJvbSBcImh0dHBzOi8vZGVuby5sYW5kL3N0ZEAwLjE1MC4wL3N0cmVhbXMvbW9kLnRzXCI7XG5cbi8vID09PSBCYXNlIGNvbmZpZ3VyYXRpb24gZm9yIGBmZXRjaGAgY2FsbHNcbmV4cG9ydCBjb25zdCBiYXNlRmV0Y2hDb25maWcgPSAoX2FwaVJvb3Q6IHN0cmluZykgPT4gKHt9KTtcblxuLy8gPT09IElucHV0RmlsZSBoYW5kbGluZyBhbmQgRmlsZSBhdWdtZW50aW5nXG4vLyBBY2Nlc3NvciBmb3IgZmlsZSBkYXRhIGluIGBJbnB1dEZpbGVgIGluc3RhbmNlc1xuZXhwb3J0IGNvbnN0IHRvUmF3ID0gU3ltYm9sKFwiSW5wdXRGaWxlIGRhdGFcIik7XG4iLCJpbXBvcnQgeyB0eXBlIEFwaUVycm9yLCB0eXBlIFJlc3BvbnNlUGFyYW1ldGVycyB9IGZyb20gXCIuLi90eXBlcy50c1wiO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyBlcnJvcnMgdGhhdCBhcmUgdGhyb3duIGJ5IGdyYW1tWSBiZWNhdXNlIHRoZSBUZWxlZ3JhbVxuICogQm90IEFQSSByZXNwb25kZWQgd2l0aCBhbiBlcnJvci5cbiAqXG4gKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBob2xkIHRoZSBpbmZvcm1hdGlvbiB0aGF0IHRoZSBUZWxlZ3JhbSBiYWNrZW5kXG4gKiByZXR1cm5lZC5cbiAqXG4gKiBJZiB0aGlzIGVycm9yIGlzIHRocm93biwgZ3JhbW1ZIGNvdWxkIHN1Y2Nlc3NmdWxseSBjb21tdW5pY2F0ZSB3aXRoIHRoZVxuICogVGVsZWdyYW0gQm90IEFQSSBzZXJ2ZXJzLCBob3dldmVyLCBhbiBlcnJvciBjb2RlIHdhcyByZXR1cm5lZCBmb3IgdGhlXG4gKiByZXNwZWN0aXZlIG1ldGhvZCBjYWxsLlxuICovXG5leHBvcnQgY2xhc3MgR3JhbW15RXJyb3IgZXh0ZW5kcyBFcnJvciBpbXBsZW1lbnRzIEFwaUVycm9yIHtcbiAgICAvKiogRmxhZyB0aGF0IHRoaXMgcmVxdWVzdCB3YXMgdW5zdWNjZXNzZnVsLiBBbHdheXMgYGZhbHNlYC4gKi9cbiAgICBwdWJsaWMgcmVhZG9ubHkgb2s6IGZhbHNlID0gZmFsc2U7XG4gICAgLyoqIEFuIGludGVnZXIgaG9sZGluZyBUZWxlZ3JhbSdzIGVycm9yIGNvZGUuIFN1YmplY3QgdG8gY2hhbmdlLiAqL1xuICAgIHB1YmxpYyByZWFkb25seSBlcnJvcl9jb2RlOiBudW1iZXI7XG4gICAgLyoqIEEgaHVtYW4tcmVhZGFibGUgZGVzY3JpcHRpb24gb2YgdGhlIGVycm9yLiAqL1xuICAgIHB1YmxpYyByZWFkb25seSBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgIC8qKiBGdXJ0aGVyIHBhcmFtZXRlcnMgdGhhdCBtYXkgaGVscCB0byBhdXRvbWF0aWNhbGx5IGhhbmRsZSB0aGUgZXJyb3IuICovXG4gICAgcHVibGljIHJlYWRvbmx5IHBhcmFtZXRlcnM6IFJlc3BvbnNlUGFyYW1ldGVycztcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgbWVzc2FnZTogc3RyaW5nLFxuICAgICAgICBlcnI6IEFwaUVycm9yLFxuICAgICAgICAvKiogVGhlIGNhbGxlZCBtZXRob2QgbmFtZSB3aGljaCBjYXVzZWQgdGhpcyBlcnJvciB0byBiZSB0aHJvd24uICovXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBtZXRob2Q6IHN0cmluZyxcbiAgICAgICAgLyoqIFRoZSBwYXlsb2FkIHRoYXQgd2FzIHBhc3NlZCB3aGVuIGNhbGxpbmcgdGhlIG1ldGhvZC4gKi9cbiAgICAgICAgcHVibGljIHJlYWRvbmx5IHBheWxvYWQ6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuICAgICkge1xuICAgICAgICBzdXBlcihgJHttZXNzYWdlfSAoJHtlcnIuZXJyb3JfY29kZX06ICR7ZXJyLmRlc2NyaXB0aW9ufSlgKTtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJHcmFtbXlFcnJvclwiO1xuICAgICAgICB0aGlzLmVycm9yX2NvZGUgPSBlcnIuZXJyb3JfY29kZTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGVyci5kZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzID0gZXJyLnBhcmFtZXRlcnMgPz8ge307XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHRvR3JhbW15RXJyb3IoXG4gICAgZXJyOiBBcGlFcnJvcixcbiAgICBtZXRob2Q6IHN0cmluZyxcbiAgICBwYXlsb2FkOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbikge1xuICAgIHJldHVybiBuZXcgR3JhbW15RXJyb3IoXG4gICAgICAgIGBDYWxsIHRvICcke21ldGhvZH0nIGZhaWxlZCFgLFxuICAgICAgICBlcnIsXG4gICAgICAgIG1ldGhvZCxcbiAgICAgICAgcGF5bG9hZCxcbiAgICApO1xufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyBlcnJvcnMgdGhhdCBhcmUgdGhyb3duIGJ5IGdyYW1tWSBiZWNhdXNlIGFuIEhUVFAgY2FsbFxuICogdG8gdGhlIFRlbGVncmFtIEJvdCBBUEkgZmFpbGVkLlxuICpcbiAqIEluc3RhbmNlcyBvZiB0aGlzIGNsYXNzIGhvbGQgdGhlIGVycm9yIG9iamVjdCB0aGF0IHdhcyBjcmVhdGVkIGJlY2F1c2UgdGhlXG4gKiBmZXRjaCBjYWxsIGZhaWxlZC4gSXQgY2FuIGJlIGluc3BlY3RlZCB0byBkZXRlcm1pbmUgd2h5IGV4YWN0bHkgdGhlIG5ldHdvcmtcbiAqIHJlcXVlc3QgZmFpbGVkLlxuICpcbiAqIElmIGFuIFtBUEkgdHJhbnNmb3JtZXJcbiAqIGZ1bmN0aW9uXShodHRwczovL2dyYW1teS5kZXYvYWR2YW5jZWQvdHJhbnNmb3JtZXJzLmh0bWwpIHRocm93cyBhbiBlcnJvcixcbiAqIGdyYW1tWSB3aWxsIHJlZ2FyZCB0aGlzIGFzIGlmIHRoZSBuZXR3b3JrIHJlcXVlc3QgZmFpbGVkLiBUaGUgY29udGFpbmVkIGVycm9yXG4gKiB3aWxsIHRoZW4gYmUgdGhlIGVycm9yIHRoYXQgd2FzIHRocm93biBieSB0aGUgdHJhbnNmb3JtZXIgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBIdHRwRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICAgICAgLyoqIFRoZSB0aHJvd24gZXJyb3Igb2JqZWN0LiAqL1xuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgZXJyb3I6IHVua25vd24sXG4gICAgKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkh0dHBFcnJvclwiO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaXNUZWxlZ3JhbUVycm9yKFxuICAgIGVycjogdW5rbm93bixcbik6IGVyciBpcyB7IHN0YXR1czogc3RyaW5nOyBzdGF0dXNUZXh0OiBzdHJpbmcgfSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgdHlwZW9mIGVyciA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICBlcnIgIT09IG51bGwgJiZcbiAgICAgICAgXCJzdGF0dXNcIiBpbiBlcnIgJiZcbiAgICAgICAgXCJzdGF0dXNUZXh0XCIgaW4gZXJyXG4gICAgKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB0b0h0dHBFcnJvcihtZXRob2Q6IHN0cmluZywgc2Vuc2l0aXZlTG9nczogYm9vbGVhbikge1xuICAgIHJldHVybiAoZXJyOiB1bmtub3duKSA9PiB7XG4gICAgICAgIGxldCBtc2cgPSBgTmV0d29yayByZXF1ZXN0IGZvciAnJHttZXRob2R9JyBmYWlsZWQhYDtcbiAgICAgICAgaWYgKGlzVGVsZWdyYW1FcnJvcihlcnIpKSBtc2cgKz0gYCAoJHtlcnIuc3RhdHVzfTogJHtlcnIuc3RhdHVzVGV4dH0pYDtcbiAgICAgICAgaWYgKHNlbnNpdGl2ZUxvZ3MgJiYgZXJyIGluc3RhbmNlb2YgRXJyb3IpIG1zZyArPSBgICR7ZXJyLm1lc3NhZ2V9YDtcbiAgICAgICAgdGhyb3cgbmV3IEh0dHBFcnJvcihtc2csIGVycik7XG4gICAgfTtcbn1cbiIsIi8vIENvcHlyaWdodCAyMDE4LTIwMjIgdGhlIERlbm8gYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4gTUlUIGxpY2Vuc2UuXG4vLyBUaGlzIG1vZHVsZSBpcyBicm93c2VyIGNvbXBhdGlibGUuXG5cbmV4cG9ydCB0eXBlIE9TVHlwZSA9IFwid2luZG93c1wiIHwgXCJsaW51eFwiIHwgXCJkYXJ3aW5cIjtcblxuZXhwb3J0IGNvbnN0IG9zVHlwZTogT1NUeXBlID0gKCgpID0+IHtcbiAgLy8gZGVuby1saW50LWlnbm9yZSBuby1leHBsaWNpdC1hbnlcbiAgY29uc3QgeyBEZW5vIH0gPSBnbG9iYWxUaGlzIGFzIGFueTtcbiAgaWYgKHR5cGVvZiBEZW5vPy5idWlsZD8ub3MgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gRGVuby5idWlsZC5vcztcbiAgfVxuXG4gIC8vIGRlbm8tbGludC1pZ25vcmUgbm8tZXhwbGljaXQtYW55XG4gIGNvbnN0IHsgbmF2aWdhdG9yIH0gPSBnbG9iYWxUaGlzIGFzIGFueTtcbiAgaWYgKG5hdmlnYXRvcj8uYXBwVmVyc2lvbj8uaW5jbHVkZXM/LihcIldpblwiKSkge1xuICAgIHJldHVybiBcIndpbmRvd3NcIjtcbiAgfVxuXG4gIHJldHVybiBcImxpbnV4XCI7XG59KSgpO1xuXG5leHBvcnQgY29uc3QgaXNXaW5kb3dzID0gb3NUeXBlID09PSBcIndpbmRvd3NcIjtcbmV4cG9ydCBjb25zdCBpc0xpbnV4ID0gb3NUeXBlID09PSBcImxpbnV4XCI7XG4iLCIvLyBDb3B5cmlnaHQgMjAxOC0yMDIyIHRoZSBEZW5vIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuIE1JVCBsaWNlbnNlLlxuLy8gQ29weXJpZ2h0IHRoZSBCcm93c2VyaWZ5IGF1dGhvcnMuIE1JVCBMaWNlbnNlLlxuLy8gUG9ydGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2Jyb3dzZXJpZnkvcGF0aC1icm93c2VyaWZ5L1xuLy8gVGhpcyBtb2R1bGUgaXMgYnJvd3NlciBjb21wYXRpYmxlLlxuXG4vLyBBbHBoYWJldCBjaGFycy5cbmV4cG9ydCBjb25zdCBDSEFSX1VQUEVSQ0FTRV9BID0gNjU7IC8qIEEgKi9cbmV4cG9ydCBjb25zdCBDSEFSX0xPV0VSQ0FTRV9BID0gOTc7IC8qIGEgKi9cbmV4cG9ydCBjb25zdCBDSEFSX1VQUEVSQ0FTRV9aID0gOTA7IC8qIFogKi9cbmV4cG9ydCBjb25zdCBDSEFSX0xPV0VSQ0FTRV9aID0gMTIyOyAvKiB6ICovXG5cbi8vIE5vbi1hbHBoYWJldGljIGNoYXJzLlxuZXhwb3J0IGNvbnN0IENIQVJfRE9UID0gNDY7IC8qIC4gKi9cbmV4cG9ydCBjb25zdCBDSEFSX0ZPUldBUkRfU0xBU0ggPSA0NzsgLyogLyAqL1xuZXhwb3J0IGNvbnN0IENIQVJfQkFDS1dBUkRfU0xBU0ggPSA5MjsgLyogXFwgKi9cbmV4cG9ydCBjb25zdCBDSEFSX1ZFUlRJQ0FMX0xJTkUgPSAxMjQ7IC8qIHwgKi9cbmV4cG9ydCBjb25zdCBDSEFSX0NPTE9OID0gNTg7IC8qIDogKi9cbmV4cG9ydCBjb25zdCBDSEFSX1FVRVNUSU9OX01BUksgPSA2MzsgLyogPyAqL1xuZXhwb3J0IGNvbnN0IENIQVJfVU5ERVJTQ09SRSA9IDk1OyAvKiBfICovXG5leHBvcnQgY29uc3QgQ0hBUl9MSU5FX0ZFRUQgPSAxMDsgLyogXFxuICovXG5leHBvcnQgY29uc3QgQ0hBUl9DQVJSSUFHRV9SRVRVUk4gPSAxMzsgLyogXFxyICovXG5leHBvcnQgY29uc3QgQ0hBUl9UQUIgPSA5OyAvKiBcXHQgKi9cbmV4cG9ydCBjb25zdCBDSEFSX0ZPUk1fRkVFRCA9IDEyOyAvKiBcXGYgKi9cbmV4cG9ydCBjb25zdCBDSEFSX0VYQ0xBTUFUSU9OX01BUksgPSAzMzsgLyogISAqL1xuZXhwb3J0IGNvbnN0IENIQVJfSEFTSCA9IDM1OyAvKiAjICovXG5leHBvcnQgY29uc3QgQ0hBUl9TUEFDRSA9IDMyOyAvKiAgICovXG5leHBvcnQgY29uc3QgQ0hBUl9OT19CUkVBS19TUEFDRSA9IDE2MDsgLyogXFx1MDBBMCAqL1xuZXhwb3J0IGNvbnN0IENIQVJfWkVST19XSURUSF9OT0JSRUFLX1NQQUNFID0gNjUyNzk7IC8qIFxcdUZFRkYgKi9cbmV4cG9ydCBjb25zdCBDSEFSX0xFRlRfU1FVQVJFX0JSQUNLRVQgPSA5MTsgLyogWyAqL1xuZXhwb3J0IGNvbnN0IENIQVJfUklHSFRfU1FVQVJFX0JSQUNLRVQgPSA5MzsgLyogXSAqL1xuZXhwb3J0IGNvbnN0IENIQVJfTEVGVF9BTkdMRV9CUkFDS0VUID0gNjA7IC8qIDwgKi9cbmV4cG9ydCBjb25zdCBDSEFSX1JJR0hUX0FOR0xFX0JSQUNLRVQgPSA2MjsgLyogPiAqL1xuZXhwb3J0IGNvbnN0IENIQVJfTEVGVF9DVVJMWV9CUkFDS0VUID0gMTIzOyAvKiB7ICovXG5leHBvcnQgY29uc3QgQ0hBUl9SSUdIVF9DVVJMWV9CUkFDS0VUID0gMTI1OyAvKiB9ICovXG5leHBvcnQgY29uc3QgQ0hBUl9IWVBIRU5fTUlOVVMgPSA0NTsgLyogLSAqL1xuZXhwb3J0IGNvbnN0IENIQVJfUExVUyA9IDQzOyAvKiArICovXG5leHBvcnQgY29uc3QgQ0hBUl9ET1VCTEVfUVVPVEUgPSAzNDsgLyogXCIgKi9cbmV4cG9ydCBjb25zdCBDSEFSX1NJTkdMRV9RVU9URSA9IDM5OyAvKiAnICovXG5leHBvcnQgY29uc3QgQ0hBUl9QRVJDRU5UID0gMzc7IC8qICUgKi9cbmV4cG9ydCBjb25zdCBDSEFSX1NFTUlDT0xPTiA9IDU5OyAvKiA7ICovXG5leHBvcnQgY29uc3QgQ0hBUl9DSVJDVU1GTEVYX0FDQ0VOVCA9IDk0OyAvKiBeICovXG5leHBvcnQgY29uc3QgQ0hBUl9HUkFWRV9BQ0NFTlQgPSA5NjsgLyogYCAqL1xuZXhwb3J0IGNvbnN0IENIQVJfQVQgPSA2NDsgLyogQCAqL1xuZXhwb3J0IGNvbnN0IENIQVJfQU1QRVJTQU5EID0gMzg7IC8qICYgKi9cbmV4cG9ydCBjb25zdCBDSEFSX0VRVUFMID0gNjE7IC8qID0gKi9cblxuLy8gRGlnaXRzXG5leHBvcnQgY29uc3QgQ0hBUl8wID0gNDg7IC8qIDAgKi9cbmV4cG9ydCBjb25zdCBDSEFSXzkgPSA1NzsgLyogOSAqL1xuIiwiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMiB0aGUgRGVubyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLiBNSVQgbGljZW5zZS5cbi8vIENvcHlyaWdodCB0aGUgQnJvd3NlcmlmeSBhdXRob3JzLiBNSVQgTGljZW5zZS5cbi8vIFBvcnRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9icm93c2VyaWZ5L3BhdGgtYnJvd3NlcmlmeS9cbi8vIFRoaXMgbW9kdWxlIGlzIGJyb3dzZXIgY29tcGF0aWJsZS5cblxuaW1wb3J0IHR5cGUgeyBGb3JtYXRJbnB1dFBhdGhPYmplY3QgfSBmcm9tIFwiLi9faW50ZXJmYWNlLnRzXCI7XG5pbXBvcnQge1xuICBDSEFSX0JBQ0tXQVJEX1NMQVNILFxuICBDSEFSX0RPVCxcbiAgQ0hBUl9GT1JXQVJEX1NMQVNILFxuICBDSEFSX0xPV0VSQ0FTRV9BLFxuICBDSEFSX0xPV0VSQ0FTRV9aLFxuICBDSEFSX1VQUEVSQ0FTRV9BLFxuICBDSEFSX1VQUEVSQ0FTRV9aLFxufSBmcm9tIFwiLi9fY29uc3RhbnRzLnRzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRQYXRoKHBhdGg6IHN0cmluZyk6IHZvaWQge1xuICBpZiAodHlwZW9mIHBhdGggIT09IFwic3RyaW5nXCIpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgYFBhdGggbXVzdCBiZSBhIHN0cmluZy4gUmVjZWl2ZWQgJHtKU09OLnN0cmluZ2lmeShwYXRoKX1gLFxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUG9zaXhQYXRoU2VwYXJhdG9yKGNvZGU6IG51bWJlcik6IGJvb2xlYW4ge1xuICByZXR1cm4gY29kZSA9PT0gQ0hBUl9GT1JXQVJEX1NMQVNIO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNQYXRoU2VwYXJhdG9yKGNvZGU6IG51bWJlcik6IGJvb2xlYW4ge1xuICByZXR1cm4gaXNQb3NpeFBhdGhTZXBhcmF0b3IoY29kZSkgfHwgY29kZSA9PT0gQ0hBUl9CQUNLV0FSRF9TTEFTSDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzV2luZG93c0RldmljZVJvb3QoY29kZTogbnVtYmVyKTogYm9vbGVhbiB7XG4gIHJldHVybiAoXG4gICAgKGNvZGUgPj0gQ0hBUl9MT1dFUkNBU0VfQSAmJiBjb2RlIDw9IENIQVJfTE9XRVJDQVNFX1opIHx8XG4gICAgKGNvZGUgPj0gQ0hBUl9VUFBFUkNBU0VfQSAmJiBjb2RlIDw9IENIQVJfVVBQRVJDQVNFX1opXG4gICk7XG59XG5cbi8vIFJlc29sdmVzIC4gYW5kIC4uIGVsZW1lbnRzIGluIGEgcGF0aCB3aXRoIGRpcmVjdG9yeSBuYW1lc1xuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVN0cmluZyhcbiAgcGF0aDogc3RyaW5nLFxuICBhbGxvd0Fib3ZlUm9vdDogYm9vbGVhbixcbiAgc2VwYXJhdG9yOiBzdHJpbmcsXG4gIGlzUGF0aFNlcGFyYXRvcjogKGNvZGU6IG51bWJlcikgPT4gYm9vbGVhbixcbik6IHN0cmluZyB7XG4gIGxldCByZXMgPSBcIlwiO1xuICBsZXQgbGFzdFNlZ21lbnRMZW5ndGggPSAwO1xuICBsZXQgbGFzdFNsYXNoID0gLTE7XG4gIGxldCBkb3RzID0gMDtcbiAgbGV0IGNvZGU6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHBhdGgubGVuZ3RoOyBpIDw9IGxlbjsgKytpKSB7XG4gICAgaWYgKGkgPCBsZW4pIGNvZGUgPSBwYXRoLmNoYXJDb2RlQXQoaSk7XG4gICAgZWxzZSBpZiAoaXNQYXRoU2VwYXJhdG9yKGNvZGUhKSkgYnJlYWs7XG4gICAgZWxzZSBjb2RlID0gQ0hBUl9GT1JXQVJEX1NMQVNIO1xuXG4gICAgaWYgKGlzUGF0aFNlcGFyYXRvcihjb2RlISkpIHtcbiAgICAgIGlmIChsYXN0U2xhc2ggPT09IGkgLSAxIHx8IGRvdHMgPT09IDEpIHtcbiAgICAgICAgLy8gTk9PUFxuICAgICAgfSBlbHNlIGlmIChsYXN0U2xhc2ggIT09IGkgLSAxICYmIGRvdHMgPT09IDIpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHJlcy5sZW5ndGggPCAyIHx8XG4gICAgICAgICAgbGFzdFNlZ21lbnRMZW5ndGggIT09IDIgfHxcbiAgICAgICAgICByZXMuY2hhckNvZGVBdChyZXMubGVuZ3RoIC0gMSkgIT09IENIQVJfRE9UIHx8XG4gICAgICAgICAgcmVzLmNoYXJDb2RlQXQocmVzLmxlbmd0aCAtIDIpICE9PSBDSEFSX0RPVFxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAocmVzLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgICAgIGNvbnN0IGxhc3RTbGFzaEluZGV4ID0gcmVzLmxhc3RJbmRleE9mKHNlcGFyYXRvcik7XG4gICAgICAgICAgICBpZiAobGFzdFNsYXNoSW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICAgIHJlcyA9IFwiXCI7XG4gICAgICAgICAgICAgIGxhc3RTZWdtZW50TGVuZ3RoID0gMDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlcyA9IHJlcy5zbGljZSgwLCBsYXN0U2xhc2hJbmRleCk7XG4gICAgICAgICAgICAgIGxhc3RTZWdtZW50TGVuZ3RoID0gcmVzLmxlbmd0aCAtIDEgLSByZXMubGFzdEluZGV4T2Yoc2VwYXJhdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxhc3RTbGFzaCA9IGk7XG4gICAgICAgICAgICBkb3RzID0gMDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmxlbmd0aCA9PT0gMiB8fCByZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICByZXMgPSBcIlwiO1xuICAgICAgICAgICAgbGFzdFNlZ21lbnRMZW5ndGggPSAwO1xuICAgICAgICAgICAgbGFzdFNsYXNoID0gaTtcbiAgICAgICAgICAgIGRvdHMgPSAwO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChhbGxvd0Fib3ZlUm9vdCkge1xuICAgICAgICAgIGlmIChyZXMubGVuZ3RoID4gMCkgcmVzICs9IGAke3NlcGFyYXRvcn0uLmA7XG4gICAgICAgICAgZWxzZSByZXMgPSBcIi4uXCI7XG4gICAgICAgICAgbGFzdFNlZ21lbnRMZW5ndGggPSAyO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocmVzLmxlbmd0aCA+IDApIHJlcyArPSBzZXBhcmF0b3IgKyBwYXRoLnNsaWNlKGxhc3RTbGFzaCArIDEsIGkpO1xuICAgICAgICBlbHNlIHJlcyA9IHBhdGguc2xpY2UobGFzdFNsYXNoICsgMSwgaSk7XG4gICAgICAgIGxhc3RTZWdtZW50TGVuZ3RoID0gaSAtIGxhc3RTbGFzaCAtIDE7XG4gICAgICB9XG4gICAgICBsYXN0U2xhc2ggPSBpO1xuICAgICAgZG90cyA9IDA7XG4gICAgfSBlbHNlIGlmIChjb2RlID09PSBDSEFSX0RPVCAmJiBkb3RzICE9PSAtMSkge1xuICAgICAgKytkb3RzO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb3RzID0gLTE7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfZm9ybWF0KFxuICBzZXA6IHN0cmluZyxcbiAgcGF0aE9iamVjdDogRm9ybWF0SW5wdXRQYXRoT2JqZWN0LFxuKTogc3RyaW5nIHtcbiAgY29uc3QgZGlyOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBwYXRoT2JqZWN0LmRpciB8fCBwYXRoT2JqZWN0LnJvb3Q7XG4gIGNvbnN0IGJhc2U6IHN0cmluZyA9IHBhdGhPYmplY3QuYmFzZSB8fFxuICAgIChwYXRoT2JqZWN0Lm5hbWUgfHwgXCJcIikgKyAocGF0aE9iamVjdC5leHQgfHwgXCJcIik7XG4gIGlmICghZGlyKSByZXR1cm4gYmFzZTtcbiAgaWYgKGRpciA9PT0gcGF0aE9iamVjdC5yb290KSByZXR1cm4gZGlyICsgYmFzZTtcbiAgcmV0dXJuIGRpciArIHNlcCArIGJhc2U7XG59XG5cbmNvbnN0IFdISVRFU1BBQ0VfRU5DT0RJTkdTOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBcIlxcdTAwMDlcIjogXCIlMDlcIixcbiAgXCJcXHUwMDBBXCI6IFwiJTBBXCIsXG4gIFwiXFx1MDAwQlwiOiBcIiUwQlwiLFxuICBcIlxcdTAwMENcIjogXCIlMENcIixcbiAgXCJcXHUwMDBEXCI6IFwiJTBEXCIsXG4gIFwiXFx1MDAyMFwiOiBcIiUyMFwiLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGVuY29kZVdoaXRlc3BhY2Uoc3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gc3RyaW5nLnJlcGxhY2VBbGwoL1tcXHNdL2csIChjKSA9PiB7XG4gICAgcmV0dXJuIFdISVRFU1BBQ0VfRU5DT0RJTkdTW2NdID8/IGM7XG4gIH0pO1xufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMiB0aGUgRGVubyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLiBNSVQgbGljZW5zZS5cbi8vIFRoaXMgbW9kdWxlIGlzIGJyb3dzZXIgY29tcGF0aWJsZS5cblxuZXhwb3J0IGNsYXNzIERlbm9TdGRJbnRlcm5hbEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSBcIkRlbm9TdGRJbnRlcm5hbEVycm9yXCI7XG4gIH1cbn1cblxuLyoqIE1ha2UgYW4gYXNzZXJ0aW9uLCBpZiBub3QgYHRydWVgLCB0aGVuIHRocm93LiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydChleHByOiB1bmtub3duLCBtc2cgPSBcIlwiKTogYXNzZXJ0cyBleHByIHtcbiAgaWYgKCFleHByKSB7XG4gICAgdGhyb3cgbmV3IERlbm9TdGRJbnRlcm5hbEVycm9yKG1zZyk7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE4LTIwMjIgdGhlIERlbm8gYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4gTUlUIGxpY2Vuc2UuXG4vLyBDb3B5cmlnaHQgdGhlIEJyb3dzZXJpZnkgYXV0aG9ycy4gTUlUIExpY2Vuc2UuXG4vLyBQb3J0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vYnJvd3NlcmlmeS9wYXRoLWJyb3dzZXJpZnkvXG4vLyBUaGlzIG1vZHVsZSBpcyBicm93c2VyIGNvbXBhdGlibGUuXG5cbmltcG9ydCB0eXBlIHsgRm9ybWF0SW5wdXRQYXRoT2JqZWN0LCBQYXJzZWRQYXRoIH0gZnJvbSBcIi4vX2ludGVyZmFjZS50c1wiO1xuaW1wb3J0IHtcbiAgQ0hBUl9CQUNLV0FSRF9TTEFTSCxcbiAgQ0hBUl9DT0xPTixcbiAgQ0hBUl9ET1QsXG4gIENIQVJfUVVFU1RJT05fTUFSSyxcbn0gZnJvbSBcIi4vX2NvbnN0YW50cy50c1wiO1xuXG5pbXBvcnQge1xuICBfZm9ybWF0LFxuICBhc3NlcnRQYXRoLFxuICBlbmNvZGVXaGl0ZXNwYWNlLFxuICBpc1BhdGhTZXBhcmF0b3IsXG4gIGlzV2luZG93c0RldmljZVJvb3QsXG4gIG5vcm1hbGl6ZVN0cmluZyxcbn0gZnJvbSBcIi4vX3V0aWwudHNcIjtcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gXCIuLi9fdXRpbC9hc3NlcnQudHNcIjtcblxuZXhwb3J0IGNvbnN0IHNlcCA9IFwiXFxcXFwiO1xuZXhwb3J0IGNvbnN0IGRlbGltaXRlciA9IFwiO1wiO1xuXG4vKipcbiAqIFJlc29sdmVzIHBhdGggc2VnbWVudHMgaW50byBhIGBwYXRoYFxuICogQHBhcmFtIHBhdGhTZWdtZW50cyB0byBwcm9jZXNzIHRvIHBhdGhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmUoLi4ucGF0aFNlZ21lbnRzOiBzdHJpbmdbXSk6IHN0cmluZyB7XG4gIGxldCByZXNvbHZlZERldmljZSA9IFwiXCI7XG4gIGxldCByZXNvbHZlZFRhaWwgPSBcIlwiO1xuICBsZXQgcmVzb2x2ZWRBYnNvbHV0ZSA9IGZhbHNlO1xuXG4gIGZvciAobGV0IGkgPSBwYXRoU2VnbWVudHMubGVuZ3RoIC0gMTsgaSA+PSAtMTsgaS0tKSB7XG4gICAgbGV0IHBhdGg6IHN0cmluZztcbiAgICAvLyBkZW5vLWxpbnQtaWdub3JlIG5vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHsgRGVubyB9ID0gZ2xvYmFsVGhpcyBhcyBhbnk7XG4gICAgaWYgKGkgPj0gMCkge1xuICAgICAgcGF0aCA9IHBhdGhTZWdtZW50c1tpXTtcbiAgICB9IGVsc2UgaWYgKCFyZXNvbHZlZERldmljZSkge1xuICAgICAgaWYgKHR5cGVvZiBEZW5vPy5jd2QgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUmVzb2x2ZWQgYSBkcml2ZS1sZXR0ZXItbGVzcyBwYXRoIHdpdGhvdXQgYSBDV0QuXCIpO1xuICAgICAgfVxuICAgICAgcGF0aCA9IERlbm8uY3dkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIERlbm8/LmVudj8uZ2V0ICE9PSBcImZ1bmN0aW9uXCIgfHwgdHlwZW9mIERlbm8/LmN3ZCAhPT0gXCJmdW5jdGlvblwiXG4gICAgICApIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlJlc29sdmVkIGEgcmVsYXRpdmUgcGF0aCB3aXRob3V0IGEgQ1dELlwiKTtcbiAgICAgIH1cbiAgICAgIHBhdGggPSBEZW5vLmN3ZCgpO1xuXG4gICAgICAvLyBWZXJpZnkgdGhhdCBhIGN3ZCB3YXMgZm91bmQgYW5kIHRoYXQgaXQgYWN0dWFsbHkgcG9pbnRzXG4gICAgICAvLyB0byBvdXIgZHJpdmUuIElmIG5vdCwgZGVmYXVsdCB0byB0aGUgZHJpdmUncyByb290LlxuICAgICAgaWYgKFxuICAgICAgICBwYXRoID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgcGF0aC5zbGljZSgwLCAzKS50b0xvd2VyQ2FzZSgpICE9PSBgJHtyZXNvbHZlZERldmljZS50b0xvd2VyQ2FzZSgpfVxcXFxgXG4gICAgICApIHtcbiAgICAgICAgcGF0aCA9IGAke3Jlc29sdmVkRGV2aWNlfVxcXFxgO1xuICAgICAgfVxuICAgIH1cblxuICAgIGFzc2VydFBhdGgocGF0aCk7XG5cbiAgICBjb25zdCBsZW4gPSBwYXRoLmxlbmd0aDtcblxuICAgIC8vIFNraXAgZW1wdHkgZW50cmllc1xuICAgIGlmIChsZW4gPT09IDApIGNvbnRpbnVlO1xuXG4gICAgbGV0IHJvb3RFbmQgPSAwO1xuICAgIGxldCBkZXZpY2UgPSBcIlwiO1xuICAgIGxldCBpc0Fic29sdXRlID0gZmFsc2U7XG4gICAgY29uc3QgY29kZSA9IHBhdGguY2hhckNvZGVBdCgwKTtcblxuICAgIC8vIFRyeSB0byBtYXRjaCBhIHJvb3RcbiAgICBpZiAobGVuID4gMSkge1xuICAgICAgaWYgKGlzUGF0aFNlcGFyYXRvcihjb2RlKSkge1xuICAgICAgICAvLyBQb3NzaWJsZSBVTkMgcm9vdFxuXG4gICAgICAgIC8vIElmIHdlIHN0YXJ0ZWQgd2l0aCBhIHNlcGFyYXRvciwgd2Uga25vdyB3ZSBhdCBsZWFzdCBoYXZlIGFuXG4gICAgICAgIC8vIGFic29sdXRlIHBhdGggb2Ygc29tZSBraW5kIChVTkMgb3Igb3RoZXJ3aXNlKVxuICAgICAgICBpc0Fic29sdXRlID0gdHJ1ZTtcblxuICAgICAgICBpZiAoaXNQYXRoU2VwYXJhdG9yKHBhdGguY2hhckNvZGVBdCgxKSkpIHtcbiAgICAgICAgICAvLyBNYXRjaGVkIGRvdWJsZSBwYXRoIHNlcGFyYXRvciBhdCBiZWdpbm5pbmdcbiAgICAgICAgICBsZXQgaiA9IDI7XG4gICAgICAgICAgbGV0IGxhc3QgPSBqO1xuICAgICAgICAgIC8vIE1hdGNoIDEgb3IgbW9yZSBub24tcGF0aCBzZXBhcmF0b3JzXG4gICAgICAgICAgZm9yICg7IGogPCBsZW47ICsraikge1xuICAgICAgICAgICAgaWYgKGlzUGF0aFNlcGFyYXRvcihwYXRoLmNoYXJDb2RlQXQoaikpKSBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGogPCBsZW4gJiYgaiAhPT0gbGFzdCkge1xuICAgICAgICAgICAgY29uc3QgZmlyc3RQYXJ0ID0gcGF0aC5zbGljZShsYXN0LCBqKTtcbiAgICAgICAgICAgIC8vIE1hdGNoZWQhXG4gICAgICAgICAgICBsYXN0ID0gajtcbiAgICAgICAgICAgIC8vIE1hdGNoIDEgb3IgbW9yZSBwYXRoIHNlcGFyYXRvcnNcbiAgICAgICAgICAgIGZvciAoOyBqIDwgbGVuOyArK2opIHtcbiAgICAgICAgICAgICAgaWYgKCFpc1BhdGhTZXBhcmF0b3IocGF0aC5jaGFyQ29kZUF0KGopKSkgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaiA8IGxlbiAmJiBqICE9PSBsYXN0KSB7XG4gICAgICAgICAgICAgIC8vIE1hdGNoZWQhXG4gICAgICAgICAgICAgIGxhc3QgPSBqO1xuICAgICAgICAgICAgICAvLyBNYXRjaCAxIG9yIG1vcmUgbm9uLXBhdGggc2VwYXJhdG9yc1xuICAgICAgICAgICAgICBmb3IgKDsgaiA8IGxlbjsgKytqKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzUGF0aFNlcGFyYXRvcihwYXRoLmNoYXJDb2RlQXQoaikpKSBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoaiA9PT0gbGVuKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgbWF0Y2hlZCBhIFVOQyByb290IG9ubHlcbiAgICAgICAgICAgICAgICBkZXZpY2UgPSBgXFxcXFxcXFwke2ZpcnN0UGFydH1cXFxcJHtwYXRoLnNsaWNlKGxhc3QpfWA7XG4gICAgICAgICAgICAgICAgcm9vdEVuZCA9IGo7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoaiAhPT0gbGFzdCkge1xuICAgICAgICAgICAgICAgIC8vIFdlIG1hdGNoZWQgYSBVTkMgcm9vdCB3aXRoIGxlZnRvdmVyc1xuXG4gICAgICAgICAgICAgICAgZGV2aWNlID0gYFxcXFxcXFxcJHtmaXJzdFBhcnR9XFxcXCR7cGF0aC5zbGljZShsYXN0LCBqKX1gO1xuICAgICAgICAgICAgICAgIHJvb3RFbmQgPSBqO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJvb3RFbmQgPSAxO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzV2luZG93c0RldmljZVJvb3QoY29kZSkpIHtcbiAgICAgICAgLy8gUG9zc2libGUgZGV2aWNlIHJvb3RcblxuICAgICAgICBpZiAocGF0aC5jaGFyQ29kZUF0KDEpID09PSBDSEFSX0NPTE9OKSB7XG4gICAgICAgICAgZGV2aWNlID0gcGF0aC5zbGljZSgwLCAyKTtcbiAgICAgICAgICByb290RW5kID0gMjtcbiAgICAgICAgICBpZiAobGVuID4gMikge1xuICAgICAgICAgICAgaWYgKGlzUGF0aFNlcGFyYXRvcihwYXRoLmNoYXJDb2RlQXQoMikpKSB7XG4gICAgICAgICAgICAgIC8vIFRyZWF0IHNlcGFyYXRvciBmb2xsb3dpbmcgZHJpdmUgbmFtZSBhcyBhbiBhYnNvbHV0ZSBwYXRoXG4gICAgICAgICAgICAgIC8vIGluZGljYXRvclxuICAgICAgICAgICAgICBpc0Fic29sdXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgcm9vdEVuZCA9IDM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc1BhdGhTZXBhcmF0b3IoY29kZSkpIHtcbiAgICAgIC8vIGBwYXRoYCBjb250YWlucyBqdXN0IGEgcGF0aCBzZXBhcmF0b3JcbiAgICAgIHJvb3RFbmQgPSAxO1xuICAgICAgaXNBYnNvbHV0ZSA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgZGV2aWNlLmxlbmd0aCA+IDAgJiZcbiAgICAgIHJlc29sdmVkRGV2aWNlLmxlbmd0aCA+IDAgJiZcbiAgICAgIGRldmljZS50b0xvd2VyQ2FzZSgpICE9PSByZXNvbHZlZERldmljZS50b0xvd2VyQ2FzZSgpXG4gICAgKSB7XG4gICAgICAvLyBUaGlzIHBhdGggcG9pbnRzIHRvIGFub3RoZXIgZGV2aWNlIHNvIGl0IGlzIG5vdCBhcHBsaWNhYmxlXG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAocmVzb2x2ZWREZXZpY2UubGVuZ3RoID09PSAwICYmIGRldmljZS5sZW5ndGggPiAwKSB7XG4gICAgICByZXNvbHZlZERldmljZSA9IGRldmljZTtcbiAgICB9XG4gICAgaWYgKCFyZXNvbHZlZEFic29sdXRlKSB7XG4gICAgICByZXNvbHZlZFRhaWwgPSBgJHtwYXRoLnNsaWNlKHJvb3RFbmQpfVxcXFwke3Jlc29sdmVkVGFpbH1gO1xuICAgICAgcmVzb2x2ZWRBYnNvbHV0ZSA9IGlzQWJzb2x1dGU7XG4gICAgfVxuXG4gICAgaWYgKHJlc29sdmVkQWJzb2x1dGUgJiYgcmVzb2x2ZWREZXZpY2UubGVuZ3RoID4gMCkgYnJlYWs7XG4gIH1cblxuICAvLyBBdCB0aGlzIHBvaW50IHRoZSBwYXRoIHNob3VsZCBiZSByZXNvbHZlZCB0byBhIGZ1bGwgYWJzb2x1dGUgcGF0aCxcbiAgLy8gYnV0IGhhbmRsZSByZWxhdGl2ZSBwYXRocyB0byBiZSBzYWZlIChtaWdodCBoYXBwZW4gd2hlbiBwcm9jZXNzLmN3ZCgpXG4gIC8vIGZhaWxzKVxuXG4gIC8vIE5vcm1hbGl6ZSB0aGUgdGFpbCBwYXRoXG4gIHJlc29sdmVkVGFpbCA9IG5vcm1hbGl6ZVN0cmluZyhcbiAgICByZXNvbHZlZFRhaWwsXG4gICAgIXJlc29sdmVkQWJzb2x1dGUsXG4gICAgXCJcXFxcXCIsXG4gICAgaXNQYXRoU2VwYXJhdG9yLFxuICApO1xuXG4gIHJldHVybiByZXNvbHZlZERldmljZSArIChyZXNvbHZlZEFic29sdXRlID8gXCJcXFxcXCIgOiBcIlwiKSArIHJlc29sdmVkVGFpbCB8fCBcIi5cIjtcbn1cblxuLyoqXG4gKiBOb3JtYWxpemVzIGEgYHBhdGhgXG4gKiBAcGFyYW0gcGF0aCB0byBub3JtYWxpemVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZShwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICBhc3NlcnRQYXRoKHBhdGgpO1xuICBjb25zdCBsZW4gPSBwYXRoLmxlbmd0aDtcbiAgaWYgKGxlbiA9PT0gMCkgcmV0dXJuIFwiLlwiO1xuICBsZXQgcm9vdEVuZCA9IDA7XG4gIGxldCBkZXZpY2U6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgbGV0IGlzQWJzb2x1dGUgPSBmYWxzZTtcbiAgY29uc3QgY29kZSA9IHBhdGguY2hhckNvZGVBdCgwKTtcblxuICAvLyBUcnkgdG8gbWF0Y2ggYSByb290XG4gIGlmIChsZW4gPiAxKSB7XG4gICAgaWYgKGlzUGF0aFNlcGFyYXRvcihjb2RlKSkge1xuICAgICAgLy8gUG9zc2libGUgVU5DIHJvb3RcblxuICAgICAgLy8gSWYgd2Ugc3RhcnRlZCB3aXRoIGEgc2VwYXJhdG9yLCB3ZSBrbm93IHdlIGF0IGxlYXN0IGhhdmUgYW4gYWJzb2x1dGVcbiAgICAgIC8vIHBhdGggb2Ygc29tZSBraW5kIChVTkMgb3Igb3RoZXJ3aXNlKVxuICAgICAgaXNBYnNvbHV0ZSA9IHRydWU7XG5cbiAgICAgIGlmIChpc1BhdGhTZXBhcmF0b3IocGF0aC5jaGFyQ29kZUF0KDEpKSkge1xuICAgICAgICAvLyBNYXRjaGVkIGRvdWJsZSBwYXRoIHNlcGFyYXRvciBhdCBiZWdpbm5pbmdcbiAgICAgICAgbGV0IGogPSAyO1xuICAgICAgICBsZXQgbGFzdCA9IGo7XG4gICAgICAgIC8vIE1hdGNoIDEgb3IgbW9yZSBub24tcGF0aCBzZXBhcmF0b3JzXG4gICAgICAgIGZvciAoOyBqIDwgbGVuOyArK2opIHtcbiAgICAgICAgICBpZiAoaXNQYXRoU2VwYXJhdG9yKHBhdGguY2hhckNvZGVBdChqKSkpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChqIDwgbGVuICYmIGogIT09IGxhc3QpIHtcbiAgICAgICAgICBjb25zdCBmaXJzdFBhcnQgPSBwYXRoLnNsaWNlKGxhc3QsIGopO1xuICAgICAgICAgIC8vIE1hdGNoZWQhXG4gICAgICAgICAgbGFzdCA9IGo7XG4gICAgICAgICAgLy8gTWF0Y2ggMSBvciBtb3JlIHBhdGggc2VwYXJhdG9yc1xuICAgICAgICAgIGZvciAoOyBqIDwgbGVuOyArK2opIHtcbiAgICAgICAgICAgIGlmICghaXNQYXRoU2VwYXJhdG9yKHBhdGguY2hhckNvZGVBdChqKSkpIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaiA8IGxlbiAmJiBqICE9PSBsYXN0KSB7XG4gICAgICAgICAgICAvLyBNYXRjaGVkIVxuICAgICAgICAgICAgbGFzdCA9IGo7XG4gICAgICAgICAgICAvLyBNYXRjaCAxIG9yIG1vcmUgbm9uLXBhdGggc2VwYXJhdG9yc1xuICAgICAgICAgICAgZm9yICg7IGogPCBsZW47ICsraikge1xuICAgICAgICAgICAgICBpZiAoaXNQYXRoU2VwYXJhdG9yKHBhdGguY2hhckNvZGVBdChqKSkpIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGogPT09IGxlbikge1xuICAgICAgICAgICAgICAvLyBXZSBtYXRjaGVkIGEgVU5DIHJvb3Qgb25seVxuICAgICAgICAgICAgICAvLyBSZXR1cm4gdGhlIG5vcm1hbGl6ZWQgdmVyc2lvbiBvZiB0aGUgVU5DIHJvb3Qgc2luY2UgdGhlcmVcbiAgICAgICAgICAgICAgLy8gaXMgbm90aGluZyBsZWZ0IHRvIHByb2Nlc3NcblxuICAgICAgICAgICAgICByZXR1cm4gYFxcXFxcXFxcJHtmaXJzdFBhcnR9XFxcXCR7cGF0aC5zbGljZShsYXN0KX1cXFxcYDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaiAhPT0gbGFzdCkge1xuICAgICAgICAgICAgICAvLyBXZSBtYXRjaGVkIGEgVU5DIHJvb3Qgd2l0aCBsZWZ0b3ZlcnNcblxuICAgICAgICAgICAgICBkZXZpY2UgPSBgXFxcXFxcXFwke2ZpcnN0UGFydH1cXFxcJHtwYXRoLnNsaWNlKGxhc3QsIGopfWA7XG4gICAgICAgICAgICAgIHJvb3RFbmQgPSBqO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcm9vdEVuZCA9IDE7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc1dpbmRvd3NEZXZpY2VSb290KGNvZGUpKSB7XG4gICAgICAvLyBQb3NzaWJsZSBkZXZpY2Ugcm9vdFxuXG4gICAgICBpZiAocGF0aC5jaGFyQ29kZUF0KDEpID09PSBDSEFSX0NPTE9OKSB7XG4gICAgICAgIGRldmljZSA9IHBhdGguc2xpY2UoMCwgMik7XG4gICAgICAgIHJvb3RFbmQgPSAyO1xuICAgICAgICBpZiAobGVuID4gMikge1xuICAgICAgICAgIGlmIChpc1BhdGhTZXBhcmF0b3IocGF0aC5jaGFyQ29kZUF0KDIpKSkge1xuICAgICAgICAgICAgLy8gVHJlYXQgc2VwYXJhdG9yIGZvbGxvd2luZyBkcml2ZSBuYW1lIGFzIGFuIGFic29sdXRlIHBhdGhcbiAgICAgICAgICAgIC8vIGluZGljYXRvclxuICAgICAgICAgICAgaXNBYnNvbHV0ZSA9IHRydWU7XG4gICAgICAgICAgICByb290RW5kID0gMztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNQYXRoU2VwYXJhdG9yKGNvZGUpKSB7XG4gICAgLy8gYHBhdGhgIGNvbnRhaW5zIGp1c3QgYSBwYXRoIHNlcGFyYXRvciwgZXhpdCBlYXJseSB0byBhdm9pZCB1bm5lY2Vzc2FyeVxuICAgIC8vIHdvcmtcbiAgICByZXR1cm4gXCJcXFxcXCI7XG4gIH1cblxuICBsZXQgdGFpbDogc3RyaW5nO1xuICBpZiAocm9vdEVuZCA8IGxlbikge1xuICAgIHRhaWwgPSBub3JtYWxpemVTdHJpbmcoXG4gICAgICBwYXRoLnNsaWNlKHJvb3RFbmQpLFxuICAgICAgIWlzQWJzb2x1dGUsXG4gICAgICBcIlxcXFxcIixcbiAgICAgIGlzUGF0aFNlcGFyYXRvcixcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHRhaWwgPSBcIlwiO1xuICB9XG4gIGlmICh0YWlsLmxlbmd0aCA9PT0gMCAmJiAhaXNBYnNvbHV0ZSkgdGFpbCA9IFwiLlwiO1xuICBpZiAodGFpbC5sZW5ndGggPiAwICYmIGlzUGF0aFNlcGFyYXRvcihwYXRoLmNoYXJDb2RlQXQobGVuIC0gMSkpKSB7XG4gICAgdGFpbCArPSBcIlxcXFxcIjtcbiAgfVxuICBpZiAoZGV2aWNlID09PSB1bmRlZmluZWQpIHtcbiAgICBpZiAoaXNBYnNvbHV0ZSkge1xuICAgICAgaWYgKHRhaWwubGVuZ3RoID4gMCkgcmV0dXJuIGBcXFxcJHt0YWlsfWA7XG4gICAgICBlbHNlIHJldHVybiBcIlxcXFxcIjtcbiAgICB9IGVsc2UgaWYgKHRhaWwubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHRhaWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc0Fic29sdXRlKSB7XG4gICAgaWYgKHRhaWwubGVuZ3RoID4gMCkgcmV0dXJuIGAke2RldmljZX1cXFxcJHt0YWlsfWA7XG4gICAgZWxzZSByZXR1cm4gYCR7ZGV2aWNlfVxcXFxgO1xuICB9IGVsc2UgaWYgKHRhaWwubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBkZXZpY2UgKyB0YWlsO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBkZXZpY2U7XG4gIH1cbn1cblxuLyoqXG4gKiBWZXJpZmllcyB3aGV0aGVyIHBhdGggaXMgYWJzb2x1dGVcbiAqIEBwYXJhbSBwYXRoIHRvIHZlcmlmeVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBYnNvbHV0ZShwYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgYXNzZXJ0UGF0aChwYXRoKTtcbiAgY29uc3QgbGVuID0gcGF0aC5sZW5ndGg7XG4gIGlmIChsZW4gPT09IDApIHJldHVybiBmYWxzZTtcblxuICBjb25zdCBjb2RlID0gcGF0aC5jaGFyQ29kZUF0KDApO1xuICBpZiAoaXNQYXRoU2VwYXJhdG9yKGNvZGUpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSBpZiAoaXNXaW5kb3dzRGV2aWNlUm9vdChjb2RlKSkge1xuICAgIC8vIFBvc3NpYmxlIGRldmljZSByb290XG5cbiAgICBpZiAobGVuID4gMiAmJiBwYXRoLmNoYXJDb2RlQXQoMSkgPT09IENIQVJfQ09MT04pIHtcbiAgICAgIGlmIChpc1BhdGhTZXBhcmF0b3IocGF0aC5jaGFyQ29kZUF0KDIpKSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBKb2luIGFsbCBnaXZlbiBhIHNlcXVlbmNlIG9mIGBwYXRoc2AsdGhlbiBub3JtYWxpemVzIHRoZSByZXN1bHRpbmcgcGF0aC5cbiAqIEBwYXJhbSBwYXRocyB0byBiZSBqb2luZWQgYW5kIG5vcm1hbGl6ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGpvaW4oLi4ucGF0aHM6IHN0cmluZ1tdKTogc3RyaW5nIHtcbiAgY29uc3QgcGF0aHNDb3VudCA9IHBhdGhzLmxlbmd0aDtcbiAgaWYgKHBhdGhzQ291bnQgPT09IDApIHJldHVybiBcIi5cIjtcblxuICBsZXQgam9pbmVkOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIGxldCBmaXJzdFBhcnQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGhzQ291bnQ7ICsraSkge1xuICAgIGNvbnN0IHBhdGggPSBwYXRoc1tpXTtcbiAgICBhc3NlcnRQYXRoKHBhdGgpO1xuICAgIGlmIChwYXRoLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmIChqb2luZWQgPT09IHVuZGVmaW5lZCkgam9pbmVkID0gZmlyc3RQYXJ0ID0gcGF0aDtcbiAgICAgIGVsc2Ugam9pbmVkICs9IGBcXFxcJHtwYXRofWA7XG4gICAgfVxuICB9XG5cbiAgaWYgKGpvaW5lZCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gXCIuXCI7XG5cbiAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlIGpvaW5lZCBwYXRoIGRvZXNuJ3Qgc3RhcnQgd2l0aCB0d28gc2xhc2hlcywgYmVjYXVzZVxuICAvLyBub3JtYWxpemUoKSB3aWxsIG1pc3Rha2UgaXQgZm9yIGFuIFVOQyBwYXRoIHRoZW4uXG4gIC8vXG4gIC8vIFRoaXMgc3RlcCBpcyBza2lwcGVkIHdoZW4gaXQgaXMgdmVyeSBjbGVhciB0aGF0IHRoZSB1c2VyIGFjdHVhbGx5XG4gIC8vIGludGVuZGVkIHRvIHBvaW50IGF0IGFuIFVOQyBwYXRoLiBUaGlzIGlzIGFzc3VtZWQgd2hlbiB0aGUgZmlyc3RcbiAgLy8gbm9uLWVtcHR5IHN0cmluZyBhcmd1bWVudHMgc3RhcnRzIHdpdGggZXhhY3RseSB0d28gc2xhc2hlcyBmb2xsb3dlZCBieVxuICAvLyBhdCBsZWFzdCBvbmUgbW9yZSBub24tc2xhc2ggY2hhcmFjdGVyLlxuICAvL1xuICAvLyBOb3RlIHRoYXQgZm9yIG5vcm1hbGl6ZSgpIHRvIHRyZWF0IGEgcGF0aCBhcyBhbiBVTkMgcGF0aCBpdCBuZWVkcyB0b1xuICAvLyBoYXZlIGF0IGxlYXN0IDIgY29tcG9uZW50cywgc28gd2UgZG9uJ3QgZmlsdGVyIGZvciB0aGF0IGhlcmUuXG4gIC8vIFRoaXMgbWVhbnMgdGhhdCB0aGUgdXNlciBjYW4gdXNlIGpvaW4gdG8gY29uc3RydWN0IFVOQyBwYXRocyBmcm9tXG4gIC8vIGEgc2VydmVyIG5hbWUgYW5kIGEgc2hhcmUgbmFtZTsgZm9yIGV4YW1wbGU6XG4gIC8vICAgcGF0aC5qb2luKCcvL3NlcnZlcicsICdzaGFyZScpIC0+ICdcXFxcXFxcXHNlcnZlclxcXFxzaGFyZVxcXFwnKVxuICBsZXQgbmVlZHNSZXBsYWNlID0gdHJ1ZTtcbiAgbGV0IHNsYXNoQ291bnQgPSAwO1xuICBhc3NlcnQoZmlyc3RQYXJ0ICE9IG51bGwpO1xuICBpZiAoaXNQYXRoU2VwYXJhdG9yKGZpcnN0UGFydC5jaGFyQ29kZUF0KDApKSkge1xuICAgICsrc2xhc2hDb3VudDtcbiAgICBjb25zdCBmaXJzdExlbiA9IGZpcnN0UGFydC5sZW5ndGg7XG4gICAgaWYgKGZpcnN0TGVuID4gMSkge1xuICAgICAgaWYgKGlzUGF0aFNlcGFyYXRvcihmaXJzdFBhcnQuY2hhckNvZGVBdCgxKSkpIHtcbiAgICAgICAgKytzbGFzaENvdW50O1xuICAgICAgICBpZiAoZmlyc3RMZW4gPiAyKSB7XG4gICAgICAgICAgaWYgKGlzUGF0aFNlcGFyYXRvcihmaXJzdFBhcnQuY2hhckNvZGVBdCgyKSkpICsrc2xhc2hDb3VudDtcbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFdlIG1hdGNoZWQgYSBVTkMgcGF0aCBpbiB0aGUgZmlyc3QgcGFydFxuICAgICAgICAgICAgbmVlZHNSZXBsYWNlID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChuZWVkc1JlcGxhY2UpIHtcbiAgICAvLyBGaW5kIGFueSBtb3JlIGNvbnNlY3V0aXZlIHNsYXNoZXMgd2UgbmVlZCB0byByZXBsYWNlXG4gICAgZm9yICg7IHNsYXNoQ291bnQgPCBqb2luZWQubGVuZ3RoOyArK3NsYXNoQ291bnQpIHtcbiAgICAgIGlmICghaXNQYXRoU2VwYXJhdG9yKGpvaW5lZC5jaGFyQ29kZUF0KHNsYXNoQ291bnQpKSkgYnJlYWs7XG4gICAgfVxuXG4gICAgLy8gUmVwbGFjZSB0aGUgc2xhc2hlcyBpZiBuZWVkZWRcbiAgICBpZiAoc2xhc2hDb3VudCA+PSAyKSBqb2luZWQgPSBgXFxcXCR7am9pbmVkLnNsaWNlKHNsYXNoQ291bnQpfWA7XG4gIH1cblxuICByZXR1cm4gbm9ybWFsaXplKGpvaW5lZCk7XG59XG5cbi8qKlxuICogSXQgd2lsbCBzb2x2ZSB0aGUgcmVsYXRpdmUgcGF0aCBmcm9tIGBmcm9tYCB0byBgdG9gLCBmb3IgaW5zdGFuY2U6XG4gKiAgZnJvbSA9ICdDOlxcXFxvcmFuZGVhXFxcXHRlc3RcXFxcYWFhJ1xuICogIHRvID0gJ0M6XFxcXG9yYW5kZWFcXFxcaW1wbFxcXFxiYmInXG4gKiBUaGUgb3V0cHV0IG9mIHRoZSBmdW5jdGlvbiBzaG91bGQgYmU6ICcuLlxcXFwuLlxcXFxpbXBsXFxcXGJiYidcbiAqIEBwYXJhbSBmcm9tIHJlbGF0aXZlIHBhdGhcbiAqIEBwYXJhbSB0byByZWxhdGl2ZSBwYXRoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWxhdGl2ZShmcm9tOiBzdHJpbmcsIHRvOiBzdHJpbmcpOiBzdHJpbmcge1xuICBhc3NlcnRQYXRoKGZyb20pO1xuICBhc3NlcnRQYXRoKHRvKTtcblxuICBpZiAoZnJvbSA9PT0gdG8pIHJldHVybiBcIlwiO1xuXG4gIGNvbnN0IGZyb21PcmlnID0gcmVzb2x2ZShmcm9tKTtcbiAgY29uc3QgdG9PcmlnID0gcmVzb2x2ZSh0byk7XG5cbiAgaWYgKGZyb21PcmlnID09PSB0b09yaWcpIHJldHVybiBcIlwiO1xuXG4gIGZyb20gPSBmcm9tT3JpZy50b0xvd2VyQ2FzZSgpO1xuICB0byA9IHRvT3JpZy50b0xvd2VyQ2FzZSgpO1xuXG4gIGlmIChmcm9tID09PSB0bykgcmV0dXJuIFwiXCI7XG5cbiAgLy8gVHJpbSBhbnkgbGVhZGluZyBiYWNrc2xhc2hlc1xuICBsZXQgZnJvbVN0YXJ0ID0gMDtcbiAgbGV0IGZyb21FbmQgPSBmcm9tLmxlbmd0aDtcbiAgZm9yICg7IGZyb21TdGFydCA8IGZyb21FbmQ7ICsrZnJvbVN0YXJ0KSB7XG4gICAgaWYgKGZyb20uY2hhckNvZGVBdChmcm9tU3RhcnQpICE9PSBDSEFSX0JBQ0tXQVJEX1NMQVNIKSBicmVhaztcbiAgfVxuICAvLyBUcmltIHRyYWlsaW5nIGJhY2tzbGFzaGVzIChhcHBsaWNhYmxlIHRvIFVOQyBwYXRocyBvbmx5KVxuICBmb3IgKDsgZnJvbUVuZCAtIDEgPiBmcm9tU3RhcnQ7IC0tZnJvbUVuZCkge1xuICAgIGlmIChmcm9tLmNoYXJDb2RlQXQoZnJvbUVuZCAtIDEpICE9PSBDSEFSX0JBQ0tXQVJEX1NMQVNIKSBicmVhaztcbiAgfVxuICBjb25zdCBmcm9tTGVuID0gZnJvbUVuZCAtIGZyb21TdGFydDtcblxuICAvLyBUcmltIGFueSBsZWFkaW5nIGJhY2tzbGFzaGVzXG4gIGxldCB0b1N0YXJ0ID0gMDtcbiAgbGV0IHRvRW5kID0gdG8ubGVuZ3RoO1xuICBmb3IgKDsgdG9TdGFydCA8IHRvRW5kOyArK3RvU3RhcnQpIHtcbiAgICBpZiAodG8uY2hhckNvZGVBdCh0b1N0YXJ0KSAhPT0gQ0hBUl9CQUNLV0FSRF9TTEFTSCkgYnJlYWs7XG4gIH1cbiAgLy8gVHJpbSB0cmFpbGluZyBiYWNrc2xhc2hlcyAoYXBwbGljYWJsZSB0byBVTkMgcGF0aHMgb25seSlcbiAgZm9yICg7IHRvRW5kIC0gMSA+IHRvU3RhcnQ7IC0tdG9FbmQpIHtcbiAgICBpZiAodG8uY2hhckNvZGVBdCh0b0VuZCAtIDEpICE9PSBDSEFSX0JBQ0tXQVJEX1NMQVNIKSBicmVhaztcbiAgfVxuICBjb25zdCB0b0xlbiA9IHRvRW5kIC0gdG9TdGFydDtcblxuICAvLyBDb21wYXJlIHBhdGhzIHRvIGZpbmQgdGhlIGxvbmdlc3QgY29tbW9uIHBhdGggZnJvbSByb290XG4gIGNvbnN0IGxlbmd0aCA9IGZyb21MZW4gPCB0b0xlbiA/IGZyb21MZW4gOiB0b0xlbjtcbiAgbGV0IGxhc3RDb21tb25TZXAgPSAtMTtcbiAgbGV0IGkgPSAwO1xuICBmb3IgKDsgaSA8PSBsZW5ndGg7ICsraSkge1xuICAgIGlmIChpID09PSBsZW5ndGgpIHtcbiAgICAgIGlmICh0b0xlbiA+IGxlbmd0aCkge1xuICAgICAgICBpZiAodG8uY2hhckNvZGVBdCh0b1N0YXJ0ICsgaSkgPT09IENIQVJfQkFDS1dBUkRfU0xBU0gpIHtcbiAgICAgICAgICAvLyBXZSBnZXQgaGVyZSBpZiBgZnJvbWAgaXMgdGhlIGV4YWN0IGJhc2UgcGF0aCBmb3IgYHRvYC5cbiAgICAgICAgICAvLyBGb3IgZXhhbXBsZTogZnJvbT0nQzpcXFxcZm9vXFxcXGJhcic7IHRvPSdDOlxcXFxmb29cXFxcYmFyXFxcXGJheidcbiAgICAgICAgICByZXR1cm4gdG9PcmlnLnNsaWNlKHRvU3RhcnQgKyBpICsgMSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaSA9PT0gMikge1xuICAgICAgICAgIC8vIFdlIGdldCBoZXJlIGlmIGBmcm9tYCBpcyB0aGUgZGV2aWNlIHJvb3QuXG4gICAgICAgICAgLy8gRm9yIGV4YW1wbGU6IGZyb209J0M6XFxcXCc7IHRvPSdDOlxcXFxmb28nXG4gICAgICAgICAgcmV0dXJuIHRvT3JpZy5zbGljZSh0b1N0YXJ0ICsgaSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChmcm9tTGVuID4gbGVuZ3RoKSB7XG4gICAgICAgIGlmIChmcm9tLmNoYXJDb2RlQXQoZnJvbVN0YXJ0ICsgaSkgPT09IENIQVJfQkFDS1dBUkRfU0xBU0gpIHtcbiAgICAgICAgICAvLyBXZSBnZXQgaGVyZSBpZiBgdG9gIGlzIHRoZSBleGFjdCBiYXNlIHBhdGggZm9yIGBmcm9tYC5cbiAgICAgICAgICAvLyBGb3IgZXhhbXBsZTogZnJvbT0nQzpcXFxcZm9vXFxcXGJhcic7IHRvPSdDOlxcXFxmb28nXG4gICAgICAgICAgbGFzdENvbW1vblNlcCA9IGk7XG4gICAgICAgIH0gZWxzZSBpZiAoaSA9PT0gMikge1xuICAgICAgICAgIC8vIFdlIGdldCBoZXJlIGlmIGB0b2AgaXMgdGhlIGRldmljZSByb290LlxuICAgICAgICAgIC8vIEZvciBleGFtcGxlOiBmcm9tPSdDOlxcXFxmb29cXFxcYmFyJzsgdG89J0M6XFxcXCdcbiAgICAgICAgICBsYXN0Q29tbW9uU2VwID0gMztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNvbnN0IGZyb21Db2RlID0gZnJvbS5jaGFyQ29kZUF0KGZyb21TdGFydCArIGkpO1xuICAgIGNvbnN0IHRvQ29kZSA9IHRvLmNoYXJDb2RlQXQodG9TdGFydCArIGkpO1xuICAgIGlmIChmcm9tQ29kZSAhPT0gdG9Db2RlKSBicmVhaztcbiAgICBlbHNlIGlmIChmcm9tQ29kZSA9PT0gQ0hBUl9CQUNLV0FSRF9TTEFTSCkgbGFzdENvbW1vblNlcCA9IGk7XG4gIH1cblxuICAvLyBXZSBmb3VuZCBhIG1pc21hdGNoIGJlZm9yZSB0aGUgZmlyc3QgY29tbW9uIHBhdGggc2VwYXJhdG9yIHdhcyBzZWVuLCBzb1xuICAvLyByZXR1cm4gdGhlIG9yaWdpbmFsIGB0b2AuXG4gIGlmIChpICE9PSBsZW5ndGggJiYgbGFzdENvbW1vblNlcCA9PT0gLTEpIHtcbiAgICByZXR1cm4gdG9PcmlnO1xuICB9XG5cbiAgbGV0IG91dCA9IFwiXCI7XG4gIGlmIChsYXN0Q29tbW9uU2VwID09PSAtMSkgbGFzdENvbW1vblNlcCA9IDA7XG4gIC8vIEdlbmVyYXRlIHRoZSByZWxhdGl2ZSBwYXRoIGJhc2VkIG9uIHRoZSBwYXRoIGRpZmZlcmVuY2UgYmV0d2VlbiBgdG9gIGFuZFxuICAvLyBgZnJvbWBcbiAgZm9yIChpID0gZnJvbVN0YXJ0ICsgbGFzdENvbW1vblNlcCArIDE7IGkgPD0gZnJvbUVuZDsgKytpKSB7XG4gICAgaWYgKGkgPT09IGZyb21FbmQgfHwgZnJvbS5jaGFyQ29kZUF0KGkpID09PSBDSEFSX0JBQ0tXQVJEX1NMQVNIKSB7XG4gICAgICBpZiAob3V0Lmxlbmd0aCA9PT0gMCkgb3V0ICs9IFwiLi5cIjtcbiAgICAgIGVsc2Ugb3V0ICs9IFwiXFxcXC4uXCI7XG4gICAgfVxuICB9XG5cbiAgLy8gTGFzdGx5LCBhcHBlbmQgdGhlIHJlc3Qgb2YgdGhlIGRlc3RpbmF0aW9uIChgdG9gKSBwYXRoIHRoYXQgY29tZXMgYWZ0ZXJcbiAgLy8gdGhlIGNvbW1vbiBwYXRoIHBhcnRzXG4gIGlmIChvdXQubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBvdXQgKyB0b09yaWcuc2xpY2UodG9TdGFydCArIGxhc3RDb21tb25TZXAsIHRvRW5kKTtcbiAgfSBlbHNlIHtcbiAgICB0b1N0YXJ0ICs9IGxhc3RDb21tb25TZXA7XG4gICAgaWYgKHRvT3JpZy5jaGFyQ29kZUF0KHRvU3RhcnQpID09PSBDSEFSX0JBQ0tXQVJEX1NMQVNIKSArK3RvU3RhcnQ7XG4gICAgcmV0dXJuIHRvT3JpZy5zbGljZSh0b1N0YXJ0LCB0b0VuZCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXNvbHZlcyBwYXRoIHRvIGEgbmFtZXNwYWNlIHBhdGhcbiAqIEBwYXJhbSBwYXRoIHRvIHJlc29sdmUgdG8gbmFtZXNwYWNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b05hbWVzcGFjZWRQYXRoKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gIC8vIE5vdGU6IHRoaXMgd2lsbCAqcHJvYmFibHkqIHRocm93IHNvbWV3aGVyZS5cbiAgaWYgKHR5cGVvZiBwYXRoICE9PSBcInN0cmluZ1wiKSByZXR1cm4gcGF0aDtcbiAgaWYgKHBhdGgubGVuZ3RoID09PSAwKSByZXR1cm4gXCJcIjtcblxuICBjb25zdCByZXNvbHZlZFBhdGggPSByZXNvbHZlKHBhdGgpO1xuXG4gIGlmIChyZXNvbHZlZFBhdGgubGVuZ3RoID49IDMpIHtcbiAgICBpZiAocmVzb2x2ZWRQYXRoLmNoYXJDb2RlQXQoMCkgPT09IENIQVJfQkFDS1dBUkRfU0xBU0gpIHtcbiAgICAgIC8vIFBvc3NpYmxlIFVOQyByb290XG5cbiAgICAgIGlmIChyZXNvbHZlZFBhdGguY2hhckNvZGVBdCgxKSA9PT0gQ0hBUl9CQUNLV0FSRF9TTEFTSCkge1xuICAgICAgICBjb25zdCBjb2RlID0gcmVzb2x2ZWRQYXRoLmNoYXJDb2RlQXQoMik7XG4gICAgICAgIGlmIChjb2RlICE9PSBDSEFSX1FVRVNUSU9OX01BUksgJiYgY29kZSAhPT0gQ0hBUl9ET1QpIHtcbiAgICAgICAgICAvLyBNYXRjaGVkIG5vbi1sb25nIFVOQyByb290LCBjb252ZXJ0IHRoZSBwYXRoIHRvIGEgbG9uZyBVTkMgcGF0aFxuICAgICAgICAgIHJldHVybiBgXFxcXFxcXFw/XFxcXFVOQ1xcXFwke3Jlc29sdmVkUGF0aC5zbGljZSgyKX1gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc1dpbmRvd3NEZXZpY2VSb290KHJlc29sdmVkUGF0aC5jaGFyQ29kZUF0KDApKSkge1xuICAgICAgLy8gUG9zc2libGUgZGV2aWNlIHJvb3RcblxuICAgICAgaWYgKFxuICAgICAgICByZXNvbHZlZFBhdGguY2hhckNvZGVBdCgxKSA9PT0gQ0hBUl9DT0xPTiAmJlxuICAgICAgICByZXNvbHZlZFBhdGguY2hhckNvZGVBdCgyKSA9PT0gQ0hBUl9CQUNLV0FSRF9TTEFTSFxuICAgICAgKSB7XG4gICAgICAgIC8vIE1hdGNoZWQgZGV2aWNlIHJvb3QsIGNvbnZlcnQgdGhlIHBhdGggdG8gYSBsb25nIFVOQyBwYXRoXG4gICAgICAgIHJldHVybiBgXFxcXFxcXFw/XFxcXCR7cmVzb2x2ZWRQYXRofWA7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHBhdGg7XG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSBkaXJlY3RvcnkgcGF0aCBvZiBhIGBwYXRoYC5cbiAqIEBwYXJhbSBwYXRoIHRvIGRldGVybWluZSB0aGUgZGlyZWN0b3J5IHBhdGggZm9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXJuYW1lKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gIGFzc2VydFBhdGgocGF0aCk7XG4gIGNvbnN0IGxlbiA9IHBhdGgubGVuZ3RoO1xuICBpZiAobGVuID09PSAwKSByZXR1cm4gXCIuXCI7XG4gIGxldCByb290RW5kID0gLTE7XG4gIGxldCBlbmQgPSAtMTtcbiAgbGV0IG1hdGNoZWRTbGFzaCA9IHRydWU7XG4gIGxldCBvZmZzZXQgPSAwO1xuICBjb25zdCBjb2RlID0gcGF0aC5jaGFyQ29kZUF0KDApO1xuXG4gIC8vIFRyeSB0byBtYXRjaCBhIHJvb3RcbiAgaWYgKGxlbiA+IDEpIHtcbiAgICBpZiAoaXNQYXRoU2VwYXJhdG9yKGNvZGUpKSB7XG4gICAgICAvLyBQb3NzaWJsZSBVTkMgcm9vdFxuXG4gICAgICByb290RW5kID0gb2Zmc2V0ID0gMTtcblxuICAgICAgaWYgKGlzUGF0aFNlcGFyYXRvcihwYXRoLmNoYXJDb2RlQXQoMSkpKSB7XG4gICAgICAgIC8vIE1hdGNoZWQgZG91YmxlIHBhdGggc2VwYXJhdG9yIGF0IGJlZ2lubmluZ1xuICAgICAgICBsZXQgaiA9IDI7XG4gICAgICAgIGxldCBsYXN0ID0gajtcbiAgICAgICAgLy8gTWF0Y2ggMSBvciBtb3JlIG5vbi1wYXRoIHNlcGFyYXRvcnNcbiAgICAgICAgZm9yICg7IGogPCBsZW47ICsraikge1xuICAgICAgICAgIGlmIChpc1BhdGhTZXBhcmF0b3IocGF0aC5jaGFyQ29kZUF0KGopKSkgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGogPCBsZW4gJiYgaiAhPT0gbGFzdCkge1xuICAgICAgICAgIC8vIE1hdGNoZWQhXG4gICAgICAgICAgbGFzdCA9IGo7XG4gICAgICAgICAgLy8gTWF0Y2ggMSBvciBtb3JlIHBhdGggc2VwYXJhdG9yc1xuICAgICAgICAgIGZvciAoOyBqIDwgbGVuOyArK2opIHtcbiAgICAgICAgICAgIGlmICghaXNQYXRoU2VwYXJhdG9yKHBhdGguY2hhckNvZGVBdChqKSkpIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaiA8IGxlbiAmJiBqICE9PSBsYXN0KSB7XG4gICAgICAgICAgICAvLyBNYXRjaGVkIVxuICAgICAgICAgICAgbGFzdCA9IGo7XG4gICAgICAgICAgICAvLyBNYXRjaCAxIG9yIG1vcmUgbm9uLXBhdGggc2VwYXJhdG9yc1xuICAgICAgICAgICAgZm9yICg7IGogPCBsZW47ICsraikge1xuICAgICAgICAgICAgICBpZiAoaXNQYXRoU2VwYXJhdG9yKHBhdGguY2hhckNvZGVBdChqKSkpIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGogPT09IGxlbikge1xuICAgICAgICAgICAgICAvLyBXZSBtYXRjaGVkIGEgVU5DIHJvb3Qgb25seVxuICAgICAgICAgICAgICByZXR1cm4gcGF0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChqICE9PSBsYXN0KSB7XG4gICAgICAgICAgICAgIC8vIFdlIG1hdGNoZWQgYSBVTkMgcm9vdCB3aXRoIGxlZnRvdmVyc1xuXG4gICAgICAgICAgICAgIC8vIE9mZnNldCBieSAxIHRvIGluY2x1ZGUgdGhlIHNlcGFyYXRvciBhZnRlciB0aGUgVU5DIHJvb3QgdG9cbiAgICAgICAgICAgICAgLy8gdHJlYXQgaXQgYXMgYSBcIm5vcm1hbCByb290XCIgb24gdG9wIG9mIGEgKFVOQykgcm9vdFxuICAgICAgICAgICAgICByb290RW5kID0gb2Zmc2V0ID0gaiArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc1dpbmRvd3NEZXZpY2VSb290KGNvZGUpKSB7XG4gICAgICAvLyBQb3NzaWJsZSBkZXZpY2Ugcm9vdFxuXG4gICAgICBpZiAocGF0aC5jaGFyQ29kZUF0KDEpID09PSBDSEFSX0NPTE9OKSB7XG4gICAgICAgIHJvb3RFbmQgPSBvZmZzZXQgPSAyO1xuICAgICAgICBpZiAobGVuID4gMikge1xuICAgICAgICAgIGlmIChpc1BhdGhTZXBhcmF0b3IocGF0aC5jaGFyQ29kZUF0KDIpKSkgcm9vdEVuZCA9IG9mZnNldCA9IDM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNQYXRoU2VwYXJhdG9yKGNvZGUpKSB7XG4gICAgLy8gYHBhdGhgIGNvbnRhaW5zIGp1c3QgYSBwYXRoIHNlcGFyYXRvciwgZXhpdCBlYXJseSB0byBhdm9pZFxuICAgIC8vIHVubmVjZXNzYXJ5IHdvcmtcbiAgICByZXR1cm4gcGF0aDtcbiAgfVxuXG4gIGZvciAobGV0IGkgPSBsZW4gLSAxOyBpID49IG9mZnNldDsgLS1pKSB7XG4gICAgaWYgKGlzUGF0aFNlcGFyYXRvcihwYXRoLmNoYXJDb2RlQXQoaSkpKSB7XG4gICAgICBpZiAoIW1hdGNoZWRTbGFzaCkge1xuICAgICAgICBlbmQgPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gV2Ugc2F3IHRoZSBmaXJzdCBub24tcGF0aCBzZXBhcmF0b3JcbiAgICAgIG1hdGNoZWRTbGFzaCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGlmIChlbmQgPT09IC0xKSB7XG4gICAgaWYgKHJvb3RFbmQgPT09IC0xKSByZXR1cm4gXCIuXCI7XG4gICAgZWxzZSBlbmQgPSByb290RW5kO1xuICB9XG4gIHJldHVybiBwYXRoLnNsaWNlKDAsIGVuZCk7XG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSBsYXN0IHBvcnRpb24gb2YgYSBgcGF0aGAuIFRyYWlsaW5nIGRpcmVjdG9yeSBzZXBhcmF0b3JzIGFyZSBpZ25vcmVkLlxuICogQHBhcmFtIHBhdGggdG8gcHJvY2Vzc1xuICogQHBhcmFtIGV4dCBvZiBwYXRoIGRpcmVjdG9yeVxuICovXG5leHBvcnQgZnVuY3Rpb24gYmFzZW5hbWUocGF0aDogc3RyaW5nLCBleHQgPSBcIlwiKTogc3RyaW5nIHtcbiAgaWYgKGV4dCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBleHQgIT09IFwic3RyaW5nXCIpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImV4dFwiIGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgfVxuXG4gIGFzc2VydFBhdGgocGF0aCk7XG5cbiAgbGV0IHN0YXJ0ID0gMDtcbiAgbGV0IGVuZCA9IC0xO1xuICBsZXQgbWF0Y2hlZFNsYXNoID0gdHJ1ZTtcbiAgbGV0IGk6IG51bWJlcjtcblxuICAvLyBDaGVjayBmb3IgYSBkcml2ZSBsZXR0ZXIgcHJlZml4IHNvIGFzIG5vdCB0byBtaXN0YWtlIHRoZSBmb2xsb3dpbmdcbiAgLy8gcGF0aCBzZXBhcmF0b3IgYXMgYW4gZXh0cmEgc2VwYXJhdG9yIGF0IHRoZSBlbmQgb2YgdGhlIHBhdGggdGhhdCBjYW4gYmVcbiAgLy8gZGlzcmVnYXJkZWRcbiAgaWYgKHBhdGgubGVuZ3RoID49IDIpIHtcbiAgICBjb25zdCBkcml2ZSA9IHBhdGguY2hhckNvZGVBdCgwKTtcbiAgICBpZiAoaXNXaW5kb3dzRGV2aWNlUm9vdChkcml2ZSkpIHtcbiAgICAgIGlmIChwYXRoLmNoYXJDb2RlQXQoMSkgPT09IENIQVJfQ09MT04pIHN0YXJ0ID0gMjtcbiAgICB9XG4gIH1cblxuICBpZiAoZXh0ICE9PSB1bmRlZmluZWQgJiYgZXh0Lmxlbmd0aCA+IDAgJiYgZXh0Lmxlbmd0aCA8PSBwYXRoLmxlbmd0aCkge1xuICAgIGlmIChleHQubGVuZ3RoID09PSBwYXRoLmxlbmd0aCAmJiBleHQgPT09IHBhdGgpIHJldHVybiBcIlwiO1xuICAgIGxldCBleHRJZHggPSBleHQubGVuZ3RoIC0gMTtcbiAgICBsZXQgZmlyc3ROb25TbGFzaEVuZCA9IC0xO1xuICAgIGZvciAoaSA9IHBhdGgubGVuZ3RoIC0gMTsgaSA+PSBzdGFydDsgLS1pKSB7XG4gICAgICBjb25zdCBjb2RlID0gcGF0aC5jaGFyQ29kZUF0KGkpO1xuICAgICAgaWYgKGlzUGF0aFNlcGFyYXRvcihjb2RlKSkge1xuICAgICAgICAvLyBJZiB3ZSByZWFjaGVkIGEgcGF0aCBzZXBhcmF0b3IgdGhhdCB3YXMgbm90IHBhcnQgb2YgYSBzZXQgb2YgcGF0aFxuICAgICAgICAvLyBzZXBhcmF0b3JzIGF0IHRoZSBlbmQgb2YgdGhlIHN0cmluZywgc3RvcCBub3dcbiAgICAgICAgaWYgKCFtYXRjaGVkU2xhc2gpIHtcbiAgICAgICAgICBzdGFydCA9IGkgKyAxO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZmlyc3ROb25TbGFzaEVuZCA9PT0gLTEpIHtcbiAgICAgICAgICAvLyBXZSBzYXcgdGhlIGZpcnN0IG5vbi1wYXRoIHNlcGFyYXRvciwgcmVtZW1iZXIgdGhpcyBpbmRleCBpbiBjYXNlXG4gICAgICAgICAgLy8gd2UgbmVlZCBpdCBpZiB0aGUgZXh0ZW5zaW9uIGVuZHMgdXAgbm90IG1hdGNoaW5nXG4gICAgICAgICAgbWF0Y2hlZFNsYXNoID0gZmFsc2U7XG4gICAgICAgICAgZmlyc3ROb25TbGFzaEVuZCA9IGkgKyAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChleHRJZHggPj0gMCkge1xuICAgICAgICAgIC8vIFRyeSB0byBtYXRjaCB0aGUgZXhwbGljaXQgZXh0ZW5zaW9uXG4gICAgICAgICAgaWYgKGNvZGUgPT09IGV4dC5jaGFyQ29kZUF0KGV4dElkeCkpIHtcbiAgICAgICAgICAgIGlmICgtLWV4dElkeCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgLy8gV2UgbWF0Y2hlZCB0aGUgZXh0ZW5zaW9uLCBzbyBtYXJrIHRoaXMgYXMgdGhlIGVuZCBvZiBvdXIgcGF0aFxuICAgICAgICAgICAgICAvLyBjb21wb25lbnRcbiAgICAgICAgICAgICAgZW5kID0gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRXh0ZW5zaW9uIGRvZXMgbm90IG1hdGNoLCBzbyBvdXIgcmVzdWx0IGlzIHRoZSBlbnRpcmUgcGF0aFxuICAgICAgICAgICAgLy8gY29tcG9uZW50XG4gICAgICAgICAgICBleHRJZHggPSAtMTtcbiAgICAgICAgICAgIGVuZCA9IGZpcnN0Tm9uU2xhc2hFbmQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN0YXJ0ID09PSBlbmQpIGVuZCA9IGZpcnN0Tm9uU2xhc2hFbmQ7XG4gICAgZWxzZSBpZiAoZW5kID09PSAtMSkgZW5kID0gcGF0aC5sZW5ndGg7XG4gICAgcmV0dXJuIHBhdGguc2xpY2Uoc3RhcnQsIGVuZCk7XG4gIH0gZWxzZSB7XG4gICAgZm9yIChpID0gcGF0aC5sZW5ndGggLSAxOyBpID49IHN0YXJ0OyAtLWkpIHtcbiAgICAgIGlmIChpc1BhdGhTZXBhcmF0b3IocGF0aC5jaGFyQ29kZUF0KGkpKSkge1xuICAgICAgICAvLyBJZiB3ZSByZWFjaGVkIGEgcGF0aCBzZXBhcmF0b3IgdGhhdCB3YXMgbm90IHBhcnQgb2YgYSBzZXQgb2YgcGF0aFxuICAgICAgICAvLyBzZXBhcmF0b3JzIGF0IHRoZSBlbmQgb2YgdGhlIHN0cmluZywgc3RvcCBub3dcbiAgICAgICAgaWYgKCFtYXRjaGVkU2xhc2gpIHtcbiAgICAgICAgICBzdGFydCA9IGkgKyAxO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVuZCA9PT0gLTEpIHtcbiAgICAgICAgLy8gV2Ugc2F3IHRoZSBmaXJzdCBub24tcGF0aCBzZXBhcmF0b3IsIG1hcmsgdGhpcyBhcyB0aGUgZW5kIG9mIG91clxuICAgICAgICAvLyBwYXRoIGNvbXBvbmVudFxuICAgICAgICBtYXRjaGVkU2xhc2ggPSBmYWxzZTtcbiAgICAgICAgZW5kID0gaSArIDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGVuZCA9PT0gLTEpIHJldHVybiBcIlwiO1xuICAgIHJldHVybiBwYXRoLnNsaWNlKHN0YXJ0LCBlbmQpO1xuICB9XG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSBleHRlbnNpb24gb2YgdGhlIGBwYXRoYCB3aXRoIGxlYWRpbmcgcGVyaW9kLlxuICogQHBhcmFtIHBhdGggd2l0aCBleHRlbnNpb25cbiAqIEByZXR1cm5zIGV4dGVuc2lvbiAoZXguIGZvciBgZmlsZS50c2AgcmV0dXJucyBgLnRzYClcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dG5hbWUocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgYXNzZXJ0UGF0aChwYXRoKTtcbiAgbGV0IHN0YXJ0ID0gMDtcbiAgbGV0IHN0YXJ0RG90ID0gLTE7XG4gIGxldCBzdGFydFBhcnQgPSAwO1xuICBsZXQgZW5kID0gLTE7XG4gIGxldCBtYXRjaGVkU2xhc2ggPSB0cnVlO1xuICAvLyBUcmFjayB0aGUgc3RhdGUgb2YgY2hhcmFjdGVycyAoaWYgYW55KSB3ZSBzZWUgYmVmb3JlIG91ciBmaXJzdCBkb3QgYW5kXG4gIC8vIGFmdGVyIGFueSBwYXRoIHNlcGFyYXRvciB3ZSBmaW5kXG4gIGxldCBwcmVEb3RTdGF0ZSA9IDA7XG5cbiAgLy8gQ2hlY2sgZm9yIGEgZHJpdmUgbGV0dGVyIHByZWZpeCBzbyBhcyBub3QgdG8gbWlzdGFrZSB0aGUgZm9sbG93aW5nXG4gIC8vIHBhdGggc2VwYXJhdG9yIGFzIGFuIGV4dHJhIHNlcGFyYXRvciBhdCB0aGUgZW5kIG9mIHRoZSBwYXRoIHRoYXQgY2FuIGJlXG4gIC8vIGRpc3JlZ2FyZGVkXG5cbiAgaWYgKFxuICAgIHBhdGgubGVuZ3RoID49IDIgJiZcbiAgICBwYXRoLmNoYXJDb2RlQXQoMSkgPT09IENIQVJfQ09MT04gJiZcbiAgICBpc1dpbmRvd3NEZXZpY2VSb290KHBhdGguY2hhckNvZGVBdCgwKSlcbiAgKSB7XG4gICAgc3RhcnQgPSBzdGFydFBhcnQgPSAyO1xuICB9XG5cbiAgZm9yIChsZXQgaSA9IHBhdGgubGVuZ3RoIC0gMTsgaSA+PSBzdGFydDsgLS1pKSB7XG4gICAgY29uc3QgY29kZSA9IHBhdGguY2hhckNvZGVBdChpKTtcbiAgICBpZiAoaXNQYXRoU2VwYXJhdG9yKGNvZGUpKSB7XG4gICAgICAvLyBJZiB3ZSByZWFjaGVkIGEgcGF0aCBzZXBhcmF0b3IgdGhhdCB3YXMgbm90IHBhcnQgb2YgYSBzZXQgb2YgcGF0aFxuICAgICAgLy8gc2VwYXJhdG9ycyBhdCB0aGUgZW5kIG9mIHRoZSBzdHJpbmcsIHN0b3Agbm93XG4gICAgICBpZiAoIW1hdGNoZWRTbGFzaCkge1xuICAgICAgICBzdGFydFBhcnQgPSBpICsgMTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGVuZCA9PT0gLTEpIHtcbiAgICAgIC8vIFdlIHNhdyB0aGUgZmlyc3Qgbm9uLXBhdGggc2VwYXJhdG9yLCBtYXJrIHRoaXMgYXMgdGhlIGVuZCBvZiBvdXJcbiAgICAgIC8vIGV4dGVuc2lvblxuICAgICAgbWF0Y2hlZFNsYXNoID0gZmFsc2U7XG4gICAgICBlbmQgPSBpICsgMTtcbiAgICB9XG4gICAgaWYgKGNvZGUgPT09IENIQVJfRE9UKSB7XG4gICAgICAvLyBJZiB0aGlzIGlzIG91ciBmaXJzdCBkb3QsIG1hcmsgaXQgYXMgdGhlIHN0YXJ0IG9mIG91ciBleHRlbnNpb25cbiAgICAgIGlmIChzdGFydERvdCA9PT0gLTEpIHN0YXJ0RG90ID0gaTtcbiAgICAgIGVsc2UgaWYgKHByZURvdFN0YXRlICE9PSAxKSBwcmVEb3RTdGF0ZSA9IDE7XG4gICAgfSBlbHNlIGlmIChzdGFydERvdCAhPT0gLTEpIHtcbiAgICAgIC8vIFdlIHNhdyBhIG5vbi1kb3QgYW5kIG5vbi1wYXRoIHNlcGFyYXRvciBiZWZvcmUgb3VyIGRvdCwgc28gd2Ugc2hvdWxkXG4gICAgICAvLyBoYXZlIGEgZ29vZCBjaGFuY2UgYXQgaGF2aW5nIGEgbm9uLWVtcHR5IGV4dGVuc2lvblxuICAgICAgcHJlRG90U3RhdGUgPSAtMTtcbiAgICB9XG4gIH1cblxuICBpZiAoXG4gICAgc3RhcnREb3QgPT09IC0xIHx8XG4gICAgZW5kID09PSAtMSB8fFxuICAgIC8vIFdlIHNhdyBhIG5vbi1kb3QgY2hhcmFjdGVyIGltbWVkaWF0ZWx5IGJlZm9yZSB0aGUgZG90XG4gICAgcHJlRG90U3RhdGUgPT09IDAgfHxcbiAgICAvLyBUaGUgKHJpZ2h0LW1vc3QpIHRyaW1tZWQgcGF0aCBjb21wb25lbnQgaXMgZXhhY3RseSAnLi4nXG4gICAgKHByZURvdFN0YXRlID09PSAxICYmIHN0YXJ0RG90ID09PSBlbmQgLSAxICYmIHN0YXJ0RG90ID09PSBzdGFydFBhcnQgKyAxKVxuICApIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuICByZXR1cm4gcGF0aC5zbGljZShzdGFydERvdCwgZW5kKTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBhIHBhdGggZnJvbSBgRm9ybWF0SW5wdXRQYXRoT2JqZWN0YCBvYmplY3QuXG4gKiBAcGFyYW0gcGF0aE9iamVjdCB3aXRoIHBhdGhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdChwYXRoT2JqZWN0OiBGb3JtYXRJbnB1dFBhdGhPYmplY3QpOiBzdHJpbmcge1xuICBpZiAocGF0aE9iamVjdCA9PT0gbnVsbCB8fCB0eXBlb2YgcGF0aE9iamVjdCAhPT0gXCJvYmplY3RcIikge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICBgVGhlIFwicGF0aE9iamVjdFwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBPYmplY3QuIFJlY2VpdmVkIHR5cGUgJHt0eXBlb2YgcGF0aE9iamVjdH1gLFxuICAgICk7XG4gIH1cbiAgcmV0dXJuIF9mb3JtYXQoXCJcXFxcXCIsIHBhdGhPYmplY3QpO1xufVxuXG4vKipcbiAqIFJldHVybiBhIGBQYXJzZWRQYXRoYCBvYmplY3Qgb2YgdGhlIGBwYXRoYC5cbiAqIEBwYXJhbSBwYXRoIHRvIHByb2Nlc3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlKHBhdGg6IHN0cmluZyk6IFBhcnNlZFBhdGgge1xuICBhc3NlcnRQYXRoKHBhdGgpO1xuXG4gIGNvbnN0IHJldDogUGFyc2VkUGF0aCA9IHsgcm9vdDogXCJcIiwgZGlyOiBcIlwiLCBiYXNlOiBcIlwiLCBleHQ6IFwiXCIsIG5hbWU6IFwiXCIgfTtcblxuICBjb25zdCBsZW4gPSBwYXRoLmxlbmd0aDtcbiAgaWYgKGxlbiA9PT0gMCkgcmV0dXJuIHJldDtcblxuICBsZXQgcm9vdEVuZCA9IDA7XG4gIGxldCBjb2RlID0gcGF0aC5jaGFyQ29kZUF0KDApO1xuXG4gIC8vIFRyeSB0byBtYXRjaCBhIHJvb3RcbiAgaWYgKGxlbiA+IDEpIHtcbiAgICBpZiAoaXNQYXRoU2VwYXJhdG9yKGNvZGUpKSB7XG4gICAgICAvLyBQb3NzaWJsZSBVTkMgcm9vdFxuXG4gICAgICByb290RW5kID0gMTtcbiAgICAgIGlmIChpc1BhdGhTZXBhcmF0b3IocGF0aC5jaGFyQ29kZUF0KDEpKSkge1xuICAgICAgICAvLyBNYXRjaGVkIGRvdWJsZSBwYXRoIHNlcGFyYXRvciBhdCBiZWdpbm5pbmdcbiAgICAgICAgbGV0IGogPSAyO1xuICAgICAgICBsZXQgbGFzdCA9IGo7XG4gICAgICAgIC8vIE1hdGNoIDEgb3IgbW9yZSBub24tcGF0aCBzZXBhcmF0b3JzXG4gICAgICAgIGZvciAoOyBqIDwgbGVuOyArK2opIHtcbiAgICAgICAgICBpZiAoaXNQYXRoU2VwYXJhdG9yKHBhdGguY2hhckNvZGVBdChqKSkpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChqIDwgbGVuICYmIGogIT09IGxhc3QpIHtcbiAgICAgICAgICAvLyBNYXRjaGVkIVxuICAgICAgICAgIGxhc3QgPSBqO1xuICAgICAgICAgIC8vIE1hdGNoIDEgb3IgbW9yZSBwYXRoIHNlcGFyYXRvcnNcbiAgICAgICAgICBmb3IgKDsgaiA8IGxlbjsgKytqKSB7XG4gICAgICAgICAgICBpZiAoIWlzUGF0aFNlcGFyYXRvcihwYXRoLmNoYXJDb2RlQXQoaikpKSBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGogPCBsZW4gJiYgaiAhPT0gbGFzdCkge1xuICAgICAgICAgICAgLy8gTWF0Y2hlZCFcbiAgICAgICAgICAgIGxhc3QgPSBqO1xuICAgICAgICAgICAgLy8gTWF0Y2ggMSBvciBtb3JlIG5vbi1wYXRoIHNlcGFyYXRvcnNcbiAgICAgICAgICAgIGZvciAoOyBqIDwgbGVuOyArK2opIHtcbiAgICAgICAgICAgICAgaWYgKGlzUGF0aFNlcGFyYXRvcihwYXRoLmNoYXJDb2RlQXQoaikpKSBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChqID09PSBsZW4pIHtcbiAgICAgICAgICAgICAgLy8gV2UgbWF0Y2hlZCBhIFVOQyByb290IG9ubHlcblxuICAgICAgICAgICAgICByb290RW5kID0gajtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaiAhPT0gbGFzdCkge1xuICAgICAgICAgICAgICAvLyBXZSBtYXRjaGVkIGEgVU5DIHJvb3Qgd2l0aCBsZWZ0b3ZlcnNcblxuICAgICAgICAgICAgICByb290RW5kID0gaiArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc1dpbmRvd3NEZXZpY2VSb290KGNvZGUpKSB7XG4gICAgICAvLyBQb3NzaWJsZSBkZXZpY2Ugcm9vdFxuXG4gICAgICBpZiAocGF0aC5jaGFyQ29kZUF0KDEpID09PSBDSEFSX0NPTE9OKSB7XG4gICAgICAgIHJvb3RFbmQgPSAyO1xuICAgICAgICBpZiAobGVuID4gMikge1xuICAgICAgICAgIGlmIChpc1BhdGhTZXBhcmF0b3IocGF0aC5jaGFyQ29kZUF0KDIpKSkge1xuICAgICAgICAgICAgaWYgKGxlbiA9PT0gMykge1xuICAgICAgICAgICAgICAvLyBgcGF0aGAgY29udGFpbnMganVzdCBhIGRyaXZlIHJvb3QsIGV4aXQgZWFybHkgdG8gYXZvaWRcbiAgICAgICAgICAgICAgLy8gdW5uZWNlc3Nhcnkgd29ya1xuICAgICAgICAgICAgICByZXQucm9vdCA9IHJldC5kaXIgPSBwYXRoO1xuICAgICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcm9vdEVuZCA9IDM7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGBwYXRoYCBjb250YWlucyBqdXN0IGEgZHJpdmUgcm9vdCwgZXhpdCBlYXJseSB0byBhdm9pZFxuICAgICAgICAgIC8vIHVubmVjZXNzYXJ5IHdvcmtcbiAgICAgICAgICByZXQucm9vdCA9IHJldC5kaXIgPSBwYXRoO1xuICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNQYXRoU2VwYXJhdG9yKGNvZGUpKSB7XG4gICAgLy8gYHBhdGhgIGNvbnRhaW5zIGp1c3QgYSBwYXRoIHNlcGFyYXRvciwgZXhpdCBlYXJseSB0byBhdm9pZFxuICAgIC8vIHVubmVjZXNzYXJ5IHdvcmtcbiAgICByZXQucm9vdCA9IHJldC5kaXIgPSBwYXRoO1xuICAgIHJldHVybiByZXQ7XG4gIH1cblxuICBpZiAocm9vdEVuZCA+IDApIHJldC5yb290ID0gcGF0aC5zbGljZSgwLCByb290RW5kKTtcblxuICBsZXQgc3RhcnREb3QgPSAtMTtcbiAgbGV0IHN0YXJ0UGFydCA9IHJvb3RFbmQ7XG4gIGxldCBlbmQgPSAtMTtcbiAgbGV0IG1hdGNoZWRTbGFzaCA9IHRydWU7XG4gIGxldCBpID0gcGF0aC5sZW5ndGggLSAxO1xuXG4gIC8vIFRyYWNrIHRoZSBzdGF0ZSBvZiBjaGFyYWN0ZXJzIChpZiBhbnkpIHdlIHNlZSBiZWZvcmUgb3VyIGZpcnN0IGRvdCBhbmRcbiAgLy8gYWZ0ZXIgYW55IHBhdGggc2VwYXJhdG9yIHdlIGZpbmRcbiAgbGV0IHByZURvdFN0YXRlID0gMDtcblxuICAvLyBHZXQgbm9uLWRpciBpbmZvXG4gIGZvciAoOyBpID49IHJvb3RFbmQ7IC0taSkge1xuICAgIGNvZGUgPSBwYXRoLmNoYXJDb2RlQXQoaSk7XG4gICAgaWYgKGlzUGF0aFNlcGFyYXRvcihjb2RlKSkge1xuICAgICAgLy8gSWYgd2UgcmVhY2hlZCBhIHBhdGggc2VwYXJhdG9yIHRoYXQgd2FzIG5vdCBwYXJ0IG9mIGEgc2V0IG9mIHBhdGhcbiAgICAgIC8vIHNlcGFyYXRvcnMgYXQgdGhlIGVuZCBvZiB0aGUgc3RyaW5nLCBzdG9wIG5vd1xuICAgICAgaWYgKCFtYXRjaGVkU2xhc2gpIHtcbiAgICAgICAgc3RhcnRQYXJ0ID0gaSArIDE7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChlbmQgPT09IC0xKSB7XG4gICAgICAvLyBXZSBzYXcgdGhlIGZpcnN0IG5vbi1wYXRoIHNlcGFyYXRvciwgbWFyayB0aGlzIGFzIHRoZSBlbmQgb2Ygb3VyXG4gICAgICAvLyBleHRlbnNpb25cbiAgICAgIG1hdGNoZWRTbGFzaCA9IGZhbHNlO1xuICAgICAgZW5kID0gaSArIDE7XG4gICAgfVxuICAgIGlmIChjb2RlID09PSBDSEFSX0RPVCkge1xuICAgICAgLy8gSWYgdGhpcyBpcyBvdXIgZmlyc3QgZG90LCBtYXJrIGl0IGFzIHRoZSBzdGFydCBvZiBvdXIgZXh0ZW5zaW9uXG4gICAgICBpZiAoc3RhcnREb3QgPT09IC0xKSBzdGFydERvdCA9IGk7XG4gICAgICBlbHNlIGlmIChwcmVEb3RTdGF0ZSAhPT0gMSkgcHJlRG90U3RhdGUgPSAxO1xuICAgIH0gZWxzZSBpZiAoc3RhcnREb3QgIT09IC0xKSB7XG4gICAgICAvLyBXZSBzYXcgYSBub24tZG90IGFuZCBub24tcGF0aCBzZXBhcmF0b3IgYmVmb3JlIG91ciBkb3QsIHNvIHdlIHNob3VsZFxuICAgICAgLy8gaGF2ZSBhIGdvb2QgY2hhbmNlIGF0IGhhdmluZyBhIG5vbi1lbXB0eSBleHRlbnNpb25cbiAgICAgIHByZURvdFN0YXRlID0gLTE7XG4gICAgfVxuICB9XG5cbiAgaWYgKFxuICAgIHN0YXJ0RG90ID09PSAtMSB8fFxuICAgIGVuZCA9PT0gLTEgfHxcbiAgICAvLyBXZSBzYXcgYSBub24tZG90IGNoYXJhY3RlciBpbW1lZGlhdGVseSBiZWZvcmUgdGhlIGRvdFxuICAgIHByZURvdFN0YXRlID09PSAwIHx8XG4gICAgLy8gVGhlIChyaWdodC1tb3N0KSB0cmltbWVkIHBhdGggY29tcG9uZW50IGlzIGV4YWN0bHkgJy4uJ1xuICAgIChwcmVEb3RTdGF0ZSA9PT0gMSAmJiBzdGFydERvdCA9PT0gZW5kIC0gMSAmJiBzdGFydERvdCA9PT0gc3RhcnRQYXJ0ICsgMSlcbiAgKSB7XG4gICAgaWYgKGVuZCAhPT0gLTEpIHtcbiAgICAgIHJldC5iYXNlID0gcmV0Lm5hbWUgPSBwYXRoLnNsaWNlKHN0YXJ0UGFydCwgZW5kKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0Lm5hbWUgPSBwYXRoLnNsaWNlKHN0YXJ0UGFydCwgc3RhcnREb3QpO1xuICAgIHJldC5iYXNlID0gcGF0aC5zbGljZShzdGFydFBhcnQsIGVuZCk7XG4gICAgcmV0LmV4dCA9IHBhdGguc2xpY2Uoc3RhcnREb3QsIGVuZCk7XG4gIH1cblxuICAvLyBJZiB0aGUgZGlyZWN0b3J5IGlzIHRoZSByb290LCB1c2UgdGhlIGVudGlyZSByb290IGFzIHRoZSBgZGlyYCBpbmNsdWRpbmdcbiAgLy8gdGhlIHRyYWlsaW5nIHNsYXNoIGlmIGFueSAoYEM6XFxhYmNgIC0+IGBDOlxcYCkuIE90aGVyd2lzZSwgc3RyaXAgb3V0IHRoZVxuICAvLyB0cmFpbGluZyBzbGFzaCAoYEM6XFxhYmNcXGRlZmAgLT4gYEM6XFxhYmNgKS5cbiAgaWYgKHN0YXJ0UGFydCA+IDAgJiYgc3RhcnRQYXJ0ICE9PSByb290RW5kKSB7XG4gICAgcmV0LmRpciA9IHBhdGguc2xpY2UoMCwgc3RhcnRQYXJ0IC0gMSk7XG4gIH0gZWxzZSByZXQuZGlyID0gcmV0LnJvb3Q7XG5cbiAgcmV0dXJuIHJldDtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIGZpbGUgVVJMIHRvIGEgcGF0aCBzdHJpbmcuXG4gKlxuICogYGBgdHNcbiAqICAgICAgaW1wb3J0IHsgZnJvbUZpbGVVcmwgfSBmcm9tIFwiLi93aW4zMi50c1wiO1xuICogICAgICBmcm9tRmlsZVVybChcImZpbGU6Ly8vaG9tZS9mb29cIik7IC8vIFwiXFxcXGhvbWVcXFxcZm9vXCJcbiAqICAgICAgZnJvbUZpbGVVcmwoXCJmaWxlOi8vL0M6L1VzZXJzL2Zvb1wiKTsgLy8gXCJDOlxcXFxVc2Vyc1xcXFxmb29cIlxuICogICAgICBmcm9tRmlsZVVybChcImZpbGU6Ly9sb2NhbGhvc3QvaG9tZS9mb29cIik7IC8vIFwiXFxcXFxcXFxsb2NhbGhvc3RcXFxcaG9tZVxcXFxmb29cIlxuICogYGBgXG4gKiBAcGFyYW0gdXJsIG9mIGEgZmlsZSBVUkxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21GaWxlVXJsKHVybDogc3RyaW5nIHwgVVJMKTogc3RyaW5nIHtcbiAgdXJsID0gdXJsIGluc3RhbmNlb2YgVVJMID8gdXJsIDogbmV3IFVSTCh1cmwpO1xuICBpZiAodXJsLnByb3RvY29sICE9IFwiZmlsZTpcIikge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJNdXN0IGJlIGEgZmlsZSBVUkwuXCIpO1xuICB9XG4gIGxldCBwYXRoID0gZGVjb2RlVVJJQ29tcG9uZW50KFxuICAgIHVybC5wYXRobmFtZS5yZXBsYWNlKC9cXC8vZywgXCJcXFxcXCIpLnJlcGxhY2UoLyUoPyFbMC05QS1GYS1mXXsyfSkvZywgXCIlMjVcIiksXG4gICkucmVwbGFjZSgvXlxcXFwqKFtBLVphLXpdOikoXFxcXHwkKS8sIFwiJDFcXFxcXCIpO1xuICBpZiAodXJsLmhvc3RuYW1lICE9IFwiXCIpIHtcbiAgICAvLyBOb3RlOiBUaGUgYFVSTGAgaW1wbGVtZW50YXRpb24gZ3VhcmFudGVlcyB0aGF0IHRoZSBkcml2ZSBsZXR0ZXIgYW5kXG4gICAgLy8gaG9zdG5hbWUgYXJlIG11dHVhbGx5IGV4Y2x1c2l2ZS4gT3RoZXJ3aXNlIGl0IHdvdWxkIG5vdCBoYXZlIGJlZW4gdmFsaWRcbiAgICAvLyB0byBhcHBlbmQgdGhlIGhvc3RuYW1lIGFuZCBwYXRoIGxpa2UgdGhpcy5cbiAgICBwYXRoID0gYFxcXFxcXFxcJHt1cmwuaG9zdG5hbWV9JHtwYXRofWA7XG4gIH1cbiAgcmV0dXJuIHBhdGg7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBwYXRoIHN0cmluZyB0byBhIGZpbGUgVVJMLlxuICpcbiAqIGBgYHRzXG4gKiAgICAgIGltcG9ydCB7IHRvRmlsZVVybCB9IGZyb20gXCIuL3dpbjMyLnRzXCI7XG4gKiAgICAgIHRvRmlsZVVybChcIlxcXFxob21lXFxcXGZvb1wiKTsgLy8gbmV3IFVSTChcImZpbGU6Ly8vaG9tZS9mb29cIilcbiAqICAgICAgdG9GaWxlVXJsKFwiQzpcXFxcVXNlcnNcXFxcZm9vXCIpOyAvLyBuZXcgVVJMKFwiZmlsZTovLy9DOi9Vc2Vycy9mb29cIilcbiAqICAgICAgdG9GaWxlVXJsKFwiXFxcXFxcXFwxMjcuMC4wLjFcXFxcaG9tZVxcXFxmb29cIik7IC8vIG5ldyBVUkwoXCJmaWxlOi8vMTI3LjAuMC4xL2hvbWUvZm9vXCIpXG4gKiBgYGBcbiAqIEBwYXJhbSBwYXRoIHRvIGNvbnZlcnQgdG8gZmlsZSBVUkxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvRmlsZVVybChwYXRoOiBzdHJpbmcpOiBVUkwge1xuICBpZiAoIWlzQWJzb2x1dGUocGF0aCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiTXVzdCBiZSBhbiBhYnNvbHV0ZSBwYXRoLlwiKTtcbiAgfVxuICBjb25zdCBbLCBob3N0bmFtZSwgcGF0aG5hbWVdID0gcGF0aC5tYXRjaChcbiAgICAvXig/OlsvXFxcXF17Mn0oW14vXFxcXF0rKSg/PVsvXFxcXF0oPzpbXi9cXFxcXXwkKSkpPyguKikvLFxuICApITtcbiAgY29uc3QgdXJsID0gbmV3IFVSTChcImZpbGU6Ly8vXCIpO1xuICB1cmwucGF0aG5hbWUgPSBlbmNvZGVXaGl0ZXNwYWNlKHBhdGhuYW1lLnJlcGxhY2UoLyUvZywgXCIlMjVcIikpO1xuICBpZiAoaG9zdG5hbWUgIT0gbnVsbCAmJiBob3N0bmFtZSAhPSBcImxvY2FsaG9zdFwiKSB7XG4gICAgdXJsLmhvc3RuYW1lID0gaG9zdG5hbWU7XG4gICAgaWYgKCF1cmwuaG9zdG5hbWUpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGhvc3RuYW1lLlwiKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHVybDtcbn1cbiIsIi8vIENvcHlyaWdodCAyMDE4LTIwMjIgdGhlIERlbm8gYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4gTUlUIGxpY2Vuc2UuXG4vLyBDb3B5cmlnaHQgdGhlIEJyb3dzZXJpZnkgYXV0aG9ycy4gTUlUIExpY2Vuc2UuXG4vLyBQb3J0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vYnJvd3NlcmlmeS9wYXRoLWJyb3dzZXJpZnkvXG4vLyBUaGlzIG1vZHVsZSBpcyBicm93c2VyIGNvbXBhdGlibGUuXG5cbmltcG9ydCB0eXBlIHsgRm9ybWF0SW5wdXRQYXRoT2JqZWN0LCBQYXJzZWRQYXRoIH0gZnJvbSBcIi4vX2ludGVyZmFjZS50c1wiO1xuaW1wb3J0IHsgQ0hBUl9ET1QsIENIQVJfRk9SV0FSRF9TTEFTSCB9IGZyb20gXCIuL19jb25zdGFudHMudHNcIjtcblxuaW1wb3J0IHtcbiAgX2Zvcm1hdCxcbiAgYXNzZXJ0UGF0aCxcbiAgZW5jb2RlV2hpdGVzcGFjZSxcbiAgaXNQb3NpeFBhdGhTZXBhcmF0b3IsXG4gIG5vcm1hbGl6ZVN0cmluZyxcbn0gZnJvbSBcIi4vX3V0aWwudHNcIjtcblxuZXhwb3J0IGNvbnN0IHNlcCA9IFwiL1wiO1xuZXhwb3J0IGNvbnN0IGRlbGltaXRlciA9IFwiOlwiO1xuXG4vLyBwYXRoLnJlc29sdmUoW2Zyb20gLi4uXSwgdG8pXG4vKipcbiAqIFJlc29sdmVzIGBwYXRoU2VnbWVudHNgIGludG8gYW4gYWJzb2x1dGUgcGF0aC5cbiAqIEBwYXJhbSBwYXRoU2VnbWVudHMgYW4gYXJyYXkgb2YgcGF0aCBzZWdtZW50c1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZSguLi5wYXRoU2VnbWVudHM6IHN0cmluZ1tdKTogc3RyaW5nIHtcbiAgbGV0IHJlc29sdmVkUGF0aCA9IFwiXCI7XG4gIGxldCByZXNvbHZlZEFic29sdXRlID0gZmFsc2U7XG5cbiAgZm9yIChsZXQgaSA9IHBhdGhTZWdtZW50cy5sZW5ndGggLSAxOyBpID49IC0xICYmICFyZXNvbHZlZEFic29sdXRlOyBpLS0pIHtcbiAgICBsZXQgcGF0aDogc3RyaW5nO1xuXG4gICAgaWYgKGkgPj0gMCkgcGF0aCA9IHBhdGhTZWdtZW50c1tpXTtcbiAgICBlbHNlIHtcbiAgICAgIC8vIGRlbm8tbGludC1pZ25vcmUgbm8tZXhwbGljaXQtYW55XG4gICAgICBjb25zdCB7IERlbm8gfSA9IGdsb2JhbFRoaXMgYXMgYW55O1xuICAgICAgaWYgKHR5cGVvZiBEZW5vPy5jd2QgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUmVzb2x2ZWQgYSByZWxhdGl2ZSBwYXRoIHdpdGhvdXQgYSBDV0QuXCIpO1xuICAgICAgfVxuICAgICAgcGF0aCA9IERlbm8uY3dkKCk7XG4gICAgfVxuXG4gICAgYXNzZXJ0UGF0aChwYXRoKTtcblxuICAgIC8vIFNraXAgZW1wdHkgZW50cmllc1xuICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgcmVzb2x2ZWRQYXRoID0gYCR7cGF0aH0vJHtyZXNvbHZlZFBhdGh9YDtcbiAgICByZXNvbHZlZEFic29sdXRlID0gcGF0aC5jaGFyQ29kZUF0KDApID09PSBDSEFSX0ZPUldBUkRfU0xBU0g7XG4gIH1cblxuICAvLyBBdCB0aGlzIHBvaW50IHRoZSBwYXRoIHNob3VsZCBiZSByZXNvbHZlZCB0byBhIGZ1bGwgYWJzb2x1dGUgcGF0aCwgYnV0XG4gIC8vIGhhbmRsZSByZWxhdGl2ZSBwYXRocyB0byBiZSBzYWZlIChtaWdodCBoYXBwZW4gd2hlbiBwcm9jZXNzLmN3ZCgpIGZhaWxzKVxuXG4gIC8vIE5vcm1hbGl6ZSB0aGUgcGF0aFxuICByZXNvbHZlZFBhdGggPSBub3JtYWxpemVTdHJpbmcoXG4gICAgcmVzb2x2ZWRQYXRoLFxuICAgICFyZXNvbHZlZEFic29sdXRlLFxuICAgIFwiL1wiLFxuICAgIGlzUG9zaXhQYXRoU2VwYXJhdG9yLFxuICApO1xuXG4gIGlmIChyZXNvbHZlZEFic29sdXRlKSB7XG4gICAgaWYgKHJlc29sdmVkUGF0aC5sZW5ndGggPiAwKSByZXR1cm4gYC8ke3Jlc29sdmVkUGF0aH1gO1xuICAgIGVsc2UgcmV0dXJuIFwiL1wiO1xuICB9IGVsc2UgaWYgKHJlc29sdmVkUGF0aC5sZW5ndGggPiAwKSByZXR1cm4gcmVzb2x2ZWRQYXRoO1xuICBlbHNlIHJldHVybiBcIi5cIjtcbn1cblxuLyoqXG4gKiBOb3JtYWxpemUgdGhlIGBwYXRoYCwgcmVzb2x2aW5nIGAnLi4nYCBhbmQgYCcuJ2Agc2VnbWVudHMuXG4gKiBAcGFyYW0gcGF0aCB0byBiZSBub3JtYWxpemVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemUocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgYXNzZXJ0UGF0aChwYXRoKTtcblxuICBpZiAocGF0aC5sZW5ndGggPT09IDApIHJldHVybiBcIi5cIjtcblxuICBjb25zdCBpc0Fic29sdXRlID0gcGF0aC5jaGFyQ29kZUF0KDApID09PSBDSEFSX0ZPUldBUkRfU0xBU0g7XG4gIGNvbnN0IHRyYWlsaW5nU2VwYXJhdG9yID1cbiAgICBwYXRoLmNoYXJDb2RlQXQocGF0aC5sZW5ndGggLSAxKSA9PT0gQ0hBUl9GT1JXQVJEX1NMQVNIO1xuXG4gIC8vIE5vcm1hbGl6ZSB0aGUgcGF0aFxuICBwYXRoID0gbm9ybWFsaXplU3RyaW5nKHBhdGgsICFpc0Fic29sdXRlLCBcIi9cIiwgaXNQb3NpeFBhdGhTZXBhcmF0b3IpO1xuXG4gIGlmIChwYXRoLmxlbmd0aCA9PT0gMCAmJiAhaXNBYnNvbHV0ZSkgcGF0aCA9IFwiLlwiO1xuICBpZiAocGF0aC5sZW5ndGggPiAwICYmIHRyYWlsaW5nU2VwYXJhdG9yKSBwYXRoICs9IFwiL1wiO1xuXG4gIGlmIChpc0Fic29sdXRlKSByZXR1cm4gYC8ke3BhdGh9YDtcbiAgcmV0dXJuIHBhdGg7XG59XG5cbi8qKlxuICogVmVyaWZpZXMgd2hldGhlciBwcm92aWRlZCBwYXRoIGlzIGFic29sdXRlXG4gKiBAcGFyYW0gcGF0aCB0byBiZSB2ZXJpZmllZCBhcyBhYnNvbHV0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBYnNvbHV0ZShwYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgYXNzZXJ0UGF0aChwYXRoKTtcbiAgcmV0dXJuIHBhdGgubGVuZ3RoID4gMCAmJiBwYXRoLmNoYXJDb2RlQXQoMCkgPT09IENIQVJfRk9SV0FSRF9TTEFTSDtcbn1cblxuLyoqXG4gKiBKb2luIGFsbCBnaXZlbiBhIHNlcXVlbmNlIG9mIGBwYXRoc2AsdGhlbiBub3JtYWxpemVzIHRoZSByZXN1bHRpbmcgcGF0aC5cbiAqIEBwYXJhbSBwYXRocyB0byBiZSBqb2luZWQgYW5kIG5vcm1hbGl6ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGpvaW4oLi4ucGF0aHM6IHN0cmluZ1tdKTogc3RyaW5nIHtcbiAgaWYgKHBhdGhzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFwiLlwiO1xuICBsZXQgam9pbmVkOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIGZvciAobGV0IGkgPSAwLCBsZW4gPSBwYXRocy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgIGNvbnN0IHBhdGggPSBwYXRoc1tpXTtcbiAgICBhc3NlcnRQYXRoKHBhdGgpO1xuICAgIGlmIChwYXRoLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmICgham9pbmVkKSBqb2luZWQgPSBwYXRoO1xuICAgICAgZWxzZSBqb2luZWQgKz0gYC8ke3BhdGh9YDtcbiAgICB9XG4gIH1cbiAgaWYgKCFqb2luZWQpIHJldHVybiBcIi5cIjtcbiAgcmV0dXJuIG5vcm1hbGl6ZShqb2luZWQpO1xufVxuXG4vKipcbiAqIFJldHVybiB0aGUgcmVsYXRpdmUgcGF0aCBmcm9tIGBmcm9tYCB0byBgdG9gIGJhc2VkIG9uIGN1cnJlbnQgd29ya2luZyBkaXJlY3RvcnkuXG4gKiBAcGFyYW0gZnJvbSBwYXRoIGluIGN1cnJlbnQgd29ya2luZyBkaXJlY3RvcnlcbiAqIEBwYXJhbSB0byBwYXRoIGluIGN1cnJlbnQgd29ya2luZyBkaXJlY3RvcnlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbGF0aXZlKGZyb206IHN0cmluZywgdG86IHN0cmluZyk6IHN0cmluZyB7XG4gIGFzc2VydFBhdGgoZnJvbSk7XG4gIGFzc2VydFBhdGgodG8pO1xuXG4gIGlmIChmcm9tID09PSB0bykgcmV0dXJuIFwiXCI7XG5cbiAgZnJvbSA9IHJlc29sdmUoZnJvbSk7XG4gIHRvID0gcmVzb2x2ZSh0byk7XG5cbiAgaWYgKGZyb20gPT09IHRvKSByZXR1cm4gXCJcIjtcblxuICAvLyBUcmltIGFueSBsZWFkaW5nIGJhY2tzbGFzaGVzXG4gIGxldCBmcm9tU3RhcnQgPSAxO1xuICBjb25zdCBmcm9tRW5kID0gZnJvbS5sZW5ndGg7XG4gIGZvciAoOyBmcm9tU3RhcnQgPCBmcm9tRW5kOyArK2Zyb21TdGFydCkge1xuICAgIGlmIChmcm9tLmNoYXJDb2RlQXQoZnJvbVN0YXJ0KSAhPT0gQ0hBUl9GT1JXQVJEX1NMQVNIKSBicmVhaztcbiAgfVxuICBjb25zdCBmcm9tTGVuID0gZnJvbUVuZCAtIGZyb21TdGFydDtcblxuICAvLyBUcmltIGFueSBsZWFkaW5nIGJhY2tzbGFzaGVzXG4gIGxldCB0b1N0YXJ0ID0gMTtcbiAgY29uc3QgdG9FbmQgPSB0by5sZW5ndGg7XG4gIGZvciAoOyB0b1N0YXJ0IDwgdG9FbmQ7ICsrdG9TdGFydCkge1xuICAgIGlmICh0by5jaGFyQ29kZUF0KHRvU3RhcnQpICE9PSBDSEFSX0ZPUldBUkRfU0xBU0gpIGJyZWFrO1xuICB9XG4gIGNvbnN0IHRvTGVuID0gdG9FbmQgLSB0b1N0YXJ0O1xuXG4gIC8vIENvbXBhcmUgcGF0aHMgdG8gZmluZCB0aGUgbG9uZ2VzdCBjb21tb24gcGF0aCBmcm9tIHJvb3RcbiAgY29uc3QgbGVuZ3RoID0gZnJvbUxlbiA8IHRvTGVuID8gZnJvbUxlbiA6IHRvTGVuO1xuICBsZXQgbGFzdENvbW1vblNlcCA9IC0xO1xuICBsZXQgaSA9IDA7XG4gIGZvciAoOyBpIDw9IGxlbmd0aDsgKytpKSB7XG4gICAgaWYgKGkgPT09IGxlbmd0aCkge1xuICAgICAgaWYgKHRvTGVuID4gbGVuZ3RoKSB7XG4gICAgICAgIGlmICh0by5jaGFyQ29kZUF0KHRvU3RhcnQgKyBpKSA9PT0gQ0hBUl9GT1JXQVJEX1NMQVNIKSB7XG4gICAgICAgICAgLy8gV2UgZ2V0IGhlcmUgaWYgYGZyb21gIGlzIHRoZSBleGFjdCBiYXNlIHBhdGggZm9yIGB0b2AuXG4gICAgICAgICAgLy8gRm9yIGV4YW1wbGU6IGZyb209Jy9mb28vYmFyJzsgdG89Jy9mb28vYmFyL2JheidcbiAgICAgICAgICByZXR1cm4gdG8uc2xpY2UodG9TdGFydCArIGkgKyAxKTtcbiAgICAgICAgfSBlbHNlIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgLy8gV2UgZ2V0IGhlcmUgaWYgYGZyb21gIGlzIHRoZSByb290XG4gICAgICAgICAgLy8gRm9yIGV4YW1wbGU6IGZyb209Jy8nOyB0bz0nL2ZvbydcbiAgICAgICAgICByZXR1cm4gdG8uc2xpY2UodG9TdGFydCArIGkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGZyb21MZW4gPiBsZW5ndGgpIHtcbiAgICAgICAgaWYgKGZyb20uY2hhckNvZGVBdChmcm9tU3RhcnQgKyBpKSA9PT0gQ0hBUl9GT1JXQVJEX1NMQVNIKSB7XG4gICAgICAgICAgLy8gV2UgZ2V0IGhlcmUgaWYgYHRvYCBpcyB0aGUgZXhhY3QgYmFzZSBwYXRoIGZvciBgZnJvbWAuXG4gICAgICAgICAgLy8gRm9yIGV4YW1wbGU6IGZyb209Jy9mb28vYmFyL2Jheic7IHRvPScvZm9vL2JhcidcbiAgICAgICAgICBsYXN0Q29tbW9uU2VwID0gaTtcbiAgICAgICAgfSBlbHNlIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgLy8gV2UgZ2V0IGhlcmUgaWYgYHRvYCBpcyB0aGUgcm9vdC5cbiAgICAgICAgICAvLyBGb3IgZXhhbXBsZTogZnJvbT0nL2Zvbyc7IHRvPScvJ1xuICAgICAgICAgIGxhc3RDb21tb25TZXAgPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY29uc3QgZnJvbUNvZGUgPSBmcm9tLmNoYXJDb2RlQXQoZnJvbVN0YXJ0ICsgaSk7XG4gICAgY29uc3QgdG9Db2RlID0gdG8uY2hhckNvZGVBdCh0b1N0YXJ0ICsgaSk7XG4gICAgaWYgKGZyb21Db2RlICE9PSB0b0NvZGUpIGJyZWFrO1xuICAgIGVsc2UgaWYgKGZyb21Db2RlID09PSBDSEFSX0ZPUldBUkRfU0xBU0gpIGxhc3RDb21tb25TZXAgPSBpO1xuICB9XG5cbiAgbGV0IG91dCA9IFwiXCI7XG4gIC8vIEdlbmVyYXRlIHRoZSByZWxhdGl2ZSBwYXRoIGJhc2VkIG9uIHRoZSBwYXRoIGRpZmZlcmVuY2UgYmV0d2VlbiBgdG9gXG4gIC8vIGFuZCBgZnJvbWBcbiAgZm9yIChpID0gZnJvbVN0YXJ0ICsgbGFzdENvbW1vblNlcCArIDE7IGkgPD0gZnJvbUVuZDsgKytpKSB7XG4gICAgaWYgKGkgPT09IGZyb21FbmQgfHwgZnJvbS5jaGFyQ29kZUF0KGkpID09PSBDSEFSX0ZPUldBUkRfU0xBU0gpIHtcbiAgICAgIGlmIChvdXQubGVuZ3RoID09PSAwKSBvdXQgKz0gXCIuLlwiO1xuICAgICAgZWxzZSBvdXQgKz0gXCIvLi5cIjtcbiAgICB9XG4gIH1cblxuICAvLyBMYXN0bHksIGFwcGVuZCB0aGUgcmVzdCBvZiB0aGUgZGVzdGluYXRpb24gKGB0b2ApIHBhdGggdGhhdCBjb21lcyBhZnRlclxuICAvLyB0aGUgY29tbW9uIHBhdGggcGFydHNcbiAgaWYgKG91dC5sZW5ndGggPiAwKSByZXR1cm4gb3V0ICsgdG8uc2xpY2UodG9TdGFydCArIGxhc3RDb21tb25TZXApO1xuICBlbHNlIHtcbiAgICB0b1N0YXJ0ICs9IGxhc3RDb21tb25TZXA7XG4gICAgaWYgKHRvLmNoYXJDb2RlQXQodG9TdGFydCkgPT09IENIQVJfRk9SV0FSRF9TTEFTSCkgKyt0b1N0YXJ0O1xuICAgIHJldHVybiB0by5zbGljZSh0b1N0YXJ0KTtcbiAgfVxufVxuXG4vKipcbiAqIFJlc29sdmVzIHBhdGggdG8gYSBuYW1lc3BhY2UgcGF0aFxuICogQHBhcmFtIHBhdGggdG8gcmVzb2x2ZSB0byBuYW1lc3BhY2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvTmFtZXNwYWNlZFBhdGgocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgLy8gTm9uLW9wIG9uIHBvc2l4IHN5c3RlbXNcbiAgcmV0dXJuIHBhdGg7XG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSBkaXJlY3RvcnkgcGF0aCBvZiBhIGBwYXRoYC5cbiAqIEBwYXJhbSBwYXRoIHRvIGRldGVybWluZSB0aGUgZGlyZWN0b3J5IHBhdGggZm9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXJuYW1lKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gIGFzc2VydFBhdGgocGF0aCk7XG4gIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFwiLlwiO1xuICBjb25zdCBoYXNSb290ID0gcGF0aC5jaGFyQ29kZUF0KDApID09PSBDSEFSX0ZPUldBUkRfU0xBU0g7XG4gIGxldCBlbmQgPSAtMTtcbiAgbGV0IG1hdGNoZWRTbGFzaCA9IHRydWU7XG4gIGZvciAobGV0IGkgPSBwYXRoLmxlbmd0aCAtIDE7IGkgPj0gMTsgLS1pKSB7XG4gICAgaWYgKHBhdGguY2hhckNvZGVBdChpKSA9PT0gQ0hBUl9GT1JXQVJEX1NMQVNIKSB7XG4gICAgICBpZiAoIW1hdGNoZWRTbGFzaCkge1xuICAgICAgICBlbmQgPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gV2Ugc2F3IHRoZSBmaXJzdCBub24tcGF0aCBzZXBhcmF0b3JcbiAgICAgIG1hdGNoZWRTbGFzaCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGlmIChlbmQgPT09IC0xKSByZXR1cm4gaGFzUm9vdCA/IFwiL1wiIDogXCIuXCI7XG4gIGlmIChoYXNSb290ICYmIGVuZCA9PT0gMSkgcmV0dXJuIFwiLy9cIjtcbiAgcmV0dXJuIHBhdGguc2xpY2UoMCwgZW5kKTtcbn1cblxuLyoqXG4gKiBSZXR1cm4gdGhlIGxhc3QgcG9ydGlvbiBvZiBhIGBwYXRoYC4gVHJhaWxpbmcgZGlyZWN0b3J5IHNlcGFyYXRvcnMgYXJlIGlnbm9yZWQuXG4gKiBAcGFyYW0gcGF0aCB0byBwcm9jZXNzXG4gKiBAcGFyYW0gZXh0IG9mIHBhdGggZGlyZWN0b3J5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiYXNlbmFtZShwYXRoOiBzdHJpbmcsIGV4dCA9IFwiXCIpOiBzdHJpbmcge1xuICBpZiAoZXh0ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGV4dCAhPT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiZXh0XCIgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZycpO1xuICB9XG4gIGFzc2VydFBhdGgocGF0aCk7XG5cbiAgbGV0IHN0YXJ0ID0gMDtcbiAgbGV0IGVuZCA9IC0xO1xuICBsZXQgbWF0Y2hlZFNsYXNoID0gdHJ1ZTtcbiAgbGV0IGk6IG51bWJlcjtcblxuICBpZiAoZXh0ICE9PSB1bmRlZmluZWQgJiYgZXh0Lmxlbmd0aCA+IDAgJiYgZXh0Lmxlbmd0aCA8PSBwYXRoLmxlbmd0aCkge1xuICAgIGlmIChleHQubGVuZ3RoID09PSBwYXRoLmxlbmd0aCAmJiBleHQgPT09IHBhdGgpIHJldHVybiBcIlwiO1xuICAgIGxldCBleHRJZHggPSBleHQubGVuZ3RoIC0gMTtcbiAgICBsZXQgZmlyc3ROb25TbGFzaEVuZCA9IC0xO1xuICAgIGZvciAoaSA9IHBhdGgubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIGNvbnN0IGNvZGUgPSBwYXRoLmNoYXJDb2RlQXQoaSk7XG4gICAgICBpZiAoY29kZSA9PT0gQ0hBUl9GT1JXQVJEX1NMQVNIKSB7XG4gICAgICAgIC8vIElmIHdlIHJlYWNoZWQgYSBwYXRoIHNlcGFyYXRvciB0aGF0IHdhcyBub3QgcGFydCBvZiBhIHNldCBvZiBwYXRoXG4gICAgICAgIC8vIHNlcGFyYXRvcnMgYXQgdGhlIGVuZCBvZiB0aGUgc3RyaW5nLCBzdG9wIG5vd1xuICAgICAgICBpZiAoIW1hdGNoZWRTbGFzaCkge1xuICAgICAgICAgIHN0YXJ0ID0gaSArIDE7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChmaXJzdE5vblNsYXNoRW5kID09PSAtMSkge1xuICAgICAgICAgIC8vIFdlIHNhdyB0aGUgZmlyc3Qgbm9uLXBhdGggc2VwYXJhdG9yLCByZW1lbWJlciB0aGlzIGluZGV4IGluIGNhc2VcbiAgICAgICAgICAvLyB3ZSBuZWVkIGl0IGlmIHRoZSBleHRlbnNpb24gZW5kcyB1cCBub3QgbWF0Y2hpbmdcbiAgICAgICAgICBtYXRjaGVkU2xhc2ggPSBmYWxzZTtcbiAgICAgICAgICBmaXJzdE5vblNsYXNoRW5kID0gaSArIDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4dElkeCA+PSAwKSB7XG4gICAgICAgICAgLy8gVHJ5IHRvIG1hdGNoIHRoZSBleHBsaWNpdCBleHRlbnNpb25cbiAgICAgICAgICBpZiAoY29kZSA9PT0gZXh0LmNoYXJDb2RlQXQoZXh0SWR4KSkge1xuICAgICAgICAgICAgaWYgKC0tZXh0SWR4ID09PSAtMSkge1xuICAgICAgICAgICAgICAvLyBXZSBtYXRjaGVkIHRoZSBleHRlbnNpb24sIHNvIG1hcmsgdGhpcyBhcyB0aGUgZW5kIG9mIG91ciBwYXRoXG4gICAgICAgICAgICAgIC8vIGNvbXBvbmVudFxuICAgICAgICAgICAgICBlbmQgPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBFeHRlbnNpb24gZG9lcyBub3QgbWF0Y2gsIHNvIG91ciByZXN1bHQgaXMgdGhlIGVudGlyZSBwYXRoXG4gICAgICAgICAgICAvLyBjb21wb25lbnRcbiAgICAgICAgICAgIGV4dElkeCA9IC0xO1xuICAgICAgICAgICAgZW5kID0gZmlyc3ROb25TbGFzaEVuZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3RhcnQgPT09IGVuZCkgZW5kID0gZmlyc3ROb25TbGFzaEVuZDtcbiAgICBlbHNlIGlmIChlbmQgPT09IC0xKSBlbmQgPSBwYXRoLmxlbmd0aDtcbiAgICByZXR1cm4gcGF0aC5zbGljZShzdGFydCwgZW5kKTtcbiAgfSBlbHNlIHtcbiAgICBmb3IgKGkgPSBwYXRoLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICBpZiAocGF0aC5jaGFyQ29kZUF0KGkpID09PSBDSEFSX0ZPUldBUkRfU0xBU0gpIHtcbiAgICAgICAgLy8gSWYgd2UgcmVhY2hlZCBhIHBhdGggc2VwYXJhdG9yIHRoYXQgd2FzIG5vdCBwYXJ0IG9mIGEgc2V0IG9mIHBhdGhcbiAgICAgICAgLy8gc2VwYXJhdG9ycyBhdCB0aGUgZW5kIG9mIHRoZSBzdHJpbmcsIHN0b3Agbm93XG4gICAgICAgIGlmICghbWF0Y2hlZFNsYXNoKSB7XG4gICAgICAgICAgc3RhcnQgPSBpICsgMTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlbmQgPT09IC0xKSB7XG4gICAgICAgIC8vIFdlIHNhdyB0aGUgZmlyc3Qgbm9uLXBhdGggc2VwYXJhdG9yLCBtYXJrIHRoaXMgYXMgdGhlIGVuZCBvZiBvdXJcbiAgICAgICAgLy8gcGF0aCBjb21wb25lbnRcbiAgICAgICAgbWF0Y2hlZFNsYXNoID0gZmFsc2U7XG4gICAgICAgIGVuZCA9IGkgKyAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChlbmQgPT09IC0xKSByZXR1cm4gXCJcIjtcbiAgICByZXR1cm4gcGF0aC5zbGljZShzdGFydCwgZW5kKTtcbiAgfVxufVxuXG4vKipcbiAqIFJldHVybiB0aGUgZXh0ZW5zaW9uIG9mIHRoZSBgcGF0aGAgd2l0aCBsZWFkaW5nIHBlcmlvZC5cbiAqIEBwYXJhbSBwYXRoIHdpdGggZXh0ZW5zaW9uXG4gKiBAcmV0dXJucyBleHRlbnNpb24gKGV4LiBmb3IgYGZpbGUudHNgIHJldHVybnMgYC50c2ApXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRuYW1lKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gIGFzc2VydFBhdGgocGF0aCk7XG4gIGxldCBzdGFydERvdCA9IC0xO1xuICBsZXQgc3RhcnRQYXJ0ID0gMDtcbiAgbGV0IGVuZCA9IC0xO1xuICBsZXQgbWF0Y2hlZFNsYXNoID0gdHJ1ZTtcbiAgLy8gVHJhY2sgdGhlIHN0YXRlIG9mIGNoYXJhY3RlcnMgKGlmIGFueSkgd2Ugc2VlIGJlZm9yZSBvdXIgZmlyc3QgZG90IGFuZFxuICAvLyBhZnRlciBhbnkgcGF0aCBzZXBhcmF0b3Igd2UgZmluZFxuICBsZXQgcHJlRG90U3RhdGUgPSAwO1xuICBmb3IgKGxldCBpID0gcGF0aC5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgIGNvbnN0IGNvZGUgPSBwYXRoLmNoYXJDb2RlQXQoaSk7XG4gICAgaWYgKGNvZGUgPT09IENIQVJfRk9SV0FSRF9TTEFTSCkge1xuICAgICAgLy8gSWYgd2UgcmVhY2hlZCBhIHBhdGggc2VwYXJhdG9yIHRoYXQgd2FzIG5vdCBwYXJ0IG9mIGEgc2V0IG9mIHBhdGhcbiAgICAgIC8vIHNlcGFyYXRvcnMgYXQgdGhlIGVuZCBvZiB0aGUgc3RyaW5nLCBzdG9wIG5vd1xuICAgICAgaWYgKCFtYXRjaGVkU2xhc2gpIHtcbiAgICAgICAgc3RhcnRQYXJ0ID0gaSArIDE7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChlbmQgPT09IC0xKSB7XG4gICAgICAvLyBXZSBzYXcgdGhlIGZpcnN0IG5vbi1wYXRoIHNlcGFyYXRvciwgbWFyayB0aGlzIGFzIHRoZSBlbmQgb2Ygb3VyXG4gICAgICAvLyBleHRlbnNpb25cbiAgICAgIG1hdGNoZWRTbGFzaCA9IGZhbHNlO1xuICAgICAgZW5kID0gaSArIDE7XG4gICAgfVxuICAgIGlmIChjb2RlID09PSBDSEFSX0RPVCkge1xuICAgICAgLy8gSWYgdGhpcyBpcyBvdXIgZmlyc3QgZG90LCBtYXJrIGl0IGFzIHRoZSBzdGFydCBvZiBvdXIgZXh0ZW5zaW9uXG4gICAgICBpZiAoc3RhcnREb3QgPT09IC0xKSBzdGFydERvdCA9IGk7XG4gICAgICBlbHNlIGlmIChwcmVEb3RTdGF0ZSAhPT0gMSkgcHJlRG90U3RhdGUgPSAxO1xuICAgIH0gZWxzZSBpZiAoc3RhcnREb3QgIT09IC0xKSB7XG4gICAgICAvLyBXZSBzYXcgYSBub24tZG90IGFuZCBub24tcGF0aCBzZXBhcmF0b3IgYmVmb3JlIG91ciBkb3QsIHNvIHdlIHNob3VsZFxuICAgICAgLy8gaGF2ZSBhIGdvb2QgY2hhbmNlIGF0IGhhdmluZyBhIG5vbi1lbXB0eSBleHRlbnNpb25cbiAgICAgIHByZURvdFN0YXRlID0gLTE7XG4gICAgfVxuICB9XG5cbiAgaWYgKFxuICAgIHN0YXJ0RG90ID09PSAtMSB8fFxuICAgIGVuZCA9PT0gLTEgfHxcbiAgICAvLyBXZSBzYXcgYSBub24tZG90IGNoYXJhY3RlciBpbW1lZGlhdGVseSBiZWZvcmUgdGhlIGRvdFxuICAgIHByZURvdFN0YXRlID09PSAwIHx8XG4gICAgLy8gVGhlIChyaWdodC1tb3N0KSB0cmltbWVkIHBhdGggY29tcG9uZW50IGlzIGV4YWN0bHkgJy4uJ1xuICAgIChwcmVEb3RTdGF0ZSA9PT0gMSAmJiBzdGFydERvdCA9PT0gZW5kIC0gMSAmJiBzdGFydERvdCA9PT0gc3RhcnRQYXJ0ICsgMSlcbiAgKSB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cbiAgcmV0dXJuIHBhdGguc2xpY2Uoc3RhcnREb3QsIGVuZCk7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgYSBwYXRoIGZyb20gYEZvcm1hdElucHV0UGF0aE9iamVjdGAgb2JqZWN0LlxuICogQHBhcmFtIHBhdGhPYmplY3Qgd2l0aCBwYXRoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXQocGF0aE9iamVjdDogRm9ybWF0SW5wdXRQYXRoT2JqZWN0KTogc3RyaW5nIHtcbiAgaWYgKHBhdGhPYmplY3QgPT09IG51bGwgfHwgdHlwZW9mIHBhdGhPYmplY3QgIT09IFwib2JqZWN0XCIpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgYFRoZSBcInBhdGhPYmplY3RcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgT2JqZWN0LiBSZWNlaXZlZCB0eXBlICR7dHlwZW9mIHBhdGhPYmplY3R9YCxcbiAgICApO1xuICB9XG4gIHJldHVybiBfZm9ybWF0KFwiL1wiLCBwYXRoT2JqZWN0KTtcbn1cblxuLyoqXG4gKiBSZXR1cm4gYSBgUGFyc2VkUGF0aGAgb2JqZWN0IG9mIHRoZSBgcGF0aGAuXG4gKiBAcGFyYW0gcGF0aCB0byBwcm9jZXNzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZShwYXRoOiBzdHJpbmcpOiBQYXJzZWRQYXRoIHtcbiAgYXNzZXJ0UGF0aChwYXRoKTtcblxuICBjb25zdCByZXQ6IFBhcnNlZFBhdGggPSB7IHJvb3Q6IFwiXCIsIGRpcjogXCJcIiwgYmFzZTogXCJcIiwgZXh0OiBcIlwiLCBuYW1lOiBcIlwiIH07XG4gIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHJldDtcbiAgY29uc3QgaXNBYnNvbHV0ZSA9IHBhdGguY2hhckNvZGVBdCgwKSA9PT0gQ0hBUl9GT1JXQVJEX1NMQVNIO1xuICBsZXQgc3RhcnQ6IG51bWJlcjtcbiAgaWYgKGlzQWJzb2x1dGUpIHtcbiAgICByZXQucm9vdCA9IFwiL1wiO1xuICAgIHN0YXJ0ID0gMTtcbiAgfSBlbHNlIHtcbiAgICBzdGFydCA9IDA7XG4gIH1cbiAgbGV0IHN0YXJ0RG90ID0gLTE7XG4gIGxldCBzdGFydFBhcnQgPSAwO1xuICBsZXQgZW5kID0gLTE7XG4gIGxldCBtYXRjaGVkU2xhc2ggPSB0cnVlO1xuICBsZXQgaSA9IHBhdGgubGVuZ3RoIC0gMTtcblxuICAvLyBUcmFjayB0aGUgc3RhdGUgb2YgY2hhcmFjdGVycyAoaWYgYW55KSB3ZSBzZWUgYmVmb3JlIG91ciBmaXJzdCBkb3QgYW5kXG4gIC8vIGFmdGVyIGFueSBwYXRoIHNlcGFyYXRvciB3ZSBmaW5kXG4gIGxldCBwcmVEb3RTdGF0ZSA9IDA7XG5cbiAgLy8gR2V0IG5vbi1kaXIgaW5mb1xuICBmb3IgKDsgaSA+PSBzdGFydDsgLS1pKSB7XG4gICAgY29uc3QgY29kZSA9IHBhdGguY2hhckNvZGVBdChpKTtcbiAgICBpZiAoY29kZSA9PT0gQ0hBUl9GT1JXQVJEX1NMQVNIKSB7XG4gICAgICAvLyBJZiB3ZSByZWFjaGVkIGEgcGF0aCBzZXBhcmF0b3IgdGhhdCB3YXMgbm90IHBhcnQgb2YgYSBzZXQgb2YgcGF0aFxuICAgICAgLy8gc2VwYXJhdG9ycyBhdCB0aGUgZW5kIG9mIHRoZSBzdHJpbmcsIHN0b3Agbm93XG4gICAgICBpZiAoIW1hdGNoZWRTbGFzaCkge1xuICAgICAgICBzdGFydFBhcnQgPSBpICsgMTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGVuZCA9PT0gLTEpIHtcbiAgICAgIC8vIFdlIHNhdyB0aGUgZmlyc3Qgbm9uLXBhdGggc2VwYXJhdG9yLCBtYXJrIHRoaXMgYXMgdGhlIGVuZCBvZiBvdXJcbiAgICAgIC8vIGV4dGVuc2lvblxuICAgICAgbWF0Y2hlZFNsYXNoID0gZmFsc2U7XG4gICAgICBlbmQgPSBpICsgMTtcbiAgICB9XG4gICAgaWYgKGNvZGUgPT09IENIQVJfRE9UKSB7XG4gICAgICAvLyBJZiB0aGlzIGlzIG91ciBmaXJzdCBkb3QsIG1hcmsgaXQgYXMgdGhlIHN0YXJ0IG9mIG91ciBleHRlbnNpb25cbiAgICAgIGlmIChzdGFydERvdCA9PT0gLTEpIHN0YXJ0RG90ID0gaTtcbiAgICAgIGVsc2UgaWYgKHByZURvdFN0YXRlICE9PSAxKSBwcmVEb3RTdGF0ZSA9IDE7XG4gICAgfSBlbHNlIGlmIChzdGFydERvdCAhPT0gLTEpIHtcbiAgICAgIC8vIFdlIHNhdyBhIG5vbi1kb3QgYW5kIG5vbi1wYXRoIHNlcGFyYXRvciBiZWZvcmUgb3VyIGRvdCwgc28gd2Ugc2hvdWxkXG4gICAgICAvLyBoYXZlIGEgZ29vZCBjaGFuY2UgYXQgaGF2aW5nIGEgbm9uLWVtcHR5IGV4dGVuc2lvblxuICAgICAgcHJlRG90U3RhdGUgPSAtMTtcbiAgICB9XG4gIH1cblxuICBpZiAoXG4gICAgc3RhcnREb3QgPT09IC0xIHx8XG4gICAgZW5kID09PSAtMSB8fFxuICAgIC8vIFdlIHNhdyBhIG5vbi1kb3QgY2hhcmFjdGVyIGltbWVkaWF0ZWx5IGJlZm9yZSB0aGUgZG90XG4gICAgcHJlRG90U3RhdGUgPT09IDAgfHxcbiAgICAvLyBUaGUgKHJpZ2h0LW1vc3QpIHRyaW1tZWQgcGF0aCBjb21wb25lbnQgaXMgZXhhY3RseSAnLi4nXG4gICAgKHByZURvdFN0YXRlID09PSAxICYmIHN0YXJ0RG90ID09PSBlbmQgLSAxICYmIHN0YXJ0RG90ID09PSBzdGFydFBhcnQgKyAxKVxuICApIHtcbiAgICBpZiAoZW5kICE9PSAtMSkge1xuICAgICAgaWYgKHN0YXJ0UGFydCA9PT0gMCAmJiBpc0Fic29sdXRlKSB7XG4gICAgICAgIHJldC5iYXNlID0gcmV0Lm5hbWUgPSBwYXRoLnNsaWNlKDEsIGVuZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXQuYmFzZSA9IHJldC5uYW1lID0gcGF0aC5zbGljZShzdGFydFBhcnQsIGVuZCk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChzdGFydFBhcnQgPT09IDAgJiYgaXNBYnNvbHV0ZSkge1xuICAgICAgcmV0Lm5hbWUgPSBwYXRoLnNsaWNlKDEsIHN0YXJ0RG90KTtcbiAgICAgIHJldC5iYXNlID0gcGF0aC5zbGljZSgxLCBlbmQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXQubmFtZSA9IHBhdGguc2xpY2Uoc3RhcnRQYXJ0LCBzdGFydERvdCk7XG4gICAgICByZXQuYmFzZSA9IHBhdGguc2xpY2Uoc3RhcnRQYXJ0LCBlbmQpO1xuICAgIH1cbiAgICByZXQuZXh0ID0gcGF0aC5zbGljZShzdGFydERvdCwgZW5kKTtcbiAgfVxuXG4gIGlmIChzdGFydFBhcnQgPiAwKSByZXQuZGlyID0gcGF0aC5zbGljZSgwLCBzdGFydFBhcnQgLSAxKTtcbiAgZWxzZSBpZiAoaXNBYnNvbHV0ZSkgcmV0LmRpciA9IFwiL1wiO1xuXG4gIHJldHVybiByZXQ7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBmaWxlIFVSTCB0byBhIHBhdGggc3RyaW5nLlxuICpcbiAqIGBgYHRzXG4gKiAgICAgIGltcG9ydCB7IGZyb21GaWxlVXJsIH0gZnJvbSBcIi4vcG9zaXgudHNcIjtcbiAqICAgICAgZnJvbUZpbGVVcmwoXCJmaWxlOi8vL2hvbWUvZm9vXCIpOyAvLyBcIi9ob21lL2Zvb1wiXG4gKiBgYGBcbiAqIEBwYXJhbSB1cmwgb2YgYSBmaWxlIFVSTFxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUZpbGVVcmwodXJsOiBzdHJpbmcgfCBVUkwpOiBzdHJpbmcge1xuICB1cmwgPSB1cmwgaW5zdGFuY2VvZiBVUkwgPyB1cmwgOiBuZXcgVVJMKHVybCk7XG4gIGlmICh1cmwucHJvdG9jb2wgIT0gXCJmaWxlOlwiKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk11c3QgYmUgYSBmaWxlIFVSTC5cIik7XG4gIH1cbiAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChcbiAgICB1cmwucGF0aG5hbWUucmVwbGFjZSgvJSg/IVswLTlBLUZhLWZdezJ9KS9nLCBcIiUyNVwiKSxcbiAgKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIHBhdGggc3RyaW5nIHRvIGEgZmlsZSBVUkwuXG4gKlxuICogYGBgdHNcbiAqICAgICAgaW1wb3J0IHsgdG9GaWxlVXJsIH0gZnJvbSBcIi4vcG9zaXgudHNcIjtcbiAqICAgICAgdG9GaWxlVXJsKFwiL2hvbWUvZm9vXCIpOyAvLyBuZXcgVVJMKFwiZmlsZTovLy9ob21lL2Zvb1wiKVxuICogYGBgXG4gKiBAcGFyYW0gcGF0aCB0byBjb252ZXJ0IHRvIGZpbGUgVVJMXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0ZpbGVVcmwocGF0aDogc3RyaW5nKTogVVJMIHtcbiAgaWYgKCFpc0Fic29sdXRlKHBhdGgpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk11c3QgYmUgYW4gYWJzb2x1dGUgcGF0aC5cIik7XG4gIH1cbiAgY29uc3QgdXJsID0gbmV3IFVSTChcImZpbGU6Ly8vXCIpO1xuICB1cmwucGF0aG5hbWUgPSBlbmNvZGVXaGl0ZXNwYWNlKFxuICAgIHBhdGgucmVwbGFjZSgvJS9nLCBcIiUyNVwiKS5yZXBsYWNlKC9cXFxcL2csIFwiJTVDXCIpLFxuICApO1xuICByZXR1cm4gdXJsO1xufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMiB0aGUgRGVubyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLiBNSVQgbGljZW5zZS5cbi8vIFRoaXMgbW9kdWxlIGlzIGJyb3dzZXIgY29tcGF0aWJsZS5cblxuaW1wb3J0IHsgaXNXaW5kb3dzLCBvc1R5cGUgfSBmcm9tIFwiLi4vX3V0aWwvb3MudHNcIjtcbmltcG9ydCB7IFNFUCwgU0VQX1BBVFRFUk4gfSBmcm9tIFwiLi9zZXBhcmF0b3IudHNcIjtcbmltcG9ydCAqIGFzIF93aW4zMiBmcm9tIFwiLi93aW4zMi50c1wiO1xuaW1wb3J0ICogYXMgX3Bvc2l4IGZyb20gXCIuL3Bvc2l4LnRzXCI7XG5pbXBvcnQgdHlwZSB7IE9TVHlwZSB9IGZyb20gXCIuLi9fdXRpbC9vcy50c1wiO1xuXG5jb25zdCBwYXRoID0gaXNXaW5kb3dzID8gX3dpbjMyIDogX3Bvc2l4O1xuY29uc3QgeyBqb2luLCBub3JtYWxpemUgfSA9IHBhdGg7XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2xvYk9wdGlvbnMge1xuICAvKiogRXh0ZW5kZWQgZ2xvYiBzeW50YXguXG4gICAqIFNlZSBodHRwczovL3d3dy5saW51eGpvdXJuYWwuY29tL2NvbnRlbnQvYmFzaC1leHRlbmRlZC1nbG9iYmluZy4gRGVmYXVsdHNcbiAgICogdG8gdHJ1ZS4gKi9cbiAgZXh0ZW5kZWQ/OiBib29sZWFuO1xuICAvKiogR2xvYnN0YXIgc3ludGF4LlxuICAgKiBTZWUgaHR0cHM6Ly93d3cubGludXhqb3VybmFsLmNvbS9jb250ZW50L2dsb2JzdGFyLW5ldy1iYXNoLWdsb2JiaW5nLW9wdGlvbi5cbiAgICogSWYgZmFsc2UsIGAqKmAgaXMgdHJlYXRlZCBsaWtlIGAqYC4gRGVmYXVsdHMgdG8gdHJ1ZS4gKi9cbiAgZ2xvYnN0YXI/OiBib29sZWFuO1xuICAvKiogV2hldGhlciBnbG9ic3RhciBzaG91bGQgYmUgY2FzZSBpbnNlbnNpdGl2ZS4gKi9cbiAgY2FzZUluc2Vuc2l0aXZlPzogYm9vbGVhbjtcbiAgLyoqIE9wZXJhdGluZyBzeXN0ZW0uIERlZmF1bHRzIHRvIHRoZSBuYXRpdmUgT1MuICovXG4gIG9zPzogT1NUeXBlO1xufVxuXG5leHBvcnQgdHlwZSBHbG9iVG9SZWdFeHBPcHRpb25zID0gR2xvYk9wdGlvbnM7XG5cbmNvbnN0IHJlZ0V4cEVzY2FwZUNoYXJzID0gW1xuICBcIiFcIixcbiAgXCIkXCIsXG4gIFwiKFwiLFxuICBcIilcIixcbiAgXCIqXCIsXG4gIFwiK1wiLFxuICBcIi5cIixcbiAgXCI9XCIsXG4gIFwiP1wiLFxuICBcIltcIixcbiAgXCJcXFxcXCIsXG4gIFwiXlwiLFxuICBcIntcIixcbiAgXCJ8XCIsXG5dO1xuY29uc3QgcmFuZ2VFc2NhcGVDaGFycyA9IFtcIi1cIiwgXCJcXFxcXCIsIFwiXVwiXTtcblxuLyoqIENvbnZlcnQgYSBnbG9iIHN0cmluZyB0byBhIHJlZ3VsYXIgZXhwcmVzc2lvbi5cbiAqXG4gKiBUcmllcyB0byBtYXRjaCBiYXNoIGdsb2IgZXhwYW5zaW9uIGFzIGNsb3NlbHkgYXMgcG9zc2libGUuXG4gKlxuICogQmFzaWMgZ2xvYiBzeW50YXg6XG4gKiAtIGAqYCAtIE1hdGNoZXMgZXZlcnl0aGluZyB3aXRob3V0IGxlYXZpbmcgdGhlIHBhdGggc2VnbWVudC5cbiAqIC0gYD9gIC0gTWF0Y2hlcyBhbnkgc2luZ2xlIGNoYXJhY3Rlci5cbiAqIC0gYHtmb28sYmFyfWAgLSBNYXRjaGVzIGBmb29gIG9yIGBiYXJgLlxuICogLSBgW2FiY2RdYCAtIE1hdGNoZXMgYGFgLCBgYmAsIGBjYCBvciBgZGAuXG4gKiAtIGBbYS1kXWAgLSBNYXRjaGVzIGBhYCwgYGJgLCBgY2Agb3IgYGRgLlxuICogLSBgWyFhYmNkXWAgLSBNYXRjaGVzIGFueSBzaW5nbGUgY2hhcmFjdGVyIGJlc2lkZXMgYGFgLCBgYmAsIGBjYCBvciBgZGAuXG4gKiAtIGBbWzo8Y2xhc3M+Ol1dYCAtIE1hdGNoZXMgYW55IGNoYXJhY3RlciBiZWxvbmdpbmcgdG8gYDxjbGFzcz5gLlxuICogICAgIC0gYFtbOmFsbnVtOl1dYCAtIE1hdGNoZXMgYW55IGRpZ2l0IG9yIGxldHRlci5cbiAqICAgICAtIGBbWzpkaWdpdDpdYWJjXWAgLSBNYXRjaGVzIGFueSBkaWdpdCwgYGFgLCBgYmAgb3IgYGNgLlxuICogICAgIC0gU2VlIGh0dHBzOi8vZmFjZWxlc3N1c2VyLmdpdGh1Yi5pby93Y21hdGNoL2dsb2IvI3Bvc2l4LWNoYXJhY3Rlci1jbGFzc2VzXG4gKiAgICAgICBmb3IgYSBjb21wbGV0ZSBsaXN0IG9mIHN1cHBvcnRlZCBjaGFyYWN0ZXIgY2xhc3Nlcy5cbiAqIC0gYFxcYCAtIEVzY2FwZXMgdGhlIG5leHQgY2hhcmFjdGVyIGZvciBhbiBgb3NgIG90aGVyIHRoYW4gYFwid2luZG93c1wiYC5cbiAqIC0gXFxgIC0gRXNjYXBlcyB0aGUgbmV4dCBjaGFyYWN0ZXIgZm9yIGBvc2Agc2V0IHRvIGBcIndpbmRvd3NcImAuXG4gKiAtIGAvYCAtIFBhdGggc2VwYXJhdG9yLlxuICogLSBgXFxgIC0gQWRkaXRpb25hbCBwYXRoIHNlcGFyYXRvciBvbmx5IGZvciBgb3NgIHNldCB0byBgXCJ3aW5kb3dzXCJgLlxuICpcbiAqIEV4dGVuZGVkIHN5bnRheDpcbiAqIC0gUmVxdWlyZXMgYHsgZXh0ZW5kZWQ6IHRydWUgfWAuXG4gKiAtIGA/KGZvb3xiYXIpYCAtIE1hdGNoZXMgMCBvciAxIGluc3RhbmNlIG9mIGB7Zm9vLGJhcn1gLlxuICogLSBgQChmb298YmFyKWAgLSBNYXRjaGVzIDEgaW5zdGFuY2Ugb2YgYHtmb28sYmFyfWAuIFRoZXkgYmVoYXZlIHRoZSBzYW1lLlxuICogLSBgKihmb298YmFyKWAgLSBNYXRjaGVzIF9uXyBpbnN0YW5jZXMgb2YgYHtmb28sYmFyfWAuXG4gKiAtIGArKGZvb3xiYXIpYCAtIE1hdGNoZXMgX24gPiAwXyBpbnN0YW5jZXMgb2YgYHtmb28sYmFyfWAuXG4gKiAtIGAhKGZvb3xiYXIpYCAtIE1hdGNoZXMgYW55dGhpbmcgb3RoZXIgdGhhbiBge2ZvbyxiYXJ9YC5cbiAqIC0gU2VlIGh0dHBzOi8vd3d3LmxpbnV4am91cm5hbC5jb20vY29udGVudC9iYXNoLWV4dGVuZGVkLWdsb2JiaW5nLlxuICpcbiAqIEdsb2JzdGFyIHN5bnRheDpcbiAqIC0gUmVxdWlyZXMgYHsgZ2xvYnN0YXI6IHRydWUgfWAuXG4gKiAtIGAqKmAgLSBNYXRjaGVzIGFueSBudW1iZXIgb2YgYW55IHBhdGggc2VnbWVudHMuXG4gKiAgICAgLSBNdXN0IGNvbXByaXNlIGl0cyBlbnRpcmUgcGF0aCBzZWdtZW50IGluIHRoZSBwcm92aWRlZCBnbG9iLlxuICogLSBTZWUgaHR0cHM6Ly93d3cubGludXhqb3VybmFsLmNvbS9jb250ZW50L2dsb2JzdGFyLW5ldy1iYXNoLWdsb2JiaW5nLW9wdGlvbi5cbiAqXG4gKiBOb3RlIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqIC0gVGhlIGdlbmVyYXRlZCBgUmVnRXhwYCBpcyBhbmNob3JlZCBhdCBib3RoIHN0YXJ0IGFuZCBlbmQuXG4gKiAtIFJlcGVhdGluZyBhbmQgdHJhaWxpbmcgc2VwYXJhdG9ycyBhcmUgdG9sZXJhdGVkLiBUcmFpbGluZyBzZXBhcmF0b3JzIGluIHRoZVxuICogICBwcm92aWRlZCBnbG9iIGhhdmUgbm8gbWVhbmluZyBhbmQgYXJlIGRpc2NhcmRlZC5cbiAqIC0gQWJzb2x1dGUgZ2xvYnMgd2lsbCBvbmx5IG1hdGNoIGFic29sdXRlIHBhdGhzLCBldGMuXG4gKiAtIEVtcHR5IGdsb2JzIHdpbGwgbWF0Y2ggbm90aGluZy5cbiAqIC0gQW55IHNwZWNpYWwgZ2xvYiBzeW50YXggbXVzdCBiZSBjb250YWluZWQgdG8gb25lIHBhdGggc2VnbWVudC4gRm9yIGV4YW1wbGUsXG4gKiAgIGA/KGZvb3xiYXIvYmF6KWAgaXMgaW52YWxpZC4gVGhlIHNlcGFyYXRvciB3aWxsIHRha2UgcHJlY2VkZW5jZSBhbmQgdGhlXG4gKiAgIGZpcnN0IHNlZ21lbnQgZW5kcyB3aXRoIGFuIHVuY2xvc2VkIGdyb3VwLlxuICogLSBJZiBhIHBhdGggc2VnbWVudCBlbmRzIHdpdGggdW5jbG9zZWQgZ3JvdXBzIG9yIGEgZGFuZ2xpbmcgZXNjYXBlIHByZWZpeCwgYVxuICogICBwYXJzZSBlcnJvciBoYXMgb2NjdXJyZWQuIEV2ZXJ5IGNoYXJhY3RlciBmb3IgdGhhdCBzZWdtZW50IGlzIHRha2VuXG4gKiAgIGxpdGVyYWxseSBpbiB0aGlzIGV2ZW50LlxuICpcbiAqIExpbWl0YXRpb25zOlxuICogLSBBIG5lZ2F0aXZlIGdyb3VwIGxpa2UgYCEoZm9vfGJhcilgIHdpbGwgd3JvbmdseSBiZSBjb252ZXJ0ZWQgdG8gYSBuZWdhdGl2ZVxuICogICBsb29rLWFoZWFkIGZvbGxvd2VkIGJ5IGEgd2lsZGNhcmQuIFRoaXMgbWVhbnMgdGhhdCBgIShmb28pLmpzYCB3aWxsIHdyb25nbHlcbiAqICAgZmFpbCB0byBtYXRjaCBgZm9vYmFyLmpzYCwgZXZlbiB0aG91Z2ggYGZvb2JhcmAgaXMgbm90IGBmb29gLiBFZmZlY3RpdmVseSxcbiAqICAgYCEoZm9vfGJhcilgIGlzIHRyZWF0ZWQgbGlrZSBgIShAKGZvb3xiYXIpKilgLiBUaGlzIHdpbGwgd29yayBjb3JyZWN0bHkgaWZcbiAqICAgdGhlIGdyb3VwIG9jY3VycyBub3QgbmVzdGVkIGF0IHRoZSBlbmQgb2YgdGhlIHNlZ21lbnQuICovXG5leHBvcnQgZnVuY3Rpb24gZ2xvYlRvUmVnRXhwKFxuICBnbG9iOiBzdHJpbmcsXG4gIHtcbiAgICBleHRlbmRlZCA9IHRydWUsXG4gICAgZ2xvYnN0YXI6IGdsb2JzdGFyT3B0aW9uID0gdHJ1ZSxcbiAgICBvcyA9IG9zVHlwZSxcbiAgICBjYXNlSW5zZW5zaXRpdmUgPSBmYWxzZSxcbiAgfTogR2xvYlRvUmVnRXhwT3B0aW9ucyA9IHt9LFxuKTogUmVnRXhwIHtcbiAgaWYgKGdsb2IgPT0gXCJcIikge1xuICAgIHJldHVybiAvKD8hKS87XG4gIH1cblxuICBjb25zdCBzZXAgPSBvcyA9PSBcIndpbmRvd3NcIiA/IFwiKD86XFxcXFxcXFx8LykrXCIgOiBcIi8rXCI7XG4gIGNvbnN0IHNlcE1heWJlID0gb3MgPT0gXCJ3aW5kb3dzXCIgPyBcIig/OlxcXFxcXFxcfC8pKlwiIDogXCIvKlwiO1xuICBjb25zdCBzZXBzID0gb3MgPT0gXCJ3aW5kb3dzXCIgPyBbXCJcXFxcXCIsIFwiL1wiXSA6IFtcIi9cIl07XG4gIGNvbnN0IGdsb2JzdGFyID0gb3MgPT0gXCJ3aW5kb3dzXCJcbiAgICA/IFwiKD86W15cXFxcXFxcXC9dKig/OlxcXFxcXFxcfC98JCkrKSpcIlxuICAgIDogXCIoPzpbXi9dKig/Oi98JCkrKSpcIjtcbiAgY29uc3Qgd2lsZGNhcmQgPSBvcyA9PSBcIndpbmRvd3NcIiA/IFwiW15cXFxcXFxcXC9dKlwiIDogXCJbXi9dKlwiO1xuICBjb25zdCBlc2NhcGVQcmVmaXggPSBvcyA9PSBcIndpbmRvd3NcIiA/IFwiYFwiIDogXCJcXFxcXCI7XG5cbiAgLy8gUmVtb3ZlIHRyYWlsaW5nIHNlcGFyYXRvcnMuXG4gIGxldCBuZXdMZW5ndGggPSBnbG9iLmxlbmd0aDtcbiAgZm9yICg7IG5ld0xlbmd0aCA+IDEgJiYgc2Vwcy5pbmNsdWRlcyhnbG9iW25ld0xlbmd0aCAtIDFdKTsgbmV3TGVuZ3RoLS0pO1xuICBnbG9iID0gZ2xvYi5zbGljZSgwLCBuZXdMZW5ndGgpO1xuXG4gIGxldCByZWdFeHBTdHJpbmcgPSBcIlwiO1xuXG4gIC8vIFRlcm1pbmF0ZXMgY29ycmVjdGx5LiBUcnVzdCB0aGF0IGBqYCBpcyBpbmNyZW1lbnRlZCBldmVyeSBpdGVyYXRpb24uXG4gIGZvciAobGV0IGogPSAwOyBqIDwgZ2xvYi5sZW5ndGg7KSB7XG4gICAgbGV0IHNlZ21lbnQgPSBcIlwiO1xuICAgIGNvbnN0IGdyb3VwU3RhY2s6IHN0cmluZ1tdID0gW107XG4gICAgbGV0IGluUmFuZ2UgPSBmYWxzZTtcbiAgICBsZXQgaW5Fc2NhcGUgPSBmYWxzZTtcbiAgICBsZXQgZW5kc1dpdGhTZXAgPSBmYWxzZTtcbiAgICBsZXQgaSA9IGo7XG5cbiAgICAvLyBUZXJtaW5hdGVzIHdpdGggYGlgIGF0IHRoZSBub24taW5jbHVzaXZlIGVuZCBvZiB0aGUgY3VycmVudCBzZWdtZW50LlxuICAgIGZvciAoOyBpIDwgZ2xvYi5sZW5ndGggJiYgIXNlcHMuaW5jbHVkZXMoZ2xvYltpXSk7IGkrKykge1xuICAgICAgaWYgKGluRXNjYXBlKSB7XG4gICAgICAgIGluRXNjYXBlID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGVzY2FwZUNoYXJzID0gaW5SYW5nZSA/IHJhbmdlRXNjYXBlQ2hhcnMgOiByZWdFeHBFc2NhcGVDaGFycztcbiAgICAgICAgc2VnbWVudCArPSBlc2NhcGVDaGFycy5pbmNsdWRlcyhnbG9iW2ldKSA/IGBcXFxcJHtnbG9iW2ldfWAgOiBnbG9iW2ldO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGdsb2JbaV0gPT0gZXNjYXBlUHJlZml4KSB7XG4gICAgICAgIGluRXNjYXBlID0gdHJ1ZTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChnbG9iW2ldID09IFwiW1wiKSB7XG4gICAgICAgIGlmICghaW5SYW5nZSkge1xuICAgICAgICAgIGluUmFuZ2UgPSB0cnVlO1xuICAgICAgICAgIHNlZ21lbnQgKz0gXCJbXCI7XG4gICAgICAgICAgaWYgKGdsb2JbaSArIDFdID09IFwiIVwiKSB7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgICAgICBzZWdtZW50ICs9IFwiXlwiO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZ2xvYltpICsgMV0gPT0gXCJeXCIpIHtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIHNlZ21lbnQgKz0gXCJcXFxcXlwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfSBlbHNlIGlmIChnbG9iW2kgKyAxXSA9PSBcIjpcIikge1xuICAgICAgICAgIGxldCBrID0gaSArIDE7XG4gICAgICAgICAgbGV0IHZhbHVlID0gXCJcIjtcbiAgICAgICAgICB3aGlsZSAoZ2xvYltrICsgMV0gIT0gbnVsbCAmJiBnbG9iW2sgKyAxXSAhPSBcIjpcIikge1xuICAgICAgICAgICAgdmFsdWUgKz0gZ2xvYltrICsgMV07XG4gICAgICAgICAgICBrKys7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChnbG9iW2sgKyAxXSA9PSBcIjpcIiAmJiBnbG9iW2sgKyAyXSA9PSBcIl1cIikge1xuICAgICAgICAgICAgaSA9IGsgKyAyO1xuICAgICAgICAgICAgaWYgKHZhbHVlID09IFwiYWxudW1cIikgc2VnbWVudCArPSBcIlxcXFxkQS1aYS16XCI7XG4gICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PSBcImFscGhhXCIpIHNlZ21lbnQgKz0gXCJBLVphLXpcIjtcbiAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID09IFwiYXNjaWlcIikgc2VnbWVudCArPSBcIlxceDAwLVxceDdGXCI7XG4gICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PSBcImJsYW5rXCIpIHNlZ21lbnQgKz0gXCJcXHQgXCI7XG4gICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PSBcImNudHJsXCIpIHNlZ21lbnQgKz0gXCJcXHgwMC1cXHgxRlxceDdGXCI7XG4gICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PSBcImRpZ2l0XCIpIHNlZ21lbnQgKz0gXCJcXFxcZFwiO1xuICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT0gXCJncmFwaFwiKSBzZWdtZW50ICs9IFwiXFx4MjEtXFx4N0VcIjtcbiAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID09IFwibG93ZXJcIikgc2VnbWVudCArPSBcImEtelwiO1xuICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT0gXCJwcmludFwiKSBzZWdtZW50ICs9IFwiXFx4MjAtXFx4N0VcIjtcbiAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID09IFwicHVuY3RcIikge1xuICAgICAgICAgICAgICBzZWdtZW50ICs9IFwiIVxcXCIjJCUmJygpKissXFxcXC0uLzo7PD0+P0BbXFxcXFxcXFxcXFxcXV5f4oCYe3x9flwiO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSBcInNwYWNlXCIpIHNlZ21lbnQgKz0gXCJcXFxcc1xcdlwiO1xuICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT0gXCJ1cHBlclwiKSBzZWdtZW50ICs9IFwiQS1aXCI7XG4gICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PSBcIndvcmRcIikgc2VnbWVudCArPSBcIlxcXFx3XCI7XG4gICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PSBcInhkaWdpdFwiKSBzZWdtZW50ICs9IFwiXFxcXGRBLUZhLWZcIjtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2xvYltpXSA9PSBcIl1cIiAmJiBpblJhbmdlKSB7XG4gICAgICAgIGluUmFuZ2UgPSBmYWxzZTtcbiAgICAgICAgc2VnbWVudCArPSBcIl1cIjtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChpblJhbmdlKSB7XG4gICAgICAgIGlmIChnbG9iW2ldID09IFwiXFxcXFwiKSB7XG4gICAgICAgICAgc2VnbWVudCArPSBgXFxcXFxcXFxgO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlZ21lbnQgKz0gZ2xvYltpXTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBnbG9iW2ldID09IFwiKVwiICYmIGdyb3VwU3RhY2subGVuZ3RoID4gMCAmJlxuICAgICAgICBncm91cFN0YWNrW2dyb3VwU3RhY2subGVuZ3RoIC0gMV0gIT0gXCJCUkFDRVwiXG4gICAgICApIHtcbiAgICAgICAgc2VnbWVudCArPSBcIilcIjtcbiAgICAgICAgY29uc3QgdHlwZSA9IGdyb3VwU3RhY2sucG9wKCkhO1xuICAgICAgICBpZiAodHlwZSA9PSBcIiFcIikge1xuICAgICAgICAgIHNlZ21lbnQgKz0gd2lsZGNhcmQ7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSAhPSBcIkBcIikge1xuICAgICAgICAgIHNlZ21lbnQgKz0gdHlwZTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBnbG9iW2ldID09IFwifFwiICYmIGdyb3VwU3RhY2subGVuZ3RoID4gMCAmJlxuICAgICAgICBncm91cFN0YWNrW2dyb3VwU3RhY2subGVuZ3RoIC0gMV0gIT0gXCJCUkFDRVwiXG4gICAgICApIHtcbiAgICAgICAgc2VnbWVudCArPSBcInxcIjtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChnbG9iW2ldID09IFwiK1wiICYmIGV4dGVuZGVkICYmIGdsb2JbaSArIDFdID09IFwiKFwiKSB7XG4gICAgICAgIGkrKztcbiAgICAgICAgZ3JvdXBTdGFjay5wdXNoKFwiK1wiKTtcbiAgICAgICAgc2VnbWVudCArPSBcIig/OlwiO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGdsb2JbaV0gPT0gXCJAXCIgJiYgZXh0ZW5kZWQgJiYgZ2xvYltpICsgMV0gPT0gXCIoXCIpIHtcbiAgICAgICAgaSsrO1xuICAgICAgICBncm91cFN0YWNrLnB1c2goXCJAXCIpO1xuICAgICAgICBzZWdtZW50ICs9IFwiKD86XCI7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZ2xvYltpXSA9PSBcIj9cIikge1xuICAgICAgICBpZiAoZXh0ZW5kZWQgJiYgZ2xvYltpICsgMV0gPT0gXCIoXCIpIHtcbiAgICAgICAgICBpKys7XG4gICAgICAgICAgZ3JvdXBTdGFjay5wdXNoKFwiP1wiKTtcbiAgICAgICAgICBzZWdtZW50ICs9IFwiKD86XCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VnbWVudCArPSBcIi5cIjtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGdsb2JbaV0gPT0gXCIhXCIgJiYgZXh0ZW5kZWQgJiYgZ2xvYltpICsgMV0gPT0gXCIoXCIpIHtcbiAgICAgICAgaSsrO1xuICAgICAgICBncm91cFN0YWNrLnB1c2goXCIhXCIpO1xuICAgICAgICBzZWdtZW50ICs9IFwiKD8hXCI7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZ2xvYltpXSA9PSBcIntcIikge1xuICAgICAgICBncm91cFN0YWNrLnB1c2goXCJCUkFDRVwiKTtcbiAgICAgICAgc2VnbWVudCArPSBcIig/OlwiO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGdsb2JbaV0gPT0gXCJ9XCIgJiYgZ3JvdXBTdGFja1tncm91cFN0YWNrLmxlbmd0aCAtIDFdID09IFwiQlJBQ0VcIikge1xuICAgICAgICBncm91cFN0YWNrLnBvcCgpO1xuICAgICAgICBzZWdtZW50ICs9IFwiKVwiO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGdsb2JbaV0gPT0gXCIsXCIgJiYgZ3JvdXBTdGFja1tncm91cFN0YWNrLmxlbmd0aCAtIDFdID09IFwiQlJBQ0VcIikge1xuICAgICAgICBzZWdtZW50ICs9IFwifFwiO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGdsb2JbaV0gPT0gXCIqXCIpIHtcbiAgICAgICAgaWYgKGV4dGVuZGVkICYmIGdsb2JbaSArIDFdID09IFwiKFwiKSB7XG4gICAgICAgICAgaSsrO1xuICAgICAgICAgIGdyb3VwU3RhY2sucHVzaChcIipcIik7XG4gICAgICAgICAgc2VnbWVudCArPSBcIig/OlwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHByZXZDaGFyID0gZ2xvYltpIC0gMV07XG4gICAgICAgICAgbGV0IG51bVN0YXJzID0gMTtcbiAgICAgICAgICB3aGlsZSAoZ2xvYltpICsgMV0gPT0gXCIqXCIpIHtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIG51bVN0YXJzKys7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IG5leHRDaGFyID0gZ2xvYltpICsgMV07XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgZ2xvYnN0YXJPcHRpb24gJiYgbnVtU3RhcnMgPT0gMiAmJlxuICAgICAgICAgICAgWy4uLnNlcHMsIHVuZGVmaW5lZF0uaW5jbHVkZXMocHJldkNoYXIpICYmXG4gICAgICAgICAgICBbLi4uc2VwcywgdW5kZWZpbmVkXS5pbmNsdWRlcyhuZXh0Q2hhcilcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHNlZ21lbnQgKz0gZ2xvYnN0YXI7XG4gICAgICAgICAgICBlbmRzV2l0aFNlcCA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlZ21lbnQgKz0gd2lsZGNhcmQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBzZWdtZW50ICs9IHJlZ0V4cEVzY2FwZUNoYXJzLmluY2x1ZGVzKGdsb2JbaV0pID8gYFxcXFwke2dsb2JbaV19YCA6IGdsb2JbaV07XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIHVuY2xvc2VkIGdyb3VwcyBvciBhIGRhbmdsaW5nIGJhY2tzbGFzaC5cbiAgICBpZiAoZ3JvdXBTdGFjay5sZW5ndGggPiAwIHx8IGluUmFuZ2UgfHwgaW5Fc2NhcGUpIHtcbiAgICAgIC8vIFBhcnNlIGZhaWx1cmUuIFRha2UgYWxsIGNoYXJhY3RlcnMgZnJvbSB0aGlzIHNlZ21lbnQgbGl0ZXJhbGx5LlxuICAgICAgc2VnbWVudCA9IFwiXCI7XG4gICAgICBmb3IgKGNvbnN0IGMgb2YgZ2xvYi5zbGljZShqLCBpKSkge1xuICAgICAgICBzZWdtZW50ICs9IHJlZ0V4cEVzY2FwZUNoYXJzLmluY2x1ZGVzKGMpID8gYFxcXFwke2N9YCA6IGM7XG4gICAgICAgIGVuZHNXaXRoU2VwID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmVnRXhwU3RyaW5nICs9IHNlZ21lbnQ7XG4gICAgaWYgKCFlbmRzV2l0aFNlcCkge1xuICAgICAgcmVnRXhwU3RyaW5nICs9IGkgPCBnbG9iLmxlbmd0aCA/IHNlcCA6IHNlcE1heWJlO1xuICAgICAgZW5kc1dpdGhTZXAgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIFRlcm1pbmF0ZXMgd2l0aCBgaWAgYXQgdGhlIHN0YXJ0IG9mIHRoZSBuZXh0IHNlZ21lbnQuXG4gICAgd2hpbGUgKHNlcHMuaW5jbHVkZXMoZ2xvYltpXSkpIGkrKztcblxuICAgIC8vIENoZWNrIHRoYXQgdGhlIG5leHQgdmFsdWUgb2YgYGpgIGlzIGluZGVlZCBoaWdoZXIgdGhhbiB0aGUgY3VycmVudCB2YWx1ZS5cbiAgICBpZiAoIShpID4gaikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFzc2VydGlvbiBmYWlsdXJlOiBpID4gaiAocG90ZW50aWFsIGluZmluaXRlIGxvb3ApXCIpO1xuICAgIH1cbiAgICBqID0gaTtcbiAgfVxuXG4gIHJlZ0V4cFN0cmluZyA9IGBeJHtyZWdFeHBTdHJpbmd9JGA7XG4gIHJldHVybiBuZXcgUmVnRXhwKHJlZ0V4cFN0cmluZywgY2FzZUluc2Vuc2l0aXZlID8gXCJpXCIgOiBcIlwiKTtcbn1cblxuLyoqIFRlc3Qgd2hldGhlciB0aGUgZ2l2ZW4gc3RyaW5nIGlzIGEgZ2xvYiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzR2xvYihzdHI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCBjaGFyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHsgXCJ7XCI6IFwifVwiLCBcIihcIjogXCIpXCIsIFwiW1wiOiBcIl1cIiB9O1xuICBjb25zdCByZWdleCA9XG4gICAgL1xcXFwoLil8KF4hfFxcKnxcXD98W1xcXS4rKV1cXD98XFxbW15cXFxcXFxdXStcXF18XFx7W15cXFxcfV0rXFx9fFxcKFxcP1s6IT1dW15cXFxcKV0rXFwpfFxcKFtefF0rXFx8W15cXFxcKV0rXFwpKS87XG5cbiAgaWYgKHN0ciA9PT0gXCJcIikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGxldCBtYXRjaDogUmVnRXhwRXhlY0FycmF5IHwgbnVsbDtcblxuICB3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyhzdHIpKSkge1xuICAgIGlmIChtYXRjaFsyXSkgcmV0dXJuIHRydWU7XG4gICAgbGV0IGlkeCA9IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoO1xuXG4gICAgLy8gaWYgYW4gb3BlbiBicmFja2V0L2JyYWNlL3BhcmVuIGlzIGVzY2FwZWQsXG4gICAgLy8gc2V0IHRoZSBpbmRleCB0byB0aGUgbmV4dCBjbG9zaW5nIGNoYXJhY3RlclxuICAgIGNvbnN0IG9wZW4gPSBtYXRjaFsxXTtcbiAgICBjb25zdCBjbG9zZSA9IG9wZW4gPyBjaGFyc1tvcGVuXSA6IG51bGw7XG4gICAgaWYgKG9wZW4gJiYgY2xvc2UpIHtcbiAgICAgIGNvbnN0IG4gPSBzdHIuaW5kZXhPZihjbG9zZSwgaWR4KTtcbiAgICAgIGlmIChuICE9PSAtMSkge1xuICAgICAgICBpZHggPSBuICsgMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzdHIgPSBzdHIuc2xpY2UoaWR4KTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqIExpa2Ugbm9ybWFsaXplKCksIGJ1dCBkb2Vzbid0IGNvbGxhcHNlIFwiKipcXC8uLlwiIHdoZW4gYGdsb2JzdGFyYCBpcyB0cnVlLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZUdsb2IoXG4gIGdsb2I6IHN0cmluZyxcbiAgeyBnbG9ic3RhciA9IGZhbHNlIH06IEdsb2JPcHRpb25zID0ge30sXG4pOiBzdHJpbmcge1xuICBpZiAoZ2xvYi5tYXRjaCgvXFwwL2cpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBHbG9iIGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVyczogXCIke2dsb2J9XCJgKTtcbiAgfVxuICBpZiAoIWdsb2JzdGFyKSB7XG4gICAgcmV0dXJuIG5vcm1hbGl6ZShnbG9iKTtcbiAgfVxuICBjb25zdCBzID0gU0VQX1BBVFRFUk4uc291cmNlO1xuICBjb25zdCBiYWRQYXJlbnRQYXR0ZXJuID0gbmV3IFJlZ0V4cChcbiAgICBgKD88PSgke3N9fF4pXFxcXCpcXFxcKiR7c30pXFxcXC5cXFxcLig/PSR7c318JClgLFxuICAgIFwiZ1wiLFxuICApO1xuICByZXR1cm4gbm9ybWFsaXplKGdsb2IucmVwbGFjZShiYWRQYXJlbnRQYXR0ZXJuLCBcIlxcMFwiKSkucmVwbGFjZSgvXFwwL2csIFwiLi5cIik7XG59XG5cbi8qKiBMaWtlIGpvaW4oKSwgYnV0IGRvZXNuJ3QgY29sbGFwc2UgXCIqKlxcLy4uXCIgd2hlbiBgZ2xvYnN0YXJgIGlzIHRydWUuICovXG5leHBvcnQgZnVuY3Rpb24gam9pbkdsb2JzKFxuICBnbG9iczogc3RyaW5nW10sXG4gIHsgZXh0ZW5kZWQgPSB0cnVlLCBnbG9ic3RhciA9IGZhbHNlIH06IEdsb2JPcHRpb25zID0ge30sXG4pOiBzdHJpbmcge1xuICBpZiAoIWdsb2JzdGFyIHx8IGdsb2JzLmxlbmd0aCA9PSAwKSB7XG4gICAgcmV0dXJuIGpvaW4oLi4uZ2xvYnMpO1xuICB9XG4gIGlmIChnbG9icy5sZW5ndGggPT09IDApIHJldHVybiBcIi5cIjtcbiAgbGV0IGpvaW5lZDogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICBmb3IgKGNvbnN0IGdsb2Igb2YgZ2xvYnMpIHtcbiAgICBjb25zdCBwYXRoID0gZ2xvYjtcbiAgICBpZiAocGF0aC5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAoIWpvaW5lZCkgam9pbmVkID0gcGF0aDtcbiAgICAgIGVsc2Ugam9pbmVkICs9IGAke1NFUH0ke3BhdGh9YDtcbiAgICB9XG4gIH1cbiAgaWYgKCFqb2luZWQpIHJldHVybiBcIi5cIjtcbiAgcmV0dXJuIG5vcm1hbGl6ZUdsb2Ioam9pbmVkLCB7IGV4dGVuZGVkLCBnbG9ic3RhciB9KTtcbn1cbiIsIi8vIENvcHlyaWdodCAyMDE4LTIwMjIgdGhlIERlbm8gYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4gTUlUIGxpY2Vuc2UuXG4vLyBDb3B5cmlnaHQgdGhlIEJyb3dzZXJpZnkgYXV0aG9ycy4gTUlUIExpY2Vuc2UuXG4vLyBQb3J0ZWQgbW9zdGx5IGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2Jyb3dzZXJpZnkvcGF0aC1icm93c2VyaWZ5L1xuXG4vKipcbiAqIFV0aWxpdGllcyBmb3Igd29ya2luZyB3aXRoIE9TLXNwZWNpZmljIGZpbGUgcGF0aHMuXG4gKlxuICogVGhpcyBtb2R1bGUgaXMgYnJvd3NlciBjb21wYXRpYmxlLlxuICogQG1vZHVsZVxuICovXG5cbmltcG9ydCB7IGlzV2luZG93cyB9IGZyb20gXCIuLi9fdXRpbC9vcy50c1wiO1xuaW1wb3J0ICogYXMgX3dpbjMyIGZyb20gXCIuL3dpbjMyLnRzXCI7XG5pbXBvcnQgKiBhcyBfcG9zaXggZnJvbSBcIi4vcG9zaXgudHNcIjtcblxuY29uc3QgcGF0aCA9IGlzV2luZG93cyA/IF93aW4zMiA6IF9wb3NpeDtcblxuZXhwb3J0IGNvbnN0IHdpbjMyID0gX3dpbjMyO1xuZXhwb3J0IGNvbnN0IHBvc2l4ID0gX3Bvc2l4O1xuZXhwb3J0IGNvbnN0IHtcbiAgYmFzZW5hbWUsXG4gIGRlbGltaXRlcixcbiAgZGlybmFtZSxcbiAgZXh0bmFtZSxcbiAgZm9ybWF0LFxuICBmcm9tRmlsZVVybCxcbiAgaXNBYnNvbHV0ZSxcbiAgam9pbixcbiAgbm9ybWFsaXplLFxuICBwYXJzZSxcbiAgcmVsYXRpdmUsXG4gIHJlc29sdmUsXG4gIHNlcCxcbiAgdG9GaWxlVXJsLFxuICB0b05hbWVzcGFjZWRQYXRoLFxufSA9IHBhdGg7XG5cbmV4cG9ydCAqIGZyb20gXCIuL2NvbW1vbi50c1wiO1xuZXhwb3J0IHsgU0VQLCBTRVBfUEFUVEVSTiB9IGZyb20gXCIuL3NlcGFyYXRvci50c1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vX2ludGVyZmFjZS50c1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZ2xvYi50c1wiO1xuIiwiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMiB0aGUgRGVubyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLiBNSVQgbGljZW5zZS5cbi8vIFRoaXMgbW9kdWxlIGlzIGJyb3dzZXIgY29tcGF0aWJsZS5cblxuLyoqXG4gKiBQcm92aWRlcyBoZWxwZXIgZnVuY3Rpb25zIHRvIG1hbmlwdWxhdGUgYFVpbnQ4QXJyYXlgIGJ5dGUgc2xpY2VzIHRoYXQgYXJlIG5vdFxuICogaW5jbHVkZWQgb24gdGhlIGBVaW50OEFycmF5YCBwcm90b3R5cGUuXG4gKlxuICogQG1vZHVsZVxuICovXG5cbi8qKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiB0aGUgbmVlZGxlIGFycmF5IGluIHRoZSBzb3VyY2VcbiAqIGFycmF5LCBvciAtMSBpZiBpdCBpcyBub3QgcHJlc2VudC5cbiAqXG4gKiBBIHN0YXJ0IGluZGV4IGNhbiBiZSBzcGVjaWZpZWQgYXMgdGhlIHRoaXJkIGFyZ3VtZW50IHRoYXQgYmVnaW5zIHRoZSBzZWFyY2hcbiAqIGF0IHRoYXQgZ2l2ZW4gaW5kZXguIFRoZSBzdGFydCBpbmRleCBkZWZhdWx0cyB0byB0aGUgc3RhcnQgb2YgdGhlIGFycmF5LlxuICpcbiAqIFRoZSBjb21wbGV4aXR5IG9mIHRoaXMgZnVuY3Rpb24gaXMgTyhzb3VyY2UubGVudGggKiBuZWVkbGUubGVuZ3RoKS5cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgaW5kZXhPZk5lZWRsZSB9IGZyb20gXCIuL21vZC50c1wiO1xuICogY29uc3Qgc291cmNlID0gbmV3IFVpbnQ4QXJyYXkoWzAsIDEsIDIsIDEsIDIsIDEsIDIsIDNdKTtcbiAqIGNvbnN0IG5lZWRsZSA9IG5ldyBVaW50OEFycmF5KFsxLCAyXSk7XG4gKiBjb25zb2xlLmxvZyhpbmRleE9mTmVlZGxlKHNvdXJjZSwgbmVlZGxlKSk7IC8vIDFcbiAqIGNvbnNvbGUubG9nKGluZGV4T2ZOZWVkbGUoc291cmNlLCBuZWVkbGUsIDIpKTsgLy8gM1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmRleE9mTmVlZGxlKFxuICBzb3VyY2U6IFVpbnQ4QXJyYXksXG4gIG5lZWRsZTogVWludDhBcnJheSxcbiAgc3RhcnQgPSAwLFxuKTogbnVtYmVyIHtcbiAgaWYgKHN0YXJ0ID49IHNvdXJjZS5sZW5ndGgpIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgaWYgKHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ID0gTWF0aC5tYXgoMCwgc291cmNlLmxlbmd0aCArIHN0YXJ0KTtcbiAgfVxuICBjb25zdCBzID0gbmVlZGxlWzBdO1xuICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc291cmNlW2ldICE9PSBzKSBjb250aW51ZTtcbiAgICBjb25zdCBwaW4gPSBpO1xuICAgIGxldCBtYXRjaGVkID0gMTtcbiAgICBsZXQgaiA9IGk7XG4gICAgd2hpbGUgKG1hdGNoZWQgPCBuZWVkbGUubGVuZ3RoKSB7XG4gICAgICBqKys7XG4gICAgICBpZiAoc291cmNlW2pdICE9PSBuZWVkbGVbaiAtIHBpbl0pIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBtYXRjaGVkKys7XG4gICAgfVxuICAgIGlmIChtYXRjaGVkID09PSBuZWVkbGUubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gcGluO1xuICAgIH1cbiAgfVxuICByZXR1cm4gLTE7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbGFzdCBvY2N1cnJlbmNlIG9mIHRoZSBuZWVkbGUgYXJyYXkgaW4gdGhlIHNvdXJjZVxuICogYXJyYXksIG9yIC0xIGlmIGl0IGlzIG5vdCBwcmVzZW50LlxuICpcbiAqIEEgc3RhcnQgaW5kZXggY2FuIGJlIHNwZWNpZmllZCBhcyB0aGUgdGhpcmQgYXJndW1lbnQgdGhhdCBiZWdpbnMgdGhlIHNlYXJjaFxuICogYXQgdGhhdCBnaXZlbiBpbmRleC4gVGhlIHN0YXJ0IGluZGV4IGRlZmF1bHRzIHRvIHRoZSBlbmQgb2YgdGhlIGFycmF5LlxuICpcbiAqIFRoZSBjb21wbGV4aXR5IG9mIHRoaXMgZnVuY3Rpb24gaXMgTyhzb3VyY2UubGVudGggKiBuZWVkbGUubGVuZ3RoKS5cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgbGFzdEluZGV4T2ZOZWVkbGUgfSBmcm9tIFwiLi9tb2QudHNcIjtcbiAqIGNvbnN0IHNvdXJjZSA9IG5ldyBVaW50OEFycmF5KFswLCAxLCAyLCAxLCAyLCAxLCAyLCAzXSk7XG4gKiBjb25zdCBuZWVkbGUgPSBuZXcgVWludDhBcnJheShbMSwgMl0pO1xuICogY29uc29sZS5sb2cobGFzdEluZGV4T2ZOZWVkbGUoc291cmNlLCBuZWVkbGUpKTsgLy8gNVxuICogY29uc29sZS5sb2cobGFzdEluZGV4T2ZOZWVkbGUoc291cmNlLCBuZWVkbGUsIDQpKTsgLy8gM1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsYXN0SW5kZXhPZk5lZWRsZShcbiAgc291cmNlOiBVaW50OEFycmF5LFxuICBuZWVkbGU6IFVpbnQ4QXJyYXksXG4gIHN0YXJ0ID0gc291cmNlLmxlbmd0aCAtIDEsXG4pOiBudW1iZXIge1xuICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9XG4gIGlmIChzdGFydCA+PSBzb3VyY2UubGVuZ3RoKSB7XG4gICAgc3RhcnQgPSBzb3VyY2UubGVuZ3RoIC0gMTtcbiAgfVxuICBjb25zdCBlID0gbmVlZGxlW25lZWRsZS5sZW5ndGggLSAxXTtcbiAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpID49IDA7IGktLSkge1xuICAgIGlmIChzb3VyY2VbaV0gIT09IGUpIGNvbnRpbnVlO1xuICAgIGNvbnN0IHBpbiA9IGk7XG4gICAgbGV0IG1hdGNoZWQgPSAxO1xuICAgIGxldCBqID0gaTtcbiAgICB3aGlsZSAobWF0Y2hlZCA8IG5lZWRsZS5sZW5ndGgpIHtcbiAgICAgIGotLTtcbiAgICAgIGlmIChzb3VyY2Vbal0gIT09IG5lZWRsZVtuZWVkbGUubGVuZ3RoIC0gMSAtIChwaW4gLSBqKV0pIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBtYXRjaGVkKys7XG4gICAgfVxuICAgIGlmIChtYXRjaGVkID09PSBuZWVkbGUubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gcGluIC0gbmVlZGxlLmxlbmd0aCArIDE7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJlZml4IGFycmF5IGFwcGVhcnMgYXQgdGhlIHN0YXJ0IG9mIHRoZSBzb3VyY2UgYXJyYXksXG4gKiBmYWxzZSBvdGhlcndpc2UuXG4gKlxuICogVGhlIGNvbXBsZXhpdHkgb2YgdGhpcyBmdW5jdGlvbiBpcyBPKHByZWZpeC5sZW5ndGgpLlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBzdGFydHNXaXRoIH0gZnJvbSBcIi4vbW9kLnRzXCI7XG4gKiBjb25zdCBzb3VyY2UgPSBuZXcgVWludDhBcnJheShbMCwgMSwgMiwgMSwgMiwgMSwgMiwgM10pO1xuICogY29uc3QgcHJlZml4ID0gbmV3IFVpbnQ4QXJyYXkoWzAsIDEsIDJdKTtcbiAqIGNvbnNvbGUubG9nKHN0YXJ0c1dpdGgoc291cmNlLCBwcmVmaXgpKTsgLy8gdHJ1ZVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFydHNXaXRoKHNvdXJjZTogVWludDhBcnJheSwgcHJlZml4OiBVaW50OEFycmF5KTogYm9vbGVhbiB7XG4gIGZvciAobGV0IGkgPSAwLCBtYXggPSBwcmVmaXgubGVuZ3RoOyBpIDwgbWF4OyBpKyspIHtcbiAgICBpZiAoc291cmNlW2ldICE9PSBwcmVmaXhbaV0pIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc3VmZml4IGFycmF5IGFwcGVhcnMgYXQgdGhlIGVuZCBvZiB0aGUgc291cmNlIGFycmF5LFxuICogZmFsc2Ugb3RoZXJ3aXNlLlxuICpcbiAqIFRoZSBjb21wbGV4aXR5IG9mIHRoaXMgZnVuY3Rpb24gaXMgTyhzdWZmaXgubGVuZ3RoKS5cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgZW5kc1dpdGggfSBmcm9tIFwiLi9tb2QudHNcIjtcbiAqIGNvbnN0IHNvdXJjZSA9IG5ldyBVaW50OEFycmF5KFswLCAxLCAyLCAxLCAyLCAxLCAyLCAzXSk7XG4gKiBjb25zdCBzdWZmaXggPSBuZXcgVWludDhBcnJheShbMSwgMiwgM10pO1xuICogY29uc29sZS5sb2coZW5kc1dpdGgoc291cmNlLCBzdWZmaXgpKTsgLy8gdHJ1ZVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbmRzV2l0aChzb3VyY2U6IFVpbnQ4QXJyYXksIHN1ZmZpeDogVWludDhBcnJheSk6IGJvb2xlYW4ge1xuICBmb3IgKFxuICAgIGxldCBzcmNpID0gc291cmNlLmxlbmd0aCAtIDEsIHNmeGkgPSBzdWZmaXgubGVuZ3RoIC0gMTtcbiAgICBzZnhpID49IDA7XG4gICAgc3JjaS0tLCBzZnhpLS1cbiAgKSB7XG4gICAgaWYgKHNvdXJjZVtzcmNpXSAhPT0gc3VmZml4W3NmeGldKSByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKiBSZXR1cm5zIGEgbmV3IFVpbnQ4QXJyYXkgY29tcG9zZWQgb2YgYGNvdW50YCByZXBldGl0aW9ucyBvZiB0aGUgYHNvdXJjZWBcbiAqIGFycmF5LlxuICpcbiAqIElmIGBjb3VudGAgaXMgbmVnYXRpdmUsIGEgYFJhbmdlRXJyb3JgIGlzIHRocm93bi5cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgcmVwZWF0IH0gZnJvbSBcIi4vbW9kLnRzXCI7XG4gKiBjb25zdCBzb3VyY2UgPSBuZXcgVWludDhBcnJheShbMCwgMSwgMl0pO1xuICogY29uc29sZS5sb2cocmVwZWF0KHNvdXJjZSwgMykpOyAvLyBbMCwgMSwgMiwgMCwgMSwgMiwgMCwgMSwgMl1cbiAqIGNvbnNvbGUubG9nKHJlcGVhdChzb3VyY2UsIDApKTsgLy8gW11cbiAqIGNvbnNvbGUubG9nKHJlcGVhdChzb3VyY2UsIC0xKSk7IC8vIFJhbmdlRXJyb3JcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVwZWF0KHNvdXJjZTogVWludDhBcnJheSwgY291bnQ6IG51bWJlcik6IFVpbnQ4QXJyYXkge1xuICBpZiAoY291bnQgPT09IDApIHtcbiAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoKTtcbiAgfVxuXG4gIGlmIChjb3VudCA8IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcImJ5dGVzOiBuZWdhdGl2ZSByZXBlYXQgY291bnRcIik7XG4gIH0gZWxzZSBpZiAoKHNvdXJjZS5sZW5ndGggKiBjb3VudCkgLyBjb3VudCAhPT0gc291cmNlLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcImJ5dGVzOiByZXBlYXQgY291bnQgY2F1c2VzIG92ZXJmbG93XCIpO1xuICB9XG5cbiAgY29uc3QgaW50ID0gTWF0aC5mbG9vcihjb3VudCk7XG5cbiAgaWYgKGludCAhPT0gY291bnQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJieXRlczogcmVwZWF0IGNvdW50IG11c3QgYmUgYW4gaW50ZWdlclwiKTtcbiAgfVxuXG4gIGNvbnN0IG5iID0gbmV3IFVpbnQ4QXJyYXkoc291cmNlLmxlbmd0aCAqIGNvdW50KTtcblxuICBsZXQgYnAgPSBjb3B5KHNvdXJjZSwgbmIpO1xuXG4gIGZvciAoOyBicCA8IG5iLmxlbmd0aDsgYnAgKj0gMikge1xuICAgIGNvcHkobmIuc2xpY2UoMCwgYnApLCBuYiwgYnApO1xuICB9XG5cbiAgcmV0dXJuIG5iO1xufVxuXG4vKiogQ29uY2F0ZW5hdGUgdGhlIGdpdmVuIGFycmF5cyBpbnRvIGEgbmV3IFVpbnQ4QXJyYXkuXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGNvbmNhdCB9IGZyb20gXCIuL21vZC50c1wiO1xuICogY29uc3QgYSA9IG5ldyBVaW50OEFycmF5KFswLCAxLCAyXSk7XG4gKiBjb25zdCBiID0gbmV3IFVpbnQ4QXJyYXkoWzMsIDQsIDVdKTtcbiAqIGNvbnNvbGUubG9nKGNvbmNhdChhLCBiKSk7IC8vIFswLCAxLCAyLCAzLCA0LCA1XVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29uY2F0KC4uLmJ1ZjogVWludDhBcnJheVtdKTogVWludDhBcnJheSB7XG4gIGxldCBsZW5ndGggPSAwO1xuICBmb3IgKGNvbnN0IGIgb2YgYnVmKSB7XG4gICAgbGVuZ3RoICs9IGIubGVuZ3RoO1xuICB9XG5cbiAgY29uc3Qgb3V0cHV0ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTtcbiAgbGV0IGluZGV4ID0gMDtcbiAgZm9yIChjb25zdCBiIG9mIGJ1Zikge1xuICAgIG91dHB1dC5zZXQoYiwgaW5kZXgpO1xuICAgIGluZGV4ICs9IGIubGVuZ3RoO1xuICB9XG5cbiAgcmV0dXJuIG91dHB1dDtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc291cmNlIGFycmF5IGNvbnRhaW5zIHRoZSBuZWVkbGUgYXJyYXksIGZhbHNlIG90aGVyd2lzZS5cbiAqXG4gKiBBIHN0YXJ0IGluZGV4IGNhbiBiZSBzcGVjaWZpZWQgYXMgdGhlIHRoaXJkIGFyZ3VtZW50IHRoYXQgYmVnaW5zIHRoZSBzZWFyY2hcbiAqIGF0IHRoYXQgZ2l2ZW4gaW5kZXguIFRoZSBzdGFydCBpbmRleCBkZWZhdWx0cyB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheS5cbiAqXG4gKiBUaGUgY29tcGxleGl0eSBvZiB0aGlzIGZ1bmN0aW9uIGlzIE8oc291cmNlLmxlbmd0aCAqIG5lZWRsZS5sZW5ndGgpLlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBpbmNsdWRlc05lZWRsZSB9IGZyb20gXCIuL21vZC50c1wiO1xuICogY29uc3Qgc291cmNlID0gbmV3IFVpbnQ4QXJyYXkoWzAsIDEsIDIsIDEsIDIsIDEsIDIsIDNdKTtcbiAqIGNvbnN0IG5lZWRsZSA9IG5ldyBVaW50OEFycmF5KFsxLCAyXSk7XG4gKiBjb25zb2xlLmxvZyhpbmNsdWRlc05lZWRsZShzb3VyY2UsIG5lZWRsZSkpOyAvLyB0cnVlXG4gKiBjb25zb2xlLmxvZyhpbmNsdWRlc05lZWRsZShzb3VyY2UsIG5lZWRsZSwgNikpOyAvLyBmYWxzZVxuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmNsdWRlc05lZWRsZShcbiAgc291cmNlOiBVaW50OEFycmF5LFxuICBuZWVkbGU6IFVpbnQ4QXJyYXksXG4gIHN0YXJ0ID0gMCxcbik6IGJvb2xlYW4ge1xuICByZXR1cm4gaW5kZXhPZk5lZWRsZShzb3VyY2UsIG5lZWRsZSwgc3RhcnQpICE9PSAtMTtcbn1cblxuLyoqIENvcHkgYnl0ZXMgZnJvbSB0aGUgYHNyY2AgYXJyYXkgdG8gdGhlIGBkc3RgIGFycmF5LiBSZXR1cm5zIHRoZSBudW1iZXIgb2ZcbiAqIGJ5dGVzIGNvcGllZC5cbiAqXG4gKiBJZiB0aGUgYHNyY2AgYXJyYXkgaXMgbGFyZ2VyIHRoYW4gd2hhdCB0aGUgYGRzdGAgYXJyYXkgY2FuIGhvbGQsIG9ubHkgdGhlXG4gKiBhbW91bnQgb2YgYnl0ZXMgdGhhdCBmaXQgaW4gdGhlIGBkc3RgIGFycmF5IGFyZSBjb3BpZWQuXG4gKlxuICogQW4gb2Zmc2V0IGNhbiBiZSBzcGVjaWZpZWQgYXMgdGhlIHRoaXJkIGFyZ3VtZW50IHRoYXQgYmVnaW5zIHRoZSBjb3B5IGF0XG4gKiB0aGF0IGdpdmVuIGluZGV4IGluIHRoZSBgZHN0YCBhcnJheS4gVGhlIG9mZnNldCBkZWZhdWx0cyB0byB0aGUgYmVnaW5uaW5nIG9mXG4gKiB0aGUgYXJyYXkuXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGNvcHkgfSBmcm9tIFwiLi9tb2QudHNcIjtcbiAqIGNvbnN0IHNyYyA9IG5ldyBVaW50OEFycmF5KFs5LCA4LCA3XSk7XG4gKiBjb25zdCBkc3QgPSBuZXcgVWludDhBcnJheShbMCwgMSwgMiwgMywgNCwgNV0pO1xuICogY29uc29sZS5sb2coY29weShzcmMsIGRzdCkpOyAvLyAzXG4gKiBjb25zb2xlLmxvZyhkc3QpOyAvLyBbOSwgOCwgNywgMywgNCwgNV1cbiAqIGBgYFxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBjb3B5IH0gZnJvbSBcIi4vbW9kLnRzXCI7XG4gKiBjb25zdCBzcmMgPSBuZXcgVWludDhBcnJheShbMSwgMSwgMSwgMV0pO1xuICogY29uc3QgZHN0ID0gbmV3IFVpbnQ4QXJyYXkoWzAsIDAsIDAsIDBdKTtcbiAqIGNvbnNvbGUubG9nKGNvcHkoc3JjLCBkc3QsIDEpKTsgLy8gM1xuICogY29uc29sZS5sb2coZHN0KTsgLy8gWzAsIDEsIDEsIDFdXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvcHkoc3JjOiBVaW50OEFycmF5LCBkc3Q6IFVpbnQ4QXJyYXksIG9mZiA9IDApOiBudW1iZXIge1xuICBvZmYgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihvZmYsIGRzdC5ieXRlTGVuZ3RoKSk7XG4gIGNvbnN0IGRzdEJ5dGVzQXZhaWxhYmxlID0gZHN0LmJ5dGVMZW5ndGggLSBvZmY7XG4gIGlmIChzcmMuYnl0ZUxlbmd0aCA+IGRzdEJ5dGVzQXZhaWxhYmxlKSB7XG4gICAgc3JjID0gc3JjLnN1YmFycmF5KDAsIGRzdEJ5dGVzQXZhaWxhYmxlKTtcbiAgfVxuICBkc3Quc2V0KHNyYywgb2ZmKTtcbiAgcmV0dXJuIHNyYy5ieXRlTGVuZ3RoO1xufVxuXG5leHBvcnQgeyBlcXVhbHMgfSBmcm9tIFwiLi9lcXVhbHMudHNcIjtcbiIsIi8vIENvcHlyaWdodCAyMDE4LTIwMjIgdGhlIERlbm8gYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4gTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tIFwiLi4vX3V0aWwvYXNzZXJ0LnRzXCI7XG5pbXBvcnQgeyBCeXRlc0xpc3QgfSBmcm9tIFwiLi4vYnl0ZXMvYnl0ZXNfbGlzdC50c1wiO1xuaW1wb3J0IHsgY29uY2F0LCBjb3B5IH0gZnJvbSBcIi4uL2J5dGVzL21vZC50c1wiO1xuaW1wb3J0IHR5cGUgeyBSZWFkZXIsIFJlYWRlclN5bmMsIFdyaXRlciwgV3JpdGVyU3luYyB9IGZyb20gXCIuL3R5cGVzLmQudHNcIjtcblxuLy8gTUlOX1JFQUQgaXMgdGhlIG1pbmltdW0gQXJyYXlCdWZmZXIgc2l6ZSBwYXNzZWQgdG8gYSByZWFkIGNhbGwgYnlcbi8vIGJ1ZmZlci5SZWFkRnJvbS4gQXMgbG9uZyBhcyB0aGUgQnVmZmVyIGhhcyBhdCBsZWFzdCBNSU5fUkVBRCBieXRlcyBiZXlvbmRcbi8vIHdoYXQgaXMgcmVxdWlyZWQgdG8gaG9sZCB0aGUgY29udGVudHMgb2YgciwgcmVhZEZyb20oKSB3aWxsIG5vdCBncm93IHRoZVxuLy8gdW5kZXJseWluZyBidWZmZXIuXG5jb25zdCBNSU5fUkVBRCA9IDMyICogMTAyNDtcbmNvbnN0IE1BWF9TSVpFID0gMiAqKiAzMiAtIDI7XG5cbi8qKiBBIHZhcmlhYmxlLXNpemVkIGJ1ZmZlciBvZiBieXRlcyB3aXRoIGByZWFkKClgIGFuZCBgd3JpdGUoKWAgbWV0aG9kcy5cbiAqXG4gKiBCdWZmZXIgaXMgYWxtb3N0IGFsd2F5cyB1c2VkIHdpdGggc29tZSBJL08gbGlrZSBmaWxlcyBhbmQgc29ja2V0cy4gSXQgYWxsb3dzXG4gKiBvbmUgdG8gYnVmZmVyIHVwIGEgZG93bmxvYWQgZnJvbSBhIHNvY2tldC4gQnVmZmVyIGdyb3dzIGFuZCBzaHJpbmtzIGFzXG4gKiBuZWNlc3NhcnkuXG4gKlxuICogQnVmZmVyIGlzIE5PVCB0aGUgc2FtZSB0aGluZyBhcyBOb2RlJ3MgQnVmZmVyLiBOb2RlJ3MgQnVmZmVyIHdhcyBjcmVhdGVkIGluXG4gKiAyMDA5IGJlZm9yZSBKYXZhU2NyaXB0IGhhZCB0aGUgY29uY2VwdCBvZiBBcnJheUJ1ZmZlcnMuIEl0J3Mgc2ltcGx5IGFcbiAqIG5vbi1zdGFuZGFyZCBBcnJheUJ1ZmZlci5cbiAqXG4gKiBBcnJheUJ1ZmZlciBpcyBhIGZpeGVkIG1lbW9yeSBhbGxvY2F0aW9uLiBCdWZmZXIgaXMgaW1wbGVtZW50ZWQgb24gdG9wIG9mXG4gKiBBcnJheUJ1ZmZlci5cbiAqXG4gKiBCYXNlZCBvbiBbR28gQnVmZmVyXShodHRwczovL2dvbGFuZy5vcmcvcGtnL2J5dGVzLyNCdWZmZXIpLiAqL1xuXG5leHBvcnQgY2xhc3MgQnVmZmVyIHtcbiAgI2J1ZjogVWludDhBcnJheTsgLy8gY29udGVudHMgYXJlIHRoZSBieXRlcyBidWZbb2ZmIDogbGVuKGJ1ZildXG4gICNvZmYgPSAwOyAvLyByZWFkIGF0IGJ1ZltvZmZdLCB3cml0ZSBhdCBidWZbYnVmLmJ5dGVMZW5ndGhdXG5cbiAgY29uc3RydWN0b3IoYWI/OiBBcnJheUJ1ZmZlckxpa2UgfCBBcnJheUxpa2U8bnVtYmVyPikge1xuICAgIHRoaXMuI2J1ZiA9IGFiID09PSB1bmRlZmluZWQgPyBuZXcgVWludDhBcnJheSgwKSA6IG5ldyBVaW50OEFycmF5KGFiKTtcbiAgfVxuXG4gIC8qKiBSZXR1cm5zIGEgc2xpY2UgaG9sZGluZyB0aGUgdW5yZWFkIHBvcnRpb24gb2YgdGhlIGJ1ZmZlci5cbiAgICpcbiAgICogVGhlIHNsaWNlIGlzIHZhbGlkIGZvciB1c2Ugb25seSB1bnRpbCB0aGUgbmV4dCBidWZmZXIgbW9kaWZpY2F0aW9uICh0aGF0XG4gICAqIGlzLCBvbmx5IHVudGlsIHRoZSBuZXh0IGNhbGwgdG8gYSBtZXRob2QgbGlrZSBgcmVhZCgpYCwgYHdyaXRlKClgLFxuICAgKiBgcmVzZXQoKWAsIG9yIGB0cnVuY2F0ZSgpYCkuIElmIGBvcHRpb25zLmNvcHlgIGlzIGZhbHNlIHRoZSBzbGljZSBhbGlhc2VzIHRoZSBidWZmZXIgY29udGVudCBhdFxuICAgKiBsZWFzdCB1bnRpbCB0aGUgbmV4dCBidWZmZXIgbW9kaWZpY2F0aW9uLCBzbyBpbW1lZGlhdGUgY2hhbmdlcyB0byB0aGVcbiAgICogc2xpY2Ugd2lsbCBhZmZlY3QgdGhlIHJlc3VsdCBvZiBmdXR1cmUgcmVhZHMuXG4gICAqIEBwYXJhbSBvcHRpb25zIERlZmF1bHRzIHRvIGB7IGNvcHk6IHRydWUgfWBcbiAgICovXG4gIGJ5dGVzKG9wdGlvbnMgPSB7IGNvcHk6IHRydWUgfSk6IFVpbnQ4QXJyYXkge1xuICAgIGlmIChvcHRpb25zLmNvcHkgPT09IGZhbHNlKSByZXR1cm4gdGhpcy4jYnVmLnN1YmFycmF5KHRoaXMuI29mZik7XG4gICAgcmV0dXJuIHRoaXMuI2J1Zi5zbGljZSh0aGlzLiNvZmYpO1xuICB9XG5cbiAgLyoqIFJldHVybnMgd2hldGhlciB0aGUgdW5yZWFkIHBvcnRpb24gb2YgdGhlIGJ1ZmZlciBpcyBlbXB0eS4gKi9cbiAgZW1wdHkoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuI2J1Zi5ieXRlTGVuZ3RoIDw9IHRoaXMuI29mZjtcbiAgfVxuXG4gIC8qKiBBIHJlYWQgb25seSBudW1iZXIgb2YgYnl0ZXMgb2YgdGhlIHVucmVhZCBwb3J0aW9uIG9mIHRoZSBidWZmZXIuICovXG4gIGdldCBsZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy4jYnVmLmJ5dGVMZW5ndGggLSB0aGlzLiNvZmY7XG4gIH1cblxuICAvKiogVGhlIHJlYWQgb25seSBjYXBhY2l0eSBvZiB0aGUgYnVmZmVyJ3MgdW5kZXJseWluZyBieXRlIHNsaWNlLCB0aGF0IGlzLFxuICAgKiB0aGUgdG90YWwgc3BhY2UgYWxsb2NhdGVkIGZvciB0aGUgYnVmZmVyJ3MgZGF0YS4gKi9cbiAgZ2V0IGNhcGFjaXR5KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuI2J1Zi5idWZmZXIuYnl0ZUxlbmd0aDtcbiAgfVxuXG4gIC8qKiBEaXNjYXJkcyBhbGwgYnV0IHRoZSBmaXJzdCBgbmAgdW5yZWFkIGJ5dGVzIGZyb20gdGhlIGJ1ZmZlciBidXRcbiAgICogY29udGludWVzIHRvIHVzZSB0aGUgc2FtZSBhbGxvY2F0ZWQgc3RvcmFnZS4gSXQgdGhyb3dzIGlmIGBuYCBpc1xuICAgKiBuZWdhdGl2ZSBvciBncmVhdGVyIHRoYW4gdGhlIGxlbmd0aCBvZiB0aGUgYnVmZmVyLiAqL1xuICB0cnVuY2F0ZShuOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAobiA9PT0gMCkge1xuICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAobiA8IDAgfHwgbiA+IHRoaXMubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBFcnJvcihcImJ5dGVzLkJ1ZmZlcjogdHJ1bmNhdGlvbiBvdXQgb2YgcmFuZ2VcIik7XG4gICAgfVxuICAgIHRoaXMuI3Jlc2xpY2UodGhpcy4jb2ZmICsgbik7XG4gIH1cblxuICByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLiNyZXNsaWNlKDApO1xuICAgIHRoaXMuI29mZiA9IDA7XG4gIH1cblxuICAjdHJ5R3Jvd0J5UmVzbGljZShuOiBudW1iZXIpIHtcbiAgICBjb25zdCBsID0gdGhpcy4jYnVmLmJ5dGVMZW5ndGg7XG4gICAgaWYgKG4gPD0gdGhpcy5jYXBhY2l0eSAtIGwpIHtcbiAgICAgIHRoaXMuI3Jlc2xpY2UobCArIG4pO1xuICAgICAgcmV0dXJuIGw7XG4gICAgfVxuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gICNyZXNsaWNlKGxlbjogbnVtYmVyKSB7XG4gICAgYXNzZXJ0KGxlbiA8PSB0aGlzLiNidWYuYnVmZmVyLmJ5dGVMZW5ndGgpO1xuICAgIHRoaXMuI2J1ZiA9IG5ldyBVaW50OEFycmF5KHRoaXMuI2J1Zi5idWZmZXIsIDAsIGxlbik7XG4gIH1cblxuICAvKiogUmVhZHMgdGhlIG5leHQgYHAubGVuZ3RoYCBieXRlcyBmcm9tIHRoZSBidWZmZXIgb3IgdW50aWwgdGhlIGJ1ZmZlciBpc1xuICAgKiBkcmFpbmVkLiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgYnl0ZXMgcmVhZC4gSWYgdGhlIGJ1ZmZlciBoYXMgbm8gZGF0YSB0b1xuICAgKiByZXR1cm4sIHRoZSByZXR1cm4gaXMgRU9GIChgbnVsbGApLiAqL1xuICByZWFkU3luYyhwOiBVaW50OEFycmF5KTogbnVtYmVyIHwgbnVsbCB7XG4gICAgaWYgKHRoaXMuZW1wdHkoKSkge1xuICAgICAgLy8gQnVmZmVyIGlzIGVtcHR5LCByZXNldCB0byByZWNvdmVyIHNwYWNlLlxuICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgaWYgKHAuYnl0ZUxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyB0aGlzIGVkZ2UgY2FzZSBpcyB0ZXN0ZWQgaW4gJ2J1ZmZlclJlYWRFbXB0eUF0RU9GJyB0ZXN0XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IG5yZWFkID0gY29weSh0aGlzLiNidWYuc3ViYXJyYXkodGhpcy4jb2ZmKSwgcCk7XG4gICAgdGhpcy4jb2ZmICs9IG5yZWFkO1xuICAgIHJldHVybiBucmVhZDtcbiAgfVxuXG4gIC8qKiBSZWFkcyB0aGUgbmV4dCBgcC5sZW5ndGhgIGJ5dGVzIGZyb20gdGhlIGJ1ZmZlciBvciB1bnRpbCB0aGUgYnVmZmVyIGlzXG4gICAqIGRyYWluZWQuIFJlc29sdmVzIHRvIHRoZSBudW1iZXIgb2YgYnl0ZXMgcmVhZC4gSWYgdGhlIGJ1ZmZlciBoYXMgbm9cbiAgICogZGF0YSB0byByZXR1cm4sIHJlc29sdmVzIHRvIEVPRiAoYG51bGxgKS5cbiAgICpcbiAgICogTk9URTogVGhpcyBtZXRob2RzIHJlYWRzIGJ5dGVzIHN5bmNocm9ub3VzbHk7IGl0J3MgcHJvdmlkZWQgZm9yXG4gICAqIGNvbXBhdGliaWxpdHkgd2l0aCBgUmVhZGVyYCBpbnRlcmZhY2VzLlxuICAgKi9cbiAgcmVhZChwOiBVaW50OEFycmF5KTogUHJvbWlzZTxudW1iZXIgfCBudWxsPiB7XG4gICAgY29uc3QgcnIgPSB0aGlzLnJlYWRTeW5jKHApO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocnIpO1xuICB9XG5cbiAgd3JpdGVTeW5jKHA6IFVpbnQ4QXJyYXkpOiBudW1iZXIge1xuICAgIGNvbnN0IG0gPSB0aGlzLiNncm93KHAuYnl0ZUxlbmd0aCk7XG4gICAgcmV0dXJuIGNvcHkocCwgdGhpcy4jYnVmLCBtKTtcbiAgfVxuXG4gIC8qKiBOT1RFOiBUaGlzIG1ldGhvZHMgd3JpdGVzIGJ5dGVzIHN5bmNocm9ub3VzbHk7IGl0J3MgcHJvdmlkZWQgZm9yXG4gICAqIGNvbXBhdGliaWxpdHkgd2l0aCBgV3JpdGVyYCBpbnRlcmZhY2UuICovXG4gIHdyaXRlKHA6IFVpbnQ4QXJyYXkpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIGNvbnN0IG4gPSB0aGlzLndyaXRlU3luYyhwKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG4pO1xuICB9XG5cbiAgI2dyb3cobjogbnVtYmVyKSB7XG4gICAgY29uc3QgbSA9IHRoaXMubGVuZ3RoO1xuICAgIC8vIElmIGJ1ZmZlciBpcyBlbXB0eSwgcmVzZXQgdG8gcmVjb3ZlciBzcGFjZS5cbiAgICBpZiAobSA9PT0gMCAmJiB0aGlzLiNvZmYgIT09IDApIHtcbiAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9XG4gICAgLy8gRmFzdDogVHJ5IHRvIGdyb3cgYnkgbWVhbnMgb2YgYSByZXNsaWNlLlxuICAgIGNvbnN0IGkgPSB0aGlzLiN0cnlHcm93QnlSZXNsaWNlKG4pO1xuICAgIGlmIChpID49IDApIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICBjb25zdCBjID0gdGhpcy5jYXBhY2l0eTtcbiAgICBpZiAobiA8PSBNYXRoLmZsb29yKGMgLyAyKSAtIG0pIHtcbiAgICAgIC8vIFdlIGNhbiBzbGlkZSB0aGluZ3MgZG93biBpbnN0ZWFkIG9mIGFsbG9jYXRpbmcgYSBuZXdcbiAgICAgIC8vIEFycmF5QnVmZmVyLiBXZSBvbmx5IG5lZWQgbStuIDw9IGMgdG8gc2xpZGUsIGJ1dFxuICAgICAgLy8gd2UgaW5zdGVhZCBsZXQgY2FwYWNpdHkgZ2V0IHR3aWNlIGFzIGxhcmdlIHNvIHdlXG4gICAgICAvLyBkb24ndCBzcGVuZCBhbGwgb3VyIHRpbWUgY29weWluZy5cbiAgICAgIGNvcHkodGhpcy4jYnVmLnN1YmFycmF5KHRoaXMuI29mZiksIHRoaXMuI2J1Zik7XG4gICAgfSBlbHNlIGlmIChjICsgbiA+IE1BWF9TSVpFKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgYnVmZmVyIGNhbm5vdCBiZSBncm93biBiZXlvbmQgdGhlIG1heGltdW0gc2l6ZS5cIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE5vdCBlbm91Z2ggc3BhY2UgYW55d2hlcmUsIHdlIG5lZWQgdG8gYWxsb2NhdGUuXG4gICAgICBjb25zdCBidWYgPSBuZXcgVWludDhBcnJheShNYXRoLm1pbigyICogYyArIG4sIE1BWF9TSVpFKSk7XG4gICAgICBjb3B5KHRoaXMuI2J1Zi5zdWJhcnJheSh0aGlzLiNvZmYpLCBidWYpO1xuICAgICAgdGhpcy4jYnVmID0gYnVmO1xuICAgIH1cbiAgICAvLyBSZXN0b3JlIHRoaXMuI29mZiBhbmQgbGVuKHRoaXMuI2J1ZikuXG4gICAgdGhpcy4jb2ZmID0gMDtcbiAgICB0aGlzLiNyZXNsaWNlKE1hdGgubWluKG0gKyBuLCBNQVhfU0laRSkpO1xuICAgIHJldHVybiBtO1xuICB9XG5cbiAgLyoqIEdyb3dzIHRoZSBidWZmZXIncyBjYXBhY2l0eSwgaWYgbmVjZXNzYXJ5LCB0byBndWFyYW50ZWUgc3BhY2UgZm9yXG4gICAqIGFub3RoZXIgYG5gIGJ5dGVzLiBBZnRlciBgLmdyb3cobilgLCBhdCBsZWFzdCBgbmAgYnl0ZXMgY2FuIGJlIHdyaXR0ZW4gdG9cbiAgICogdGhlIGJ1ZmZlciB3aXRob3V0IGFub3RoZXIgYWxsb2NhdGlvbi4gSWYgYG5gIGlzIG5lZ2F0aXZlLCBgLmdyb3coKWAgd2lsbFxuICAgKiB0aHJvdy4gSWYgdGhlIGJ1ZmZlciBjYW4ndCBncm93IGl0IHdpbGwgdGhyb3cgYW4gZXJyb3IuXG4gICAqXG4gICAqIEJhc2VkIG9uIEdvIExhbmcnc1xuICAgKiBbQnVmZmVyLkdyb3ddKGh0dHBzOi8vZ29sYW5nLm9yZy9wa2cvYnl0ZXMvI0J1ZmZlci5Hcm93KS4gKi9cbiAgZ3JvdyhuOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAobiA8IDApIHtcbiAgICAgIHRocm93IEVycm9yKFwiQnVmZmVyLmdyb3c6IG5lZ2F0aXZlIGNvdW50XCIpO1xuICAgIH1cbiAgICBjb25zdCBtID0gdGhpcy4jZ3JvdyhuKTtcbiAgICB0aGlzLiNyZXNsaWNlKG0pO1xuICB9XG5cbiAgLyoqIFJlYWRzIGRhdGEgZnJvbSBgcmAgdW50aWwgRU9GIChgbnVsbGApIGFuZCBhcHBlbmRzIGl0IHRvIHRoZSBidWZmZXIsXG4gICAqIGdyb3dpbmcgdGhlIGJ1ZmZlciBhcyBuZWVkZWQuIEl0IHJlc29sdmVzIHRvIHRoZSBudW1iZXIgb2YgYnl0ZXMgcmVhZC5cbiAgICogSWYgdGhlIGJ1ZmZlciBiZWNvbWVzIHRvbyBsYXJnZSwgYC5yZWFkRnJvbSgpYCB3aWxsIHJlamVjdCB3aXRoIGFuIGVycm9yLlxuICAgKlxuICAgKiBCYXNlZCBvbiBHbyBMYW5nJ3NcbiAgICogW0J1ZmZlci5SZWFkRnJvbV0oaHR0cHM6Ly9nb2xhbmcub3JnL3BrZy9ieXRlcy8jQnVmZmVyLlJlYWRGcm9tKS4gKi9cbiAgYXN5bmMgcmVhZEZyb20ocjogUmVhZGVyKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICBsZXQgbiA9IDA7XG4gICAgY29uc3QgdG1wID0gbmV3IFVpbnQ4QXJyYXkoTUlOX1JFQUQpO1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBjb25zdCBzaG91bGRHcm93ID0gdGhpcy5jYXBhY2l0eSAtIHRoaXMubGVuZ3RoIDwgTUlOX1JFQUQ7XG4gICAgICAvLyByZWFkIGludG8gdG1wIGJ1ZmZlciBpZiB0aGVyZSdzIG5vdCBlbm91Z2ggcm9vbVxuICAgICAgLy8gb3RoZXJ3aXNlIHJlYWQgZGlyZWN0bHkgaW50byB0aGUgaW50ZXJuYWwgYnVmZmVyXG4gICAgICBjb25zdCBidWYgPSBzaG91bGRHcm93XG4gICAgICAgID8gdG1wXG4gICAgICAgIDogbmV3IFVpbnQ4QXJyYXkodGhpcy4jYnVmLmJ1ZmZlciwgdGhpcy5sZW5ndGgpO1xuXG4gICAgICBjb25zdCBucmVhZCA9IGF3YWl0IHIucmVhZChidWYpO1xuICAgICAgaWYgKG5yZWFkID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBuO1xuICAgICAgfVxuXG4gICAgICAvLyB3cml0ZSB3aWxsIGdyb3cgaWYgbmVlZGVkXG4gICAgICBpZiAoc2hvdWxkR3JvdykgdGhpcy53cml0ZVN5bmMoYnVmLnN1YmFycmF5KDAsIG5yZWFkKSk7XG4gICAgICBlbHNlIHRoaXMuI3Jlc2xpY2UodGhpcy5sZW5ndGggKyBucmVhZCk7XG5cbiAgICAgIG4gKz0gbnJlYWQ7XG4gICAgfVxuICB9XG5cbiAgLyoqIFJlYWRzIGRhdGEgZnJvbSBgcmAgdW50aWwgRU9GIChgbnVsbGApIGFuZCBhcHBlbmRzIGl0IHRvIHRoZSBidWZmZXIsXG4gICAqIGdyb3dpbmcgdGhlIGJ1ZmZlciBhcyBuZWVkZWQuIEl0IHJldHVybnMgdGhlIG51bWJlciBvZiBieXRlcyByZWFkLiBJZiB0aGVcbiAgICogYnVmZmVyIGJlY29tZXMgdG9vIGxhcmdlLCBgLnJlYWRGcm9tU3luYygpYCB3aWxsIHRocm93IGFuIGVycm9yLlxuICAgKlxuICAgKiBCYXNlZCBvbiBHbyBMYW5nJ3NcbiAgICogW0J1ZmZlci5SZWFkRnJvbV0oaHR0cHM6Ly9nb2xhbmcub3JnL3BrZy9ieXRlcy8jQnVmZmVyLlJlYWRGcm9tKS4gKi9cbiAgcmVhZEZyb21TeW5jKHI6IFJlYWRlclN5bmMpOiBudW1iZXIge1xuICAgIGxldCBuID0gMDtcbiAgICBjb25zdCB0bXAgPSBuZXcgVWludDhBcnJheShNSU5fUkVBRCk7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGNvbnN0IHNob3VsZEdyb3cgPSB0aGlzLmNhcGFjaXR5IC0gdGhpcy5sZW5ndGggPCBNSU5fUkVBRDtcbiAgICAgIC8vIHJlYWQgaW50byB0bXAgYnVmZmVyIGlmIHRoZXJlJ3Mgbm90IGVub3VnaCByb29tXG4gICAgICAvLyBvdGhlcndpc2UgcmVhZCBkaXJlY3RseSBpbnRvIHRoZSBpbnRlcm5hbCBidWZmZXJcbiAgICAgIGNvbnN0IGJ1ZiA9IHNob3VsZEdyb3dcbiAgICAgICAgPyB0bXBcbiAgICAgICAgOiBuZXcgVWludDhBcnJheSh0aGlzLiNidWYuYnVmZmVyLCB0aGlzLmxlbmd0aCk7XG5cbiAgICAgIGNvbnN0IG5yZWFkID0gci5yZWFkU3luYyhidWYpO1xuICAgICAgaWYgKG5yZWFkID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBuO1xuICAgICAgfVxuXG4gICAgICAvLyB3cml0ZSB3aWxsIGdyb3cgaWYgbmVlZGVkXG4gICAgICBpZiAoc2hvdWxkR3JvdykgdGhpcy53cml0ZVN5bmMoYnVmLnN1YmFycmF5KDAsIG5yZWFkKSk7XG4gICAgICBlbHNlIHRoaXMuI3Jlc2xpY2UodGhpcy5sZW5ndGggKyBucmVhZCk7XG5cbiAgICAgIG4gKz0gbnJlYWQ7XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IERFRkFVTFRfQlVGX1NJWkUgPSA0MDk2O1xuY29uc3QgTUlOX0JVRl9TSVpFID0gMTY7XG5jb25zdCBNQVhfQ09OU0VDVVRJVkVfRU1QVFlfUkVBRFMgPSAxMDA7XG5jb25zdCBDUiA9IFwiXFxyXCIuY2hhckNvZGVBdCgwKTtcbmNvbnN0IExGID0gXCJcXG5cIi5jaGFyQ29kZUF0KDApO1xuXG5leHBvcnQgY2xhc3MgQnVmZmVyRnVsbEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBvdmVycmlkZSBuYW1lID0gXCJCdWZmZXJGdWxsRXJyb3JcIjtcbiAgY29uc3RydWN0b3IocHVibGljIHBhcnRpYWw6IFVpbnQ4QXJyYXkpIHtcbiAgICBzdXBlcihcIkJ1ZmZlciBmdWxsXCIpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQYXJ0aWFsUmVhZEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBvdmVycmlkZSBuYW1lID0gXCJQYXJ0aWFsUmVhZEVycm9yXCI7XG4gIHBhcnRpYWw/OiBVaW50OEFycmF5O1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihcIkVuY291bnRlcmVkIFVuZXhwZWN0ZWRFb2YsIGRhdGEgb25seSBwYXJ0aWFsbHkgcmVhZFwiKTtcbiAgfVxufVxuXG4vKiogUmVzdWx0IHR5cGUgcmV0dXJuZWQgYnkgb2YgQnVmUmVhZGVyLnJlYWRMaW5lKCkuICovXG5leHBvcnQgaW50ZXJmYWNlIFJlYWRMaW5lUmVzdWx0IHtcbiAgbGluZTogVWludDhBcnJheTtcbiAgbW9yZTogYm9vbGVhbjtcbn1cblxuLyoqIEJ1ZlJlYWRlciBpbXBsZW1lbnRzIGJ1ZmZlcmluZyBmb3IgYSBSZWFkZXIgb2JqZWN0LiAqL1xuZXhwb3J0IGNsYXNzIEJ1ZlJlYWRlciBpbXBsZW1lbnRzIFJlYWRlciB7XG4gICNidWYhOiBVaW50OEFycmF5O1xuICAjcmQhOiBSZWFkZXI7IC8vIFJlYWRlciBwcm92aWRlZCBieSBjYWxsZXIuXG4gICNyID0gMDsgLy8gYnVmIHJlYWQgcG9zaXRpb24uXG4gICN3ID0gMDsgLy8gYnVmIHdyaXRlIHBvc2l0aW9uLlxuICAjZW9mID0gZmFsc2U7XG4gIC8vIHByaXZhdGUgbGFzdEJ5dGU6IG51bWJlcjtcbiAgLy8gcHJpdmF0ZSBsYXN0Q2hhclNpemU6IG51bWJlcjtcblxuICAvKiogcmV0dXJuIG5ldyBCdWZSZWFkZXIgdW5sZXNzIHIgaXMgQnVmUmVhZGVyICovXG4gIHN0YXRpYyBjcmVhdGUocjogUmVhZGVyLCBzaXplOiBudW1iZXIgPSBERUZBVUxUX0JVRl9TSVpFKTogQnVmUmVhZGVyIHtcbiAgICByZXR1cm4gciBpbnN0YW5jZW9mIEJ1ZlJlYWRlciA/IHIgOiBuZXcgQnVmUmVhZGVyKHIsIHNpemUpO1xuICB9XG5cbiAgY29uc3RydWN0b3IocmQ6IFJlYWRlciwgc2l6ZTogbnVtYmVyID0gREVGQVVMVF9CVUZfU0laRSkge1xuICAgIGlmIChzaXplIDwgTUlOX0JVRl9TSVpFKSB7XG4gICAgICBzaXplID0gTUlOX0JVRl9TSVpFO1xuICAgIH1cbiAgICB0aGlzLiNyZXNldChuZXcgVWludDhBcnJheShzaXplKSwgcmQpO1xuICB9XG5cbiAgLyoqIFJldHVybnMgdGhlIHNpemUgb2YgdGhlIHVuZGVybHlpbmcgYnVmZmVyIGluIGJ5dGVzLiAqL1xuICBzaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuI2J1Zi5ieXRlTGVuZ3RoO1xuICB9XG5cbiAgYnVmZmVyZWQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy4jdyAtIHRoaXMuI3I7XG4gIH1cblxuICAvLyBSZWFkcyBhIG5ldyBjaHVuayBpbnRvIHRoZSBidWZmZXIuXG4gICNmaWxsID0gYXN5bmMgKCkgPT4ge1xuICAgIC8vIFNsaWRlIGV4aXN0aW5nIGRhdGEgdG8gYmVnaW5uaW5nLlxuICAgIGlmICh0aGlzLiNyID4gMCkge1xuICAgICAgdGhpcy4jYnVmLmNvcHlXaXRoaW4oMCwgdGhpcy4jciwgdGhpcy4jdyk7XG4gICAgICB0aGlzLiN3IC09IHRoaXMuI3I7XG4gICAgICB0aGlzLiNyID0gMDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy4jdyA+PSB0aGlzLiNidWYuYnl0ZUxlbmd0aCkge1xuICAgICAgdGhyb3cgRXJyb3IoXCJidWZpbzogdHJpZWQgdG8gZmlsbCBmdWxsIGJ1ZmZlclwiKTtcbiAgICB9XG5cbiAgICAvLyBSZWFkIG5ldyBkYXRhOiB0cnkgYSBsaW1pdGVkIG51bWJlciBvZiB0aW1lcy5cbiAgICBmb3IgKGxldCBpID0gTUFYX0NPTlNFQ1VUSVZFX0VNUFRZX1JFQURTOyBpID4gMDsgaS0tKSB7XG4gICAgICBjb25zdCByciA9IGF3YWl0IHRoaXMuI3JkLnJlYWQodGhpcy4jYnVmLnN1YmFycmF5KHRoaXMuI3cpKTtcbiAgICAgIGlmIChyciA9PT0gbnVsbCkge1xuICAgICAgICB0aGlzLiNlb2YgPSB0cnVlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBhc3NlcnQocnIgPj0gMCwgXCJuZWdhdGl2ZSByZWFkXCIpO1xuICAgICAgdGhpcy4jdyArPSBycjtcbiAgICAgIGlmIChyciA+IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBObyBwcm9ncmVzcyBhZnRlciAke01BWF9DT05TRUNVVElWRV9FTVBUWV9SRUFEU30gcmVhZCgpIGNhbGxzYCxcbiAgICApO1xuICB9O1xuXG4gIC8qKiBEaXNjYXJkcyBhbnkgYnVmZmVyZWQgZGF0YSwgcmVzZXRzIGFsbCBzdGF0ZSwgYW5kIHN3aXRjaGVzXG4gICAqIHRoZSBidWZmZXJlZCByZWFkZXIgdG8gcmVhZCBmcm9tIHIuXG4gICAqL1xuICByZXNldChyOiBSZWFkZXIpOiB2b2lkIHtcbiAgICB0aGlzLiNyZXNldCh0aGlzLiNidWYsIHIpO1xuICB9XG5cbiAgI3Jlc2V0ID0gKGJ1ZjogVWludDhBcnJheSwgcmQ6IFJlYWRlcik6IHZvaWQgPT4ge1xuICAgIHRoaXMuI2J1ZiA9IGJ1ZjtcbiAgICB0aGlzLiNyZCA9IHJkO1xuICAgIHRoaXMuI2VvZiA9IGZhbHNlO1xuICAgIC8vIHRoaXMubGFzdEJ5dGUgPSAtMTtcbiAgICAvLyB0aGlzLmxhc3RDaGFyU2l6ZSA9IC0xO1xuICB9O1xuXG4gIC8qKiByZWFkcyBkYXRhIGludG8gcC5cbiAgICogSXQgcmV0dXJucyB0aGUgbnVtYmVyIG9mIGJ5dGVzIHJlYWQgaW50byBwLlxuICAgKiBUaGUgYnl0ZXMgYXJlIHRha2VuIGZyb20gYXQgbW9zdCBvbmUgUmVhZCBvbiB0aGUgdW5kZXJseWluZyBSZWFkZXIsXG4gICAqIGhlbmNlIG4gbWF5IGJlIGxlc3MgdGhhbiBsZW4ocCkuXG4gICAqIFRvIHJlYWQgZXhhY3RseSBsZW4ocCkgYnl0ZXMsIHVzZSBpby5SZWFkRnVsbChiLCBwKS5cbiAgICovXG4gIGFzeW5jIHJlYWQocDogVWludDhBcnJheSk6IFByb21pc2U8bnVtYmVyIHwgbnVsbD4ge1xuICAgIGxldCBycjogbnVtYmVyIHwgbnVsbCA9IHAuYnl0ZUxlbmd0aDtcbiAgICBpZiAocC5ieXRlTGVuZ3RoID09PSAwKSByZXR1cm4gcnI7XG5cbiAgICBpZiAodGhpcy4jciA9PT0gdGhpcy4jdykge1xuICAgICAgaWYgKHAuYnl0ZUxlbmd0aCA+PSB0aGlzLiNidWYuYnl0ZUxlbmd0aCkge1xuICAgICAgICAvLyBMYXJnZSByZWFkLCBlbXB0eSBidWZmZXIuXG4gICAgICAgIC8vIFJlYWQgZGlyZWN0bHkgaW50byBwIHRvIGF2b2lkIGNvcHkuXG4gICAgICAgIGNvbnN0IHJyID0gYXdhaXQgdGhpcy4jcmQucmVhZChwKTtcbiAgICAgICAgY29uc3QgbnJlYWQgPSByciA/PyAwO1xuICAgICAgICBhc3NlcnQobnJlYWQgPj0gMCwgXCJuZWdhdGl2ZSByZWFkXCIpO1xuICAgICAgICAvLyBpZiAocnIubnJlYWQgPiAwKSB7XG4gICAgICAgIC8vICAgdGhpcy5sYXN0Qnl0ZSA9IHBbcnIubnJlYWQgLSAxXTtcbiAgICAgICAgLy8gICB0aGlzLmxhc3RDaGFyU2l6ZSA9IC0xO1xuICAgICAgICAvLyB9XG4gICAgICAgIHJldHVybiBycjtcbiAgICAgIH1cblxuICAgICAgLy8gT25lIHJlYWQuXG4gICAgICAvLyBEbyBub3QgdXNlIHRoaXMuZmlsbCwgd2hpY2ggd2lsbCBsb29wLlxuICAgICAgdGhpcy4jciA9IDA7XG4gICAgICB0aGlzLiN3ID0gMDtcbiAgICAgIHJyID0gYXdhaXQgdGhpcy4jcmQucmVhZCh0aGlzLiNidWYpO1xuICAgICAgaWYgKHJyID09PSAwIHx8IHJyID09PSBudWxsKSByZXR1cm4gcnI7XG4gICAgICBhc3NlcnQocnIgPj0gMCwgXCJuZWdhdGl2ZSByZWFkXCIpO1xuICAgICAgdGhpcy4jdyArPSBycjtcbiAgICB9XG5cbiAgICAvLyBjb3B5IGFzIG11Y2ggYXMgd2UgY2FuXG4gICAgY29uc3QgY29waWVkID0gY29weSh0aGlzLiNidWYuc3ViYXJyYXkodGhpcy4jciwgdGhpcy4jdyksIHAsIDApO1xuICAgIHRoaXMuI3IgKz0gY29waWVkO1xuICAgIC8vIHRoaXMubGFzdEJ5dGUgPSB0aGlzLmJ1Zlt0aGlzLnIgLSAxXTtcbiAgICAvLyB0aGlzLmxhc3RDaGFyU2l6ZSA9IC0xO1xuICAgIHJldHVybiBjb3BpZWQ7XG4gIH1cblxuICAvKiogcmVhZHMgZXhhY3RseSBgcC5sZW5ndGhgIGJ5dGVzIGludG8gYHBgLlxuICAgKlxuICAgKiBJZiBzdWNjZXNzZnVsLCBgcGAgaXMgcmV0dXJuZWQuXG4gICAqXG4gICAqIElmIHRoZSBlbmQgb2YgdGhlIHVuZGVybHlpbmcgc3RyZWFtIGhhcyBiZWVuIHJlYWNoZWQsIGFuZCB0aGVyZSBhcmUgbm8gbW9yZVxuICAgKiBieXRlcyBhdmFpbGFibGUgaW4gdGhlIGJ1ZmZlciwgYHJlYWRGdWxsKClgIHJldHVybnMgYG51bGxgIGluc3RlYWQuXG4gICAqXG4gICAqIEFuIGVycm9yIGlzIHRocm93biBpZiBzb21lIGJ5dGVzIGNvdWxkIGJlIHJlYWQsIGJ1dCBub3QgZW5vdWdoIHRvIGZpbGwgYHBgXG4gICAqIGVudGlyZWx5IGJlZm9yZSB0aGUgdW5kZXJseWluZyBzdHJlYW0gcmVwb3J0ZWQgYW4gZXJyb3Igb3IgRU9GLiBBbnkgZXJyb3JcbiAgICogdGhyb3duIHdpbGwgaGF2ZSBhIGBwYXJ0aWFsYCBwcm9wZXJ0eSB0aGF0IGluZGljYXRlcyB0aGUgc2xpY2Ugb2YgdGhlXG4gICAqIGJ1ZmZlciB0aGF0IGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBmaWxsZWQgd2l0aCBkYXRhLlxuICAgKlxuICAgKiBQb3J0ZWQgZnJvbSBodHRwczovL2dvbGFuZy5vcmcvcGtnL2lvLyNSZWFkRnVsbFxuICAgKi9cbiAgYXN5bmMgcmVhZEZ1bGwocDogVWludDhBcnJheSk6IFByb21pc2U8VWludDhBcnJheSB8IG51bGw+IHtcbiAgICBsZXQgYnl0ZXNSZWFkID0gMDtcbiAgICB3aGlsZSAoYnl0ZXNSZWFkIDwgcC5sZW5ndGgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJyID0gYXdhaXQgdGhpcy5yZWFkKHAuc3ViYXJyYXkoYnl0ZXNSZWFkKSk7XG4gICAgICAgIGlmIChyciA9PT0gbnVsbCkge1xuICAgICAgICAgIGlmIChieXRlc1JlYWQgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGFydGlhbFJlYWRFcnJvcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBieXRlc1JlYWQgKz0gcnI7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIFBhcnRpYWxSZWFkRXJyb3IpIHtcbiAgICAgICAgICBlcnIucGFydGlhbCA9IHAuc3ViYXJyYXkoMCwgYnl0ZXNSZWFkKTtcbiAgICAgICAgfSBlbHNlIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgIGNvbnN0IGUgPSBuZXcgUGFydGlhbFJlYWRFcnJvcigpO1xuICAgICAgICAgIGUucGFydGlhbCA9IHAuc3ViYXJyYXkoMCwgYnl0ZXNSZWFkKTtcbiAgICAgICAgICBlLnN0YWNrID0gZXJyLnN0YWNrO1xuICAgICAgICAgIGUubWVzc2FnZSA9IGVyci5tZXNzYWdlO1xuICAgICAgICAgIGUuY2F1c2UgPSBlcnIuY2F1c2U7XG4gICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHA7XG4gIH1cblxuICAvKiogUmV0dXJucyB0aGUgbmV4dCBieXRlIFswLCAyNTVdIG9yIGBudWxsYC4gKi9cbiAgYXN5bmMgcmVhZEJ5dGUoKTogUHJvbWlzZTxudW1iZXIgfCBudWxsPiB7XG4gICAgd2hpbGUgKHRoaXMuI3IgPT09IHRoaXMuI3cpIHtcbiAgICAgIGlmICh0aGlzLiNlb2YpIHJldHVybiBudWxsO1xuICAgICAgYXdhaXQgdGhpcy4jZmlsbCgpOyAvLyBidWZmZXIgaXMgZW1wdHkuXG4gICAgfVxuICAgIGNvbnN0IGMgPSB0aGlzLiNidWZbdGhpcy4jcl07XG4gICAgdGhpcy4jcisrO1xuICAgIC8vIHRoaXMubGFzdEJ5dGUgPSBjO1xuICAgIHJldHVybiBjO1xuICB9XG5cbiAgLyoqIHJlYWRTdHJpbmcoKSByZWFkcyB1bnRpbCB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBkZWxpbSBpbiB0aGUgaW5wdXQsXG4gICAqIHJldHVybmluZyBhIHN0cmluZyBjb250YWluaW5nIHRoZSBkYXRhIHVwIHRvIGFuZCBpbmNsdWRpbmcgdGhlIGRlbGltaXRlci5cbiAgICogSWYgUmVhZFN0cmluZyBlbmNvdW50ZXJzIGFuIGVycm9yIGJlZm9yZSBmaW5kaW5nIGEgZGVsaW1pdGVyLFxuICAgKiBpdCByZXR1cm5zIHRoZSBkYXRhIHJlYWQgYmVmb3JlIHRoZSBlcnJvciBhbmQgdGhlIGVycm9yIGl0c2VsZlxuICAgKiAob2Z0ZW4gYG51bGxgKS5cbiAgICogUmVhZFN0cmluZyByZXR1cm5zIGVyciAhPSBuaWwgaWYgYW5kIG9ubHkgaWYgdGhlIHJldHVybmVkIGRhdGEgZG9lcyBub3QgZW5kXG4gICAqIGluIGRlbGltLlxuICAgKiBGb3Igc2ltcGxlIHVzZXMsIGEgU2Nhbm5lciBtYXkgYmUgbW9yZSBjb252ZW5pZW50LlxuICAgKi9cbiAgYXN5bmMgcmVhZFN0cmluZyhkZWxpbTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgaWYgKGRlbGltLmxlbmd0aCAhPT0gMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGVsaW1pdGVyIHNob3VsZCBiZSBhIHNpbmdsZSBjaGFyYWN0ZXJcIik7XG4gICAgfVxuICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IHRoaXMucmVhZFNsaWNlKGRlbGltLmNoYXJDb2RlQXQoMCkpO1xuICAgIGlmIChidWZmZXIgPT09IG51bGwpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoYnVmZmVyKTtcbiAgfVxuXG4gIC8qKiBgcmVhZExpbmUoKWAgaXMgYSBsb3ctbGV2ZWwgbGluZS1yZWFkaW5nIHByaW1pdGl2ZS4gTW9zdCBjYWxsZXJzIHNob3VsZFxuICAgKiB1c2UgYHJlYWRTdHJpbmcoJ1xcbicpYCBpbnN0ZWFkIG9yIHVzZSBhIFNjYW5uZXIuXG4gICAqXG4gICAqIGByZWFkTGluZSgpYCB0cmllcyB0byByZXR1cm4gYSBzaW5nbGUgbGluZSwgbm90IGluY2x1ZGluZyB0aGUgZW5kLW9mLWxpbmVcbiAgICogYnl0ZXMuIElmIHRoZSBsaW5lIHdhcyB0b28gbG9uZyBmb3IgdGhlIGJ1ZmZlciB0aGVuIGBtb3JlYCBpcyBzZXQgYW5kIHRoZVxuICAgKiBiZWdpbm5pbmcgb2YgdGhlIGxpbmUgaXMgcmV0dXJuZWQuIFRoZSByZXN0IG9mIHRoZSBsaW5lIHdpbGwgYmUgcmV0dXJuZWRcbiAgICogZnJvbSBmdXR1cmUgY2FsbHMuIGBtb3JlYCB3aWxsIGJlIGZhbHNlIHdoZW4gcmV0dXJuaW5nIHRoZSBsYXN0IGZyYWdtZW50XG4gICAqIG9mIHRoZSBsaW5lLiBUaGUgcmV0dXJuZWQgYnVmZmVyIGlzIG9ubHkgdmFsaWQgdW50aWwgdGhlIG5leHQgY2FsbCB0b1xuICAgKiBgcmVhZExpbmUoKWAuXG4gICAqXG4gICAqIFRoZSB0ZXh0IHJldHVybmVkIGZyb20gUmVhZExpbmUgZG9lcyBub3QgaW5jbHVkZSB0aGUgbGluZSBlbmQgKFwiXFxyXFxuXCIgb3JcbiAgICogXCJcXG5cIikuXG4gICAqXG4gICAqIFdoZW4gdGhlIGVuZCBvZiB0aGUgdW5kZXJseWluZyBzdHJlYW0gaXMgcmVhY2hlZCwgdGhlIGZpbmFsIGJ5dGVzIGluIHRoZVxuICAgKiBzdHJlYW0gYXJlIHJldHVybmVkLiBObyBpbmRpY2F0aW9uIG9yIGVycm9yIGlzIGdpdmVuIGlmIHRoZSBpbnB1dCBlbmRzXG4gICAqIHdpdGhvdXQgYSBmaW5hbCBsaW5lIGVuZC4gV2hlbiB0aGVyZSBhcmUgbm8gbW9yZSB0cmFpbGluZyBieXRlcyB0byByZWFkLFxuICAgKiBgcmVhZExpbmUoKWAgcmV0dXJucyBgbnVsbGAuXG4gICAqXG4gICAqIENhbGxpbmcgYHVucmVhZEJ5dGUoKWAgYWZ0ZXIgYHJlYWRMaW5lKClgIHdpbGwgYWx3YXlzIHVucmVhZCB0aGUgbGFzdCBieXRlXG4gICAqIHJlYWQgKHBvc3NpYmx5IGEgY2hhcmFjdGVyIGJlbG9uZ2luZyB0byB0aGUgbGluZSBlbmQpIGV2ZW4gaWYgdGhhdCBieXRlIGlzXG4gICAqIG5vdCBwYXJ0IG9mIHRoZSBsaW5lIHJldHVybmVkIGJ5IGByZWFkTGluZSgpYC5cbiAgICovXG4gIGFzeW5jIHJlYWRMaW5lKCk6IFByb21pc2U8UmVhZExpbmVSZXN1bHQgfCBudWxsPiB7XG4gICAgbGV0IGxpbmU6IFVpbnQ4QXJyYXkgfCBudWxsID0gbnVsbDtcblxuICAgIHRyeSB7XG4gICAgICBsaW5lID0gYXdhaXQgdGhpcy5yZWFkU2xpY2UoTEYpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIERlbm8uZXJyb3JzLkJhZFJlc291cmNlKSB7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICAgIGxldCBwYXJ0aWFsO1xuICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIFBhcnRpYWxSZWFkRXJyb3IpIHtcbiAgICAgICAgcGFydGlhbCA9IGVyci5wYXJ0aWFsO1xuICAgICAgICBhc3NlcnQoXG4gICAgICAgICAgcGFydGlhbCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXksXG4gICAgICAgICAgXCJidWZpbzogY2F1Z2h0IGVycm9yIGZyb20gYHJlYWRTbGljZSgpYCB3aXRob3V0IGBwYXJ0aWFsYCBwcm9wZXJ0eVwiLFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBEb24ndCB0aHJvdyBpZiBgcmVhZFNsaWNlKClgIGZhaWxlZCB3aXRoIGBCdWZmZXJGdWxsRXJyb3JgLCBpbnN0ZWFkIHdlXG4gICAgICAvLyBqdXN0IHJldHVybiB3aGF0ZXZlciBpcyBhdmFpbGFibGUgYW5kIHNldCB0aGUgYG1vcmVgIGZsYWcuXG4gICAgICBpZiAoIShlcnIgaW5zdGFuY2VvZiBCdWZmZXJGdWxsRXJyb3IpKSB7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cblxuICAgICAgcGFydGlhbCA9IGVyci5wYXJ0aWFsO1xuXG4gICAgICAvLyBIYW5kbGUgdGhlIGNhc2Ugd2hlcmUgXCJcXHJcXG5cIiBzdHJhZGRsZXMgdGhlIGJ1ZmZlci5cbiAgICAgIGlmIChcbiAgICAgICAgIXRoaXMuI2VvZiAmJiBwYXJ0aWFsICYmXG4gICAgICAgIHBhcnRpYWwuYnl0ZUxlbmd0aCA+IDAgJiZcbiAgICAgICAgcGFydGlhbFtwYXJ0aWFsLmJ5dGVMZW5ndGggLSAxXSA9PT0gQ1JcbiAgICAgICkge1xuICAgICAgICAvLyBQdXQgdGhlICdcXHInIGJhY2sgb24gYnVmIGFuZCBkcm9wIGl0IGZyb20gbGluZS5cbiAgICAgICAgLy8gTGV0IHRoZSBuZXh0IGNhbGwgdG8gUmVhZExpbmUgY2hlY2sgZm9yIFwiXFxyXFxuXCIuXG4gICAgICAgIGFzc2VydCh0aGlzLiNyID4gMCwgXCJidWZpbzogdHJpZWQgdG8gcmV3aW5kIHBhc3Qgc3RhcnQgb2YgYnVmZmVyXCIpO1xuICAgICAgICB0aGlzLiNyLS07XG4gICAgICAgIHBhcnRpYWwgPSBwYXJ0aWFsLnN1YmFycmF5KDAsIHBhcnRpYWwuYnl0ZUxlbmd0aCAtIDEpO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFydGlhbCkge1xuICAgICAgICByZXR1cm4geyBsaW5lOiBwYXJ0aWFsLCBtb3JlOiAhdGhpcy4jZW9mIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGxpbmUgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmIChsaW5lLmJ5dGVMZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB7IGxpbmUsIG1vcmU6IGZhbHNlIH07XG4gICAgfVxuXG4gICAgaWYgKGxpbmVbbGluZS5ieXRlTGVuZ3RoIC0gMV0gPT0gTEYpIHtcbiAgICAgIGxldCBkcm9wID0gMTtcbiAgICAgIGlmIChsaW5lLmJ5dGVMZW5ndGggPiAxICYmIGxpbmVbbGluZS5ieXRlTGVuZ3RoIC0gMl0gPT09IENSKSB7XG4gICAgICAgIGRyb3AgPSAyO1xuICAgICAgfVxuICAgICAgbGluZSA9IGxpbmUuc3ViYXJyYXkoMCwgbGluZS5ieXRlTGVuZ3RoIC0gZHJvcCk7XG4gICAgfVxuICAgIHJldHVybiB7IGxpbmUsIG1vcmU6IGZhbHNlIH07XG4gIH1cblxuICAvKiogYHJlYWRTbGljZSgpYCByZWFkcyB1bnRpbCB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBgZGVsaW1gIGluIHRoZSBpbnB1dCxcbiAgICogcmV0dXJuaW5nIGEgc2xpY2UgcG9pbnRpbmcgYXQgdGhlIGJ5dGVzIGluIHRoZSBidWZmZXIuIFRoZSBieXRlcyBzdG9wXG4gICAqIGJlaW5nIHZhbGlkIGF0IHRoZSBuZXh0IHJlYWQuXG4gICAqXG4gICAqIElmIGByZWFkU2xpY2UoKWAgZW5jb3VudGVycyBhbiBlcnJvciBiZWZvcmUgZmluZGluZyBhIGRlbGltaXRlciwgb3IgdGhlXG4gICAqIGJ1ZmZlciBmaWxscyB3aXRob3V0IGZpbmRpbmcgYSBkZWxpbWl0ZXIsIGl0IHRocm93cyBhbiBlcnJvciB3aXRoIGFcbiAgICogYHBhcnRpYWxgIHByb3BlcnR5IHRoYXQgY29udGFpbnMgdGhlIGVudGlyZSBidWZmZXIuXG4gICAqXG4gICAqIElmIGByZWFkU2xpY2UoKWAgZW5jb3VudGVycyB0aGUgZW5kIG9mIHRoZSB1bmRlcmx5aW5nIHN0cmVhbSBhbmQgdGhlcmUgYXJlXG4gICAqIGFueSBieXRlcyBsZWZ0IGluIHRoZSBidWZmZXIsIHRoZSByZXN0IG9mIHRoZSBidWZmZXIgaXMgcmV0dXJuZWQuIEluIG90aGVyXG4gICAqIHdvcmRzLCBFT0YgaXMgYWx3YXlzIHRyZWF0ZWQgYXMgYSBkZWxpbWl0ZXIuIE9uY2UgdGhlIGJ1ZmZlciBpcyBlbXB0eSxcbiAgICogaXQgcmV0dXJucyBgbnVsbGAuXG4gICAqXG4gICAqIEJlY2F1c2UgdGhlIGRhdGEgcmV0dXJuZWQgZnJvbSBgcmVhZFNsaWNlKClgIHdpbGwgYmUgb3ZlcndyaXR0ZW4gYnkgdGhlXG4gICAqIG5leHQgSS9PIG9wZXJhdGlvbiwgbW9zdCBjbGllbnRzIHNob3VsZCB1c2UgYHJlYWRTdHJpbmcoKWAgaW5zdGVhZC5cbiAgICovXG4gIGFzeW5jIHJlYWRTbGljZShkZWxpbTogbnVtYmVyKTogUHJvbWlzZTxVaW50OEFycmF5IHwgbnVsbD4ge1xuICAgIGxldCBzID0gMDsgLy8gc2VhcmNoIHN0YXJ0IGluZGV4XG4gICAgbGV0IHNsaWNlOiBVaW50OEFycmF5IHwgdW5kZWZpbmVkO1xuXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIC8vIFNlYXJjaCBidWZmZXIuXG4gICAgICBsZXQgaSA9IHRoaXMuI2J1Zi5zdWJhcnJheSh0aGlzLiNyICsgcywgdGhpcy4jdykuaW5kZXhPZihkZWxpbSk7XG4gICAgICBpZiAoaSA+PSAwKSB7XG4gICAgICAgIGkgKz0gcztcbiAgICAgICAgc2xpY2UgPSB0aGlzLiNidWYuc3ViYXJyYXkodGhpcy4jciwgdGhpcy4jciArIGkgKyAxKTtcbiAgICAgICAgdGhpcy4jciArPSBpICsgMTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIC8vIEVPRj9cbiAgICAgIGlmICh0aGlzLiNlb2YpIHtcbiAgICAgICAgaWYgKHRoaXMuI3IgPT09IHRoaXMuI3cpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBzbGljZSA9IHRoaXMuI2J1Zi5zdWJhcnJheSh0aGlzLiNyLCB0aGlzLiN3KTtcbiAgICAgICAgdGhpcy4jciA9IHRoaXMuI3c7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICAvLyBCdWZmZXIgZnVsbD9cbiAgICAgIGlmICh0aGlzLmJ1ZmZlcmVkKCkgPj0gdGhpcy4jYnVmLmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgdGhpcy4jciA9IHRoaXMuI3c7XG4gICAgICAgIC8vICM0NTIxIFRoZSBpbnRlcm5hbCBidWZmZXIgc2hvdWxkIG5vdCBiZSByZXVzZWQgYWNyb3NzIHJlYWRzIGJlY2F1c2UgaXQgY2F1c2VzIGNvcnJ1cHRpb24gb2YgZGF0YS5cbiAgICAgICAgY29uc3Qgb2xkYnVmID0gdGhpcy4jYnVmO1xuICAgICAgICBjb25zdCBuZXdidWYgPSB0aGlzLiNidWYuc2xpY2UoMCk7XG4gICAgICAgIHRoaXMuI2J1ZiA9IG5ld2J1ZjtcbiAgICAgICAgdGhyb3cgbmV3IEJ1ZmZlckZ1bGxFcnJvcihvbGRidWYpO1xuICAgICAgfVxuXG4gICAgICBzID0gdGhpcy4jdyAtIHRoaXMuI3I7IC8vIGRvIG5vdCByZXNjYW4gYXJlYSB3ZSBzY2FubmVkIGJlZm9yZVxuXG4gICAgICAvLyBCdWZmZXIgaXMgbm90IGZ1bGwuXG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLiNmaWxsKCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIFBhcnRpYWxSZWFkRXJyb3IpIHtcbiAgICAgICAgICBlcnIucGFydGlhbCA9IHNsaWNlO1xuICAgICAgICB9IGVsc2UgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgY29uc3QgZSA9IG5ldyBQYXJ0aWFsUmVhZEVycm9yKCk7XG4gICAgICAgICAgZS5wYXJ0aWFsID0gc2xpY2U7XG4gICAgICAgICAgZS5zdGFjayA9IGVyci5zdGFjaztcbiAgICAgICAgICBlLm1lc3NhZ2UgPSBlcnIubWVzc2FnZTtcbiAgICAgICAgICBlLmNhdXNlID0gZXJyLmNhdXNlO1xuICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGxhc3QgYnl0ZSwgaWYgYW55LlxuICAgIC8vIGNvbnN0IGkgPSBzbGljZS5ieXRlTGVuZ3RoIC0gMTtcbiAgICAvLyBpZiAoaSA+PSAwKSB7XG4gICAgLy8gICB0aGlzLmxhc3RCeXRlID0gc2xpY2VbaV07XG4gICAgLy8gICB0aGlzLmxhc3RDaGFyU2l6ZSA9IC0xXG4gICAgLy8gfVxuXG4gICAgcmV0dXJuIHNsaWNlO1xuICB9XG5cbiAgLyoqIGBwZWVrKClgIHJldHVybnMgdGhlIG5leHQgYG5gIGJ5dGVzIHdpdGhvdXQgYWR2YW5jaW5nIHRoZSByZWFkZXIuIFRoZVxuICAgKiBieXRlcyBzdG9wIGJlaW5nIHZhbGlkIGF0IHRoZSBuZXh0IHJlYWQgY2FsbC5cbiAgICpcbiAgICogV2hlbiB0aGUgZW5kIG9mIHRoZSB1bmRlcmx5aW5nIHN0cmVhbSBpcyByZWFjaGVkLCBidXQgdGhlcmUgYXJlIHVucmVhZFxuICAgKiBieXRlcyBsZWZ0IGluIHRoZSBidWZmZXIsIHRob3NlIGJ5dGVzIGFyZSByZXR1cm5lZC4gSWYgdGhlcmUgYXJlIG5vIGJ5dGVzXG4gICAqIGxlZnQgaW4gdGhlIGJ1ZmZlciwgaXQgcmV0dXJucyBgbnVsbGAuXG4gICAqXG4gICAqIElmIGFuIGVycm9yIGlzIGVuY291bnRlcmVkIGJlZm9yZSBgbmAgYnl0ZXMgYXJlIGF2YWlsYWJsZSwgYHBlZWsoKWAgdGhyb3dzXG4gICAqIGFuIGVycm9yIHdpdGggdGhlIGBwYXJ0aWFsYCBwcm9wZXJ0eSBzZXQgdG8gYSBzbGljZSBvZiB0aGUgYnVmZmVyIHRoYXRcbiAgICogY29udGFpbnMgdGhlIGJ5dGVzIHRoYXQgd2VyZSBhdmFpbGFibGUgYmVmb3JlIHRoZSBlcnJvciBvY2N1cnJlZC5cbiAgICovXG4gIGFzeW5jIHBlZWsobjogbnVtYmVyKTogUHJvbWlzZTxVaW50OEFycmF5IHwgbnVsbD4ge1xuICAgIGlmIChuIDwgMCkge1xuICAgICAgdGhyb3cgRXJyb3IoXCJuZWdhdGl2ZSBjb3VudFwiKTtcbiAgICB9XG5cbiAgICBsZXQgYXZhaWwgPSB0aGlzLiN3IC0gdGhpcy4jcjtcbiAgICB3aGlsZSAoYXZhaWwgPCBuICYmIGF2YWlsIDwgdGhpcy4jYnVmLmJ5dGVMZW5ndGggJiYgIXRoaXMuI2VvZikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdGhpcy4jZmlsbCgpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBQYXJ0aWFsUmVhZEVycm9yKSB7XG4gICAgICAgICAgZXJyLnBhcnRpYWwgPSB0aGlzLiNidWYuc3ViYXJyYXkodGhpcy4jciwgdGhpcy4jdyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICBjb25zdCBlID0gbmV3IFBhcnRpYWxSZWFkRXJyb3IoKTtcbiAgICAgICAgICBlLnBhcnRpYWwgPSB0aGlzLiNidWYuc3ViYXJyYXkodGhpcy4jciwgdGhpcy4jdyk7XG4gICAgICAgICAgZS5zdGFjayA9IGVyci5zdGFjaztcbiAgICAgICAgICBlLm1lc3NhZ2UgPSBlcnIubWVzc2FnZTtcbiAgICAgICAgICBlLmNhdXNlID0gZXJyLmNhdXNlO1xuICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgICBhdmFpbCA9IHRoaXMuI3cgLSB0aGlzLiNyO1xuICAgIH1cblxuICAgIGlmIChhdmFpbCA9PT0gMCAmJiB0aGlzLiNlb2YpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSBpZiAoYXZhaWwgPCBuICYmIHRoaXMuI2VvZikge1xuICAgICAgcmV0dXJuIHRoaXMuI2J1Zi5zdWJhcnJheSh0aGlzLiNyLCB0aGlzLiNyICsgYXZhaWwpO1xuICAgIH0gZWxzZSBpZiAoYXZhaWwgPCBuKSB7XG4gICAgICB0aHJvdyBuZXcgQnVmZmVyRnVsbEVycm9yKHRoaXMuI2J1Zi5zdWJhcnJheSh0aGlzLiNyLCB0aGlzLiN3KSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuI2J1Zi5zdWJhcnJheSh0aGlzLiNyLCB0aGlzLiNyICsgbik7XG4gIH1cbn1cblxuYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RCdWZCYXNlIHtcbiAgYnVmOiBVaW50OEFycmF5O1xuICB1c2VkQnVmZmVyQnl0ZXMgPSAwO1xuICBlcnI6IEVycm9yIHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IoYnVmOiBVaW50OEFycmF5KSB7XG4gICAgdGhpcy5idWYgPSBidWY7XG4gIH1cblxuICAvKiogU2l6ZSByZXR1cm5zIHRoZSBzaXplIG9mIHRoZSB1bmRlcmx5aW5nIGJ1ZmZlciBpbiBieXRlcy4gKi9cbiAgc2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmJ1Zi5ieXRlTGVuZ3RoO1xuICB9XG5cbiAgLyoqIFJldHVybnMgaG93IG1hbnkgYnl0ZXMgYXJlIHVudXNlZCBpbiB0aGUgYnVmZmVyLiAqL1xuICBhdmFpbGFibGUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5idWYuYnl0ZUxlbmd0aCAtIHRoaXMudXNlZEJ1ZmZlckJ5dGVzO1xuICB9XG5cbiAgLyoqIGJ1ZmZlcmVkIHJldHVybnMgdGhlIG51bWJlciBvZiBieXRlcyB0aGF0IGhhdmUgYmVlbiB3cml0dGVuIGludG8gdGhlXG4gICAqIGN1cnJlbnQgYnVmZmVyLlxuICAgKi9cbiAgYnVmZmVyZWQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy51c2VkQnVmZmVyQnl0ZXM7XG4gIH1cbn1cblxuLyoqIEJ1ZldyaXRlciBpbXBsZW1lbnRzIGJ1ZmZlcmluZyBmb3IgYW4gZGVuby5Xcml0ZXIgb2JqZWN0LlxuICogSWYgYW4gZXJyb3Igb2NjdXJzIHdyaXRpbmcgdG8gYSBXcml0ZXIsIG5vIG1vcmUgZGF0YSB3aWxsIGJlXG4gKiBhY2NlcHRlZCBhbmQgYWxsIHN1YnNlcXVlbnQgd3JpdGVzLCBhbmQgZmx1c2goKSwgd2lsbCByZXR1cm4gdGhlIGVycm9yLlxuICogQWZ0ZXIgYWxsIGRhdGEgaGFzIGJlZW4gd3JpdHRlbiwgdGhlIGNsaWVudCBzaG91bGQgY2FsbCB0aGVcbiAqIGZsdXNoKCkgbWV0aG9kIHRvIGd1YXJhbnRlZSBhbGwgZGF0YSBoYXMgYmVlbiBmb3J3YXJkZWQgdG9cbiAqIHRoZSB1bmRlcmx5aW5nIGRlbm8uV3JpdGVyLlxuICovXG5leHBvcnQgY2xhc3MgQnVmV3JpdGVyIGV4dGVuZHMgQWJzdHJhY3RCdWZCYXNlIGltcGxlbWVudHMgV3JpdGVyIHtcbiAgI3dyaXRlcjogV3JpdGVyO1xuXG4gIC8qKiByZXR1cm4gbmV3IEJ1ZldyaXRlciB1bmxlc3Mgd3JpdGVyIGlzIEJ1ZldyaXRlciAqL1xuICBzdGF0aWMgY3JlYXRlKHdyaXRlcjogV3JpdGVyLCBzaXplOiBudW1iZXIgPSBERUZBVUxUX0JVRl9TSVpFKTogQnVmV3JpdGVyIHtcbiAgICByZXR1cm4gd3JpdGVyIGluc3RhbmNlb2YgQnVmV3JpdGVyID8gd3JpdGVyIDogbmV3IEJ1ZldyaXRlcih3cml0ZXIsIHNpemUpO1xuICB9XG5cbiAgY29uc3RydWN0b3Iod3JpdGVyOiBXcml0ZXIsIHNpemU6IG51bWJlciA9IERFRkFVTFRfQlVGX1NJWkUpIHtcbiAgICBzdXBlcihuZXcgVWludDhBcnJheShzaXplIDw9IDAgPyBERUZBVUxUX0JVRl9TSVpFIDogc2l6ZSkpO1xuICAgIHRoaXMuI3dyaXRlciA9IHdyaXRlcjtcbiAgfVxuXG4gIC8qKiBEaXNjYXJkcyBhbnkgdW5mbHVzaGVkIGJ1ZmZlcmVkIGRhdGEsIGNsZWFycyBhbnkgZXJyb3IsIGFuZFxuICAgKiByZXNldHMgYnVmZmVyIHRvIHdyaXRlIGl0cyBvdXRwdXQgdG8gdy5cbiAgICovXG4gIHJlc2V0KHc6IFdyaXRlcik6IHZvaWQge1xuICAgIHRoaXMuZXJyID0gbnVsbDtcbiAgICB0aGlzLnVzZWRCdWZmZXJCeXRlcyA9IDA7XG4gICAgdGhpcy4jd3JpdGVyID0gdztcbiAgfVxuXG4gIC8qKiBGbHVzaCB3cml0ZXMgYW55IGJ1ZmZlcmVkIGRhdGEgdG8gdGhlIHVuZGVybHlpbmcgaW8uV3JpdGVyLiAqL1xuICBhc3luYyBmbHVzaCgpIHtcbiAgICBpZiAodGhpcy5lcnIgIT09IG51bGwpIHRocm93IHRoaXMuZXJyO1xuICAgIGlmICh0aGlzLnVzZWRCdWZmZXJCeXRlcyA9PT0gMCkgcmV0dXJuO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHAgPSB0aGlzLmJ1Zi5zdWJhcnJheSgwLCB0aGlzLnVzZWRCdWZmZXJCeXRlcyk7XG4gICAgICBsZXQgbndyaXR0ZW4gPSAwO1xuICAgICAgd2hpbGUgKG53cml0dGVuIDwgcC5sZW5ndGgpIHtcbiAgICAgICAgbndyaXR0ZW4gKz0gYXdhaXQgdGhpcy4jd3JpdGVyLndyaXRlKHAuc3ViYXJyYXkobndyaXR0ZW4pKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIHRoaXMuZXJyID0gZTtcbiAgICAgIH1cbiAgICAgIHRocm93IGU7XG4gICAgfVxuXG4gICAgdGhpcy5idWYgPSBuZXcgVWludDhBcnJheSh0aGlzLmJ1Zi5sZW5ndGgpO1xuICAgIHRoaXMudXNlZEJ1ZmZlckJ5dGVzID0gMDtcbiAgfVxuXG4gIC8qKiBXcml0ZXMgdGhlIGNvbnRlbnRzIG9mIGBkYXRhYCBpbnRvIHRoZSBidWZmZXIuICBJZiB0aGUgY29udGVudHMgd29uJ3QgZnVsbHlcbiAgICogZml0IGludG8gdGhlIGJ1ZmZlciwgdGhvc2UgYnl0ZXMgdGhhdCBjYW4gYXJlIGNvcGllZCBpbnRvIHRoZSBidWZmZXIsIHRoZVxuICAgKiBidWZmZXIgaXMgdGhlIGZsdXNoZWQgdG8gdGhlIHdyaXRlciBhbmQgdGhlIHJlbWFpbmluZyBieXRlcyBhcmUgY29waWVkIGludG9cbiAgICogdGhlIG5vdyBlbXB0eSBidWZmZXIuXG4gICAqXG4gICAqIEByZXR1cm4gdGhlIG51bWJlciBvZiBieXRlcyB3cml0dGVuIHRvIHRoZSBidWZmZXIuXG4gICAqL1xuICBhc3luYyB3cml0ZShkYXRhOiBVaW50OEFycmF5KTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICBpZiAodGhpcy5lcnIgIT09IG51bGwpIHRocm93IHRoaXMuZXJyO1xuICAgIGlmIChkYXRhLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDA7XG5cbiAgICBsZXQgdG90YWxCeXRlc1dyaXR0ZW4gPSAwO1xuICAgIGxldCBudW1CeXRlc1dyaXR0ZW4gPSAwO1xuICAgIHdoaWxlIChkYXRhLmJ5dGVMZW5ndGggPiB0aGlzLmF2YWlsYWJsZSgpKSB7XG4gICAgICBpZiAodGhpcy5idWZmZXJlZCgpID09PSAwKSB7XG4gICAgICAgIC8vIExhcmdlIHdyaXRlLCBlbXB0eSBidWZmZXIuXG4gICAgICAgIC8vIFdyaXRlIGRpcmVjdGx5IGZyb20gZGF0YSB0byBhdm9pZCBjb3B5LlxuICAgICAgICB0cnkge1xuICAgICAgICAgIG51bUJ5dGVzV3JpdHRlbiA9IGF3YWl0IHRoaXMuI3dyaXRlci53cml0ZShkYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyID0gZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbnVtQnl0ZXNXcml0dGVuID0gY29weShkYXRhLCB0aGlzLmJ1ZiwgdGhpcy51c2VkQnVmZmVyQnl0ZXMpO1xuICAgICAgICB0aGlzLnVzZWRCdWZmZXJCeXRlcyArPSBudW1CeXRlc1dyaXR0ZW47XG4gICAgICAgIGF3YWl0IHRoaXMuZmx1c2goKTtcbiAgICAgIH1cbiAgICAgIHRvdGFsQnl0ZXNXcml0dGVuICs9IG51bUJ5dGVzV3JpdHRlbjtcbiAgICAgIGRhdGEgPSBkYXRhLnN1YmFycmF5KG51bUJ5dGVzV3JpdHRlbik7XG4gICAgfVxuXG4gICAgbnVtQnl0ZXNXcml0dGVuID0gY29weShkYXRhLCB0aGlzLmJ1ZiwgdGhpcy51c2VkQnVmZmVyQnl0ZXMpO1xuICAgIHRoaXMudXNlZEJ1ZmZlckJ5dGVzICs9IG51bUJ5dGVzV3JpdHRlbjtcbiAgICB0b3RhbEJ5dGVzV3JpdHRlbiArPSBudW1CeXRlc1dyaXR0ZW47XG4gICAgcmV0dXJuIHRvdGFsQnl0ZXNXcml0dGVuO1xuICB9XG59XG5cbi8qKiBCdWZXcml0ZXJTeW5jIGltcGxlbWVudHMgYnVmZmVyaW5nIGZvciBhIGRlbm8uV3JpdGVyU3luYyBvYmplY3QuXG4gKiBJZiBhbiBlcnJvciBvY2N1cnMgd3JpdGluZyB0byBhIFdyaXRlclN5bmMsIG5vIG1vcmUgZGF0YSB3aWxsIGJlXG4gKiBhY2NlcHRlZCBhbmQgYWxsIHN1YnNlcXVlbnQgd3JpdGVzLCBhbmQgZmx1c2goKSwgd2lsbCByZXR1cm4gdGhlIGVycm9yLlxuICogQWZ0ZXIgYWxsIGRhdGEgaGFzIGJlZW4gd3JpdHRlbiwgdGhlIGNsaWVudCBzaG91bGQgY2FsbCB0aGVcbiAqIGZsdXNoKCkgbWV0aG9kIHRvIGd1YXJhbnRlZSBhbGwgZGF0YSBoYXMgYmVlbiBmb3J3YXJkZWQgdG9cbiAqIHRoZSB1bmRlcmx5aW5nIGRlbm8uV3JpdGVyU3luYy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJ1ZldyaXRlclN5bmMgZXh0ZW5kcyBBYnN0cmFjdEJ1ZkJhc2UgaW1wbGVtZW50cyBXcml0ZXJTeW5jIHtcbiAgI3dyaXRlcjogV3JpdGVyU3luYztcblxuICAvKiogcmV0dXJuIG5ldyBCdWZXcml0ZXJTeW5jIHVubGVzcyB3cml0ZXIgaXMgQnVmV3JpdGVyU3luYyAqL1xuICBzdGF0aWMgY3JlYXRlKFxuICAgIHdyaXRlcjogV3JpdGVyU3luYyxcbiAgICBzaXplOiBudW1iZXIgPSBERUZBVUxUX0JVRl9TSVpFLFxuICApOiBCdWZXcml0ZXJTeW5jIHtcbiAgICByZXR1cm4gd3JpdGVyIGluc3RhbmNlb2YgQnVmV3JpdGVyU3luY1xuICAgICAgPyB3cml0ZXJcbiAgICAgIDogbmV3IEJ1ZldyaXRlclN5bmMod3JpdGVyLCBzaXplKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHdyaXRlcjogV3JpdGVyU3luYywgc2l6ZTogbnVtYmVyID0gREVGQVVMVF9CVUZfU0laRSkge1xuICAgIHN1cGVyKG5ldyBVaW50OEFycmF5KHNpemUgPD0gMCA/IERFRkFVTFRfQlVGX1NJWkUgOiBzaXplKSk7XG4gICAgdGhpcy4jd3JpdGVyID0gd3JpdGVyO1xuICB9XG5cbiAgLyoqIERpc2NhcmRzIGFueSB1bmZsdXNoZWQgYnVmZmVyZWQgZGF0YSwgY2xlYXJzIGFueSBlcnJvciwgYW5kXG4gICAqIHJlc2V0cyBidWZmZXIgdG8gd3JpdGUgaXRzIG91dHB1dCB0byB3LlxuICAgKi9cbiAgcmVzZXQodzogV3JpdGVyU3luYyk6IHZvaWQge1xuICAgIHRoaXMuZXJyID0gbnVsbDtcbiAgICB0aGlzLnVzZWRCdWZmZXJCeXRlcyA9IDA7XG4gICAgdGhpcy4jd3JpdGVyID0gdztcbiAgfVxuXG4gIC8qKiBGbHVzaCB3cml0ZXMgYW55IGJ1ZmZlcmVkIGRhdGEgdG8gdGhlIHVuZGVybHlpbmcgaW8uV3JpdGVyU3luYy4gKi9cbiAgZmx1c2goKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZXJyICE9PSBudWxsKSB0aHJvdyB0aGlzLmVycjtcbiAgICBpZiAodGhpcy51c2VkQnVmZmVyQnl0ZXMgPT09IDApIHJldHVybjtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBwID0gdGhpcy5idWYuc3ViYXJyYXkoMCwgdGhpcy51c2VkQnVmZmVyQnl0ZXMpO1xuICAgICAgbGV0IG53cml0dGVuID0gMDtcbiAgICAgIHdoaWxlIChud3JpdHRlbiA8IHAubGVuZ3RoKSB7XG4gICAgICAgIG53cml0dGVuICs9IHRoaXMuI3dyaXRlci53cml0ZVN5bmMocC5zdWJhcnJheShud3JpdHRlbikpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgdGhpcy5lcnIgPSBlO1xuICAgICAgfVxuICAgICAgdGhyb3cgZTtcbiAgICB9XG5cbiAgICB0aGlzLmJ1ZiA9IG5ldyBVaW50OEFycmF5KHRoaXMuYnVmLmxlbmd0aCk7XG4gICAgdGhpcy51c2VkQnVmZmVyQnl0ZXMgPSAwO1xuICB9XG5cbiAgLyoqIFdyaXRlcyB0aGUgY29udGVudHMgb2YgYGRhdGFgIGludG8gdGhlIGJ1ZmZlci4gIElmIHRoZSBjb250ZW50cyB3b24ndCBmdWxseVxuICAgKiBmaXQgaW50byB0aGUgYnVmZmVyLCB0aG9zZSBieXRlcyB0aGF0IGNhbiBhcmUgY29waWVkIGludG8gdGhlIGJ1ZmZlciwgdGhlXG4gICAqIGJ1ZmZlciBpcyB0aGUgZmx1c2hlZCB0byB0aGUgd3JpdGVyIGFuZCB0aGUgcmVtYWluaW5nIGJ5dGVzIGFyZSBjb3BpZWQgaW50b1xuICAgKiB0aGUgbm93IGVtcHR5IGJ1ZmZlci5cbiAgICpcbiAgICogQHJldHVybiB0aGUgbnVtYmVyIG9mIGJ5dGVzIHdyaXR0ZW4gdG8gdGhlIGJ1ZmZlci5cbiAgICovXG4gIHdyaXRlU3luYyhkYXRhOiBVaW50OEFycmF5KTogbnVtYmVyIHtcbiAgICBpZiAodGhpcy5lcnIgIT09IG51bGwpIHRocm93IHRoaXMuZXJyO1xuICAgIGlmIChkYXRhLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDA7XG5cbiAgICBsZXQgdG90YWxCeXRlc1dyaXR0ZW4gPSAwO1xuICAgIGxldCBudW1CeXRlc1dyaXR0ZW4gPSAwO1xuICAgIHdoaWxlIChkYXRhLmJ5dGVMZW5ndGggPiB0aGlzLmF2YWlsYWJsZSgpKSB7XG4gICAgICBpZiAodGhpcy5idWZmZXJlZCgpID09PSAwKSB7XG4gICAgICAgIC8vIExhcmdlIHdyaXRlLCBlbXB0eSBidWZmZXIuXG4gICAgICAgIC8vIFdyaXRlIGRpcmVjdGx5IGZyb20gZGF0YSB0byBhdm9pZCBjb3B5LlxuICAgICAgICB0cnkge1xuICAgICAgICAgIG51bUJ5dGVzV3JpdHRlbiA9IHRoaXMuI3dyaXRlci53cml0ZVN5bmMoZGF0YSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmVyciA9IGU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG51bUJ5dGVzV3JpdHRlbiA9IGNvcHkoZGF0YSwgdGhpcy5idWYsIHRoaXMudXNlZEJ1ZmZlckJ5dGVzKTtcbiAgICAgICAgdGhpcy51c2VkQnVmZmVyQnl0ZXMgKz0gbnVtQnl0ZXNXcml0dGVuO1xuICAgICAgICB0aGlzLmZsdXNoKCk7XG4gICAgICB9XG4gICAgICB0b3RhbEJ5dGVzV3JpdHRlbiArPSBudW1CeXRlc1dyaXR0ZW47XG4gICAgICBkYXRhID0gZGF0YS5zdWJhcnJheShudW1CeXRlc1dyaXR0ZW4pO1xuICAgIH1cblxuICAgIG51bUJ5dGVzV3JpdHRlbiA9IGNvcHkoZGF0YSwgdGhpcy5idWYsIHRoaXMudXNlZEJ1ZmZlckJ5dGVzKTtcbiAgICB0aGlzLnVzZWRCdWZmZXJCeXRlcyArPSBudW1CeXRlc1dyaXR0ZW47XG4gICAgdG90YWxCeXRlc1dyaXR0ZW4gKz0gbnVtQnl0ZXNXcml0dGVuO1xuICAgIHJldHVybiB0b3RhbEJ5dGVzV3JpdHRlbjtcbiAgfVxufVxuXG4vKiogR2VuZXJhdGUgbG9uZ2VzdCBwcm9wZXIgcHJlZml4IHdoaWNoIGlzIGFsc28gc3VmZml4IGFycmF5LiAqL1xuZnVuY3Rpb24gY3JlYXRlTFBTKHBhdDogVWludDhBcnJheSk6IFVpbnQ4QXJyYXkge1xuICBjb25zdCBscHMgPSBuZXcgVWludDhBcnJheShwYXQubGVuZ3RoKTtcbiAgbHBzWzBdID0gMDtcbiAgbGV0IHByZWZpeEVuZCA9IDA7XG4gIGxldCBpID0gMTtcbiAgd2hpbGUgKGkgPCBscHMubGVuZ3RoKSB7XG4gICAgaWYgKHBhdFtpXSA9PSBwYXRbcHJlZml4RW5kXSkge1xuICAgICAgcHJlZml4RW5kKys7XG4gICAgICBscHNbaV0gPSBwcmVmaXhFbmQ7XG4gICAgICBpKys7XG4gICAgfSBlbHNlIGlmIChwcmVmaXhFbmQgPT09IDApIHtcbiAgICAgIGxwc1tpXSA9IDA7XG4gICAgICBpKys7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByZWZpeEVuZCA9IGxwc1twcmVmaXhFbmQgLSAxXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGxwcztcbn1cblxuLyoqIFJlYWQgZGVsaW1pdGVkIGJ5dGVzIGZyb20gYSBSZWFkZXIuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24qIHJlYWREZWxpbShcbiAgcmVhZGVyOiBSZWFkZXIsXG4gIGRlbGltOiBVaW50OEFycmF5LFxuKTogQXN5bmNJdGVyYWJsZUl0ZXJhdG9yPFVpbnQ4QXJyYXk+IHtcbiAgLy8gQXZvaWQgdW5pY29kZSBwcm9ibGVtc1xuICBjb25zdCBkZWxpbUxlbiA9IGRlbGltLmxlbmd0aDtcbiAgY29uc3QgZGVsaW1MUFMgPSBjcmVhdGVMUFMoZGVsaW0pO1xuICBjb25zdCBjaHVua3MgPSBuZXcgQnl0ZXNMaXN0KCk7XG4gIGNvbnN0IGJ1ZlNpemUgPSBNYXRoLm1heCgxMDI0LCBkZWxpbUxlbiArIDEpO1xuXG4gIC8vIE1vZGlmaWVkIEtNUFxuICBsZXQgaW5zcGVjdEluZGV4ID0gMDtcbiAgbGV0IG1hdGNoSW5kZXggPSAwO1xuICB3aGlsZSAodHJ1ZSkge1xuICAgIGNvbnN0IGluc3BlY3RBcnIgPSBuZXcgVWludDhBcnJheShidWZTaXplKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZWFkZXIucmVhZChpbnNwZWN0QXJyKTtcbiAgICBpZiAocmVzdWx0ID09PSBudWxsKSB7XG4gICAgICAvLyBZaWVsZCBsYXN0IGNodW5rLlxuICAgICAgeWllbGQgY2h1bmtzLmNvbmNhdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAocmVzdWx0IDwgMCkge1xuICAgICAgLy8gRGlzY2FyZCBhbGwgcmVtYWluaW5nIGFuZCBzaWxlbnRseSBmYWlsLlxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjaHVua3MuYWRkKGluc3BlY3RBcnIsIDAsIHJlc3VsdCk7XG4gICAgbGV0IGxvY2FsSW5kZXggPSAwO1xuICAgIHdoaWxlIChpbnNwZWN0SW5kZXggPCBjaHVua3Muc2l6ZSgpKSB7XG4gICAgICBpZiAoaW5zcGVjdEFycltsb2NhbEluZGV4XSA9PT0gZGVsaW1bbWF0Y2hJbmRleF0pIHtcbiAgICAgICAgaW5zcGVjdEluZGV4Kys7XG4gICAgICAgIGxvY2FsSW5kZXgrKztcbiAgICAgICAgbWF0Y2hJbmRleCsrO1xuICAgICAgICBpZiAobWF0Y2hJbmRleCA9PT0gZGVsaW1MZW4pIHtcbiAgICAgICAgICAvLyBGdWxsIG1hdGNoXG4gICAgICAgICAgY29uc3QgbWF0Y2hFbmQgPSBpbnNwZWN0SW5kZXggLSBkZWxpbUxlbjtcbiAgICAgICAgICBjb25zdCByZWFkeUJ5dGVzID0gY2h1bmtzLnNsaWNlKDAsIG1hdGNoRW5kKTtcbiAgICAgICAgICB5aWVsZCByZWFkeUJ5dGVzO1xuICAgICAgICAgIC8vIFJlc2V0IG1hdGNoLCBkaWZmZXJlbnQgZnJvbSBLTVAuXG4gICAgICAgICAgY2h1bmtzLnNoaWZ0KGluc3BlY3RJbmRleCk7XG4gICAgICAgICAgaW5zcGVjdEluZGV4ID0gMDtcbiAgICAgICAgICBtYXRjaEluZGV4ID0gMDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG1hdGNoSW5kZXggPT09IDApIHtcbiAgICAgICAgICBpbnNwZWN0SW5kZXgrKztcbiAgICAgICAgICBsb2NhbEluZGV4Kys7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWF0Y2hJbmRleCA9IGRlbGltTFBTW21hdGNoSW5kZXggLSAxXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKiogUmVhZCBkZWxpbWl0ZWQgc3RyaW5ncyBmcm9tIGEgUmVhZGVyLiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uKiByZWFkU3RyaW5nRGVsaW0oXG4gIHJlYWRlcjogUmVhZGVyLFxuICBkZWxpbTogc3RyaW5nLFxuICBkZWNvZGVyT3B0cz86IHtcbiAgICBlbmNvZGluZz86IHN0cmluZztcbiAgICBmYXRhbD86IGJvb2xlYW47XG4gICAgaWdub3JlQk9NPzogYm9vbGVhbjtcbiAgfSxcbik6IEFzeW5jSXRlcmFibGVJdGVyYXRvcjxzdHJpbmc+IHtcbiAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKGRlY29kZXJPcHRzPy5lbmNvZGluZywgZGVjb2Rlck9wdHMpO1xuICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHJlYWREZWxpbShyZWFkZXIsIGVuY29kZXIuZW5jb2RlKGRlbGltKSkpIHtcbiAgICB5aWVsZCBkZWNvZGVyLmRlY29kZShjaHVuayk7XG4gIH1cbn1cblxuLyoqIFJlYWQgc3RyaW5ncyBsaW5lLWJ5LWxpbmUgZnJvbSBhIFJlYWRlci4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiogcmVhZExpbmVzKFxuICByZWFkZXI6IFJlYWRlcixcbiAgZGVjb2Rlck9wdHM/OiB7XG4gICAgZW5jb2Rpbmc/OiBzdHJpbmc7XG4gICAgZmF0YWw/OiBib29sZWFuO1xuICAgIGlnbm9yZUJPTT86IGJvb2xlYW47XG4gIH0sXG4pOiBBc3luY0l0ZXJhYmxlSXRlcmF0b3I8c3RyaW5nPiB7XG4gIGNvbnN0IGJ1ZlJlYWRlciA9IG5ldyBCdWZSZWFkZXIocmVhZGVyKTtcbiAgbGV0IGNodW5rczogVWludDhBcnJheVtdID0gW107XG4gIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoZGVjb2Rlck9wdHM/LmVuY29kaW5nLCBkZWNvZGVyT3B0cyk7XG4gIHdoaWxlICh0cnVlKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgYnVmUmVhZGVyLnJlYWRMaW5lKCk7XG4gICAgaWYgKCFyZXMpIHtcbiAgICAgIGlmIChjaHVua3MubGVuZ3RoID4gMCkge1xuICAgICAgICB5aWVsZCBkZWNvZGVyLmRlY29kZShjb25jYXQoLi4uY2h1bmtzKSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2h1bmtzLnB1c2gocmVzLmxpbmUpO1xuICAgIGlmICghcmVzLm1vcmUpIHtcbiAgICAgIHlpZWxkIGRlY29kZXIuZGVjb2RlKGNvbmNhdCguLi5jaHVua3MpKTtcbiAgICAgIGNodW5rcyA9IFtdO1xuICAgIH1cbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMiB0aGUgRGVubyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLiBNSVQgbGljZW5zZS5cblxuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSBcIi4uL2lvL2J1ZmZlci50c1wiO1xuXG5jb25zdCBERUZBVUxUX0NIVU5LX1NJWkUgPSAxNl82NDA7XG5jb25zdCBERUZBVUxUX0JVRkZFUl9TSVpFID0gMzIgKiAxMDI0O1xuXG5mdW5jdGlvbiBpc0Nsb3Nlcih2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIERlbm8uQ2xvc2VyIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPSBudWxsICYmIFwiY2xvc2VcIiBpbiB2YWx1ZSAmJlxuICAgIC8vIGRlbm8tbGludC1pZ25vcmUgbm8tZXhwbGljaXQtYW55XG4gICAgdHlwZW9mICh2YWx1ZSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+KVtcImNsb3NlXCJdID09PSBcImZ1bmN0aW9uXCI7XG59XG5cbi8qKiBDcmVhdGUgYSBgRGVuby5SZWFkZXJgIGZyb20gYW4gaXRlcmFibGUgb2YgYFVpbnQ4QXJyYXlgcy5cbiAqXG4gKiBgYGB0c1xuICogICAgICBpbXBvcnQgeyByZWFkZXJGcm9tSXRlcmFibGUsIGNvcHkgfSBmcm9tIFwiLi9jb252ZXJzaW9uLnRzXCI7XG4gKlxuICogICAgICBjb25zdCBmaWxlID0gYXdhaXQgRGVuby5vcGVuKFwibWV0cmljcy50eHRcIiwgeyB3cml0ZTogdHJ1ZSB9KTtcbiAqICAgICAgY29uc3QgcmVhZGVyID0gcmVhZGVyRnJvbUl0ZXJhYmxlKChhc3luYyBmdW5jdGlvbiogKCkge1xuICogICAgICAgIHdoaWxlICh0cnVlKSB7XG4gKiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocikgPT4gc2V0VGltZW91dChyLCAxMDAwKSk7XG4gKiAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYGRhdGE6ICR7SlNPTi5zdHJpbmdpZnkoRGVuby5tZXRyaWNzKCkpfVxcblxcbmA7XG4gKiAgICAgICAgICB5aWVsZCBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUobWVzc2FnZSk7XG4gKiAgICAgICAgfVxuICogICAgICB9KSgpKTtcbiAqICAgICAgYXdhaXQgY29weShyZWFkZXIsIGZpbGUpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWFkZXJGcm9tSXRlcmFibGUoXG4gIGl0ZXJhYmxlOiBJdGVyYWJsZTxVaW50OEFycmF5PiB8IEFzeW5jSXRlcmFibGU8VWludDhBcnJheT4sXG4pOiBEZW5vLlJlYWRlciB7XG4gIGNvbnN0IGl0ZXJhdG9yOiBJdGVyYXRvcjxVaW50OEFycmF5PiB8IEFzeW5jSXRlcmF0b3I8VWludDhBcnJheT4gPVxuICAgIChpdGVyYWJsZSBhcyBBc3luY0l0ZXJhYmxlPFVpbnQ4QXJyYXk+KVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0/LigpID8/XG4gICAgICAoaXRlcmFibGUgYXMgSXRlcmFibGU8VWludDhBcnJheT4pW1N5bWJvbC5pdGVyYXRvcl0/LigpO1xuICBjb25zdCBidWZmZXIgPSBuZXcgQnVmZmVyKCk7XG4gIHJldHVybiB7XG4gICAgYXN5bmMgcmVhZChwOiBVaW50OEFycmF5KTogUHJvbWlzZTxudW1iZXIgfCBudWxsPiB7XG4gICAgICBpZiAoYnVmZmVyLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgaWYgKHJlc3VsdC5kb25lKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHJlc3VsdC52YWx1ZS5ieXRlTGVuZ3RoIDw9IHAuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgcC5zZXQocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQudmFsdWUuYnl0ZUxlbmd0aDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcC5zZXQocmVzdWx0LnZhbHVlLnN1YmFycmF5KDAsIHAuYnl0ZUxlbmd0aCkpO1xuICAgICAgICAgIGF3YWl0IHdyaXRlQWxsKGJ1ZmZlciwgcmVzdWx0LnZhbHVlLnN1YmFycmF5KHAuYnl0ZUxlbmd0aCkpO1xuICAgICAgICAgIHJldHVybiBwLmJ5dGVMZW5ndGg7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG4gPSBhd2FpdCBidWZmZXIucmVhZChwKTtcbiAgICAgICAgaWYgKG4gPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLnJlYWQocCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG47XG4gICAgICB9XG4gICAgfSxcbiAgfTtcbn1cblxuLyoqIENyZWF0ZSBhIGBXcml0ZXJgIGZyb20gYSBgV3JpdGFibGVTdHJlYW1EZWZhdWx0V3JpdGVyYC4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3cml0ZXJGcm9tU3RyZWFtV3JpdGVyKFxuICBzdHJlYW1Xcml0ZXI6IFdyaXRhYmxlU3RyZWFtRGVmYXVsdFdyaXRlcjxVaW50OEFycmF5Pixcbik6IERlbm8uV3JpdGVyIHtcbiAgcmV0dXJuIHtcbiAgICBhc3luYyB3cml0ZShwOiBVaW50OEFycmF5KTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICAgIGF3YWl0IHN0cmVhbVdyaXRlci5yZWFkeTtcbiAgICAgIGF3YWl0IHN0cmVhbVdyaXRlci53cml0ZShwKTtcbiAgICAgIHJldHVybiBwLmxlbmd0aDtcbiAgICB9LFxuICB9O1xufVxuXG4vKiogQ3JlYXRlIGEgYFJlYWRlcmAgZnJvbSBhIGBSZWFkYWJsZVN0cmVhbURlZmF1bHRSZWFkZXJgLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlYWRlckZyb21TdHJlYW1SZWFkZXIoXG4gIHN0cmVhbVJlYWRlcjogUmVhZGFibGVTdHJlYW1EZWZhdWx0UmVhZGVyPFVpbnQ4QXJyYXk+LFxuKTogRGVuby5SZWFkZXIge1xuICBjb25zdCBidWZmZXIgPSBuZXcgQnVmZmVyKCk7XG5cbiAgcmV0dXJuIHtcbiAgICBhc3luYyByZWFkKHA6IFVpbnQ4QXJyYXkpOiBQcm9taXNlPG51bWJlciB8IG51bGw+IHtcbiAgICAgIGlmIChidWZmZXIuZW1wdHkoKSkge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBzdHJlYW1SZWFkZXIucmVhZCgpO1xuICAgICAgICBpZiAocmVzLmRvbmUpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gRU9GXG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB3cml0ZUFsbChidWZmZXIsIHJlcy52YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBidWZmZXIucmVhZChwKTtcbiAgICB9LFxuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdyaXRhYmxlU3RyZWFtRnJvbVdyaXRlck9wdGlvbnMge1xuICAvKipcbiAgICogSWYgdGhlIGB3cml0ZXJgIGlzIGFsc28gYSBgRGVuby5DbG9zZXJgLCBhdXRvbWF0aWNhbGx5IGNsb3NlIHRoZSBgd3JpdGVyYFxuICAgKiB3aGVuIHRoZSBzdHJlYW0gaXMgY2xvc2VkLCBhYm9ydGVkLCBvciBhIHdyaXRlIGVycm9yIG9jY3Vycy5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gYHRydWVgLiAqL1xuICBhdXRvQ2xvc2U/OiBib29sZWFuO1xufVxuXG4vKiogQ3JlYXRlIGEgYFdyaXRhYmxlU3RyZWFtYCBmcm9tIGEgYFdyaXRlcmAuICovXG5leHBvcnQgZnVuY3Rpb24gd3JpdGFibGVTdHJlYW1Gcm9tV3JpdGVyKFxuICB3cml0ZXI6IERlbm8uV3JpdGVyLFxuICBvcHRpb25zOiBXcml0YWJsZVN0cmVhbUZyb21Xcml0ZXJPcHRpb25zID0ge30sXG4pOiBXcml0YWJsZVN0cmVhbTxVaW50OEFycmF5PiB7XG4gIGNvbnN0IHsgYXV0b0Nsb3NlID0gdHJ1ZSB9ID0gb3B0aW9ucztcblxuICByZXR1cm4gbmV3IFdyaXRhYmxlU3RyZWFtKHtcbiAgICBhc3luYyB3cml0ZShjaHVuaywgY29udHJvbGxlcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgd3JpdGVBbGwod3JpdGVyLCBjaHVuayk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnRyb2xsZXIuZXJyb3IoZSk7XG4gICAgICAgIGlmIChpc0Nsb3Nlcih3cml0ZXIpICYmIGF1dG9DbG9zZSkge1xuICAgICAgICAgIHdyaXRlci5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBjbG9zZSgpIHtcbiAgICAgIGlmIChpc0Nsb3Nlcih3cml0ZXIpICYmIGF1dG9DbG9zZSkge1xuICAgICAgICB3cml0ZXIuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGFib3J0KCkge1xuICAgICAgaWYgKGlzQ2xvc2VyKHdyaXRlcikgJiYgYXV0b0Nsb3NlKSB7XG4gICAgICAgIHdyaXRlci5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0sXG4gIH0pO1xufVxuXG4vKiogQ3JlYXRlIGEgYFJlYWRhYmxlU3RyZWFtYCBmcm9tIGFueSBraW5kIG9mIGl0ZXJhYmxlLlxuICpcbiAqIGBgYHRzXG4gKiAgICAgIGltcG9ydCB7IHJlYWRhYmxlU3RyZWFtRnJvbUl0ZXJhYmxlIH0gZnJvbSBcIi4vY29udmVyc2lvbi50c1wiO1xuICpcbiAqICAgICAgY29uc3QgcjEgPSByZWFkYWJsZVN0cmVhbUZyb21JdGVyYWJsZShbXCJmb28sIGJhciwgYmF6XCJdKTtcbiAqICAgICAgY29uc3QgcjIgPSByZWFkYWJsZVN0cmVhbUZyb21JdGVyYWJsZShhc3luYyBmdW5jdGlvbiogKCkge1xuICogICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKCgocikgPT4gc2V0VGltZW91dChyLCAxMDAwKSkpO1xuICogICAgICAgIHlpZWxkIFwiZm9vXCI7XG4gKiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKChyKSA9PiBzZXRUaW1lb3V0KHIsIDEwMDApKSk7XG4gKiAgICAgICAgeWllbGQgXCJiYXJcIjtcbiAqICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgoKHIpID0+IHNldFRpbWVvdXQociwgMTAwMCkpKTtcbiAqICAgICAgICB5aWVsZCBcImJhelwiO1xuICogICAgICB9KCkpO1xuICogYGBgXG4gKlxuICogSWYgdGhlIHByb2R1Y2VkIGl0ZXJhdG9yIChgaXRlcmFibGVbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKClgIG9yXG4gKiBgaXRlcmFibGVbU3ltYm9sLml0ZXJhdG9yXSgpYCkgaXMgYSBnZW5lcmF0b3IsIG9yIG1vcmUgc3BlY2lmaWNhbGx5IGlzIGZvdW5kXG4gKiB0byBoYXZlIGEgYC50aHJvdygpYCBtZXRob2Qgb24gaXQsIHRoYXQgd2lsbCBiZSBjYWxsZWQgdXBvblxuICogYHJlYWRhYmxlU3RyZWFtLmNhbmNlbCgpYC4gVGhpcyBpcyB0aGUgY2FzZSBmb3IgdGhlIHNlY29uZCBpbnB1dCB0eXBlIGFib3ZlOlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyByZWFkYWJsZVN0cmVhbUZyb21JdGVyYWJsZSB9IGZyb20gXCIuL2NvbnZlcnNpb24udHNcIjtcbiAqXG4gKiBjb25zdCByMyA9IHJlYWRhYmxlU3RyZWFtRnJvbUl0ZXJhYmxlKGFzeW5jIGZ1bmN0aW9uKiAoKSB7XG4gKiAgIHRyeSB7XG4gKiAgICAgeWllbGQgXCJmb29cIjtcbiAqICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAqICAgICBjb25zb2xlLmxvZyhlcnJvcik7IC8vIEVycm9yOiBDYW5jZWxsZWQgYnkgY29uc3VtZXIuXG4gKiAgIH1cbiAqIH0oKSk7XG4gKiBjb25zdCByZWFkZXIgPSByMy5nZXRSZWFkZXIoKTtcbiAqIGNvbnNvbGUubG9nKGF3YWl0IHJlYWRlci5yZWFkKCkpOyAvLyB7IHZhbHVlOiBcImZvb1wiLCBkb25lOiBmYWxzZSB9XG4gKiBhd2FpdCByZWFkZXIuY2FuY2VsKG5ldyBFcnJvcihcIkNhbmNlbGxlZCBieSBjb25zdW1lci5cIikpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWFkYWJsZVN0cmVhbUZyb21JdGVyYWJsZTxUPihcbiAgaXRlcmFibGU6IEl0ZXJhYmxlPFQ+IHwgQXN5bmNJdGVyYWJsZTxUPixcbik6IFJlYWRhYmxlU3RyZWFtPFQ+IHtcbiAgY29uc3QgaXRlcmF0b3I6IEl0ZXJhdG9yPFQ+IHwgQXN5bmNJdGVyYXRvcjxUPiA9XG4gICAgKGl0ZXJhYmxlIGFzIEFzeW5jSXRlcmFibGU8VD4pW1N5bWJvbC5hc3luY0l0ZXJhdG9yXT8uKCkgPz9cbiAgICAgIChpdGVyYWJsZSBhcyBJdGVyYWJsZTxUPilbU3ltYm9sLml0ZXJhdG9yXT8uKCk7XG4gIHJldHVybiBuZXcgUmVhZGFibGVTdHJlYW0oe1xuICAgIGFzeW5jIHB1bGwoY29udHJvbGxlcikge1xuICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgaXRlcmF0b3IubmV4dCgpO1xuICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgY29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGFzeW5jIGNhbmNlbChyZWFzb24pIHtcbiAgICAgIGlmICh0eXBlb2YgaXRlcmF0b3IudGhyb3cgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgaXRlcmF0b3IudGhyb3cocmVhc29uKTtcbiAgICAgICAgfSBjYXRjaCB7IC8qIGBpdGVyYXRvci50aHJvdygpYCBhbHdheXMgdGhyb3dzIG9uIHNpdGUuIFdlIGNhdGNoIGl0LiAqLyB9XG4gICAgICB9XG4gICAgfSxcbiAgfSk7XG59XG5cbi8qKlxuICogQ29udmVydCB0aGUgZ2VuZXJhdG9yIGZ1bmN0aW9uIGludG8gYSBUcmFuc2Zvcm1TdHJlYW0uXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IHJlYWRhYmxlU3RyZWFtRnJvbUl0ZXJhYmxlLCB0b1RyYW5zZm9ybVN0cmVhbSB9IGZyb20gXCIuL2NvbnZlcnNpb24udHNcIjtcbiAqXG4gKiBjb25zdCByZWFkYWJsZSA9IHJlYWRhYmxlU3RyZWFtRnJvbUl0ZXJhYmxlKFswLCAxLCAyXSlcbiAqICAgLnBpcGVUaHJvdWdoKHRvVHJhbnNmb3JtU3RyZWFtKGFzeW5jIGZ1bmN0aW9uKiAoc3JjKSB7XG4gKiAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBzcmMpIHtcbiAqICAgICAgIHlpZWxkIGNodW5rICogMTAwO1xuICogICAgIH1cbiAqICAgfSkpO1xuICpcbiAqIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgcmVhZGFibGUpIHtcbiAqICAgY29uc29sZS5sb2coY2h1bmspO1xuICogfVxuICogLy8gb3V0cHV0OiAwLCAxMDAsIDIwMFxuICogYGBgXG4gKlxuICogQHBhcmFtIHRyYW5zZm9ybWVyIEEgZnVuY3Rpb24gdG8gdHJhbnNmb3JtLlxuICogQHBhcmFtIHdyaXRhYmxlU3RyYXRlZ3kgQW4gb2JqZWN0IHRoYXQgb3B0aW9uYWxseSBkZWZpbmVzIGEgcXVldWluZyBzdHJhdGVneSBmb3IgdGhlIHN0cmVhbS5cbiAqIEBwYXJhbSByZWFkYWJsZVN0cmF0ZWd5IEFuIG9iamVjdCB0aGF0IG9wdGlvbmFsbHkgZGVmaW5lcyBhIHF1ZXVpbmcgc3RyYXRlZ3kgZm9yIHRoZSBzdHJlYW0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1RyYW5zZm9ybVN0cmVhbTxJLCBPPihcbiAgdHJhbnNmb3JtZXI6IChzcmM6IFJlYWRhYmxlU3RyZWFtPEk+KSA9PiBJdGVyYWJsZTxPPiB8IEFzeW5jSXRlcmFibGU8Tz4sXG4gIHdyaXRhYmxlU3RyYXRlZ3k/OiBRdWV1aW5nU3RyYXRlZ3k8ST4sXG4gIHJlYWRhYmxlU3RyYXRlZ3k/OiBRdWV1aW5nU3RyYXRlZ3k8Tz4sXG4pOiBUcmFuc2Zvcm1TdHJlYW08SSwgTz4ge1xuICBjb25zdCB7XG4gICAgd3JpdGFibGUsXG4gICAgcmVhZGFibGUsXG4gIH0gPSBuZXcgVHJhbnNmb3JtU3RyZWFtPEksIEk+KHVuZGVmaW5lZCwgd3JpdGFibGVTdHJhdGVneSk7XG5cbiAgY29uc3QgaXRlcmFibGUgPSB0cmFuc2Zvcm1lcihyZWFkYWJsZSk7XG4gIGNvbnN0IGl0ZXJhdG9yOiBJdGVyYXRvcjxPPiB8IEFzeW5jSXRlcmF0b3I8Tz4gPVxuICAgIChpdGVyYWJsZSBhcyBBc3luY0l0ZXJhYmxlPE8+KVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0/LigpID8/XG4gICAgICAoaXRlcmFibGUgYXMgSXRlcmFibGU8Tz4pW1N5bWJvbC5pdGVyYXRvcl0/LigpO1xuICByZXR1cm4ge1xuICAgIHdyaXRhYmxlLFxuICAgIHJlYWRhYmxlOiBuZXcgUmVhZGFibGVTdHJlYW08Tz4oe1xuICAgICAgYXN5bmMgcHVsbChjb250cm9sbGVyKSB7XG4gICAgICAgIGxldCByZXN1bHQ6IEl0ZXJhdG9yUmVzdWx0PE8+O1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAvLyBQcm9wYWdhdGUgZXJyb3IgdG8gc3RyZWFtIGZyb20gaXRlcmF0b3JcbiAgICAgICAgICAvLyBJZiB0aGUgc3RyZWFtIHN0YXR1cyBpcyBcImVycm9yZWRcIiwgaXQgd2lsbCBiZSB0aHJvd24sIGJ1dCBpZ25vcmUuXG4gICAgICAgICAgYXdhaXQgcmVhZGFibGUuY2FuY2VsKGVycm9yKS5jYXRjaCgoKSA9PiB7fSk7XG4gICAgICAgICAgY29udHJvbGxlci5lcnJvcihlcnJvcik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN1bHQuZG9uZSkge1xuICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHJlc3VsdC52YWx1ZSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgY2FuY2VsKHJlYXNvbikge1xuICAgICAgICAvLyBQcm9wYWdhdGUgY2FuY2VsbGF0aW9uIHRvIHJlYWRhYmxlIGFuZCBpdGVyYXRvclxuICAgICAgICBpZiAodHlwZW9mIGl0ZXJhdG9yLnRocm93ID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBpdGVyYXRvci50aHJvdyhyZWFzb24pO1xuICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgLyogYGl0ZXJhdG9yLnRocm93KClgIGFsd2F5cyB0aHJvd3Mgb24gc2l0ZS4gV2UgY2F0Y2ggaXQuICovXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHJlYWRhYmxlLmNhbmNlbChyZWFzb24pO1xuICAgICAgfSxcbiAgICB9LCByZWFkYWJsZVN0cmF0ZWd5KSxcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWFkYWJsZVN0cmVhbUZyb21SZWFkZXJPcHRpb25zIHtcbiAgLyoqIElmIHRoZSBgcmVhZGVyYCBpcyBhbHNvIGEgYERlbm8uQ2xvc2VyYCwgYXV0b21hdGljYWxseSBjbG9zZSB0aGUgYHJlYWRlcmBcbiAgICogd2hlbiBgRU9GYCBpcyBlbmNvdW50ZXJlZCwgb3IgYSByZWFkIGVycm9yIG9jY3Vycy5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gYHRydWVgLiAqL1xuICBhdXRvQ2xvc2U/OiBib29sZWFuO1xuXG4gIC8qKiBUaGUgc2l6ZSBvZiBjaHVua3MgdG8gYWxsb2NhdGUgdG8gcmVhZCwgdGhlIGRlZmF1bHQgaXMgfjE2S2lCLCB3aGljaCBpc1xuICAgKiB0aGUgbWF4aW11bSBzaXplIHRoYXQgRGVubyBvcGVyYXRpb25zIGNhbiBjdXJyZW50bHkgc3VwcG9ydC4gKi9cbiAgY2h1bmtTaXplPzogbnVtYmVyO1xuXG4gIC8qKiBUaGUgcXVldWluZyBzdHJhdGVneSB0byBjcmVhdGUgdGhlIGBSZWFkYWJsZVN0cmVhbWAgd2l0aC4gKi9cbiAgc3RyYXRlZ3k/OiB7IGhpZ2hXYXRlck1hcms/OiBudW1iZXIgfCB1bmRlZmluZWQ7IHNpemU/OiB1bmRlZmluZWQgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBgUmVhZGFibGVTdHJlYW08VWludDhBcnJheT5gIGZyb20gZnJvbSBhIGBEZW5vLlJlYWRlcmAuXG4gKlxuICogV2hlbiB0aGUgcHVsbCBhbGdvcml0aG0gaXMgY2FsbGVkIG9uIHRoZSBzdHJlYW0sIGEgY2h1bmsgZnJvbSB0aGUgcmVhZGVyXG4gKiB3aWxsIGJlIHJlYWQuICBXaGVuIGBudWxsYCBpcyByZXR1cm5lZCBmcm9tIHRoZSByZWFkZXIsIHRoZSBzdHJlYW0gd2lsbCBiZVxuICogY2xvc2VkIGFsb25nIHdpdGggdGhlIHJlYWRlciAoaWYgaXQgaXMgYWxzbyBhIGBEZW5vLkNsb3NlcmApLlxuICpcbiAqIEFuIGV4YW1wbGUgY29udmVydGluZyBhIGBEZW5vLkZzRmlsZWAgaW50byBhIHJlYWRhYmxlIHN0cmVhbTpcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgcmVhZGFibGVTdHJlYW1Gcm9tUmVhZGVyIH0gZnJvbSBcIi4vbW9kLnRzXCI7XG4gKlxuICogY29uc3QgZmlsZSA9IGF3YWl0IERlbm8ub3BlbihcIi4vZmlsZS50eHRcIiwgeyByZWFkOiB0cnVlIH0pO1xuICogY29uc3QgZmlsZVN0cmVhbSA9IHJlYWRhYmxlU3RyZWFtRnJvbVJlYWRlcihmaWxlKTtcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVhZGFibGVTdHJlYW1Gcm9tUmVhZGVyKFxuICByZWFkZXI6IERlbm8uUmVhZGVyIHwgKERlbm8uUmVhZGVyICYgRGVuby5DbG9zZXIpLFxuICBvcHRpb25zOiBSZWFkYWJsZVN0cmVhbUZyb21SZWFkZXJPcHRpb25zID0ge30sXG4pOiBSZWFkYWJsZVN0cmVhbTxVaW50OEFycmF5PiB7XG4gIGNvbnN0IHtcbiAgICBhdXRvQ2xvc2UgPSB0cnVlLFxuICAgIGNodW5rU2l6ZSA9IERFRkFVTFRfQ0hVTktfU0laRSxcbiAgICBzdHJhdGVneSxcbiAgfSA9IG9wdGlvbnM7XG5cbiAgcmV0dXJuIG5ldyBSZWFkYWJsZVN0cmVhbSh7XG4gICAgYXN5bmMgcHVsbChjb250cm9sbGVyKSB7XG4gICAgICBjb25zdCBjaHVuayA9IG5ldyBVaW50OEFycmF5KGNodW5rU2l6ZSk7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZWFkID0gYXdhaXQgcmVhZGVyLnJlYWQoY2h1bmspO1xuICAgICAgICBpZiAocmVhZCA9PT0gbnVsbCkge1xuICAgICAgICAgIGlmIChpc0Nsb3NlcihyZWFkZXIpICYmIGF1dG9DbG9zZSkge1xuICAgICAgICAgICAgcmVhZGVyLmNsb3NlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGNodW5rLnN1YmFycmF5KDAsIHJlYWQpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29udHJvbGxlci5lcnJvcihlKTtcbiAgICAgICAgaWYgKGlzQ2xvc2VyKHJlYWRlcikpIHtcbiAgICAgICAgICByZWFkZXIuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgY2FuY2VsKCkge1xuICAgICAgaWYgKGlzQ2xvc2VyKHJlYWRlcikgJiYgYXV0b0Nsb3NlKSB7XG4gICAgICAgIHJlYWRlci5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0sXG4gIH0sIHN0cmF0ZWd5KTtcbn1cblxuLyoqIFJlYWQgUmVhZGVyIGByYCB1bnRpbCBFT0YgKGBudWxsYCkgYW5kIHJlc29sdmUgdG8gdGhlIGNvbnRlbnQgYXNcbiAqIFVpbnQ4QXJyYXlgLlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBCdWZmZXIgfSBmcm9tIFwiLi4vaW8vYnVmZmVyLnRzXCI7XG4gKiBpbXBvcnQgeyByZWFkQWxsIH0gZnJvbSBcIi4vY29udmVyc2lvbi50c1wiO1xuICpcbiAqIC8vIEV4YW1wbGUgZnJvbSBzdGRpblxuICogY29uc3Qgc3RkaW5Db250ZW50ID0gYXdhaXQgcmVhZEFsbChEZW5vLnN0ZGluKTtcbiAqXG4gKiAvLyBFeGFtcGxlIGZyb20gZmlsZVxuICogY29uc3QgZmlsZSA9IGF3YWl0IERlbm8ub3BlbihcIm15X2ZpbGUudHh0XCIsIHtyZWFkOiB0cnVlfSk7XG4gKiBjb25zdCBteUZpbGVDb250ZW50ID0gYXdhaXQgcmVhZEFsbChmaWxlKTtcbiAqIERlbm8uY2xvc2UoZmlsZS5yaWQpO1xuICpcbiAqIC8vIEV4YW1wbGUgZnJvbSBidWZmZXJcbiAqIGNvbnN0IG15RGF0YSA9IG5ldyBVaW50OEFycmF5KDEwMCk7XG4gKiAvLyAuLi4gZmlsbCBteURhdGEgYXJyYXkgd2l0aCBkYXRhXG4gKiBjb25zdCByZWFkZXIgPSBuZXcgQnVmZmVyKG15RGF0YS5idWZmZXIpO1xuICogY29uc3QgYnVmZmVyQ29udGVudCA9IGF3YWl0IHJlYWRBbGwocmVhZGVyKTtcbiAqIGBgYFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVhZEFsbChyOiBEZW5vLlJlYWRlcik6IFByb21pc2U8VWludDhBcnJheT4ge1xuICBjb25zdCBidWYgPSBuZXcgQnVmZmVyKCk7XG4gIGF3YWl0IGJ1Zi5yZWFkRnJvbShyKTtcbiAgcmV0dXJuIGJ1Zi5ieXRlcygpO1xufVxuXG4vKiogU3luY2hyb25vdXNseSByZWFkcyBSZWFkZXIgYHJgIHVudGlsIEVPRiAoYG51bGxgKSBhbmQgcmV0dXJucyB0aGUgY29udGVudFxuICogYXMgYFVpbnQ4QXJyYXlgLlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBCdWZmZXIgfSBmcm9tIFwiLi4vaW8vYnVmZmVyLnRzXCI7XG4gKiBpbXBvcnQgeyByZWFkQWxsU3luYyB9IGZyb20gXCIuL2NvbnZlcnNpb24udHNcIjtcbiAqXG4gKiAvLyBFeGFtcGxlIGZyb20gc3RkaW5cbiAqIGNvbnN0IHN0ZGluQ29udGVudCA9IHJlYWRBbGxTeW5jKERlbm8uc3RkaW4pO1xuICpcbiAqIC8vIEV4YW1wbGUgZnJvbSBmaWxlXG4gKiBjb25zdCBmaWxlID0gRGVuby5vcGVuU3luYyhcIm15X2ZpbGUudHh0XCIsIHtyZWFkOiB0cnVlfSk7XG4gKiBjb25zdCBteUZpbGVDb250ZW50ID0gcmVhZEFsbFN5bmMoZmlsZSk7XG4gKiBEZW5vLmNsb3NlKGZpbGUucmlkKTtcbiAqXG4gKiAvLyBFeGFtcGxlIGZyb20gYnVmZmVyXG4gKiBjb25zdCBteURhdGEgPSBuZXcgVWludDhBcnJheSgxMDApO1xuICogLy8gLi4uIGZpbGwgbXlEYXRhIGFycmF5IHdpdGggZGF0YVxuICogY29uc3QgcmVhZGVyID0gbmV3IEJ1ZmZlcihteURhdGEuYnVmZmVyKTtcbiAqIGNvbnN0IGJ1ZmZlckNvbnRlbnQgPSByZWFkQWxsU3luYyhyZWFkZXIpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWFkQWxsU3luYyhyOiBEZW5vLlJlYWRlclN5bmMpOiBVaW50OEFycmF5IHtcbiAgY29uc3QgYnVmID0gbmV3IEJ1ZmZlcigpO1xuICBidWYucmVhZEZyb21TeW5jKHIpO1xuICByZXR1cm4gYnVmLmJ5dGVzKCk7XG59XG5cbi8qKiBXcml0ZSBhbGwgdGhlIGNvbnRlbnQgb2YgdGhlIGFycmF5IGJ1ZmZlciAoYGFycmApIHRvIHRoZSB3cml0ZXIgKGB3YCkuXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IEJ1ZmZlciB9IGZyb20gXCIuLi9pby9idWZmZXIudHNcIjtcbiAqIGltcG9ydCB7IHdyaXRlQWxsIH0gZnJvbSBcIi4vY29udmVyc2lvbi50c1wiO1xuXG4gKiAvLyBFeGFtcGxlIHdyaXRpbmcgdG8gc3Rkb3V0XG4gKiBsZXQgY29udGVudEJ5dGVzID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKFwiSGVsbG8gV29ybGRcIik7XG4gKiBhd2FpdCB3cml0ZUFsbChEZW5vLnN0ZG91dCwgY29udGVudEJ5dGVzKTtcbiAqXG4gKiAvLyBFeGFtcGxlIHdyaXRpbmcgdG8gZmlsZVxuICogY29udGVudEJ5dGVzID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKFwiSGVsbG8gV29ybGRcIik7XG4gKiBjb25zdCBmaWxlID0gYXdhaXQgRGVuby5vcGVuKCd0ZXN0LmZpbGUnLCB7d3JpdGU6IHRydWV9KTtcbiAqIGF3YWl0IHdyaXRlQWxsKGZpbGUsIGNvbnRlbnRCeXRlcyk7XG4gKiBEZW5vLmNsb3NlKGZpbGUucmlkKTtcbiAqXG4gKiAvLyBFeGFtcGxlIHdyaXRpbmcgdG8gYnVmZmVyXG4gKiBjb250ZW50Qnl0ZXMgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoXCJIZWxsbyBXb3JsZFwiKTtcbiAqIGNvbnN0IHdyaXRlciA9IG5ldyBCdWZmZXIoKTtcbiAqIGF3YWl0IHdyaXRlQWxsKHdyaXRlciwgY29udGVudEJ5dGVzKTtcbiAqIGNvbnNvbGUubG9nKHdyaXRlci5ieXRlcygpLmxlbmd0aCk7ICAvLyAxMVxuICogYGBgXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3cml0ZUFsbCh3OiBEZW5vLldyaXRlciwgYXJyOiBVaW50OEFycmF5KSB7XG4gIGxldCBud3JpdHRlbiA9IDA7XG4gIHdoaWxlIChud3JpdHRlbiA8IGFyci5sZW5ndGgpIHtcbiAgICBud3JpdHRlbiArPSBhd2FpdCB3LndyaXRlKGFyci5zdWJhcnJheShud3JpdHRlbikpO1xuICB9XG59XG5cbi8qKiBTeW5jaHJvbm91c2x5IHdyaXRlIGFsbCB0aGUgY29udGVudCBvZiB0aGUgYXJyYXkgYnVmZmVyIChgYXJyYCkgdG8gdGhlXG4gKiB3cml0ZXIgKGB3YCkuXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IEJ1ZmZlciB9IGZyb20gXCIuLi9pby9idWZmZXIudHNcIjtcbiAqIGltcG9ydCB7IHdyaXRlQWxsU3luYyB9IGZyb20gXCIuL2NvbnZlcnNpb24udHNcIjtcbiAqXG4gKiAvLyBFeGFtcGxlIHdyaXRpbmcgdG8gc3Rkb3V0XG4gKiBsZXQgY29udGVudEJ5dGVzID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKFwiSGVsbG8gV29ybGRcIik7XG4gKiB3cml0ZUFsbFN5bmMoRGVuby5zdGRvdXQsIGNvbnRlbnRCeXRlcyk7XG4gKlxuICogLy8gRXhhbXBsZSB3cml0aW5nIHRvIGZpbGVcbiAqIGNvbnRlbnRCeXRlcyA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShcIkhlbGxvIFdvcmxkXCIpO1xuICogY29uc3QgZmlsZSA9IERlbm8ub3BlblN5bmMoJ3Rlc3QuZmlsZScsIHt3cml0ZTogdHJ1ZX0pO1xuICogd3JpdGVBbGxTeW5jKGZpbGUsIGNvbnRlbnRCeXRlcyk7XG4gKiBEZW5vLmNsb3NlKGZpbGUucmlkKTtcbiAqXG4gKiAvLyBFeGFtcGxlIHdyaXRpbmcgdG8gYnVmZmVyXG4gKiBjb250ZW50Qnl0ZXMgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoXCJIZWxsbyBXb3JsZFwiKTtcbiAqIGNvbnN0IHdyaXRlciA9IG5ldyBCdWZmZXIoKTtcbiAqIHdyaXRlQWxsU3luYyh3cml0ZXIsIGNvbnRlbnRCeXRlcyk7XG4gKiBjb25zb2xlLmxvZyh3cml0ZXIuYnl0ZXMoKS5sZW5ndGgpOyAgLy8gMTFcbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gd3JpdGVBbGxTeW5jKHc6IERlbm8uV3JpdGVyU3luYywgYXJyOiBVaW50OEFycmF5KTogdm9pZCB7XG4gIGxldCBud3JpdHRlbiA9IDA7XG4gIHdoaWxlIChud3JpdHRlbiA8IGFyci5sZW5ndGgpIHtcbiAgICBud3JpdHRlbiArPSB3LndyaXRlU3luYyhhcnIuc3ViYXJyYXkobndyaXR0ZW4pKTtcbiAgfVxufVxuXG4vKiogVHVybnMgYSBSZWFkZXIsIGByYCwgaW50byBhbiBhc3luYyBpdGVyYXRvci5cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgaXRlcmF0ZVJlYWRlciB9IGZyb20gXCIuL2NvbnZlcnNpb24udHNcIjtcbiAqXG4gKiBsZXQgZiA9IGF3YWl0IERlbm8ub3BlbihcIi9ldGMvcGFzc3dkXCIpO1xuICogZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBpdGVyYXRlUmVhZGVyKGYpKSB7XG4gKiAgIGNvbnNvbGUubG9nKGNodW5rKTtcbiAqIH1cbiAqIGYuY2xvc2UoKTtcbiAqIGBgYFxuICpcbiAqIFNlY29uZCBhcmd1bWVudCBjYW4gYmUgdXNlZCB0byB0dW5lIHNpemUgb2YgYSBidWZmZXIuXG4gKiBEZWZhdWx0IHNpemUgb2YgdGhlIGJ1ZmZlciBpcyAzMmtCLlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBpdGVyYXRlUmVhZGVyIH0gZnJvbSBcIi4vY29udmVyc2lvbi50c1wiO1xuICpcbiAqIGxldCBmID0gYXdhaXQgRGVuby5vcGVuKFwiL2V0Yy9wYXNzd2RcIik7XG4gKiBjb25zdCBpdCA9IGl0ZXJhdGVSZWFkZXIoZiwge1xuICogICBidWZTaXplOiAxMDI0ICogMTAyNFxuICogfSk7XG4gKiBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGl0KSB7XG4gKiAgIGNvbnNvbGUubG9nKGNodW5rKTtcbiAqIH1cbiAqIGYuY2xvc2UoKTtcbiAqIGBgYFxuICpcbiAqIEl0ZXJhdG9yIHVzZXMgYW4gaW50ZXJuYWwgYnVmZmVyIG9mIGZpeGVkIHNpemUgZm9yIGVmZmljaWVuY3k7IGl0IHJldHVybnNcbiAqIGEgdmlldyBvbiB0aGF0IGJ1ZmZlciBvbiBlYWNoIGl0ZXJhdGlvbi4gSXQgaXMgdGhlcmVmb3JlIGNhbGxlcidzXG4gKiByZXNwb25zaWJpbGl0eSB0byBjb3B5IGNvbnRlbnRzIG9mIHRoZSBidWZmZXIgaWYgbmVlZGVkOyBvdGhlcndpc2UgdGhlXG4gKiBuZXh0IGl0ZXJhdGlvbiB3aWxsIG92ZXJ3cml0ZSBjb250ZW50cyBvZiBwcmV2aW91c2x5IHJldHVybmVkIGNodW5rLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24qIGl0ZXJhdGVSZWFkZXIoXG4gIHI6IERlbm8uUmVhZGVyLFxuICBvcHRpb25zPzoge1xuICAgIGJ1ZlNpemU/OiBudW1iZXI7XG4gIH0sXG4pOiBBc3luY0l0ZXJhYmxlSXRlcmF0b3I8VWludDhBcnJheT4ge1xuICBjb25zdCBidWZTaXplID0gb3B0aW9ucz8uYnVmU2l6ZSA/PyBERUZBVUxUX0JVRkZFUl9TSVpFO1xuICBjb25zdCBiID0gbmV3IFVpbnQ4QXJyYXkoYnVmU2l6ZSk7XG4gIHdoaWxlICh0cnVlKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgci5yZWFkKGIpO1xuICAgIGlmIChyZXN1bHQgPT09IG51bGwpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHlpZWxkIGIuc3ViYXJyYXkoMCwgcmVzdWx0KTtcbiAgfVxufVxuXG4vKiogVHVybnMgYSBSZWFkZXJTeW5jLCBgcmAsIGludG8gYW4gaXRlcmF0b3IuXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGl0ZXJhdGVSZWFkZXJTeW5jIH0gZnJvbSBcIi4vY29udmVyc2lvbi50c1wiO1xuICpcbiAqIGxldCBmID0gRGVuby5vcGVuU3luYyhcIi9ldGMvcGFzc3dkXCIpO1xuICogZm9yIChjb25zdCBjaHVuayBvZiBpdGVyYXRlUmVhZGVyU3luYyhmKSkge1xuICogICBjb25zb2xlLmxvZyhjaHVuayk7XG4gKiB9XG4gKiBmLmNsb3NlKCk7XG4gKiBgYGBcbiAqXG4gKiBTZWNvbmQgYXJndW1lbnQgY2FuIGJlIHVzZWQgdG8gdHVuZSBzaXplIG9mIGEgYnVmZmVyLlxuICogRGVmYXVsdCBzaXplIG9mIHRoZSBidWZmZXIgaXMgMzJrQi5cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgaXRlcmF0ZVJlYWRlclN5bmMgfSBmcm9tIFwiLi9jb252ZXJzaW9uLnRzXCI7XG5cbiAqIGxldCBmID0gYXdhaXQgRGVuby5vcGVuKFwiL2V0Yy9wYXNzd2RcIik7XG4gKiBjb25zdCBpdGVyID0gaXRlcmF0ZVJlYWRlclN5bmMoZiwge1xuICogICBidWZTaXplOiAxMDI0ICogMTAyNFxuICogfSk7XG4gKiBmb3IgKGNvbnN0IGNodW5rIG9mIGl0ZXIpIHtcbiAqICAgY29uc29sZS5sb2coY2h1bmspO1xuICogfVxuICogZi5jbG9zZSgpO1xuICogYGBgXG4gKlxuICogSXRlcmF0b3IgdXNlcyBhbiBpbnRlcm5hbCBidWZmZXIgb2YgZml4ZWQgc2l6ZSBmb3IgZWZmaWNpZW5jeTsgaXQgcmV0dXJuc1xuICogYSB2aWV3IG9uIHRoYXQgYnVmZmVyIG9uIGVhY2ggaXRlcmF0aW9uLiBJdCBpcyB0aGVyZWZvcmUgY2FsbGVyJ3NcbiAqIHJlc3BvbnNpYmlsaXR5IHRvIGNvcHkgY29udGVudHMgb2YgdGhlIGJ1ZmZlciBpZiBuZWVkZWQ7IG90aGVyd2lzZSB0aGVcbiAqIG5leHQgaXRlcmF0aW9uIHdpbGwgb3ZlcndyaXRlIGNvbnRlbnRzIG9mIHByZXZpb3VzbHkgcmV0dXJuZWQgY2h1bmsuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiogaXRlcmF0ZVJlYWRlclN5bmMoXG4gIHI6IERlbm8uUmVhZGVyU3luYyxcbiAgb3B0aW9ucz86IHtcbiAgICBidWZTaXplPzogbnVtYmVyO1xuICB9LFxuKTogSXRlcmFibGVJdGVyYXRvcjxVaW50OEFycmF5PiB7XG4gIGNvbnN0IGJ1ZlNpemUgPSBvcHRpb25zPy5idWZTaXplID8/IERFRkFVTFRfQlVGRkVSX1NJWkU7XG4gIGNvbnN0IGIgPSBuZXcgVWludDhBcnJheShidWZTaXplKTtcbiAgd2hpbGUgKHRydWUpIHtcbiAgICBjb25zdCByZXN1bHQgPSByLnJlYWRTeW5jKGIpO1xuICAgIGlmIChyZXN1bHQgPT09IG51bGwpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHlpZWxkIGIuc3ViYXJyYXkoMCwgcmVzdWx0KTtcbiAgfVxufVxuXG4vKiogQ29waWVzIGZyb20gYHNyY2AgdG8gYGRzdGAgdW50aWwgZWl0aGVyIEVPRiAoYG51bGxgKSBpcyByZWFkIGZyb20gYHNyY2Agb3JcbiAqIGFuIGVycm9yIG9jY3Vycy4gSXQgcmVzb2x2ZXMgdG8gdGhlIG51bWJlciBvZiBieXRlcyBjb3BpZWQgb3IgcmVqZWN0cyB3aXRoXG4gKiB0aGUgZmlyc3QgZXJyb3IgZW5jb3VudGVyZWQgd2hpbGUgY29weWluZy5cbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgY29weSB9IGZyb20gXCIuL2NvbnZlcnNpb24udHNcIjtcbiAqXG4gKiBjb25zdCBzb3VyY2UgPSBhd2FpdCBEZW5vLm9wZW4oXCJteV9maWxlLnR4dFwiKTtcbiAqIGNvbnN0IGJ5dGVzQ29waWVkMSA9IGF3YWl0IGNvcHkoc291cmNlLCBEZW5vLnN0ZG91dCk7XG4gKiBjb25zdCBkZXN0aW5hdGlvbiA9IGF3YWl0IERlbm8uY3JlYXRlKFwibXlfZmlsZV8yLnR4dFwiKTtcbiAqIGNvbnN0IGJ5dGVzQ29waWVkMiA9IGF3YWl0IGNvcHkoc291cmNlLCBkZXN0aW5hdGlvbik7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gc3JjIFRoZSBzb3VyY2UgdG8gY29weSBmcm9tXG4gKiBAcGFyYW0gZHN0IFRoZSBkZXN0aW5hdGlvbiB0byBjb3B5IHRvXG4gKiBAcGFyYW0gb3B0aW9ucyBDYW4gYmUgdXNlZCB0byB0dW5lIHNpemUgb2YgdGhlIGJ1ZmZlci4gRGVmYXVsdCBzaXplIGlzIDMya0JcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvcHkoXG4gIHNyYzogRGVuby5SZWFkZXIsXG4gIGRzdDogRGVuby5Xcml0ZXIsXG4gIG9wdGlvbnM/OiB7XG4gICAgYnVmU2l6ZT86IG51bWJlcjtcbiAgfSxcbik6IFByb21pc2U8bnVtYmVyPiB7XG4gIGxldCBuID0gMDtcbiAgY29uc3QgYnVmU2l6ZSA9IG9wdGlvbnM/LmJ1ZlNpemUgPz8gREVGQVVMVF9CVUZGRVJfU0laRTtcbiAgY29uc3QgYiA9IG5ldyBVaW50OEFycmF5KGJ1ZlNpemUpO1xuICBsZXQgZ290RU9GID0gZmFsc2U7XG4gIHdoaWxlIChnb3RFT0YgPT09IGZhbHNlKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3JjLnJlYWQoYik7XG4gICAgaWYgKHJlc3VsdCA9PT0gbnVsbCkge1xuICAgICAgZ290RU9GID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IG53cml0dGVuID0gMDtcbiAgICAgIHdoaWxlIChud3JpdHRlbiA8IHJlc3VsdCkge1xuICAgICAgICBud3JpdHRlbiArPSBhd2FpdCBkc3Qud3JpdGUoYi5zdWJhcnJheShud3JpdHRlbiwgcmVzdWx0KSk7XG4gICAgICB9XG4gICAgICBuICs9IG53cml0dGVuO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbjtcbn1cbiIsIi8vIENvcHlyaWdodCAyMDE4LTIwMjIgdGhlIERlbm8gYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4gTUlUIGxpY2Vuc2UuXG4vLyBUaGlzIG1vZHVsZSBpcyBicm93c2VyIGNvbXBhdGlibGUuXG5cbmltcG9ydCB7IEJ5dGVzTGlzdCB9IGZyb20gXCIuLi9ieXRlcy9ieXRlc19saXN0LnRzXCI7XG5cbmNvbnN0IENSID0gXCJcXHJcIi5jaGFyQ29kZUF0KDApO1xuY29uc3QgTEYgPSBcIlxcblwiLmNoYXJDb2RlQXQoMCk7XG5cbi8qKiBAZGVwcmVjYXRlZCBVc2UgVGV4dExpbmVTdHJlYW0gaW5zdGVhZCwgYXMgaXQgY2FuIGhhbmRsZSBlbXB0eSBsaW5lcy5cbiAqXG4gKiBUcmFuc2Zvcm0gYSBzdHJlYW0gaW50byBhIHN0cmVhbSB3aGVyZSBlYWNoIGNodW5rIGlzIGRpdmlkZWQgYnkgYSBuZXdsaW5lLFxuICogYmUgaXQgYFxcbmAgb3IgYFxcclxcbmAuXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IExpbmVTdHJlYW0gfSBmcm9tIFwiLi9kZWxpbWl0ZXIudHNcIjtcbiAqIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFwiaHR0cHM6Ly9leGFtcGxlLmNvbVwiKTtcbiAqIGNvbnN0IGxpbmVzID0gcmVzLmJvZHkhLnBpcGVUaHJvdWdoKG5ldyBMaW5lU3RyZWFtKCkpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBMaW5lU3RyZWFtIGV4dGVuZHMgVHJhbnNmb3JtU3RyZWFtPFVpbnQ4QXJyYXksIFVpbnQ4QXJyYXk+IHtcbiAgI2J1ZnMgPSBuZXcgQnl0ZXNMaXN0KCk7XG4gICNwcmV2SGFkQ1IgPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcih7XG4gICAgICB0cmFuc2Zvcm06IChjaHVuaywgY29udHJvbGxlcikgPT4ge1xuICAgICAgICB0aGlzLiNoYW5kbGUoY2h1bmssIGNvbnRyb2xsZXIpO1xuICAgICAgfSxcbiAgICAgIGZsdXNoOiAoY29udHJvbGxlcikgPT4ge1xuICAgICAgICBjb250cm9sbGVyLmVucXVldWUodGhpcy4jbWVyZ2VCdWZzKGZhbHNlKSk7XG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgI2hhbmRsZShcbiAgICBjaHVuazogVWludDhBcnJheSxcbiAgICBjb250cm9sbGVyOiBUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlcjxVaW50OEFycmF5PixcbiAgKSB7XG4gICAgY29uc3QgbGZJbmRleCA9IGNodW5rLmluZGV4T2YoTEYpO1xuXG4gICAgaWYgKHRoaXMuI3ByZXZIYWRDUikge1xuICAgICAgdGhpcy4jcHJldkhhZENSID0gZmFsc2U7XG4gICAgICBpZiAobGZJbmRleCA9PT0gMCkge1xuICAgICAgICBjb250cm9sbGVyLmVucXVldWUodGhpcy4jbWVyZ2VCdWZzKHRydWUpKTtcbiAgICAgICAgdGhpcy4jaGFuZGxlKGNodW5rLnN1YmFycmF5KDEpLCBjb250cm9sbGVyKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChsZkluZGV4ID09PSAtMSkge1xuICAgICAgaWYgKGNodW5rLmF0KC0xKSA9PT0gQ1IpIHtcbiAgICAgICAgdGhpcy4jcHJldkhhZENSID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuI2J1ZnMuYWRkKGNodW5rKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGNyT3JMZkluZGV4ID0gbGZJbmRleDtcbiAgICAgIGlmIChjaHVua1tsZkluZGV4IC0gMV0gPT09IENSKSB7XG4gICAgICAgIGNyT3JMZkluZGV4LS07XG4gICAgICB9XG4gICAgICB0aGlzLiNidWZzLmFkZChjaHVuay5zdWJhcnJheSgwLCBjck9yTGZJbmRleCkpO1xuICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHRoaXMuI21lcmdlQnVmcyhmYWxzZSkpO1xuICAgICAgdGhpcy4jaGFuZGxlKGNodW5rLnN1YmFycmF5KGxmSW5kZXggKyAxKSwgY29udHJvbGxlcik7XG4gICAgfVxuICB9XG5cbiAgI21lcmdlQnVmcyhwcmV2SGFkQ1I6IGJvb2xlYW4pOiBVaW50OEFycmF5IHtcbiAgICBjb25zdCBtZXJnZUJ1ZiA9IHRoaXMuI2J1ZnMuY29uY2F0KCk7XG4gICAgdGhpcy4jYnVmcyA9IG5ldyBCeXRlc0xpc3QoKTtcblxuICAgIGlmIChwcmV2SGFkQ1IpIHtcbiAgICAgIHJldHVybiBtZXJnZUJ1Zi5zdWJhcnJheSgwLCAtMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBtZXJnZUJ1ZjtcbiAgICB9XG4gIH1cbn1cblxuaW50ZXJmYWNlIFRleHRMaW5lU3RyZWFtT3B0aW9ucyB7XG4gIC8qKiBBbGxvdyBzcGxpdHRpbmcgYnkgc29sbyBcXHIgKi9cbiAgYWxsb3dDUjogYm9vbGVhbjtcbn1cblxuLyoqIFRyYW5zZm9ybSBhIHN0cmVhbSBpbnRvIGEgc3RyZWFtIHdoZXJlIGVhY2ggY2h1bmsgaXMgZGl2aWRlZCBieSBhIG5ld2xpbmUsXG4gKiBiZSBpdCBgXFxuYCBvciBgXFxyXFxuYC4gYFxccmAgY2FuIGJlIGVuYWJsZWQgdmlhIHRoZSBgYWxsb3dDUmAgb3B0aW9uLlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBUZXh0TGluZVN0cmVhbSB9IGZyb20gXCIuL2RlbGltaXRlci50c1wiO1xuICogY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXCJodHRwczovL2V4YW1wbGUuY29tXCIpO1xuICogY29uc3QgbGluZXMgPSByZXMuYm9keSFcbiAqICAgLnBpcGVUaHJvdWdoKG5ldyBUZXh0RGVjb2RlclN0cmVhbSgpKVxuICogICAucGlwZVRocm91Z2gobmV3IFRleHRMaW5lU3RyZWFtKCkpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBUZXh0TGluZVN0cmVhbSBleHRlbmRzIFRyYW5zZm9ybVN0cmVhbTxzdHJpbmcsIHN0cmluZz4ge1xuICByZWFkb25seSAjYWxsb3dDUjogYm9vbGVhbjtcbiAgI2J1ZiA9IFwiXCI7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9ucz86IFRleHRMaW5lU3RyZWFtT3B0aW9ucykge1xuICAgIHN1cGVyKHtcbiAgICAgIHRyYW5zZm9ybTogKGNodW5rLCBjb250cm9sbGVyKSA9PiB0aGlzLiNoYW5kbGUoY2h1bmssIGNvbnRyb2xsZXIpLFxuICAgICAgZmx1c2g6IChjb250cm9sbGVyKSA9PiB0aGlzLiNoYW5kbGUoXCJcXHJcXG5cIiwgY29udHJvbGxlciksXG4gICAgfSk7XG4gICAgdGhpcy4jYWxsb3dDUiA9IG9wdGlvbnM/LmFsbG93Q1IgPz8gZmFsc2U7XG4gIH1cblxuICAjaGFuZGxlKGNodW5rOiBzdHJpbmcsIGNvbnRyb2xsZXI6IFRyYW5zZm9ybVN0cmVhbURlZmF1bHRDb250cm9sbGVyPHN0cmluZz4pIHtcbiAgICBjaHVuayA9IHRoaXMuI2J1ZiArIGNodW5rO1xuXG4gICAgZm9yICg7Oykge1xuICAgICAgY29uc3QgbGZJbmRleCA9IGNodW5rLmluZGV4T2YoXCJcXG5cIik7XG5cbiAgICAgIGlmICh0aGlzLiNhbGxvd0NSKSB7XG4gICAgICAgIGNvbnN0IGNySW5kZXggPSBjaHVuay5pbmRleE9mKFwiXFxyXCIpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBjckluZGV4ICE9PSAtMSAmJiBjckluZGV4ICE9PSAoY2h1bmsubGVuZ3RoIC0gMSkgJiZcbiAgICAgICAgICAobGZJbmRleCA9PT0gLTEgfHwgKGxmSW5kZXggLSAxKSA+IGNySW5kZXgpXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShjaHVuay5zbGljZSgwLCBjckluZGV4KSk7XG4gICAgICAgICAgY2h1bmsgPSBjaHVuay5zbGljZShjckluZGV4ICsgMSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGxmSW5kZXggIT09IC0xKSB7XG4gICAgICAgIGxldCBjck9yTGZJbmRleCA9IGxmSW5kZXg7XG4gICAgICAgIGlmIChjaHVua1tsZkluZGV4IC0gMV0gPT09IFwiXFxyXCIpIHtcbiAgICAgICAgICBjck9yTGZJbmRleC0tO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShjaHVuay5zbGljZSgwLCBjck9yTGZJbmRleCkpO1xuICAgICAgICBjaHVuayA9IGNodW5rLnNsaWNlKGxmSW5kZXggKyAxKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHRoaXMuI2J1ZiA9IGNodW5rO1xuICB9XG59XG5cbi8qKiBUcmFuc2Zvcm0gYSBzdHJlYW0gaW50byBhIHN0cmVhbSB3aGVyZSBlYWNoIGNodW5rIGlzIGRpdmlkZWQgYnkgYSBnaXZlbiBkZWxpbWl0ZXIuXG4gKlxuICogYGBgdHNcbiAqIGltcG9ydCB7IERlbGltaXRlclN0cmVhbSB9IGZyb20gXCIuL2RlbGltaXRlci50c1wiO1xuICogY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXCJodHRwczovL2V4YW1wbGUuY29tXCIpO1xuICogY29uc3QgcGFydHMgPSByZXMuYm9keSFcbiAqICAgLnBpcGVUaHJvdWdoKG5ldyBEZWxpbWl0ZXJTdHJlYW0obmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKFwiZm9vXCIpKSlcbiAqICAgLnBpcGVUaHJvdWdoKG5ldyBUZXh0RGVjb2RlclN0cmVhbSgpKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgRGVsaW1pdGVyU3RyZWFtIGV4dGVuZHMgVHJhbnNmb3JtU3RyZWFtPFVpbnQ4QXJyYXksIFVpbnQ4QXJyYXk+IHtcbiAgI2J1ZnMgPSBuZXcgQnl0ZXNMaXN0KCk7XG4gICNkZWxpbWl0ZXI6IFVpbnQ4QXJyYXk7XG4gICNpbnNwZWN0SW5kZXggPSAwO1xuICAjbWF0Y2hJbmRleCA9IDA7XG4gICNkZWxpbUxlbjogbnVtYmVyO1xuICAjZGVsaW1MUFM6IFVpbnQ4QXJyYXk7XG5cbiAgY29uc3RydWN0b3IoZGVsaW1pdGVyOiBVaW50OEFycmF5KSB7XG4gICAgc3VwZXIoe1xuICAgICAgdHJhbnNmb3JtOiAoY2h1bmssIGNvbnRyb2xsZXIpID0+IHtcbiAgICAgICAgdGhpcy4jaGFuZGxlKGNodW5rLCBjb250cm9sbGVyKTtcbiAgICAgIH0sXG4gICAgICBmbHVzaDogKGNvbnRyb2xsZXIpID0+IHtcbiAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHRoaXMuI2J1ZnMuY29uY2F0KCkpO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHRoaXMuI2RlbGltaXRlciA9IGRlbGltaXRlcjtcbiAgICB0aGlzLiNkZWxpbUxlbiA9IGRlbGltaXRlci5sZW5ndGg7XG4gICAgdGhpcy4jZGVsaW1MUFMgPSBjcmVhdGVMUFMoZGVsaW1pdGVyKTtcbiAgfVxuXG4gICNoYW5kbGUoXG4gICAgY2h1bms6IFVpbnQ4QXJyYXksXG4gICAgY29udHJvbGxlcjogVHJhbnNmb3JtU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI8VWludDhBcnJheT4sXG4gICkge1xuICAgIHRoaXMuI2J1ZnMuYWRkKGNodW5rKTtcbiAgICBsZXQgbG9jYWxJbmRleCA9IDA7XG4gICAgd2hpbGUgKHRoaXMuI2luc3BlY3RJbmRleCA8IHRoaXMuI2J1ZnMuc2l6ZSgpKSB7XG4gICAgICBpZiAoY2h1bmtbbG9jYWxJbmRleF0gPT09IHRoaXMuI2RlbGltaXRlclt0aGlzLiNtYXRjaEluZGV4XSkge1xuICAgICAgICB0aGlzLiNpbnNwZWN0SW5kZXgrKztcbiAgICAgICAgbG9jYWxJbmRleCsrO1xuICAgICAgICB0aGlzLiNtYXRjaEluZGV4Kys7XG4gICAgICAgIGlmICh0aGlzLiNtYXRjaEluZGV4ID09PSB0aGlzLiNkZWxpbUxlbikge1xuICAgICAgICAgIC8vIEZ1bGwgbWF0Y2hcbiAgICAgICAgICBjb25zdCBtYXRjaEVuZCA9IHRoaXMuI2luc3BlY3RJbmRleCAtIHRoaXMuI2RlbGltTGVuO1xuICAgICAgICAgIGNvbnN0IHJlYWR5Qnl0ZXMgPSB0aGlzLiNidWZzLnNsaWNlKDAsIG1hdGNoRW5kKTtcbiAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUocmVhZHlCeXRlcyk7XG4gICAgICAgICAgLy8gUmVzZXQgbWF0Y2gsIGRpZmZlcmVudCBmcm9tIEtNUC5cbiAgICAgICAgICB0aGlzLiNidWZzLnNoaWZ0KHRoaXMuI2luc3BlY3RJbmRleCk7XG4gICAgICAgICAgdGhpcy4jaW5zcGVjdEluZGV4ID0gMDtcbiAgICAgICAgICB0aGlzLiNtYXRjaEluZGV4ID0gMDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMuI21hdGNoSW5kZXggPT09IDApIHtcbiAgICAgICAgICB0aGlzLiNpbnNwZWN0SW5kZXgrKztcbiAgICAgICAgICBsb2NhbEluZGV4Kys7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy4jbWF0Y2hJbmRleCA9IHRoaXMuI2RlbGltTFBTW3RoaXMuI21hdGNoSW5kZXggLSAxXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKiogVHJhbnNmb3JtIGEgc3RyZWFtIGludG8gYSBzdHJlYW0gd2hlcmUgZWFjaCBjaHVuayBpcyBkaXZpZGVkIGJ5IGEgZ2l2ZW4gZGVsaW1pdGVyLlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBUZXh0RGVsaW1pdGVyU3RyZWFtIH0gZnJvbSBcIi4vZGVsaW1pdGVyLnRzXCI7XG4gKiBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcImh0dHBzOi8vZXhhbXBsZS5jb21cIik7XG4gKiBjb25zdCBwYXJ0cyA9IHJlcy5ib2R5IVxuICogICAucGlwZVRocm91Z2gobmV3IFRleHREZWNvZGVyU3RyZWFtKCkpXG4gKiAgIC5waXBlVGhyb3VnaChuZXcgVGV4dERlbGltaXRlclN0cmVhbShcImZvb1wiKSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFRleHREZWxpbWl0ZXJTdHJlYW0gZXh0ZW5kcyBUcmFuc2Zvcm1TdHJlYW08c3RyaW5nLCBzdHJpbmc+IHtcbiAgI2J1ZiA9IFwiXCI7XG4gICNkZWxpbWl0ZXI6IHN0cmluZztcbiAgI2luc3BlY3RJbmRleCA9IDA7XG4gICNtYXRjaEluZGV4ID0gMDtcbiAgI2RlbGltTFBTOiBVaW50OEFycmF5O1xuXG4gIGNvbnN0cnVjdG9yKGRlbGltaXRlcjogc3RyaW5nKSB7XG4gICAgc3VwZXIoe1xuICAgICAgdHJhbnNmb3JtOiAoY2h1bmssIGNvbnRyb2xsZXIpID0+IHtcbiAgICAgICAgdGhpcy4jaGFuZGxlKGNodW5rLCBjb250cm9sbGVyKTtcbiAgICAgIH0sXG4gICAgICBmbHVzaDogKGNvbnRyb2xsZXIpID0+IHtcbiAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHRoaXMuI2J1Zik7XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgdGhpcy4jZGVsaW1pdGVyID0gZGVsaW1pdGVyO1xuICAgIHRoaXMuI2RlbGltTFBTID0gY3JlYXRlTFBTKG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShkZWxpbWl0ZXIpKTtcbiAgfVxuXG4gICNoYW5kbGUoXG4gICAgY2h1bms6IHN0cmluZyxcbiAgICBjb250cm9sbGVyOiBUcmFuc2Zvcm1TdHJlYW1EZWZhdWx0Q29udHJvbGxlcjxzdHJpbmc+LFxuICApIHtcbiAgICB0aGlzLiNidWYgKz0gY2h1bms7XG4gICAgbGV0IGxvY2FsSW5kZXggPSAwO1xuICAgIHdoaWxlICh0aGlzLiNpbnNwZWN0SW5kZXggPCB0aGlzLiNidWYubGVuZ3RoKSB7XG4gICAgICBpZiAoY2h1bmtbbG9jYWxJbmRleF0gPT09IHRoaXMuI2RlbGltaXRlclt0aGlzLiNtYXRjaEluZGV4XSkge1xuICAgICAgICB0aGlzLiNpbnNwZWN0SW5kZXgrKztcbiAgICAgICAgbG9jYWxJbmRleCsrO1xuICAgICAgICB0aGlzLiNtYXRjaEluZGV4Kys7XG4gICAgICAgIGlmICh0aGlzLiNtYXRjaEluZGV4ID09PSB0aGlzLiNkZWxpbWl0ZXIubGVuZ3RoKSB7XG4gICAgICAgICAgLy8gRnVsbCBtYXRjaFxuICAgICAgICAgIGNvbnN0IG1hdGNoRW5kID0gdGhpcy4jaW5zcGVjdEluZGV4IC0gdGhpcy4jZGVsaW1pdGVyLmxlbmd0aDtcbiAgICAgICAgICBjb25zdCByZWFkeVN0cmluZyA9IHRoaXMuI2J1Zi5zbGljZSgwLCBtYXRjaEVuZCk7XG4gICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHJlYWR5U3RyaW5nKTtcbiAgICAgICAgICAvLyBSZXNldCBtYXRjaCwgZGlmZmVyZW50IGZyb20gS01QLlxuICAgICAgICAgIHRoaXMuI2J1ZiA9IHRoaXMuI2J1Zi5zbGljZSh0aGlzLiNpbnNwZWN0SW5kZXgpO1xuICAgICAgICAgIHRoaXMuI2luc3BlY3RJbmRleCA9IDA7XG4gICAgICAgICAgdGhpcy4jbWF0Y2hJbmRleCA9IDA7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLiNtYXRjaEluZGV4ID09PSAwKSB7XG4gICAgICAgICAgdGhpcy4jaW5zcGVjdEluZGV4Kys7XG4gICAgICAgICAgbG9jYWxJbmRleCsrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuI21hdGNoSW5kZXggPSB0aGlzLiNkZWxpbUxQU1t0aGlzLiNtYXRjaEluZGV4IC0gMV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqIEdlbmVyYXRlIGxvbmdlc3QgcHJvcGVyIHByZWZpeCB3aGljaCBpcyBhbHNvIHN1ZmZpeCBhcnJheS4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUxQUyhwYXQ6IFVpbnQ4QXJyYXkpOiBVaW50OEFycmF5IHtcbiAgY29uc3QgbHBzID0gbmV3IFVpbnQ4QXJyYXkocGF0Lmxlbmd0aCk7XG4gIGxwc1swXSA9IDA7XG4gIGxldCBwcmVmaXhFbmQgPSAwO1xuICBsZXQgaSA9IDE7XG4gIHdoaWxlIChpIDwgbHBzLmxlbmd0aCkge1xuICAgIGlmIChwYXRbaV0gPT0gcGF0W3ByZWZpeEVuZF0pIHtcbiAgICAgIHByZWZpeEVuZCsrO1xuICAgICAgbHBzW2ldID0gcHJlZml4RW5kO1xuICAgICAgaSsrO1xuICAgIH0gZWxzZSBpZiAocHJlZml4RW5kID09PSAwKSB7XG4gICAgICBscHNbaV0gPSAwO1xuICAgICAgaSsrO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcmVmaXhFbmQgPSBscHNbcHJlZml4RW5kIC0gMV07XG4gICAgfVxuICB9XG4gIHJldHVybiBscHM7XG59XG4iLCIvLyA9PT0gTmVlZGVkIGltcG9ydHNcbmltcG9ydCB7IHR5cGUgSW5wdXRGaWxlUHJveHkgfSBmcm9tIFwiaHR0cHM6Ly9lc20uc2gvQGdyYW1teWpzL3R5cGVzQDIuOC4yXCI7XG5pbXBvcnQgeyBkZWJ1ZyBhcyBkLCBpc0Rlbm8sIHRvUmF3IH0gZnJvbSBcIi4vcGxhdGZvcm0uZGVuby50c1wiO1xuaW1wb3J0IHsgYmFzZW5hbWUgfSBmcm9tIFwiaHR0cHM6Ly9kZW5vLmxhbmQvc3RkQDAuMTQ4LjAvcGF0aC9tb2QudHNcIjtcbmltcG9ydCB7IGl0ZXJhdGVSZWFkZXIgfSBmcm9tIFwiaHR0cHM6Ly9kZW5vLmxhbmQvc3RkQDAuMTQ4LjAvc3RyZWFtcy9tb2QudHNcIjtcblxuY29uc3QgZGVidWcgPSBkKFwiZ3JhbW15Ondhcm5cIik7XG5cbi8vID09PSBFeHBvcnQgYWxsIEFQSSB0eXBlc1xuZXhwb3J0ICogZnJvbSBcImh0dHBzOi8vZXNtLnNoL0BncmFtbXlqcy90eXBlc0AyLjguMlwiO1xuXG4vKiogU29tZXRoaW5nIHRoYXQgbG9va3MgbGlrZSBhIFVSTC4gKi9cbmludGVyZmFjZSBVUkxMaWtlIHtcbiAgICAvKipcbiAgICAgKiBJZGVudGlmaWVyIG9mIHRoZSByZXNvdWNlLiBNdXN0IGJlIGluIGEgZm9ybWF0IHRoYXQgY2FuIGJlIHBhcnNlZCBieSB0aGVcbiAgICAgKiBVUkwgY29uc3RydWN0b3IuXG4gICAgICovXG4gICAgdXJsOiBzdHJpbmc7XG59XG5cbi8vID09PSBJbnB1dEZpbGUgaGFuZGxpbmcgYW5kIEZpbGUgYXVnbWVudGluZ1xuLyoqXG4gKiBBbiBgSW5wdXRGaWxlYCB3cmFwcyBhIG51bWJlciBvZiBkaWZmZXJlbnQgc291cmNlcyBmb3IgW3NlbmRpbmdcbiAqIGZpbGVzXShodHRwczovL2dyYW1teS5kZXYvZ3VpZGUvZmlsZXMuaHRtbCN1cGxvYWRpbmcteW91ci1vd24tZmlsZSkuXG4gKlxuICogSXQgY29ycmVzcG9uZHMgdG8gdGhlIGBJbnB1dEZpbGVgIHR5cGUgaW4gdGhlIFtUZWxlZ3JhbSBCb3QgQVBJXG4gKiBSZWZlcmVuY2VdKGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjaW5wdXRmaWxlKS5cbiAqL1xuZXhwb3J0IGNsYXNzIElucHV0RmlsZSB7XG4gICAgcHJpdmF0ZSBjb25zdW1lZCA9IGZhbHNlO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgZmlsZURhdGE6IENvbnN0cnVjdG9yUGFyYW1ldGVyczx0eXBlb2YgSW5wdXRGaWxlPlswXTtcbiAgICAvKipcbiAgICAgKiBPcHRpb25hbCBuYW1lIG9mIHRoZSBjb25zdHJ1Y3RlZCBgSW5wdXRGaWxlYCBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIENoZWNrIG91dCB0aGVcbiAgICAgKiBbZG9jdW1lbmF0aW9uXShodHRwczovL2dyYW1teS5kZXYvZ3VpZGUvZmlsZXMuaHRtbCN1cGxvYWRpbmcteW91ci1vd24tZmlsZSlcbiAgICAgKiBvbiBzZW5kaW5nIGZpbGVzIHdpdGggYElucHV0RmlsZWAuXG4gICAgICovXG4gICAgcHVibGljIHJlYWRvbmx5IGZpbGVuYW1lPzogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYW4gYElucHV0RmlsZWAgdGhhdCBjYW4gYmUgdXNlZCBpbiB0aGUgQVBJIHRvIHNlbmQgZmlsZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmlsZSBBIHBhdGggdG8gYSBsb2NhbCBmaWxlIG9yIGEgYEJ1ZmZlcmAgb3IgYSBgUmVhZGFibGVTdHJlYW1gIHRoYXQgc3BlY2lmaWVzIHRoZSBmaWxlIGRhdGFcbiAgICAgKiBAcGFyYW0gZmlsZW5hbWUgT3B0aW9uYWwgbmFtZSBvZiB0aGUgZmlsZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBmaWxlOlxuICAgICAgICAgICAgfCBzdHJpbmdcbiAgICAgICAgICAgIHwgQmxvYlxuICAgICAgICAgICAgfCBEZW5vLkZzRmlsZVxuICAgICAgICAgICAgfCBVUkxcbiAgICAgICAgICAgIHwgVVJMTGlrZVxuICAgICAgICAgICAgfCBVaW50OEFycmF5XG4gICAgICAgICAgICB8IFJlYWRhYmxlU3RyZWFtPFVpbnQ4QXJyYXk+XG4gICAgICAgICAgICB8IEl0ZXJhYmxlPFVpbnQ4QXJyYXk+XG4gICAgICAgICAgICB8IEFzeW5jSXRlcmFibGU8VWludDhBcnJheT4sXG4gICAgICAgIGZpbGVuYW1lPzogc3RyaW5nLFxuICAgICkge1xuICAgICAgICB0aGlzLmZpbGVEYXRhID0gZmlsZTtcbiAgICAgICAgZmlsZW5hbWUgPz89IHRoaXMuZ3Vlc3NGaWxlbmFtZShmaWxlKTtcbiAgICAgICAgdGhpcy5maWxlbmFtZSA9IGZpbGVuYW1lO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0eXBlb2YgZmlsZSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgKGZpbGUuc3RhcnRzV2l0aChcImh0dHA6XCIpIHx8IGZpbGUuc3RhcnRzV2l0aChcImh0dHBzOlwiKSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBkZWJ1ZyhcbiAgICAgICAgICAgICAgICBgSW5wdXRGaWxlIHJlY2VpdmVkIHRoZSBsb2NhbCBmaWxlIHBhdGggJyR7ZmlsZX0nIHRoYXQgbG9va3MgbGlrZSBhIFVSTC4gSXMgdGhpcyBhIG1pc3Rha2U/YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJpdmF0ZSBndWVzc0ZpbGVuYW1lKFxuICAgICAgICBmaWxlOiBDb25zdHJ1Y3RvclBhcmFtZXRlcnM8dHlwZW9mIElucHV0RmlsZT5bMF0sXG4gICAgKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmaWxlID09PSBcInN0cmluZ1wiKSByZXR1cm4gYmFzZW5hbWUoZmlsZSk7XG4gICAgICAgIGlmICh0eXBlb2YgZmlsZSAhPT0gXCJvYmplY3RcIikgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKFwidXJsXCIgaW4gZmlsZSkgcmV0dXJuIGJhc2VuYW1lKGZpbGUudXJsKTtcbiAgICAgICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIFVSTCkpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBiYXNlbmFtZShmaWxlLnBhdGhuYW1lKSB8fCBiYXNlbmFtZShmaWxlLmhvc3RuYW1lKTtcbiAgICB9XG4gICAgYXN5bmMgW3RvUmF3XSgpOiBQcm9taXNlPFxuICAgICAgICBVaW50OEFycmF5IHwgSXRlcmFibGU8VWludDhBcnJheT4gfCBBc3luY0l0ZXJhYmxlPFVpbnQ4QXJyYXk+XG4gICAgPiB7XG4gICAgICAgIGlmICh0aGlzLmNvbnN1bWVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgcmV1c2UgSW5wdXRGaWxlIGRhdGEgc291cmNlIVwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5maWxlRGF0YTtcbiAgICAgICAgLy8gSGFuZGxlIGxvY2FsIGZpbGVzXG4gICAgICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgaWYgKCFpc0Rlbm8pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIFwiUmVhZGluZyBmaWxlcyBieSBwYXRoIHJlcXVpcmVzIGEgRGVubyBlbnZpcm9ubWVudFwiLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gYXdhaXQgRGVuby5vcGVuKGRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIGl0ZXJhdGVSZWFkZXIoZmlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBCbG9iKSByZXR1cm4gZGF0YS5zdHJlYW0oKTtcbiAgICAgICAgaWYgKGlzRGVub0ZpbGUoZGF0YSkpIHJldHVybiBpdGVyYXRlUmVhZGVyKGRhdGEpO1xuICAgICAgICAvLyBIYW5kbGUgVVJMIGFuZCBVUkxMaWtlIG9iamVjdHNcbiAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBVUkwpIHJldHVybiBmZXRjaEZpbGUoZGF0YSk7XG4gICAgICAgIGlmIChcInVybFwiIGluIGRhdGEpIHJldHVybiBmZXRjaEZpbGUoZGF0YS51cmwpO1xuICAgICAgICAvLyBNYXJrIHN0cmVhbXMgYW5kIGl0ZXJhdG9ycyBhcyBjb25zdW1lZFxuICAgICAgICBpZiAoIShkYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSkpIHRoaXMuY29uc3VtZWQgPSB0cnVlO1xuICAgICAgICAvLyBSZXR1cm4gYnVmZmVycyBhbmQgYnl0ZSBzdHJlYW1zIGFzLWlzXG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24qIGZldGNoRmlsZSh1cmw6IHN0cmluZyB8IFVSTCk6IEFzeW5jSXRlcmFibGU8VWludDhBcnJheT4ge1xuICAgIGNvbnN0IHsgYm9keSB9ID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgICBpZiAoYm9keSA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERvd25sb2FkIGZhaWxlZCwgbm8gcmVzcG9uc2UgYm9keSBmcm9tICcke3VybH0nYCk7XG4gICAgfVxuICAgIHlpZWxkKiBib2R5O1xufVxuZnVuY3Rpb24gaXNEZW5vRmlsZShkYXRhOiB1bmtub3duKTogZGF0YSBpcyBEZW5vLkZzRmlsZSB7XG4gICAgcmV0dXJuIGlzRGVubyAmJiBkYXRhIGluc3RhbmNlb2YgRGVuby5Gc0ZpbGU7XG59XG5cbi8vID09PSBFeHBvcnQgSW5wdXRGaWxlIHR5cGVzXG50eXBlIEdyYW1teVR5cGVzID0gSW5wdXRGaWxlUHJveHk8SW5wdXRGaWxlPjtcblxuLyoqIFdyYXBwZXIgdHlwZSB0byBidW5kbGUgYWxsIG1ldGhvZHMgb2YgdGhlIFRlbGVncmFtIEFQSSAqL1xuZXhwb3J0IHR5cGUgQXBpTWV0aG9kcyA9IEdyYW1teVR5cGVzW1wiVGVsZWdyYW1cIl07XG5cbi8qKiBVdGlsaXR5IHR5cGUgcHJvdmlkaW5nIHRoZSBhcmd1bWVudCB0eXBlIGZvciB0aGUgZ2l2ZW4gbWV0aG9kIG5hbWUgb3IgYHt9YCBpZiB0aGUgbWV0aG9kIGRvZXMgbm90IHRha2UgYW55IHBhcmFtZXRlcnMgKi9cbmV4cG9ydCB0eXBlIE9wdHM8TSBleHRlbmRzIGtleW9mIEdyYW1teVR5cGVzW1wiVGVsZWdyYW1cIl0+ID1cbiAgICBHcmFtbXlUeXBlc1tcIk9wdHNcIl1bTV07XG5cbi8qKiBUaGlzIG9iamVjdCByZXByZXNlbnRzIHRoZSBjb250ZW50IG9mIGEgbWVkaWEgbWVzc2FnZSB0byBiZSBzZW50LiBJdCBzaG91bGQgYmUgb25lIG9mXG4tIElucHV0TWVkaWFBbmltYXRpb25cbi0gSW5wdXRNZWRpYURvY3VtZW50XG4tIElucHV0TWVkaWFBdWRpb1xuLSBJbnB1dE1lZGlhUGhvdG9cbi0gSW5wdXRNZWRpYVZpZGVvICovXG5leHBvcnQgdHlwZSBJbnB1dE1lZGlhID0gR3JhbW15VHlwZXNbXCJJbnB1dE1lZGlhXCJdO1xuLyoqIFJlcHJlc2VudHMgYSBwaG90byB0byBiZSBzZW50LiAqL1xuZXhwb3J0IHR5cGUgSW5wdXRNZWRpYVBob3RvID0gR3JhbW15VHlwZXNbXCJJbnB1dE1lZGlhUGhvdG9cIl07XG4vKiogUmVwcmVzZW50cyBhIHZpZGVvIHRvIGJlIHNlbnQuICovXG5leHBvcnQgdHlwZSBJbnB1dE1lZGlhVmlkZW8gPSBHcmFtbXlUeXBlc1tcIklucHV0TWVkaWFWaWRlb1wiXTtcbi8qKiBSZXByZXNlbnRzIGFuIGFuaW1hdGlvbiBmaWxlIChHSUYgb3IgSC4yNjQvTVBFRy00IEFWQyB2aWRlbyB3aXRob3V0IHNvdW5kKSB0byBiZSBzZW50LiAqL1xuZXhwb3J0IHR5cGUgSW5wdXRNZWRpYUFuaW1hdGlvbiA9IEdyYW1teVR5cGVzW1wiSW5wdXRNZWRpYUFuaW1hdGlvblwiXTtcbi8qKiBSZXByZXNlbnRzIGFuIGF1ZGlvIGZpbGUgdG8gYmUgdHJlYXRlZCBhcyBtdXNpYyB0byBiZSBzZW50LiAqL1xuZXhwb3J0IHR5cGUgSW5wdXRNZWRpYUF1ZGlvID0gR3JhbW15VHlwZXNbXCJJbnB1dE1lZGlhQXVkaW9cIl07XG4vKiogUmVwcmVzZW50cyBhIGdlbmVyYWwgZmlsZSB0byBiZSBzZW50LiAqL1xuZXhwb3J0IHR5cGUgSW5wdXRNZWRpYURvY3VtZW50ID0gR3JhbW15VHlwZXNbXCJJbnB1dE1lZGlhRG9jdW1lbnRcIl07XG4iLCJpbXBvcnQgeyBJbnB1dEZpbGUgfSBmcm9tIFwiLi4vdHlwZXMudHNcIjtcbmltcG9ydCB7IGl0clRvU3RyZWFtLCB0b1JhdyB9IGZyb20gXCIuLi9wbGF0Zm9ybS5kZW5vLnRzXCI7XG5cbi8vID09PSBQYXlsb2FkIHR5cGVzIChKU09OIHZzLiBmb3JtIGRhdGEpXG4vKipcbiAqIERldGVybWluZXMgZm9yIGEgZ2l2ZW4gcGF5bG9hZCBpZiBpdCBtYXkgYmUgc2VudCBhcyBKU09OLCBvciBpZiBpdCBoYXMgdG8gYmVcbiAqIHVwbG9hZGVkIHZpYSBtdWx0aXBhcnQvZm9ybS1kYXRhLiBSZXR1cm5zIGB0cnVlYCBpbiB0aGUgbGF0dGVyIGNhc2UgYW5kXG4gKiBgZmFsc2VgIGluIHRoZSBmb3JtZXIuXG4gKlxuICogQHBhcmFtIHBheWxvYWQgVGhlIHBheWxvYWQgdG8gYW5hbHlzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZXNGb3JtRGF0YVVwbG9hZChwYXlsb2FkOiB1bmtub3duKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHBheWxvYWQgaW5zdGFuY2VvZiBJbnB1dEZpbGUgfHwgKFxuICAgICAgICB0eXBlb2YgcGF5bG9hZCA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICBwYXlsb2FkICE9PSBudWxsICYmXG4gICAgICAgIE9iamVjdC52YWx1ZXMocGF5bG9hZCkuc29tZSgodikgPT5cbiAgICAgICAgICAgIEFycmF5LmlzQXJyYXkodilcbiAgICAgICAgICAgICAgICA/IHYuc29tZShyZXF1aXJlc0Zvcm1EYXRhVXBsb2FkKVxuICAgICAgICAgICAgICAgIDogdiBpbnN0YW5jZW9mIElucHV0RmlsZSB8fCByZXF1aXJlc0Zvcm1EYXRhVXBsb2FkKHYpXG4gICAgICAgIClcbiAgICApO1xufVxuLyoqXG4gKiBDYWxscyBgSlNPTi5zdHJpbmdpZnlgIGJ1dCByZW1vdmVzIGBudWxsYCB2YWx1ZXMgZnJvbSBvYmplY3RzIGJlZm9yZVxuICogc2VyaWFsaXphdGlvblxuICpcbiAqIEBwYXJhbSB2YWx1ZSB2YWx1ZVxuICogQHJldHVybnMgc3RyaW5naWZpZWQgdmFsdWVcbiAqL1xuZnVuY3Rpb24gc3RyKHZhbHVlOiB1bmtub3duKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlLCAoXywgdikgPT4gdiA/PyB1bmRlZmluZWQpO1xufVxuLyoqXG4gKiBUdXJucyBhIHBheWxvYWQgaW50byBhbiBvcHRpb25zIG9iamVjdCB0aGF0IGNhbiBiZSBwYXNzZWQgdG8gYSBgZmV0Y2hgIGNhbGxcbiAqIGJ5IHNldHRpbmcgdGhlIG5lY2Vzc2FyeSBoZWFkZXJzIGFuZCBtZXRob2QuIE1heSBvbmx5IGJlIGNhbGxlZCBmb3IgcGF5bG9hZHNcbiAqIGBQYCB0aGF0IGxldCBgcmVxdWlyZXNGb3JtRGF0YVVwbG9hZChQKWAgcmV0dXJuIGBmYWxzZWAuXG4gKlxuICogQHBhcmFtIHBheWxvYWQgVGhlIHBheWxvYWQgdG8gd3JhcFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSnNvblBheWxvYWQocGF5bG9hZDogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIGNvbm5lY3Rpb246IFwia2VlcC1hbGl2ZVwiLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBzdHIocGF5bG9hZCksXG4gICAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uKiBwcm90ZWN0SXRyPFQ+KFxuICAgIGl0cjogQXN5bmNJdGVyYWJsZUl0ZXJhdG9yPFQ+LFxuICAgIG9uRXJyb3I6IChlcnI6IHVua25vd24pID0+IHZvaWQsXG4pIHtcbiAgICB0cnkge1xuICAgICAgICB5aWVsZCogaXRyO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBvbkVycm9yKGVycik7XG4gICAgfVxufVxuLyoqXG4gKiBUdXJucyBhIHBheWxvYWQgaW50byBhbiBvcHRpb25zIG9iamVjdCB0aGF0IGNhbiBiZSBwYXNzZWQgdG8gYSBgZmV0Y2hgIGNhbGxcbiAqIGJ5IHNldHRpbmcgdGhlIG5lY2Vzc2FyeSBoZWFkZXJzIGFuZCBtZXRob2QuIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBjcmVhdGVzIGFcbiAqIG11bHRpcGFydC9mb3JtLWRhdGEgc3RyZWFtIHVuZGVyIHRoZSBob29kLiBJZiBwb3NzaWJsZSwgYSBKU09OIHBheWxvYWQgc2hvdWxkXG4gKiBiZSBjcmVhdGVkIGluc3RlYWQgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMuXG4gKlxuICogQHBhcmFtIHBheWxvYWQgVGhlIHBheWxvYWQgdG8gd3JhcFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRm9ybURhdGFQYXlsb2FkKFxuICAgIHBheWxvYWQ6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuICAgIG9uRXJyb3I6IChlcnI6IHVua25vd24pID0+IHZvaWQsXG4pIHtcbiAgICBjb25zdCBib3VuZGFyeSA9IGNyZWF0ZUJvdW5kYXJ5KCk7XG4gICAgY29uc3QgaXRyID0gcGF5bG9hZFRvTXVsdGlwYXJ0SXRyKHBheWxvYWQsIGJvdW5kYXJ5KTtcbiAgICBjb25zdCBzYWZlSXRyID0gcHJvdGVjdEl0cihpdHIsIG9uRXJyb3IpO1xuICAgIGNvbnN0IHN0cmVhbSA9IGl0clRvU3RyZWFtKHNhZmVJdHIpO1xuICAgIHJldHVybiB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IGBtdWx0aXBhcnQvZm9ybS1kYXRhOyBib3VuZGFyeT0ke2JvdW5kYXJ5fWAsXG4gICAgICAgICAgICBjb25uZWN0aW9uOiBcImtlZXAtYWxpdmVcIixcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogc3RyZWFtLFxuICAgIH07XG59XG5cbi8vID09PSBGb3JtIGRhdGEgY3JlYXRpb25cbmZ1bmN0aW9uIGNyZWF0ZUJvdW5kYXJ5KCkge1xuICAgIC8vIFRha2VuIGZyb20gRGVubyBzdGQgbGliXG4gICAgcmV0dXJuIFwiLS0tLS0tLS0tLVwiICsgcmFuZG9tSWQoMzIpO1xufVxuZnVuY3Rpb24gcmFuZG9tSWQobGVuZ3RoID0gMTYpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShBcnJheShsZW5ndGgpKVxuICAgICAgICAubWFwKCgpID0+IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpWzJdIHx8IDApXG4gICAgICAgIC5qb2luKFwiXCIpO1xufVxuXG5jb25zdCBlbmMgPSBuZXcgVGV4dEVuY29kZXIoKTtcbi8qKlxuICogVGFrZXMgYSBwYXlsb2FkIG9iamVjdCBhbmQgcHJvZHVjZXMgYSB2YWxpZCBtdWx0aXBhcnQvZm9ybS1kYXRhIHN0cmVhbS4gVGhlXG4gKiBzdHJlYW0gaXMgYW4gaXRlcmF0b3Igb2YgYFVpbnQ4QXJyYXlgIG9iamVjdHMuIFlvdSBhbHNvIG5lZWQgdG8gc3BlY2lmeSB0aGVcbiAqIGJvdW5kYXJ5IHN0cmluZyB0aGF0IHdhcyB1c2VkIGluIHRoZSBDb250ZW50LVR5cGUgaGVhZGVyIG9mIHRoZSBIVFRQIHJlcXVlc3QuXG4gKlxuICogQHBhcmFtIHBheWxvYWQgYSBwYXlsb2FkIG9iamVjdFxuICogQHBhcmFtIGJvdW5kYXJ5IHRoZSBib3VuZGFyeSBzdHJpbmcgdG8gdXNlIGJldHdlZW4gdGhlIHBhcnRzXG4gKi9cbmFzeW5jIGZ1bmN0aW9uKiBwYXlsb2FkVG9NdWx0aXBhcnRJdHIoXG4gICAgcGF5bG9hZDogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gICAgYm91bmRhcnk6IHN0cmluZyxcbik6IEFzeW5jSXRlcmFibGVJdGVyYXRvcjxVaW50OEFycmF5PiB7XG4gICAgY29uc3QgZmlsZXMgPSBleHRyYWN0RmlsZXMocGF5bG9hZCk7XG4gICAgLy8gU3RhcnQgbXVsdGlwYXJ0L2Zvcm0tZGF0YSBwcm90b2NvbFxuICAgIHlpZWxkIGVuYy5lbmNvZGUoYC0tJHtib3VuZGFyeX1cXHJcXG5gKTtcbiAgICAvLyBTZW5kIGFsbCBwYXlsb2FkIGZpZWxkc1xuICAgIGNvbnN0IHNlcGFyYXRvciA9IGVuYy5lbmNvZGUoYFxcclxcbi0tJHtib3VuZGFyeX1cXHJcXG5gKTtcbiAgICBsZXQgZmlyc3QgPSB0cnVlO1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHBheWxvYWQpKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSBjb250aW51ZTtcbiAgICAgICAgaWYgKCFmaXJzdCkgeWllbGQgc2VwYXJhdG9yO1xuICAgICAgICB5aWVsZCB2YWx1ZVBhcnQoa2V5LCB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgPyBzdHIodmFsdWUpIDogdmFsdWUpO1xuICAgICAgICBmaXJzdCA9IGZhbHNlO1xuICAgIH1cbiAgICAvLyBTZW5kIGFsbCBmaWxlc1xuICAgIGZvciAoY29uc3QgeyBpZCwgb3JpZ2luLCBmaWxlIH0gb2YgZmlsZXMpIHtcbiAgICAgICAgaWYgKCFmaXJzdCkgeWllbGQgc2VwYXJhdG9yO1xuICAgICAgICB5aWVsZCogZmlsZVBhcnQoaWQsIG9yaWdpbiwgZmlsZSk7XG4gICAgICAgIGZpcnN0ID0gZmFsc2U7XG4gICAgfVxuICAgIC8vIEVuZCBtdWx0aXBhcnQvZm9ybS1kYXRhIHByb3RvY29sXG4gICAgeWllbGQgZW5jLmVuY29kZShgXFxyXFxuLS0ke2JvdW5kYXJ5fS0tXFxyXFxuYCk7XG59XG5cbnR5cGUgRXh0cmFjdGVkRmlsZSA9IHsgaWQ6IHN0cmluZzsgb3JpZ2luOiBzdHJpbmc7IGZpbGU6IElucHV0RmlsZSB9O1xuLyoqXG4gKiBSZXBsYWNlcyBhbGwgaW5zdGFuY2VzIG9mIGBJbnB1dEZpbGVgIGluIGEgZ2l2ZW4gcGF5bG9hZCBieSBhdHRhY2g6Ly9cbiAqIHN0cmluZ3MuIFRoaXMgYWx0ZXJzIHRoZSBwYXNzZWQgb2JqZWN0LiBBZnRlciBjYWxsaW5nIHRoaXMgbWV0aG9kLCB0aGVcbiAqIHBheWxvYWQgb2JqZWN0IGNhbiBiZSBzdHJpbmdpZmllZC5cbiAqXG4gKiBSZXR1cm5zIGEgbGlzdCBvZiBgSW5wdXRGaWxlYCBpbnN0YW5jZXMgYWxvbmcgd2l0aCB0aGUgcmFuZG9tIGlkZW50aWZpZXJzXG4gKiB0aGF0IHdlcmUgdXNlZCBpbiB0aGUgY29ycmVzcG9uZGluZyBhdHRhY2g6Ly8gc3RyaW5ncywgYXMgd2VsbCBhcyB0aGUgb3JpZ2luXG4gKiBrZXlzIG9mIHRoZSBvcmlnaW5hbCBwYXlsb2FkIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgYSBwYXlsb2FkIG9iamVjdCwgb3IgYSBwYXJ0IG9mIGl0XG4gKiBAcGFyYW0ga2V5IHRoZSBvcmlnaW4ga2V5IG9mIHRoZSBwYXlsb2FkIG9iamVjdCwgaWYgYSBwYXJ0IG9mIGl0IGlzIHBhc3NlZFxuICogQHJldHVybnMgdGhlIGNsZWFuZWQgcGF5bG9hZCBvYmplY3RcbiAqL1xuZnVuY3Rpb24gZXh0cmFjdEZpbGVzKHZhbHVlOiB1bmtub3duLCBrZXk/OiBzdHJpbmcpOiBFeHRyYWN0ZWRGaWxlW10ge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIgfHwgdmFsdWUgPT09IG51bGwpIHJldHVybiBbXTtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXModmFsdWUpLmZsYXRNYXAoKFtrLCB2XSkgPT4ge1xuICAgICAgICBjb25zdCBvcmlnaW4gPSBrZXkgPz8gaztcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodikpIHJldHVybiB2LmZsYXRNYXAoKHApID0+IGV4dHJhY3RGaWxlcyhwLCBvcmlnaW4pKTtcbiAgICAgICAgZWxzZSBpZiAodiBpbnN0YW5jZW9mIElucHV0RmlsZSkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSByYW5kb21JZCgpO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih2YWx1ZSwgeyBba106IGBhdHRhY2g6Ly8ke2lkfWAgfSk7XG4gICAgICAgICAgICByZXR1cm4geyBpZCwgb3JpZ2luLCBmaWxlOiB2IH07XG4gICAgICAgIH0gZWxzZSByZXR1cm4gZXh0cmFjdEZpbGVzKHYsIG9yaWdpbik7XG4gICAgfSk7XG59XG5cbi8qKiBUdXJucyBhIHJlZ3VsYXIgdmFsdWUgaW50byBhIGBVaW50OEFycmF5YCAqL1xuZnVuY3Rpb24gdmFsdWVQYXJ0KGtleTogc3RyaW5nLCB2YWx1ZTogdW5rbm93bik6IFVpbnQ4QXJyYXkge1xuICAgIHJldHVybiBlbmMuZW5jb2RlKFxuICAgICAgICBgY29udGVudC1kaXNwb3NpdGlvbjpmb3JtLWRhdGE7bmFtZT1cIiR7a2V5fVwiXFxyXFxuXFxyXFxuJHt2YWx1ZX1gLFxuICAgICk7XG59XG4vKiogVHVybnMgYW4gSW5wdXRGaWxlIGludG8gYSBnZW5lcmF0b3Igb2YgYFVpbnQ4QXJyYXlgcyAqL1xuYXN5bmMgZnVuY3Rpb24qIGZpbGVQYXJ0KFxuICAgIGlkOiBzdHJpbmcsXG4gICAgb3JpZ2luOiBzdHJpbmcsXG4gICAgaW5wdXQ6IElucHV0RmlsZSxcbik6IEFzeW5jSXRlcmFibGVJdGVyYXRvcjxVaW50OEFycmF5PiB7XG4gICAgY29uc3QgZmlsZW5hbWUgPSBpbnB1dC5maWxlbmFtZSB8fCBgJHtvcmlnaW59LiR7Z2V0RXh0KG9yaWdpbil9YDtcbiAgICBpZiAoZmlsZW5hbWUuaW5jbHVkZXMoXCJcXHJcIikgfHwgZmlsZW5hbWUuaW5jbHVkZXMoXCJcXG5cIikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYEZpbGUgcGF0aHMgY2Fubm90IGNvbnRhaW4gY2FycmlhZ2UtcmV0dXJuIChcXFxccikgXFxcbm9yIG5ld2xpbmUgKFxcXFxuKSBjaGFyYWN0ZXJzISBGaWxlbmFtZSBmb3IgcHJvcGVydHkgJyR7b3JpZ2lufScgd2FzOlxuXCJcIlwiXG4ke2ZpbGVuYW1lfVxuXCJcIlwiYCxcbiAgICAgICAgKTtcbiAgICB9XG4gICAgeWllbGQgZW5jLmVuY29kZShcbiAgICAgICAgYGNvbnRlbnQtZGlzcG9zaXRpb246Zm9ybS1kYXRhO25hbWU9XCIke2lkfVwiO2ZpbGVuYW1lPSR7ZmlsZW5hbWV9XFxyXFxuY29udGVudC10eXBlOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVxcclxcblxcclxcbmAsXG4gICAgKTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgaW5wdXRbdG9SYXddKCk7XG4gICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB5aWVsZCBkYXRhO1xuICAgIGVsc2UgeWllbGQqIGRhdGE7XG59XG4vKiogUmV0dXJucyB0aGUgZGVmYXVsdCBmaWxlIGV4dGVuc2lvbiBmb3IgYW4gQVBJIHByb3BlcnR5IG5hbWUgKi9cbmZ1bmN0aW9uIGdldEV4dChrZXk6IHN0cmluZykge1xuICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgIGNhc2UgXCJwaG90b1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwianBnXCI7XG4gICAgICAgIGNhc2UgXCJ2b2ljZVwiOlxuICAgICAgICAgICAgcmV0dXJuIFwib2dnXCI7XG4gICAgICAgIGNhc2UgXCJhdWRpb1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwibXAzXCI7XG4gICAgICAgIGNhc2UgXCJhbmltYXRpb25cIjpcbiAgICAgICAgY2FzZSBcInZpZGVvXCI6XG4gICAgICAgIGNhc2UgXCJ2aWRlb19ub3RlXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJtcDRcIjtcbiAgICAgICAgY2FzZSBcInN0aWNrZXJcIjpcbiAgICAgICAgICAgIHJldHVybiBcIndlYnBcIjtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcImRhdFwiO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGJhc2VGZXRjaENvbmZpZywgZGVidWcgYXMgZCB9IGZyb20gXCIuLi9wbGF0Zm9ybS5kZW5vLnRzXCI7XG5pbXBvcnQge1xuICAgIHR5cGUgQXBpTWV0aG9kcyBhcyBUZWxlZ3JhbSxcbiAgICB0eXBlIEFwaVJlc3BvbnNlLFxuICAgIHR5cGUgT3B0cyxcbn0gZnJvbSBcIi4uL3R5cGVzLnRzXCI7XG5pbXBvcnQgeyB0b0dyYW1teUVycm9yLCB0b0h0dHBFcnJvciB9IGZyb20gXCIuL2Vycm9yLnRzXCI7XG5pbXBvcnQge1xuICAgIGNyZWF0ZUZvcm1EYXRhUGF5bG9hZCxcbiAgICBjcmVhdGVKc29uUGF5bG9hZCxcbiAgICByZXF1aXJlc0Zvcm1EYXRhVXBsb2FkLFxufSBmcm9tIFwiLi9wYXlsb2FkLnRzXCI7XG5jb25zdCBkZWJ1ZyA9IGQoXCJncmFtbXk6Y29yZVwiKTtcblxuZXhwb3J0IHR5cGUgTWV0aG9kczxSIGV4dGVuZHMgUmF3QXBpPiA9IHN0cmluZyAmIGtleW9mIFI7XG5cbi8vIEF2YWlsYWJsZSB1bmRlciBgYm90LmFwaS5yYXdgXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIHJhdyBUZWxlZ3JhbSBCb3QgQVBJIHdpdGggYWxsIG1ldGhvZHMgc3BlY2lmaWVkIDE6MSBhc1xuICogZG9jdW1lbnRlZCBvbiB0aGUgd2Vic2l0ZSAoaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSkuXG4gKlxuICogRXZlcnkgbWV0aG9kIHRha2VzIGFuIG9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgb2JqZWN0IHRoYXQgYWxsb3dzIHRvIGNhbmNlbCB0aGVcbiAqIEFQSSBjYWxsIGlmIGRlc2lyZWQuXG4gKi9cbmV4cG9ydCB0eXBlIFJhd0FwaSA9IHtcbiAgICBbTSBpbiBrZXlvZiBUZWxlZ3JhbV06IFBhcmFtZXRlcnM8VGVsZWdyYW1bTV0+WzBdIGV4dGVuZHMgdW5kZWZpbmVkXG4gICAgICAgID8gKHNpZ25hbD86IEFib3J0U2lnbmFsKSA9PiBQcm9taXNlPFJldHVyblR5cGU8VGVsZWdyYW1bTV0+PlxuICAgICAgICA6IChcbiAgICAgICAgICAgIGFyZ3M6IE9wdHM8TT4sXG4gICAgICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICAgICAgKSA9PiBQcm9taXNlPFJldHVyblR5cGU8VGVsZWdyYW1bTV0+Pjtcbn07XG5cbmV4cG9ydCB0eXBlIFBheWxvYWQ8TSBleHRlbmRzIE1ldGhvZHM8Uj4sIFIgZXh0ZW5kcyBSYXdBcGk+ID0gTSBleHRlbmRzIHVua25vd25cbiAgICA/IFJbTV0gZXh0ZW5kcyAoc2lnbmFsPzogQWJvcnRTaWduYWwpID0+IHVua25vd24gLy8gZGVuby1saW50LWlnbm9yZSBiYW4tdHlwZXNcbiAgICAgICAgPyB7fSAvLyBkZW5vLWxpbnQtaWdub3JlIG5vLWV4cGxpY2l0LWFueVxuICAgIDogUltNXSBleHRlbmRzIChhcmdzOiBhbnksIHNpZ25hbD86IEFib3J0U2lnbmFsKSA9PiB1bmtub3duXG4gICAgICAgID8gUGFyYW1ldGVyczxSW01dPlswXVxuICAgIDogbmV2ZXJcbiAgICA6IG5ldmVyO1xuXG4vKipcbiAqIFNtYWxsIHV0aWxpdHkgaW50ZXJmYWNlIHRoYXQgYWJzdHJhY3RzIGZyb20gd2ViaG9vayByZXBseSBjYWxscyBvZiBkaWZmZXJlbnRcbiAqIHdlYiBmcmFtZXdvcmtzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFdlYmhvb2tSZXBseUVudmVsb3BlIHtcbiAgICBzZW5kPzogKHBheWxvYWQ6IHN0cmluZykgPT4gdm9pZCB8IFByb21pc2U8dm9pZD47XG59XG5cbi8qKlxuICogVHlwZSBvZiBhIGZ1bmN0aW9uIHRoYXQgY2FuIHBlcmZvcm0gYW4gQVBJIGNhbGwuIFVzZWQgZm9yIFRyYW5zZm9ybWVycy5cbiAqL1xuZXhwb3J0IHR5cGUgQXBpQ2FsbEZuPFIgZXh0ZW5kcyBSYXdBcGkgPSBSYXdBcGk+ID0gPE0gZXh0ZW5kcyBNZXRob2RzPFI+PihcbiAgICBtZXRob2Q6IE0sXG4gICAgcGF5bG9hZDogUGF5bG9hZDxNLCBSPixcbiAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbikgPT4gUHJvbWlzZTxBcGlSZXNwb25zZTxBcGlDYWxsUmVzdWx0PE0sIFI+Pj47XG5cbnR5cGUgQXBpQ2FsbFJlc3VsdDxNIGV4dGVuZHMgTWV0aG9kczxSPiwgUiBleHRlbmRzIFJhd0FwaT4gPSBSW01dIGV4dGVuZHNcbiAgICAoLi4uYXJnczogdW5rbm93bltdKSA9PiB1bmtub3duID8gQXdhaXRlZDxSZXR1cm5UeXBlPFJbTV0+PiA6IG5ldmVyO1xuXG4vKipcbiAqIEFQSSBjYWxsIHRyYW5zZm9ybWVycyBhcmUgZnVuY3Rpb25zIHRoYXQgY2FuIGFjY2VzcyBhbmQgbW9kaWZ5IHRoZSBtZXRob2QgYW5kXG4gKiBwYXlsb2FkIG9mIGFuIEFQSSBjYWxsIG9uIHRoZSBmbHkuIFRoaXMgY2FuIGJlIHVzZWZ1bCBpZiB5b3Ugd2FudCB0b1xuICogaW1wbGVtZW50IHJhdGUgbGltaXRpbmcgb3Igb3RoZXIgdGhpbmdzIGFnYWluc3QgdGhlIFRlbGVncmFtIEJvdCBBUEkuXG4gKlxuICogQ29uZmVyIHRoZSBncmFtbVlcbiAqIFtkb2N1bWVudGF0aW9uXShodHRwczovL2dyYW1teS5kZXYvYWR2YW5jZWQvdHJhbnNmb3JtZXJzLmh0bWwpIHRvIHJlYWQgbW9yZVxuICogYWJvdXQgaG93IHRvIHVzZSB0cmFuc2Zvcm1lcnMuXG4gKi9cbmV4cG9ydCB0eXBlIFRyYW5zZm9ybWVyPFIgZXh0ZW5kcyBSYXdBcGkgPSBSYXdBcGk+ID0gPE0gZXh0ZW5kcyBNZXRob2RzPFI+PihcbiAgICBwcmV2OiBBcGlDYWxsRm48Uj4sXG4gICAgbWV0aG9kOiBNLFxuICAgIHBheWxvYWQ6IFBheWxvYWQ8TSwgUj4sXG4gICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4pID0+IFByb21pc2U8QXBpUmVzcG9uc2U8QXBpQ2FsbFJlc3VsdDxNLCBSPj4+O1xuZXhwb3J0IHR5cGUgVHJhbnNmb3JtZXJDb25zdW1lcjxSIGV4dGVuZHMgUmF3QXBpID0gUmF3QXBpPiA9IFRyYW5zZm9ybWFibGVBcGk8XG4gICAgUlxuPltcInVzZVwiXTtcbi8qKlxuICogQSB0cmFuc2Zvcm1hYmxlIEFQSSBlbmhhbmNlcyB0aGUgYFJhd0FwaWAgdHlwZSBieSB0cmFuc2Zvcm1lcnMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNmb3JtYWJsZUFwaTxSIGV4dGVuZHMgUmF3QXBpID0gUmF3QXBpPiB7XG4gICAgLyoqXG4gICAgICogQWNjZXNzIHRvIHRoZSByYXcgQVBJIHRoYXQgdGhlIHRyYW5mb3JtZXJzIHdpbGwgYmUgaW5zdGFsbGVkIG9uLlxuICAgICAqL1xuICAgIHJhdzogUjtcbiAgICAvKipcbiAgICAgKiBDYW4gYmUgdXNlZCB0byByZWdpc3RlciBhbnkgbnVtYmVyIG9mIHRyYW5zZm9ybWVycyBvbiB0aGUgQVBJLlxuICAgICAqL1xuICAgIHVzZTogKC4uLnRyYW5zZm9ybWVyczogVHJhbnNmb3JtZXI8Uj5bXSkgPT4gdGhpcztcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcmVhZG9ubHkgbGlzdCBvciB0aGUgY3VycmVudGx5IGluc3RhbGxlZCB0cmFuc2Zvcm1lcnMuIFRoZSBsaXN0XG4gICAgICogaXMgc29ydGVkIGJ5IHRpbWUgb2YgaW5zdGFsbGF0aW9uIHdoZXJlIGluZGV4IDAgcmVwcmVzZW50cyB0aGVcbiAgICAgKiB0cmFuc2Zvcm1lciB0aGF0IHdhcyBpbnN0YWxsZWQgZmlyc3QuXG4gICAgICovXG4gICAgaW5zdGFsbGVkVHJhbnNmb3JtZXJzOiBUcmFuc2Zvcm1lcjxSPltdO1xufVxuXG4vLyBUcmFuc2Zvcm1lciBiYXNlIGZ1bmN0aW9uc1xuZnVuY3Rpb24gY29uY2F0VHJhbnNmb3JtZXI8UiBleHRlbmRzIFJhd0FwaT4oXG4gICAgcHJldjogQXBpQ2FsbEZuPFI+LFxuICAgIHRyYW5zOiBUcmFuc2Zvcm1lcjxSPixcbik6IEFwaUNhbGxGbjxSPiB7XG4gICAgcmV0dXJuIChtZXRob2QsIHBheWxvYWQsIHNpZ25hbCkgPT4gdHJhbnMocHJldiwgbWV0aG9kLCBwYXlsb2FkLCBzaWduYWwpO1xufVxuXG4vKipcbiAqIE9wdGlvbnMgdG8gcGFzcyB0byB0aGUgQVBJIGNsaWVudCB0aGF0IGV2ZW50dWFsbHkgY29ubmVjdHMgdG8gdGhlIFRlbGVncmFtXG4gKiBCb3QgQVBJIHNlcnZlciBhbmQgbWFrZXMgdGhlIEhUVFAgcmVxdWVzdHMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQXBpQ2xpZW50T3B0aW9ucyB7XG4gICAgLyoqXG4gICAgICogUm9vdCBVUkwgb2YgdGhlIFRlbGVncmFtIEJvdCBBUEkgc2VydmVyLiBEZWZhdWx0OlxuICAgICAqIGh0dHBzOi8vYXBpLnRlbGVncmFtLm9yZ1xuICAgICAqL1xuICAgIGFwaVJvb3Q/OiBzdHJpbmc7XG4gICAgLyoqXG4gICAgICogVVJMIGJ1aWxkZXIgZnVuY3Rpb24gZm9yIEFQSSBjYWxscy4gQ2FuIGJlIHVzZWQgdG8gbW9kaWZ5IHdoaWNoIEFQSVxuICAgICAqIHNlcnZlciBzaG91bGQgYmUgY2FsbGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJvb3QgVGhlIFVSTCB0aGF0IHdhcyBwYXNzZWQgaW4gYGFwaVJvb3RgLCBvciBpdHMgZGVmYXVsdCB2YWx1ZVxuICAgICAqIEBwYXJhbSB0b2tlbiBUaGUgYm90J3MgdG9rZW4gdGhhdCB3YXMgcGFzc2VkIHdoZW4gY3JlYXRpbmcgdGhlIGJvdFxuICAgICAqIEBwYXJhbSBtZXRob2QgVGhlIEFQSSBtZXRob2QgdG8gYmUgY2FsbGVkLCBlLmcuIGBnZXRNZWBcbiAgICAgKiBAcmV0dXJucyBUaGUgVVJMIHRoYXQgd2lsbCBiZSBmZXRjaGVkIGR1cmluZyB0aGUgQVBJIGNhbGxcbiAgICAgKi9cbiAgICBidWlsZFVybD86IChyb290OiBzdHJpbmcsIHRva2VuOiBzdHJpbmcsIG1ldGhvZDogc3RyaW5nKSA9PiBzdHJpbmcgfCBVUkw7XG4gICAgLyoqXG4gICAgICogTWF4aW11bSBudW1iZXIgb2Ygc2Vjb25kcyB0aGF0IGEgcmVxdWVzdCB0byB0aGUgQm90IEFQSSBzZXJ2ZXIgbWF5IHRha2UuXG4gICAgICogSWYgYSByZXF1ZXN0IGhhcyBub3QgY29tcGxldGVkIGJlZm9yZSB0aGlzIHRpbWUgaGFzIGVsYXBzZWQsIGdyYW1tWVxuICAgICAqIGFib3J0cyB0aGUgcmVxdWVzdCBhbmQgZXJyb3JzLiBXaXRob3V0IHN1Y2ggYSB0aW1lb3V0LCBuZXR3b3JraW5nIGlzc3Vlc1xuICAgICAqIG1heSBjYXVzZSB5b3VyIGJvdCB0byBsZWF2ZSBvcGVuIGEgY29ubmVjdGlvbiBpbmRlZmluaXRlbHksIHdoaWNoIG1heVxuICAgICAqIGVmZmVjdGl2ZWx5IG1ha2UgeW91ciBib3QgZnJlZXplLlxuICAgICAqXG4gICAgICogWW91IHByb2JhYmx5IGRvIG5vdCBoYXZlIHRvIGNhcmUgYWJvdXQgdGhpcyBvcHRpb24uIEluIHJhcmUgY2FzZXMsIHlvdVxuICAgICAqIG1heSB3YW50IHRvIGFkanVzdCBpdCBpZiB5b3UgYXJlIHRyYW5zZmVycmluZyBsYXJnZSBmaWxlcyB2aWEgc2xvd1xuICAgICAqIGNvbm5lY3Rpb25zIHRvIHlvdXIgb3duIEJvdCBBUEkgc2VydmVyLlxuICAgICAqXG4gICAgICogVGhlIGRlZmF1bHQgbnVtYmVyIG9mIHNlY29uZHMgaXMgYDUwMGAsIHdoaWNoIGNvcnJlc3BvbmRzIHRvIDggbWludXRlc1xuICAgICAqIGFuZCAyMCBzZWNvbmRzLiBOb3RlIHRoYXQgdGhpcyBpcyBhbHNvIHRoZSB2YWx1ZSB0aGF0IGlzIGhhcmQtY29kZWQgaW5cbiAgICAgKiB0aGUgb2ZmaWNpYWwgQm90IEFQSSBzZXJ2ZXIsIHNvIHlvdSBjYW5ub3QgcGVyZm9ybSBhbnkgc3VjY2Vzc2Z1bFxuICAgICAqIHJlcXVlc3RzIHRoYXQgZXhjZWVkIHRoaXMgdGltZSBmcmFtZSAoZXZlbiBpZiB5b3Ugd291bGQgYWxsb3cgaXQgaW5cbiAgICAgKiBncmFtbVkpLiBTZXR0aW5nIHRoaXMgb3B0aW9uIHRvIGhpZ2hlciB0aGFuIHRoZSBkZWZhdWx0IG9ubHkgbWFrZXMgc2Vuc2VcbiAgICAgKiB3aXRoIGEgY3VzdG9tIEJvdCBBUEkgc2VydmVyLlxuICAgICAqL1xuICAgIHRpbWVvdXRTZWNvbmRzPzogbnVtYmVyO1xuICAgIC8qKlxuICAgICAqIElmIHRoZSBib3QgaXMgcnVubmluZyBvbiB3ZWJob29rcywgYXMgc29vbiBhcyB0aGUgYm90IHJlY2VpdmVzIGFuIHVwZGF0ZVxuICAgICAqIGZyb20gVGVsZWdyYW0sIGl0IGlzIHBvc3NpYmxlIHRvIG1ha2UgdXAgdG8gb25lIEFQSSBjYWxsIGluIHRoZSByZXNwb25zZVxuICAgICAqIHRvIHRoZSB3ZWJob29rIHJlcXVlc3QuIEFzIGEgYmVuZWZpdCwgdGhpcyBzYXZlcyB5b3VyIGJvdCBmcm9tIG1ha2luZyB1cFxuICAgICAqIHRvIG9uZSBIVFRQIHJlcXVlc3QgcGVyIHVwZGF0ZS4gSG93ZXZlciwgdGhlcmUgYXJlIGEgbnVtYmVyIG9mIGRyYXdiYWNrc1xuICAgICAqIHRvIHVzaW5nIHRoaXM6XG4gICAgICogMSkgWW91IHdpbGwgbm90IGJlIGFibGUgdG8gaGFuZGxlIHBvdGVudGlhbCBlcnJvcnMgb2YgdGhlIHJlc3BlY3RpdmUgQVBJXG4gICAgICogICAgY2FsbC4gVGhpcyBpbmNsdWRlcyByYXRlIGxpbWl0aW5nIGVycm9ycywgc28gc2VudCBtZXNzYWdlcyBjYW4gYmVcbiAgICAgKiAgICBzd2FsbG93ZWQgYnkgdGhlIEJvdCBBUEkgc2VydmVyIGFuZCB0aGVyZSBpcyBubyB3YXkgdG8gZGV0ZWN0IGlmIGFcbiAgICAgKiAgICBtZXNzYWdlIHdhcyBhY3R1YWxseSBzZW50IG9yIG5vdC5cbiAgICAgKiAyKSBNb3JlIGltcG9ydGFudGx5LCB5b3UgYWxzbyB3b24ndCBoYXZlIGFjY2VzcyB0byB0aGUgcmVzcG9uc2Ugb2JqZWN0LFxuICAgICAqICAgIHNvIGUuZy4gY2FsbGluZyBgc2VuZE1lc3NhZ2VgIHdpbGwgbm90IGdpdmUgeW91IGFjY2VzcyB0byB0aGUgbWVzc2FnZVxuICAgICAqICAgIHlvdSBzZW50LlxuICAgICAqIDMpIEZ1cnRoZXJtb3JlLCBpdCBpcyBub3QgcG9zc2libGUgdG8gY2FuY2VsIHRoZSByZXF1ZXN0LiBUaGVcbiAgICAgKiAgICBgQWJvcnRTaWduYWxgIHdpbGwgYmUgZGlzcmVnYXJkZWQuXG4gICAgICogNCkgTm90ZSBhbHNvIHRoYXQgdGhlIHR5cGVzIGluIGdyYW1tWSBkbyBub3QgcmVmbGVjdCB0aGUgY29uc2VxdWVuY2VzIG9mXG4gICAgICogICAgYSBwZXJmb3JtZWQgd2ViaG9vayBjYWxsYmFjayEgRm9yIGluc3RhbmNlLCB0aGV5IGluZGljYXRlIHRoYXQgeW91XG4gICAgICogICAgYWx3YXlzIHJlY2VpdmUgYSByZXNwb25zZSBvYmplY3QsIHNvIGl0IGlzIHlvdXIgb3duIHJlc3BvbnNpYmlsaXR5IHRvXG4gICAgICogICAgbWFrZSBzdXJlIHlvdSdyZSBub3Qgc2NyZXdpbmcgdXAgd2hpbGUgdXNpbmcgdGhpcyBtaW5vciBwZXJmb3JtYW5jZVxuICAgICAqICAgIG9wdGltaXphdGlvbi5cbiAgICAgKlxuICAgICAqIFdpdGggdGhpcyB3YXJuaW5nIG91dCBvZiB0aGUgd2F5LCBoZXJlIGlzIHdoYXQgeW91IGNhbiBkbyB3aXRoIHRoZVxuICAgICAqIGBjYW5Vc2VXZWJob29rUmVwbHlgIG9wdGlvbjogaXQgY2FuIGJlIHVzZWQgdG8gcGFzcyBhIGZ1bmN0aW9uIHRoYXRcbiAgICAgKiBkZXRlcm1pbmVzIHdoZXRoZXIgdG8gdXNlIHdlYmhvb2sgcmVwbHkgZm9yIHRoZSBnaXZlbiBtZXRob2QuIEl0IHdpbGxcbiAgICAgKiBvbmx5IGJlIGludm9rZWQgaWYgdGhlIHBheWxvYWQgY2FuIGJlIHNlbnQgYXMgSlNPTi4gSXQgd2lsbCBub3QgYmVcbiAgICAgKiBpbnZva2VkIGFnYWluIGZvciBhIGdpdmVuIHVwZGF0ZSBhZnRlciBpdCByZXR1cm5lZCBgdHJ1ZWAsIGluZGljYXRpbmdcbiAgICAgKiB0aGF0IHRoZSBBUEkgY2FsbCBzaG91bGQgYmUgcGVyZm9ybWVkIGFzIGEgd2ViaG9vayBzZW5kLiBJbiBvdGhlciB3b3JkcyxcbiAgICAgKiBzdWJzZXF1ZW50IEFQSSBjYWxscyAoZHVyaW5nIHRoZSBzYW1lIHVwZGF0ZSkgd2lsbCBhbHdheXMgcGVyZm9ybSB0aGVpclxuICAgICAqIG93biBIVFRQIHJlcXVlc3RzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1ldGhvZCBUaGUgbWV0aG9kIHRvIGNhbGxcbiAgICAgKi9cbiAgICBjYW5Vc2VXZWJob29rUmVwbHk/OiAobWV0aG9kOiBzdHJpbmcpID0+IGJvb2xlYW47XG4gICAgLyoqXG4gICAgICogQmFzZSBjb25maWd1cmF0aW9uIGZvciBgZmV0Y2hgIGNhbGxzLiBTcGVjaWZ5IGFueSBhZGRpdGlvbmFsIHBhcmFtZXRlcnNcbiAgICAgKiB0byB1c2Ugd2hlbiBmZXRjaGluZyBhIG1ldGhvZCBvZiB0aGUgVGVsZWdyYW0gQm90IEFQSS4gRGVmYXVsdDogYHtcbiAgICAgKiBjb21wcmVzczogdHJ1ZSB9YCAoTm9kZSksIGB7fWAgKERlbm8pXG4gICAgICovXG4gICAgYmFzZUZldGNoQ29uZmlnPzogT21pdDxcbiAgICAgICAgTm9uTnVsbGFibGU8UGFyYW1ldGVyczx0eXBlb2YgZmV0Y2g+WzFdPixcbiAgICAgICAgXCJtZXRob2RcIiB8IFwiaGVhZGVyc1wiIHwgXCJib2R5XCJcbiAgICA+O1xuICAgIC8qKlxuICAgICAqIFdoZW4gdGhlIG5ldHdvcmsgY29ubmVjdGlvbiBpcyB1bnJlbGlhYmxlIGFuZCBzb21lIEFQSSByZXF1ZXN0cyBmYWlsXG4gICAgICogYmVjYXVzZSBvZiB0aGF0LCBncmFtbVkgd2lsbCB0aHJvdyBlcnJvcnMgdGhhdCB0ZWxsIHlvdSBleGFjdGx5IHdoaWNoXG4gICAgICogcmVxdWVzdHMgZmFpbGVkLiBIb3dldmVyLCB0aGUgZXJyb3IgbWVzc2FnZXMgZG8gbm90IGRpc2Nsb3NlIHRoZSBmZXRjaGVkXG4gICAgICogVVJMIGFzIGl0IGNvbnRhaW5zIHlvdXIgYm90J3MgdG9rZW4uIExvZ2dpbmcgaXQgbWF5IGxlYWQgdG8gdG9rZW4gbGVha3MuXG4gICAgICpcbiAgICAgKiBJZiB5b3UgYXJlIHN1cmUgdGhhdCBubyBsb2dzIGFyZSBldmVyIHBvc3RlZCBpbiBUZWxlZ3JhbSBjaGF0cywgR2l0SHViXG4gICAgICogaXNzdWVzLCBvciBvdGhlcndpc2Ugc2hhcmVkLCB5b3UgY2FuIHNldCB0aGlzIG9wdGlvbiB0byBgdHJ1ZWAgaW4gb3JkZXJcbiAgICAgKiB0byBvYnRhaW4gbW9yZSBkZXRhaWxlZCBsb2dzIHRoYXQgbWF5IGhlbHAgeW91IGRlYnVnIHlvdXIgYm90LiBUaGVcbiAgICAgKiBkZWZhdWx0IHZhbHVlIGlzIGBmYWxzZWAsIG1lYW5pbmcgdGhhdCB0aGUgYm90IHRva2VuIGlzIG5vdCBsb2dnZWQuXG4gICAgICovXG4gICAgc2Vuc2l0aXZlTG9ncz86IGJvb2xlYW47XG59XG5cbmNsYXNzIEFwaUNsaWVudDxSIGV4dGVuZHMgUmF3QXBpPiB7XG4gICAgcHJpdmF0ZSByZWFkb25seSBvcHRpb25zOiBSZXF1aXJlZDxBcGlDbGllbnRPcHRpb25zPjtcblxuICAgIHByaXZhdGUgaGFzVXNlZFdlYmhvb2tSZXBseSA9IGZhbHNlO1xuXG4gICAgcmVhZG9ubHkgaW5zdGFsbGVkVHJhbnNmb3JtZXJzOiBUcmFuc2Zvcm1lcjxSPltdID0gW107XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSB0b2tlbjogc3RyaW5nLFxuICAgICAgICBvcHRpb25zOiBBcGlDbGllbnRPcHRpb25zID0ge30sXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgd2ViaG9va1JlcGx5RW52ZWxvcGU6IFdlYmhvb2tSZXBseUVudmVsb3BlID0ge30sXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IGFwaVJvb3QgPSBvcHRpb25zLmFwaVJvb3QgPz8gXCJodHRwczovL2FwaS50ZWxlZ3JhbS5vcmdcIjtcbiAgICAgICAgdGhpcy5vcHRpb25zID0ge1xuICAgICAgICAgICAgYXBpUm9vdCxcbiAgICAgICAgICAgIGJ1aWxkVXJsOiBvcHRpb25zLmJ1aWxkVXJsID8/XG4gICAgICAgICAgICAgICAgKChyb290LCB0b2tlbiwgbWV0aG9kKSA9PiBgJHtyb290fS9ib3Qke3Rva2VufS8ke21ldGhvZH1gKSxcbiAgICAgICAgICAgIHRpbWVvdXRTZWNvbmRzOiBvcHRpb25zLnRpbWVvdXRTZWNvbmRzID8/IDUwMCxcbiAgICAgICAgICAgIGJhc2VGZXRjaENvbmZpZzoge1xuICAgICAgICAgICAgICAgIC4uLmJhc2VGZXRjaENvbmZpZyhhcGlSb290KSxcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLmJhc2VGZXRjaENvbmZpZyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYW5Vc2VXZWJob29rUmVwbHk6IG9wdGlvbnMuY2FuVXNlV2ViaG9va1JlcGx5ID8/ICgoKSA9PiBmYWxzZSksXG4gICAgICAgICAgICBzZW5zaXRpdmVMb2dzOiBvcHRpb25zLnNlbnNpdGl2ZUxvZ3MgPz8gZmFsc2UsXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuYXBpUm9vdC5lbmRzV2l0aChcIi9cIikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICBgUmVtb3ZlIHRoZSB0cmFpbGluZyAnLycgZnJvbSB0aGUgJ2FwaVJvb3QnIG9wdGlvbiAodXNlICcke1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuYXBpUm9vdC5zdWJzdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmFwaVJvb3QubGVuZ3RoIC0gMSxcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH0nIGluc3RlYWQgb2YgJyR7dGhpcy5vcHRpb25zLmFwaVJvb3R9JylgLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgY2FsbDogQXBpQ2FsbEZuPFI+ID0gYXN5bmMgPE0gZXh0ZW5kcyBNZXRob2RzPFI+PihcbiAgICAgICAgbWV0aG9kOiBNLFxuICAgICAgICBwOiBQYXlsb2FkPE0sIFI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApID0+IHtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHAgPz8ge307XG4gICAgICAgIGRlYnVnKGBDYWxsaW5nICR7bWV0aG9kfWApO1xuICAgICAgICAvLyBHZW5lcmFsIGNvbmZpZ1xuICAgICAgICBjb25zdCBvcHRzID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCBmb3JtRGF0YVJlcXVpcmVkID0gcmVxdWlyZXNGb3JtRGF0YVVwbG9hZChwYXlsb2FkKTtcbiAgICAgICAgLy8gU2hvcnQtY2lyY3VpdCBvbiB3ZWJob29rIHJlcGx5XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMud2ViaG9va1JlcGx5RW52ZWxvcGUuc2VuZCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAhdGhpcy5oYXNVc2VkV2ViaG9va1JlcGx5ICYmXG4gICAgICAgICAgICAhZm9ybURhdGFSZXF1aXJlZCAmJlxuICAgICAgICAgICAgb3B0cy5jYW5Vc2VXZWJob29rUmVwbHkobWV0aG9kKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuaGFzVXNlZFdlYmhvb2tSZXBseSA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCBjb25maWcgPSBjcmVhdGVKc29uUGF5bG9hZCh7IC4uLnBheWxvYWQsIG1ldGhvZCB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMud2ViaG9va1JlcGx5RW52ZWxvcGUuc2VuZChjb25maWcuYm9keSk7XG4gICAgICAgICAgICByZXR1cm4geyBvazogdHJ1ZSwgcmVzdWx0OiB0cnVlIGFzIEFwaUNhbGxSZXN1bHQ8TSwgUj4gfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBIYW5kbGUgdGltZW91dHMgYW5kIGVycm9ycyBpbiB0aGUgdW5kZXJseWluZyBmb3JtLWRhdGEgc3RyZWFtXG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBjcmVhdGVBYm9ydENvbnRyb2xsZXJGcm9tU2lnbmFsKHNpZ25hbCk7XG4gICAgICAgIGNvbnN0IHRpbWVvdXQgPSBjcmVhdGVUaW1lb3V0KGNvbnRyb2xsZXIsIG9wdHMudGltZW91dFNlY29uZHMsIG1ldGhvZCk7XG4gICAgICAgIGNvbnN0IHN0cmVhbUVyciA9IGNyZWF0ZVN0cmVhbUVycm9yKGNvbnRyb2xsZXIpO1xuICAgICAgICAvLyBCdWlsZCByZXF1ZXN0IFVSTCBhbmQgY29uZmlnXG4gICAgICAgIGNvbnN0IHVybCA9IG9wdHMuYnVpbGRVcmwob3B0cy5hcGlSb290LCB0aGlzLnRva2VuLCBtZXRob2QpO1xuICAgICAgICBjb25zdCBjb25maWcgPSBmb3JtRGF0YVJlcXVpcmVkXG4gICAgICAgICAgICA/IGNyZWF0ZUZvcm1EYXRhUGF5bG9hZChwYXlsb2FkLCAoZXJyKSA9PiBzdHJlYW1FcnIuY2F0Y2goZXJyKSlcbiAgICAgICAgICAgIDogY3JlYXRlSnNvblBheWxvYWQocGF5bG9hZCk7XG4gICAgICAgIGNvbnN0IHNpZyA9IGNvbnRyb2xsZXIuc2lnbmFsO1xuICAgICAgICBjb25zdCBvcHRpb25zID0geyAuLi5vcHRzLmJhc2VGZXRjaENvbmZpZywgc2lnbmFsOiBzaWcsIC4uLmNvbmZpZyB9O1xuICAgICAgICAvLyBQZXJmb3JtIGZldGNoIGNhbGwsIGFuZCBoYW5kbGUgbmV0d29ya2luZyBlcnJvcnNcbiAgICAgICAgY29uc3Qgc3VjY2Vzc1Byb21pc2UgPSBmZXRjaChcbiAgICAgICAgICAgIHVybCBpbnN0YW5jZW9mIFVSTCA/IHVybC5ocmVmIDogdXJsLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgKS5jYXRjaCh0b0h0dHBFcnJvcihtZXRob2QsIG9wdHMuc2Vuc2l0aXZlTG9ncykpO1xuICAgICAgICAvLyBUaG9zZSBhcmUgdGhlIHRocmVlIHBvc3NpYmxlIG91dGNvbWVzIG9mIHRoZSBmZXRjaCBjYWxsOlxuICAgICAgICBjb25zdCBvcGVyYXRpb25zID0gW3N1Y2Nlc3NQcm9taXNlLCBzdHJlYW1FcnIucHJvbWlzZSwgdGltZW91dC5wcm9taXNlXTtcbiAgICAgICAgLy8gV2FpdCBmb3IgcmVzdWx0XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBQcm9taXNlLnJhY2Uob3BlcmF0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGlmICh0aW1lb3V0LmhhbmRsZSAhPT0gdW5kZWZpbmVkKSBjbGVhclRpbWVvdXQodGltZW91dC5oYW5kbGUpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHVzZSguLi50cmFuc2Zvcm1lcnM6IFRyYW5zZm9ybWVyPFI+W10pIHtcbiAgICAgICAgdGhpcy5jYWxsID0gdHJhbnNmb3JtZXJzLnJlZHVjZShjb25jYXRUcmFuc2Zvcm1lciwgdGhpcy5jYWxsKTtcbiAgICAgICAgdGhpcy5pbnN0YWxsZWRUcmFuc2Zvcm1lcnMucHVzaCguLi50cmFuc2Zvcm1lcnMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBhc3luYyBjYWxsQXBpPE0gZXh0ZW5kcyBNZXRob2RzPFI+PihcbiAgICAgICAgbWV0aG9kOiBNLFxuICAgICAgICBwYXlsb2FkOiBQYXlsb2FkPE0sIFI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuY2FsbChtZXRob2QsIHBheWxvYWQsIHNpZ25hbCk7XG4gICAgICAgIGlmIChkYXRhLm9rKSByZXR1cm4gZGF0YS5yZXN1bHQ7XG4gICAgICAgIGVsc2UgdGhyb3cgdG9HcmFtbXlFcnJvcihkYXRhLCBtZXRob2QsIHBheWxvYWQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHRyYW5zZm9ybWFibGUgQVBJLCBpLmUuIGFuIG9iamVjdCB0aGF0IGxldHMgeW91IHBlcmZvcm0gcmF3IEFQSVxuICogY2FsbHMgdG8gdGhlIFRlbGVncmFtIEJvdCBBUEkgc2VydmVyIGJ1dCBwYXNzIHRoZSBjYWxscyB0aHJvdWdoIGEgc3RhY2sgb2ZcbiAqIHRyYW5zZm9ybWVycyBiZWZvcmUuIFRoaXMgd2lsbCBjcmVhdGUgYSBuZXcgQVBJIGNsaWVudCBpbnN0YW5jZSB1bmRlciB0aGVcbiAqIGhvb2QgdGhhdCB3aWxsIGJlIHVzZWQgdG8gY29ubmVjdCB0byB0aGUgVGVsZWdyYW0gc2VydmVycy4gWW91IHRoZXJlZm9yZSBuZWVkXG4gKiB0byBwYXNzIHRoZSBib3QgdG9rZW4uIEluIGFkZGl0aW9uLCB5b3UgbWF5IHBhc3MgQVBJIGNsaWVudCBvcHRpb25zIGFzIHdlbGxcbiAqIGFzIGEgd2ViaG9vayByZXBseSBlbnZlbG9wZSB0aGF0IGFsbG93cyB0aGUgY2xpZW50IHRvIHBlcmZvcm0gdXAgdG8gb25lIEhUVFBcbiAqIHJlcXVlc3QgaW4gcmVzcG9uc2UgdG8gYSB3ZWJob29rIGNhbGwgaWYgdGhpcyBpcyBkZXNpcmVkLlxuICpcbiAqIEBwYXJhbSB0b2tlbiBUaGUgYm90J3MgdG9rZW5cbiAqIEBwYXJhbSBvcHRpb25zIEEgbnVtYmVyIG9mIG9wdGlvbnMgdG8gcGFzcyB0byB0aGUgY3JlYXRlZCBBUEkgY2xpZW50XG4gKiBAcGFyYW0gd2ViaG9va1JlcGx5RW52ZWxvcGUgVGhlIHdlYmhvb2sgcmVwbHkgZW52ZWxvcGUgdGhhdCB3aWxsIGJlIHVzZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJhd0FwaTxSIGV4dGVuZHMgUmF3QXBpPihcbiAgICB0b2tlbjogc3RyaW5nLFxuICAgIG9wdGlvbnM/OiBBcGlDbGllbnRPcHRpb25zLFxuICAgIHdlYmhvb2tSZXBseUVudmVsb3BlPzogV2ViaG9va1JlcGx5RW52ZWxvcGUsXG4pOiBUcmFuc2Zvcm1hYmxlQXBpPFI+IHtcbiAgICBjb25zdCBjbGllbnQgPSBuZXcgQXBpQ2xpZW50PFI+KHRva2VuLCBvcHRpb25zLCB3ZWJob29rUmVwbHlFbnZlbG9wZSk7XG5cbiAgICBjb25zdCBwcm94eUhhbmRsZXI6IFByb3h5SGFuZGxlcjxSPiA9IHtcbiAgICAgICAgZ2V0KF8sIG06IE1ldGhvZHM8Uj4gfCBcInRvSlNPTlwiKSB7XG4gICAgICAgICAgICByZXR1cm4gbSA9PT0gXCJ0b0pTT05cIlxuICAgICAgICAgICAgICAgID8gXCJfX2ludGVybmFsXCJcbiAgICAgICAgICAgICAgICA6IGNsaWVudC5jYWxsQXBpLmJpbmQoY2xpZW50LCBtKTtcbiAgICAgICAgfSxcbiAgICAgICAgLi4ucHJveHlNZXRob2RzLFxuICAgIH07XG4gICAgY29uc3QgcmF3ID0gbmV3IFByb3h5KHt9IGFzIFIsIHByb3h5SGFuZGxlcik7XG4gICAgY29uc3QgaW5zdGFsbGVkVHJhbnNmb3JtZXJzID0gY2xpZW50Lmluc3RhbGxlZFRyYW5zZm9ybWVycztcbiAgICBjb25zdCBhcGk6IFRyYW5zZm9ybWFibGVBcGk8Uj4gPSB7XG4gICAgICAgIHJhdyxcbiAgICAgICAgaW5zdGFsbGVkVHJhbnNmb3JtZXJzLFxuICAgICAgICB1c2U6ICguLi50KSA9PiB7XG4gICAgICAgICAgICBjbGllbnQudXNlKC4uLnQpO1xuICAgICAgICAgICAgcmV0dXJuIGFwaTtcbiAgICAgICAgfSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGFwaTtcbn1cblxuY29uc3QgcHJveHlNZXRob2RzID0ge1xuICAgIHNldCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG4gICAgZGVmaW5lUHJvcGVydHkoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuICAgIGRlbGV0ZVByb3BlcnR5KCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgICBvd25LZXlzKCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfSxcbn07XG5cbi8qKiBBIGNvbnRhaW5lciBmb3IgYSByZWplY3RpbmcgcHJvbWlzZSAqL1xuaW50ZXJmYWNlIEFzeW5jRXJyb3Ige1xuICAgIHByb21pc2U6IFByb21pc2U8bmV2ZXI+O1xufVxuLyoqIEFuIGFzeW5jIGVycm9yIGNhdXNlZCBieSBhIHRpbWVvdXQgKi9cbmludGVyZmFjZSBUaW1lb3V0IGV4dGVuZHMgQXN5bmNFcnJvciB7XG4gICAgaGFuZGxlOiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiB8IHVuZGVmaW5lZDtcbn1cbi8qKiBBbiBhc3luYyBlcnJvciBjYXVzZWQgYnkgYW4gZXJyb3IgaW4gYW4gdW5kZXJseWluZyByZXNvdXJjZSBzdHJlYW0gKi9cbmludGVyZmFjZSBTdHJlYW1FcnJvciBleHRlbmRzIEFzeW5jRXJyb3Ige1xuICAgIGNhdGNoOiAoZXJyOiB1bmtub3duKSA9PiB2b2lkO1xufVxuXG4vKiogQ3JlYXRlcyBhIHRpbWVvdXQgZXJyb3Igd2hpY2ggYWJvcnRzIGEgZ2l2ZW4gY29udHJvbGxlciAqL1xuZnVuY3Rpb24gY3JlYXRlVGltZW91dChcbiAgICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXIsXG4gICAgc2Vjb25kczogbnVtYmVyLFxuICAgIG1ldGhvZDogc3RyaW5nLFxuKTogVGltZW91dCB7XG4gICAgbGV0IGhhbmRsZTogVGltZW91dFtcImhhbmRsZVwiXSA9IHVuZGVmaW5lZDtcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2U8bmV2ZXI+KChfLCByZWplY3QpID0+IHtcbiAgICAgICAgaGFuZGxlID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtc2cgPVxuICAgICAgICAgICAgICAgIGBSZXF1ZXN0IHRvICcke21ldGhvZH0nIHRpbWVkIG91dCBhZnRlciAke3NlY29uZHN9IHNlY29uZHNgO1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihtc2cpKTtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgfSwgMTAwMCAqIHNlY29uZHMpO1xuICAgIH0pO1xuICAgIHJldHVybiB7IHByb21pc2UsIGhhbmRsZSB9O1xufVxuLyoqIENyZWF0ZXMgYSBzdHJlYW0gZXJyb3Igd2hpY2ggYWJvcnQgYSBnaXZlbiBjb250cm9sbGVyICovXG5mdW5jdGlvbiBjcmVhdGVTdHJlYW1FcnJvcihhYm9ydENvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcik6IFN0cmVhbUVycm9yIHtcbiAgICBsZXQgb25FcnJvcjogU3RyZWFtRXJyb3JbXCJjYXRjaFwiXSA9IChlcnIpID0+IHtcbiAgICAgICAgLy8gUmUtdGhyb3cgYnkgZGVmYXVsdCwgYnV0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gaW1tZWRpYXRlbHlcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgIH07XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlPG5ldmVyPigoXywgcmVqZWN0KSA9PiB7XG4gICAgICAgIG9uRXJyb3IgPSAoZXJyOiB1bmtub3duKSA9PiB7XG4gICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIGFib3J0Q29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgICB9O1xuICAgIH0pO1xuICAgIHJldHVybiB7IHByb21pc2UsIGNhdGNoOiBvbkVycm9yIH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFib3J0Q29udHJvbGxlckZyb21TaWduYWwoc2lnbmFsPzogQWJvcnRTaWduYWwpIHtcbiAgICBjb25zdCBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgaWYgKHNpZ25hbCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gYWJvcnRDb250cm9sbGVyO1xuICAgIGNvbnN0IHNpZyA9IHNpZ25hbDtcbiAgICBmdW5jdGlvbiBhYm9ydCgpIHtcbiAgICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgIHNpZy5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgYWJvcnQpO1xuICAgIH1cbiAgICBpZiAoc2lnLmFib3J0ZWQpIGFib3J0KCk7XG4gICAgZWxzZSBzaWcuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIGFib3J0KTtcbiAgICByZXR1cm4geyBhYm9ydCwgc2lnbmFsOiBhYm9ydENvbnRyb2xsZXIuc2lnbmFsIH07XG59XG4iLCIvLyBkZW5vLWxpbnQtaWdub3JlLWZpbGUgY2FtZWxjYXNlXG5pbXBvcnQge1xuICAgIHR5cGUgQm90Q29tbWFuZCxcbiAgICB0eXBlIENoYXRQZXJtaXNzaW9ucyxcbiAgICB0eXBlIElubGluZVF1ZXJ5UmVzdWx0LFxuICAgIHR5cGUgSW5wdXRGaWxlLFxuICAgIHR5cGUgSW5wdXRNZWRpYSxcbiAgICB0eXBlIElucHV0TWVkaWFBdWRpbyxcbiAgICB0eXBlIElucHV0TWVkaWFEb2N1bWVudCxcbiAgICB0eXBlIElucHV0TWVkaWFQaG90byxcbiAgICB0eXBlIElucHV0TWVkaWFWaWRlbyxcbiAgICB0eXBlIExhYmVsZWRQcmljZSxcbiAgICB0eXBlIFBhc3Nwb3J0RWxlbWVudEVycm9yLFxufSBmcm9tIFwiLi4vdHlwZXMudHNcIjtcbmltcG9ydCB7XG4gICAgdHlwZSBBcGlDbGllbnRPcHRpb25zLFxuICAgIGNyZWF0ZVJhd0FwaSxcbiAgICB0eXBlIE1ldGhvZHMsXG4gICAgdHlwZSBQYXlsb2FkLFxuICAgIHR5cGUgUmF3QXBpLFxuICAgIHR5cGUgVHJhbnNmb3JtZXIsXG4gICAgdHlwZSBUcmFuc2Zvcm1lckNvbnN1bWVyLFxuICAgIHR5cGUgV2ViaG9va1JlcGx5RW52ZWxvcGUsXG59IGZyb20gXCIuL2NsaWVudC50c1wiO1xuXG4vKipcbiAqIEhlbHBlciB0eXBlIHRvIGRlcml2ZSByZW1haW5pbmcgcHJvcGVydGllcyBvZiBhIGdpdmVuIEFQSSBtZXRob2QgY2FsbCBNLFxuICogZ2l2ZW4gdGhhdCBzb21lIHByb3BlcnRpZXMgWCBoYXZlIGFscmVhZHkgYmVlbiBzcGVjaWZpZWQuXG4gKi9cbmV4cG9ydCB0eXBlIE90aGVyPFxuICAgIFIgZXh0ZW5kcyBSYXdBcGksXG4gICAgTSBleHRlbmRzIE1ldGhvZHM8Uj4sXG4gICAgWCBleHRlbmRzIHN0cmluZyA9IG5ldmVyLFxuPiA9IE9taXQ8UGF5bG9hZDxNLCBSPiwgWD47XG4vKipcbiAqIFRoaXMgY2xhc3MgcHJvdmlkZXMgYWNjZXNzIHRvIHRoZSBmdWxsIFRlbGVncmFtIEJvdCBBUEkuIEFsbCBtZXRob2RzIG9mIHRoZVxuICogQVBJIGhhdmUgYW4gZXF1aXZhbGVudCBvbiB0aGlzIGNsYXNzLCB3aXRoIHRoZSBtb3N0IGltcG9ydGFudCBwYXJhbWV0ZXJzXG4gKiBwdWxsZWQgdXAgaW50byB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlLCBhbmQgdGhlIG90aGVyIHBhcmFtZXRlcnMgY2FwdHVyZWQgYnlcbiAqIGFuIG9iamVjdC5cbiAqXG4gKiBJbiBhZGRpdGlvbiwgdGhpcyBjbGFzcyBoYXMgYSBwcm9wZXJ0eSBgcmF3YCB0aGF0IHByb3ZpZGVzIHJhdyBhY2Nlc3MgdG8gdGhlXG4gKiBjb21wbGV0ZSBUZWxlZ3JhbSBBUEksIHdpdGggdGhlIG1ldGhvZCBzaWduYXR1cmVzIDE6MSByZXByZXNlbnRlZCBhc1xuICogZG9jdW1lbnRlZCBvbiB0aGUgd2Vic2l0ZSAoaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSkuXG4gKlxuICogRXZlcnkgbWV0aG9kIHRha2VzIGFuIG9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgb2JqZWN0IHRoYXQgYWxsb3dzIHlvdSB0byBjYW5jZWxcbiAqIHRoZSByZXF1ZXN0IGlmIGRlc2lyZWQuXG4gKlxuICogSW4gYWR2YW5jZWQgdXNlIGNhc2VzLCB0aGlzIGNsYXNzIGFsbG93cyB0byBpbnN0YWxsIHRyYW5zZm9ybWVycyB0aGF0IGNhblxuICogbW9kaWZ5IHRoZSBtZXRob2QgYW5kIHBheWxvYWQgb24gdGhlIGZseSBiZWZvcmUgc2VuZGluZyBpdCB0byB0aGUgVGVsZWdyYW1cbiAqIHNlcnZlcnMuIENvbmZlciB0aGUgYGNvbmZpZ2AgcHJvcGVydHkgZm9yIHRoaXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBBcGk8UiBleHRlbmRzIFJhd0FwaSA9IFJhd0FwaT4ge1xuICAgIC8qKlxuICAgICAqIFByb3ZpZGVzIGFjY2VzcyB0byBhbGwgbWV0aG9kcyBvZiB0aGUgVGVsZWdyYW0gQm90IEFQSSBleGFjdGx5IGFzXG4gICAgICogZG9jdW1lbnRlZCBvbiB0aGUgd2Vic2l0ZSAoaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSkuIE5vXG4gICAgICogYXJndW1lbnRzIGFyZSBwdWxsZWQgdXAgaW4gdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBmb3IgY29udmVuaWVuY2UuXG4gICAgICpcbiAgICAgKiBJZiB5b3Ugc3VwcHJlc3MgY29tcGlsZXIgd2FybmluZ3MsIHRoaXMgYWxzbyBhbGxvd3MgZm9yIHJhdyBhcGkgY2FsbHMgdG9cbiAgICAgKiB1bmRvY3VtZW50ZWQgbWV0aG9kcyB3aXRoIGFyYml0cmFyeSBwYXJhbWV0ZXJz4oCUdXNlIG9ubHkgaWYgeW91IGtub3cgd2hhdFxuICAgICAqIHlvdSBhcmUgZG9pbmcuXG4gICAgICovXG4gICAgcHVibGljIHJlYWRvbmx5IHJhdzogUjtcblxuICAgIC8qKlxuICAgICAqIENvbmZpZ3VyYXRpb24gb2JqZWN0IGZvciB0aGUgQVBJIGluc3RhbmNlLCB1c2VkIGFzIGEgbmFtZXNwYWNlIHRvXG4gICAgICogc2VwYXJhdGUgdGhvc2UgQVBJIG9wZXJhdGlvbnMgdGhhdCBhcmUgcmVsYXRlZCB0byBncmFtbVkgZnJvbSBtZXRob2RzIG9mXG4gICAgICogdGhlIFRlbGVncmFtIEJvdCBBUEkuIENvbnRhaW5zIGFkdmFuY2VkIG9wdGlvbnMhXG4gICAgICovXG4gICAgcHVibGljIHJlYWRvbmx5IGNvbmZpZzoge1xuICAgICAgICAvKipcbiAgICAgICAgICogQWxsb3dzIHRvIGluc3RhbGwgYW4gQVBJIHJlcXVlc3QgdHJhbnNmb3JtZXIgZnVuY3Rpb24uIEEgdHJhbnNmb3JtZXJcbiAgICAgICAgICogZnVuY3Rpb24gaGFzIGFjY2VzcyB0byBldmVyeSBBUEkgY2FsbCBiZWZvcmUgaXQgaXMgYmVpbmcgcGVyZm9ybWVkLlxuICAgICAgICAgKiBUaGlzIGluY2x1ZGVzIHRoZSBtZXRob2QgYXMgc3RyaW5nLCB0aGUgcGF5bG9hZCBhcyBvYmplY3QgYW5kIHRoZVxuICAgICAgICAgKiB1cHN0cmVhbSB0cmFuc2Zvcm1lciBmdW5jdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogX05vdGUgdGhhdCB1c2luZyB0cmFuc2Zvcm1lciBmdW5jdGlvbnMgaXMgYW4gYWR2YW5jZWQgZmVhdHVyZSBvZlxuICAgICAgICAgKiBncmFtbVkgdGhhdCBtb3N0IGJvdHMgd2lsbCBub3QgbmVlZCB0byBtYWtlIHVzZSBvZi5fXG4gICAgICAgICAqL1xuICAgICAgICByZWFkb25seSB1c2U6IFRyYW5zZm9ybWVyQ29uc3VtZXI8Uj47XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcm92aWRlcyByZWFkIGFjY2VzcyB0byBhbGwgY3VycmVudGx5IGluc3RhbGxlZCB0cmFuc2Zvcm1lcnMgKHRob3NlXG4gICAgICAgICAqIHRoYXQgaGF2ZSBwcmV2aW91c2x5IGJlZW4gcGFzc2VkIHRvIGBjb25maWcudXNlYCkuXG4gICAgICAgICAqXG4gICAgICAgICAqIF9Ob3RlIHRoYXQgdXNpbmcgdHJhbnNmb3JtZXIgZnVuY3Rpb25zIGlzIGFuIGFkdmFuY2VkIGZlYXR1cmUgb2ZcbiAgICAgICAgICogZ3JhbW1ZIHRoYXQgbW9zdCBib3RzIHdpbGwgbm90IG5lZWQgdG8gbWFrZSB1c2Ugb2YuX1xuICAgICAgICAgKi9cbiAgICAgICAgcmVhZG9ubHkgaW5zdGFsbGVkVHJhbnNmb3JtZXJzOiAoKSA9PiBUcmFuc2Zvcm1lcjxSPltdO1xuICAgIH07XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgdG9rZW46IHN0cmluZyxcbiAgICAgICAgY29uZmlnPzogQXBpQ2xpZW50T3B0aW9ucyxcbiAgICAgICAgd2ViaG9va1JlcGx5RW52ZWxvcGU/OiBXZWJob29rUmVwbHlFbnZlbG9wZSxcbiAgICApIHtcbiAgICAgICAgY29uc3QgeyByYXcsIHVzZSwgaW5zdGFsbGVkVHJhbnNmb3JtZXJzIH0gPSBjcmVhdGVSYXdBcGk8Uj4oXG4gICAgICAgICAgICB0b2tlbixcbiAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgIHdlYmhvb2tSZXBseUVudmVsb3BlLFxuICAgICAgICApO1xuICAgICAgICB0aGlzLnJhdyA9IHJhdztcbiAgICAgICAgdGhpcy5jb25maWcgPSB7XG4gICAgICAgICAgICB1c2UsXG4gICAgICAgICAgICBpbnN0YWxsZWRUcmFuc2Zvcm1lcnM6ICgpID0+IFsuLi5pbnN0YWxsZWRUcmFuc2Zvcm1lcnNdLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byByZWNlaXZlIGluY29taW5nIHVwZGF0ZXMgdXNpbmcgbG9uZyBwb2xsaW5nICh3aWtpKS4gQW4gQXJyYXkgb2YgVXBkYXRlIG9iamVjdHMgaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBOb3Rlc1xuICAgICAqIDEuIFRoaXMgbWV0aG9kIHdpbGwgbm90IHdvcmsgaWYgYW4gb3V0Z29pbmcgd2ViaG9vayBpcyBzZXQgdXAuXG4gICAgICogMi4gSW4gb3JkZXIgdG8gYXZvaWQgZ2V0dGluZyBkdXBsaWNhdGUgdXBkYXRlcywgcmVjYWxjdWxhdGUgb2Zmc2V0IGFmdGVyIGVhY2ggc2VydmVyIHJlc3BvbnNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjZ2V0dXBkYXRlc1xuICAgICAqL1xuICAgIGdldFVwZGF0ZXMob3RoZXI/OiBPdGhlcjxSLCBcImdldFVwZGF0ZXNcIj4sIHNpZ25hbD86IEFib3J0U2lnbmFsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5nZXRVcGRhdGVzKHsgLi4ub3RoZXIgfSwgc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gc3BlY2lmeSBhIFVSTCBhbmQgcmVjZWl2ZSBpbmNvbWluZyB1cGRhdGVzIHZpYSBhbiBvdXRnb2luZyB3ZWJob29rLiBXaGVuZXZlciB0aGVyZSBpcyBhbiB1cGRhdGUgZm9yIHRoZSBib3QsIHdlIHdpbGwgc2VuZCBhbiBIVFRQUyBQT1NUIHJlcXVlc3QgdG8gdGhlIHNwZWNpZmllZCBVUkwsIGNvbnRhaW5pbmcgYSBKU09OLXNlcmlhbGl6ZWQgVXBkYXRlLiBJbiBjYXNlIG9mIGFuIHVuc3VjY2Vzc2Z1bCByZXF1ZXN0LCB3ZSB3aWxsIGdpdmUgdXAgYWZ0ZXIgYSByZWFzb25hYmxlIGFtb3VudCBvZiBhdHRlbXB0cy4gUmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBJZiB5b3UnZCBsaWtlIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSB3ZWJob29rIHdhcyBzZXQgYnkgeW91LCB5b3UgY2FuIHNwZWNpZnkgc2VjcmV0IGRhdGEgaW4gdGhlIHBhcmFtZXRlciBzZWNyZXRfdG9rZW4uIElmIHNwZWNpZmllZCwgdGhlIHJlcXVlc3Qgd2lsbCBjb250YWluIGEgaGVhZGVyIOKAnFgtVGVsZWdyYW0tQm90LUFwaS1TZWNyZXQtVG9rZW7igJ0gd2l0aCB0aGUgc2VjcmV0IHRva2VuIGFzIGNvbnRlbnQuXG4gICAgICpcbiAgICAgKiBOb3Rlc1xuICAgICAqIDEuIFlvdSB3aWxsIG5vdCBiZSBhYmxlIHRvIHJlY2VpdmUgdXBkYXRlcyB1c2luZyBnZXRVcGRhdGVzIGZvciBhcyBsb25nIGFzIGFuIG91dGdvaW5nIHdlYmhvb2sgaXMgc2V0IHVwLlxuICAgICAqIDIuIFRvIHVzZSBhIHNlbGYtc2lnbmVkIGNlcnRpZmljYXRlLCB5b3UgbmVlZCB0byB1cGxvYWQgeW91ciBwdWJsaWMga2V5IGNlcnRpZmljYXRlIHVzaW5nIGNlcnRpZmljYXRlIHBhcmFtZXRlci4gUGxlYXNlIHVwbG9hZCBhcyBJbnB1dEZpbGUsIHNlbmRpbmcgYSBTdHJpbmcgd2lsbCBub3Qgd29yay5cbiAgICAgKiAzLiBQb3J0cyBjdXJyZW50bHkgc3VwcG9ydGVkIGZvciBXZWJob29rczogNDQzLCA4MCwgODgsIDg0NDMuXG4gICAgICpcbiAgICAgKiBJZiB5b3UncmUgaGF2aW5nIGFueSB0cm91YmxlIHNldHRpbmcgdXAgd2ViaG9va3MsIHBsZWFzZSBjaGVjayBvdXQgdGhpcyBhbWF6aW5nIGd1aWRlIHRvIHdlYmhvb2tzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHVybCBIVFRQUyB1cmwgdG8gc2VuZCB1cGRhdGVzIHRvLiBVc2UgYW4gZW1wdHkgc3RyaW5nIHRvIHJlbW92ZSB3ZWJob29rIGludGVncmF0aW9uXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2V0d2ViaG9va1xuICAgICAqL1xuICAgIHNldFdlYmhvb2soXG4gICAgICAgIHVybDogc3RyaW5nLFxuICAgICAgICBvdGhlcj86IE90aGVyPFIsIFwic2V0V2ViaG9va1wiLCBcInVybFwiPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5zZXRXZWJob29rKHsgdXJsLCAuLi5vdGhlciB9LCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byByZW1vdmUgd2ViaG9vayBpbnRlZ3JhdGlvbiBpZiB5b3UgZGVjaWRlIHRvIHN3aXRjaCBiYWNrIHRvIGdldFVwZGF0ZXMuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjZGVsZXRld2ViaG9va1xuICAgICAqL1xuICAgIGRlbGV0ZVdlYmhvb2sob3RoZXI/OiBPdGhlcjxSLCBcImRlbGV0ZVdlYmhvb2tcIj4sIHNpZ25hbD86IEFib3J0U2lnbmFsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5kZWxldGVXZWJob29rKHsgLi4ub3RoZXIgfSwgc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gZ2V0IGN1cnJlbnQgd2ViaG9vayBzdGF0dXMuIFJlcXVpcmVzIG5vIHBhcmFtZXRlcnMuIE9uIHN1Y2Nlc3MsIHJldHVybnMgYSBXZWJob29rSW5mbyBvYmplY3QuIElmIHRoZSBib3QgaXMgdXNpbmcgZ2V0VXBkYXRlcywgd2lsbCByZXR1cm4gYW4gb2JqZWN0IHdpdGggdGhlIHVybCBmaWVsZCBlbXB0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjZ2V0d2ViaG9va2luZm9cbiAgICAgKi9cbiAgICBnZXRXZWJob29rSW5mbyhzaWduYWw/OiBBYm9ydFNpZ25hbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuZ2V0V2ViaG9va0luZm8oc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHNpbXBsZSBtZXRob2QgZm9yIHRlc3RpbmcgeW91ciBib3QncyBhdXRoZW50aWNhdGlvbiB0b2tlbi4gUmVxdWlyZXMgbm8gcGFyYW1ldGVycy4gUmV0dXJucyBiYXNpYyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgYm90IGluIGZvcm0gb2YgYSBVc2VyIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjZ2V0bWVcbiAgICAgKi9cbiAgICBnZXRNZShzaWduYWw/OiBBYm9ydFNpZ25hbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuZ2V0TWUoc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gbG9nIG91dCBmcm9tIHRoZSBjbG91ZCBCb3QgQVBJIHNlcnZlciBiZWZvcmUgbGF1bmNoaW5nIHRoZSBib3QgbG9jYWxseS4gWW91IG11c3QgbG9nIG91dCB0aGUgYm90IGJlZm9yZSBydW5uaW5nIGl0IGxvY2FsbHksIG90aGVyd2lzZSB0aGVyZSBpcyBubyBndWFyYW50ZWUgdGhhdCB0aGUgYm90IHdpbGwgcmVjZWl2ZSB1cGRhdGVzLiBBZnRlciBhIHN1Y2Nlc3NmdWwgY2FsbCwgeW91IGNhbiBpbW1lZGlhdGVseSBsb2cgaW4gb24gYSBsb2NhbCBzZXJ2ZXIsIGJ1dCB3aWxsIG5vdCBiZSBhYmxlIHRvIGxvZyBpbiBiYWNrIHRvIHRoZSBjbG91ZCBCb3QgQVBJIHNlcnZlciBmb3IgMTAgbWludXRlcy4gUmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MuIFJlcXVpcmVzIG5vIHBhcmFtZXRlcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI2xvZ291dFxuICAgICAqL1xuICAgIGxvZ091dChzaWduYWw/OiBBYm9ydFNpZ25hbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcubG9nT3V0KHNpZ25hbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIGNsb3NlIHRoZSBib3QgaW5zdGFuY2UgYmVmb3JlIG1vdmluZyBpdCBmcm9tIG9uZSBsb2NhbCBzZXJ2ZXIgdG8gYW5vdGhlci4gWW91IG5lZWQgdG8gZGVsZXRlIHRoZSB3ZWJob29rIGJlZm9yZSBjYWxsaW5nIHRoaXMgbWV0aG9kIHRvIGVuc3VyZSB0aGF0IHRoZSBib3QgaXNuJ3QgbGF1bmNoZWQgYWdhaW4gYWZ0ZXIgc2VydmVyIHJlc3RhcnQuIFRoZSBtZXRob2Qgd2lsbCByZXR1cm4gZXJyb3IgNDI5IGluIHRoZSBmaXJzdCAxMCBtaW51dGVzIGFmdGVyIHRoZSBib3QgaXMgbGF1bmNoZWQuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLiBSZXF1aXJlcyBubyBwYXJhbWV0ZXJzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNjbG9zZVxuICAgICAqL1xuICAgIGNsb3NlKHNpZ25hbD86IEFib3J0U2lnbmFsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5jbG9zZShzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBzZW5kIHRleHQgbWVzc2FnZXMuIE9uIHN1Y2Nlc3MsIHRoZSBzZW50IE1lc3NhZ2UgaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRhcmdldCBjaGF0IG9yIHVzZXJuYW1lIG9mIHRoZSB0YXJnZXQgY2hhbm5lbCAoaW4gdGhlIGZvcm1hdCBAY2hhbm5lbHVzZXJuYW1lKVxuICAgICAqIEBwYXJhbSB0ZXh0IFRleHQgb2YgdGhlIG1lc3NhZ2UgdG8gYmUgc2VudCwgMS00MDk2IGNoYXJhY3RlcnMgYWZ0ZXIgZW50aXRpZXMgcGFyc2luZ1xuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NlbmRtZXNzYWdlXG4gICAgICovXG4gICAgc2VuZE1lc3NhZ2UoXG4gICAgICAgIGNoYXRfaWQ6IG51bWJlciB8IHN0cmluZyxcbiAgICAgICAgdGV4dDogc3RyaW5nLFxuICAgICAgICBvdGhlcj86IE90aGVyPFIsIFwic2VuZE1lc3NhZ2VcIiwgXCJjaGF0X2lkXCIgfCBcInRleHRcIj4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuc2VuZE1lc3NhZ2UoeyBjaGF0X2lkLCB0ZXh0LCAuLi5vdGhlciB9LCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBmb3J3YXJkIG1lc3NhZ2VzIG9mIGFueSBraW5kLiBTZXJ2aWNlIG1lc3NhZ2VzIGNhbid0IGJlIGZvcndhcmRlZC4gT24gc3VjY2VzcywgdGhlIHNlbnQgTWVzc2FnZSBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjaGF0X2lkIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdGFyZ2V0IGNoYXQgb3IgdXNlcm5hbWUgb2YgdGhlIHRhcmdldCBjaGFubmVsIChpbiB0aGUgZm9ybWF0IEBjaGFubmVsdXNlcm5hbWUpXG4gICAgICogQHBhcmFtIGZyb21fY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGNoYXQgd2hlcmUgdGhlIG9yaWdpbmFsIG1lc3NhZ2Ugd2FzIHNlbnQgKG9yIGNoYW5uZWwgdXNlcm5hbWUgaW4gdGhlIGZvcm1hdCBAY2hhbm5lbHVzZXJuYW1lKVxuICAgICAqIEBwYXJhbSBtZXNzYWdlX2lkIE1lc3NhZ2UgaWRlbnRpZmllciBpbiB0aGUgY2hhdCBzcGVjaWZpZWQgaW4gZnJvbV9jaGF0X2lkXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjZm9yd2FyZG1lc3NhZ2VcbiAgICAgKi9cbiAgICBmb3J3YXJkTWVzc2FnZShcbiAgICAgICAgY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLFxuICAgICAgICBmcm9tX2NoYXRfaWQ6IG51bWJlciB8IHN0cmluZyxcbiAgICAgICAgbWVzc2FnZV9pZDogbnVtYmVyLFxuICAgICAgICBvdGhlcj86IE90aGVyPFxuICAgICAgICAgICAgUixcbiAgICAgICAgICAgIFwiZm9yd2FyZE1lc3NhZ2VcIixcbiAgICAgICAgICAgIFwiY2hhdF9pZFwiIHwgXCJmcm9tX2NoYXRfaWRcIiB8IFwibWVzc2FnZV9pZFwiXG4gICAgICAgID4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuZm9yd2FyZE1lc3NhZ2UoXG4gICAgICAgICAgICB7IGNoYXRfaWQsIGZyb21fY2hhdF9pZCwgbWVzc2FnZV9pZCwgLi4ub3RoZXIgfSxcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gY29weSBtZXNzYWdlcyBvZiBhbnkga2luZC4gU2VydmljZSBtZXNzYWdlcyBhbmQgaW52b2ljZSBtZXNzYWdlcyBjYW4ndCBiZSBjb3BpZWQuIFRoZSBtZXRob2QgaXMgYW5hbG9nb3VzIHRvIHRoZSBtZXRob2QgZm9yd2FyZE1lc3NhZ2UsIGJ1dCB0aGUgY29waWVkIG1lc3NhZ2UgZG9lc24ndCBoYXZlIGEgbGluayB0byB0aGUgb3JpZ2luYWwgbWVzc2FnZS4gUmV0dXJucyB0aGUgTWVzc2FnZUlkIG9mIHRoZSBzZW50IG1lc3NhZ2Ugb24gc3VjY2Vzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjaGF0X2lkIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdGFyZ2V0IGNoYXQgb3IgdXNlcm5hbWUgb2YgdGhlIHRhcmdldCBjaGFubmVsIChpbiB0aGUgZm9ybWF0IEBjaGFubmVsdXNlcm5hbWUpXG4gICAgICogQHBhcmFtIGZyb21fY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGNoYXQgd2hlcmUgdGhlIG9yaWdpbmFsIG1lc3NhZ2Ugd2FzIHNlbnQgKG9yIGNoYW5uZWwgdXNlcm5hbWUgaW4gdGhlIGZvcm1hdCBAY2hhbm5lbHVzZXJuYW1lKVxuICAgICAqIEBwYXJhbSBtZXNzYWdlX2lkIE1lc3NhZ2UgaWRlbnRpZmllciBpbiB0aGUgY2hhdCBzcGVjaWZpZWQgaW4gZnJvbV9jaGF0X2lkXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjY29weW1lc3NhZ2VcbiAgICAgKi9cbiAgICBjb3B5TWVzc2FnZShcbiAgICAgICAgY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLFxuICAgICAgICBmcm9tX2NoYXRfaWQ6IG51bWJlciB8IHN0cmluZyxcbiAgICAgICAgbWVzc2FnZV9pZDogbnVtYmVyLFxuICAgICAgICBvdGhlcj86IE90aGVyPFxuICAgICAgICAgICAgUixcbiAgICAgICAgICAgIFwiY29weU1lc3NhZ2VcIixcbiAgICAgICAgICAgIFwiY2hhdF9pZFwiIHwgXCJmcm9tX2NoYXRfaWRcIiB8IFwibWVzc2FnZV9pZFwiXG4gICAgICAgID4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuY29weU1lc3NhZ2UoXG4gICAgICAgICAgICB7IGNoYXRfaWQsIGZyb21fY2hhdF9pZCwgbWVzc2FnZV9pZCwgLi4ub3RoZXIgfSxcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gc2VuZCBwaG90b3MuIE9uIHN1Y2Nlc3MsIHRoZSBzZW50IE1lc3NhZ2UgaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRhcmdldCBjaGF0IG9yIHVzZXJuYW1lIG9mIHRoZSB0YXJnZXQgY2hhbm5lbCAoaW4gdGhlIGZvcm1hdCBAY2hhbm5lbHVzZXJuYW1lKVxuICAgICAqIEBwYXJhbSBwaG90byBQaG90byB0byBzZW5kLiBQYXNzIGEgZmlsZV9pZCBhcyBTdHJpbmcgdG8gc2VuZCBhIHBob3RvIHRoYXQgZXhpc3RzIG9uIHRoZSBUZWxlZ3JhbSBzZXJ2ZXJzIChyZWNvbW1lbmRlZCksIHBhc3MgYW4gSFRUUCBVUkwgYXMgYSBTdHJpbmcgZm9yIFRlbGVncmFtIHRvIGdldCBhIHBob3RvIGZyb20gdGhlIEludGVybmV0LCBvciB1cGxvYWQgYSBuZXcgcGhvdG8gdXNpbmcgbXVsdGlwYXJ0L2Zvcm0tZGF0YS4gVGhlIHBob3RvIG11c3QgYmUgYXQgbW9zdCAxMCBNQiBpbiBzaXplLiBUaGUgcGhvdG8ncyB3aWR0aCBhbmQgaGVpZ2h0IG11c3Qgbm90IGV4Y2VlZCAxMDAwMCBpbiB0b3RhbC4gV2lkdGggYW5kIGhlaWdodCByYXRpbyBtdXN0IGJlIGF0IG1vc3QgMjAuXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2VuZHBob3RvXG4gICAgICovXG4gICAgc2VuZFBob3RvKFxuICAgICAgICBjaGF0X2lkOiBudW1iZXIgfCBzdHJpbmcsXG4gICAgICAgIHBob3RvOiBJbnB1dEZpbGUgfCBzdHJpbmcsXG4gICAgICAgIG90aGVyPzogT3RoZXI8UiwgXCJzZW5kUGhvdG9cIiwgXCJjaGF0X2lkXCIgfCBcInBob3RvXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LnNlbmRQaG90byh7IGNoYXRfaWQsIHBob3RvLCAuLi5vdGhlciB9LCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBzZW5kIGF1ZGlvIGZpbGVzLCBpZiB5b3Ugd2FudCBUZWxlZ3JhbSBjbGllbnRzIHRvIGRpc3BsYXkgdGhlbSBpbiB0aGUgbXVzaWMgcGxheWVyLiBZb3VyIGF1ZGlvIG11c3QgYmUgaW4gdGhlIC5NUDMgb3IgLk00QSBmb3JtYXQuIE9uIHN1Y2Nlc3MsIHRoZSBzZW50IE1lc3NhZ2UgaXMgcmV0dXJuZWQuIEJvdHMgY2FuIGN1cnJlbnRseSBzZW5kIGF1ZGlvIGZpbGVzIG9mIHVwIHRvIDUwIE1CIGluIHNpemUsIHRoaXMgbGltaXQgbWF5IGJlIGNoYW5nZWQgaW4gdGhlIGZ1dHVyZS5cbiAgICAgKlxuICAgICAqIEZvciBzZW5kaW5nIHZvaWNlIG1lc3NhZ2VzLCB1c2UgdGhlIHNlbmRWb2ljZSBtZXRob2QgaW5zdGVhZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjaGF0X2lkIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdGFyZ2V0IGNoYXQgb3IgdXNlcm5hbWUgb2YgdGhlIHRhcmdldCBjaGFubmVsIChpbiB0aGUgZm9ybWF0IEBjaGFubmVsdXNlcm5hbWUpXG4gICAgICogQHBhcmFtIGF1ZGlvIEF1ZGlvIGZpbGUgdG8gc2VuZC4gUGFzcyBhIGZpbGVfaWQgYXMgU3RyaW5nIHRvIHNlbmQgYW4gYXVkaW8gZmlsZSB0aGF0IGV4aXN0cyBvbiB0aGUgVGVsZWdyYW0gc2VydmVycyAocmVjb21tZW5kZWQpLCBwYXNzIGFuIEhUVFAgVVJMIGFzIGEgU3RyaW5nIGZvciBUZWxlZ3JhbSB0byBnZXQgYW4gYXVkaW8gZmlsZSBmcm9tIHRoZSBJbnRlcm5ldCwgb3IgdXBsb2FkIGEgbmV3IG9uZSB1c2luZyBtdWx0aXBhcnQvZm9ybS1kYXRhLlxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NlbmRhdWRpb1xuICAgICAqL1xuICAgIHNlbmRBdWRpbyhcbiAgICAgICAgY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLFxuICAgICAgICBhdWRpbzogSW5wdXRGaWxlIHwgc3RyaW5nLFxuICAgICAgICBvdGhlcj86IE90aGVyPFIsIFwic2VuZEF1ZGlvXCIsIFwiY2hhdF9pZFwiIHwgXCJhdWRpb1wiPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5zZW5kQXVkaW8oeyBjaGF0X2lkLCBhdWRpbywgLi4ub3RoZXIgfSwgc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gc2VuZCBnZW5lcmFsIGZpbGVzLiBPbiBzdWNjZXNzLCB0aGUgc2VudCBNZXNzYWdlIGlzIHJldHVybmVkLiBCb3RzIGNhbiBjdXJyZW50bHkgc2VuZCBmaWxlcyBvZiBhbnkgdHlwZSBvZiB1cCB0byA1MCBNQiBpbiBzaXplLCB0aGlzIGxpbWl0IG1heSBiZSBjaGFuZ2VkIGluIHRoZSBmdXR1cmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRhcmdldCBjaGF0IG9yIHVzZXJuYW1lIG9mIHRoZSB0YXJnZXQgY2hhbm5lbCAoaW4gdGhlIGZvcm1hdCBAY2hhbm5lbHVzZXJuYW1lKVxuICAgICAqIEBwYXJhbSBkb2N1bWVudCBGaWxlIHRvIHNlbmQuIFBhc3MgYSBmaWxlX2lkIGFzIFN0cmluZyB0byBzZW5kIGEgZmlsZSB0aGF0IGV4aXN0cyBvbiB0aGUgVGVsZWdyYW0gc2VydmVycyAocmVjb21tZW5kZWQpLCBwYXNzIGFuIEhUVFAgVVJMIGFzIGEgU3RyaW5nIGZvciBUZWxlZ3JhbSB0byBnZXQgYSBmaWxlIGZyb20gdGhlIEludGVybmV0LCBvciB1cGxvYWQgYSBuZXcgb25lIHVzaW5nIG11bHRpcGFydC9mb3JtLWRhdGEuXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2VuZGRvY3VtZW50XG4gICAgICovXG4gICAgc2VuZERvY3VtZW50KFxuICAgICAgICBjaGF0X2lkOiBudW1iZXIgfCBzdHJpbmcsXG4gICAgICAgIGRvY3VtZW50OiBJbnB1dEZpbGUgfCBzdHJpbmcsXG4gICAgICAgIG90aGVyPzogT3RoZXI8UiwgXCJzZW5kRG9jdW1lbnRcIiwgXCJjaGF0X2lkXCIgfCBcImRvY3VtZW50XCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LnNlbmREb2N1bWVudCh7IGNoYXRfaWQsIGRvY3VtZW50LCAuLi5vdGhlciB9LCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBzZW5kIHZpZGVvIGZpbGVzLCBUZWxlZ3JhbSBjbGllbnRzIHN1cHBvcnQgbXA0IHZpZGVvcyAob3RoZXIgZm9ybWF0cyBtYXkgYmUgc2VudCBhcyBEb2N1bWVudCkuIE9uIHN1Y2Nlc3MsIHRoZSBzZW50IE1lc3NhZ2UgaXMgcmV0dXJuZWQuIEJvdHMgY2FuIGN1cnJlbnRseSBzZW5kIHZpZGVvIGZpbGVzIG9mIHVwIHRvIDUwIE1CIGluIHNpemUsIHRoaXMgbGltaXQgbWF5IGJlIGNoYW5nZWQgaW4gdGhlIGZ1dHVyZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjaGF0X2lkIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdGFyZ2V0IGNoYXQgb3IgdXNlcm5hbWUgb2YgdGhlIHRhcmdldCBjaGFubmVsIChpbiB0aGUgZm9ybWF0IEBjaGFubmVsdXNlcm5hbWUpXG4gICAgICogQHBhcmFtIHZpZGVvIFZpZGVvIHRvIHNlbmQuIFBhc3MgYSBmaWxlX2lkIGFzIFN0cmluZyB0byBzZW5kIGEgdmlkZW8gdGhhdCBleGlzdHMgb24gdGhlIFRlbGVncmFtIHNlcnZlcnMgKHJlY29tbWVuZGVkKSwgcGFzcyBhbiBIVFRQIFVSTCBhcyBhIFN0cmluZyBmb3IgVGVsZWdyYW0gdG8gZ2V0IGEgdmlkZW8gZnJvbSB0aGUgSW50ZXJuZXQsIG9yIHVwbG9hZCBhIG5ldyB2aWRlbyB1c2luZyBtdWx0aXBhcnQvZm9ybS1kYXRhLlxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NlbmR2aWRlb1xuICAgICAqL1xuICAgIHNlbmRWaWRlbyhcbiAgICAgICAgY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLFxuICAgICAgICB2aWRlbzogSW5wdXRGaWxlIHwgc3RyaW5nLFxuICAgICAgICBvdGhlcj86IE90aGVyPFIsIFwic2VuZFZpZGVvXCIsIFwiY2hhdF9pZFwiIHwgXCJ2aWRlb1wiPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5zZW5kVmlkZW8oeyBjaGF0X2lkLCB2aWRlbywgLi4ub3RoZXIgfSwgc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gc2VuZCBhbmltYXRpb24gZmlsZXMgKEdJRiBvciBILjI2NC9NUEVHLTQgQVZDIHZpZGVvIHdpdGhvdXQgc291bmQpLiBPbiBzdWNjZXNzLCB0aGUgc2VudCBNZXNzYWdlIGlzIHJldHVybmVkLiBCb3RzIGNhbiBjdXJyZW50bHkgc2VuZCBhbmltYXRpb24gZmlsZXMgb2YgdXAgdG8gNTAgTUIgaW4gc2l6ZSwgdGhpcyBsaW1pdCBtYXkgYmUgY2hhbmdlZCBpbiB0aGUgZnV0dXJlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IGNoYW5uZWwgKGluIHRoZSBmb3JtYXQgQGNoYW5uZWx1c2VybmFtZSlcbiAgICAgKiBAcGFyYW0gYW5pbWF0aW9uIEFuaW1hdGlvbiB0byBzZW5kLiBQYXNzIGEgZmlsZV9pZCBhcyBTdHJpbmcgdG8gc2VuZCBhbiBhbmltYXRpb24gdGhhdCBleGlzdHMgb24gdGhlIFRlbGVncmFtIHNlcnZlcnMgKHJlY29tbWVuZGVkKSwgcGFzcyBhbiBIVFRQIFVSTCBhcyBhIFN0cmluZyBmb3IgVGVsZWdyYW0gdG8gZ2V0IGFuIGFuaW1hdGlvbiBmcm9tIHRoZSBJbnRlcm5ldCwgb3IgdXBsb2FkIGEgbmV3IGFuaW1hdGlvbiB1c2luZyBtdWx0aXBhcnQvZm9ybS1kYXRhLlxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NlbmRhbmltYXRpb25cbiAgICAgKi9cbiAgICBzZW5kQW5pbWF0aW9uKFxuICAgICAgICBjaGF0X2lkOiBudW1iZXIgfCBzdHJpbmcsXG4gICAgICAgIGFuaW1hdGlvbjogSW5wdXRGaWxlIHwgc3RyaW5nLFxuICAgICAgICBvdGhlcj86IE90aGVyPFIsIFwic2VuZEFuaW1hdGlvblwiLCBcImNoYXRfaWRcIiB8IFwiYW5pbWF0aW9uXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LnNlbmRBbmltYXRpb24oeyBjaGF0X2lkLCBhbmltYXRpb24sIC4uLm90aGVyIH0sIHNpZ25hbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIHNlbmQgYXVkaW8gZmlsZXMsIGlmIHlvdSB3YW50IFRlbGVncmFtIGNsaWVudHMgdG8gZGlzcGxheSB0aGUgZmlsZSBhcyBhIHBsYXlhYmxlIHZvaWNlIG1lc3NhZ2UuIEZvciB0aGlzIHRvIHdvcmssIHlvdXIgYXVkaW8gbXVzdCBiZSBpbiBhbiAuT0dHIGZpbGUgZW5jb2RlZCB3aXRoIE9QVVMgKG90aGVyIGZvcm1hdHMgbWF5IGJlIHNlbnQgYXMgQXVkaW8gb3IgRG9jdW1lbnQpLiBPbiBzdWNjZXNzLCB0aGUgc2VudCBNZXNzYWdlIGlzIHJldHVybmVkLiBCb3RzIGNhbiBjdXJyZW50bHkgc2VuZCB2b2ljZSBtZXNzYWdlcyBvZiB1cCB0byA1MCBNQiBpbiBzaXplLCB0aGlzIGxpbWl0IG1heSBiZSBjaGFuZ2VkIGluIHRoZSBmdXR1cmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRhcmdldCBjaGF0IG9yIHVzZXJuYW1lIG9mIHRoZSB0YXJnZXQgY2hhbm5lbCAoaW4gdGhlIGZvcm1hdCBAY2hhbm5lbHVzZXJuYW1lKVxuICAgICAqIEBwYXJhbSB2b2ljZSBBdWRpbyBmaWxlIHRvIHNlbmQuIFBhc3MgYSBmaWxlX2lkIGFzIFN0cmluZyB0byBzZW5kIGEgZmlsZSB0aGF0IGV4aXN0cyBvbiB0aGUgVGVsZWdyYW0gc2VydmVycyAocmVjb21tZW5kZWQpLCBwYXNzIGFuIEhUVFAgVVJMIGFzIGEgU3RyaW5nIGZvciBUZWxlZ3JhbSB0byBnZXQgYSBmaWxlIGZyb20gdGhlIEludGVybmV0LCBvciB1cGxvYWQgYSBuZXcgb25lIHVzaW5nIG11bHRpcGFydC9mb3JtLWRhdGEuXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2VuZHZvaWNlXG4gICAgICovXG4gICAgc2VuZFZvaWNlKFxuICAgICAgICBjaGF0X2lkOiBudW1iZXIgfCBzdHJpbmcsXG4gICAgICAgIHZvaWNlOiBJbnB1dEZpbGUgfCBzdHJpbmcsXG4gICAgICAgIG90aGVyPzogT3RoZXI8UiwgXCJzZW5kVm9pY2VcIiwgXCJjaGF0X2lkXCIgfCBcInZvaWNlXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LnNlbmRWb2ljZSh7IGNoYXRfaWQsIHZvaWNlLCAuLi5vdGhlciB9LCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBzZW5kIHZpZGVvIG1lc3NhZ2VzLiBPbiBzdWNjZXNzLCB0aGUgc2VudCBNZXNzYWdlIGlzIHJldHVybmVkLlxuICAgICAqIEFzIG9mIHYuNC4wLCBUZWxlZ3JhbSBjbGllbnRzIHN1cHBvcnQgcm91bmRlZCBzcXVhcmUgbXA0IHZpZGVvcyBvZiB1cCB0byAxIG1pbnV0ZSBsb25nLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IGNoYW5uZWwgKGluIHRoZSBmb3JtYXQgQGNoYW5uZWx1c2VybmFtZSlcbiAgICAgKiBAcGFyYW0gdmlkZW9fbm90ZSBWaWRlbyBub3RlIHRvIHNlbmQuIFBhc3MgYSBmaWxlX2lkIGFzIFN0cmluZyB0byBzZW5kIGEgdmlkZW8gbm90ZSB0aGF0IGV4aXN0cyBvbiB0aGUgVGVsZWdyYW0gc2VydmVycyAocmVjb21tZW5kZWQpIG9yIHVwbG9hZCBhIG5ldyB2aWRlbyB1c2luZyBtdWx0aXBhcnQvZm9ybS1kYXRhLi4gU2VuZGluZyB2aWRlbyBub3RlcyBieSBhIFVSTCBpcyBjdXJyZW50bHkgdW5zdXBwb3J0ZWRcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNzZW5kdmlkZW9ub3RlXG4gICAgICovXG4gICAgc2VuZFZpZGVvTm90ZShcbiAgICAgICAgY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLFxuICAgICAgICB2aWRlb19ub3RlOiBJbnB1dEZpbGUgfCBzdHJpbmcsXG4gICAgICAgIG90aGVyPzogT3RoZXI8UiwgXCJzZW5kVmlkZW9Ob3RlXCIsIFwiY2hhdF9pZFwiIHwgXCJ2aWRlb19ub3RlXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LnNlbmRWaWRlb05vdGUoXG4gICAgICAgICAgICB7IGNoYXRfaWQsIHZpZGVvX25vdGUsIC4uLm90aGVyIH0sXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIHNlbmQgYSBncm91cCBvZiBwaG90b3MsIHZpZGVvcywgZG9jdW1lbnRzIG9yIGF1ZGlvcyBhcyBhbiBhbGJ1bS4gRG9jdW1lbnRzIGFuZCBhdWRpbyBmaWxlcyBjYW4gYmUgb25seSBncm91cGVkIGluIGFuIGFsYnVtIHdpdGggbWVzc2FnZXMgb2YgdGhlIHNhbWUgdHlwZS4gT24gc3VjY2VzcywgYW4gYXJyYXkgb2YgTWVzc2FnZXMgdGhhdCB3ZXJlIHNlbnQgaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRhcmdldCBjaGF0IG9yIHVzZXJuYW1lIG9mIHRoZSB0YXJnZXQgY2hhbm5lbCAoaW4gdGhlIGZvcm1hdCBAY2hhbm5lbHVzZXJuYW1lKVxuICAgICAqIEBwYXJhbSBtZWRpYSBBbiBhcnJheSBkZXNjcmliaW5nIG1lc3NhZ2VzIHRvIGJlIHNlbnQsIG11c3QgaW5jbHVkZSAyLTEwIGl0ZW1zXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2VuZG1lZGlhZ3JvdXBcbiAgICAgKi9cbiAgICBzZW5kTWVkaWFHcm91cChcbiAgICAgICAgY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLFxuICAgICAgICBtZWRpYTogUmVhZG9ubHlBcnJheTxcbiAgICAgICAgICAgIHwgSW5wdXRNZWRpYUF1ZGlvXG4gICAgICAgICAgICB8IElucHV0TWVkaWFEb2N1bWVudFxuICAgICAgICAgICAgfCBJbnB1dE1lZGlhUGhvdG9cbiAgICAgICAgICAgIHwgSW5wdXRNZWRpYVZpZGVvXG4gICAgICAgID4sXG4gICAgICAgIG90aGVyPzogT3RoZXI8UiwgXCJzZW5kTWVkaWFHcm91cFwiLCBcImNoYXRfaWRcIiB8IFwibWVkaWFcIj4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuc2VuZE1lZGlhR3JvdXAoeyBjaGF0X2lkLCBtZWRpYSwgLi4ub3RoZXIgfSwgc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gc2VuZCBwb2ludCBvbiB0aGUgbWFwLiBPbiBzdWNjZXNzLCB0aGUgc2VudCBNZXNzYWdlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IGNoYW5uZWwgKGluIHRoZSBmb3JtYXQgQGNoYW5uZWx1c2VybmFtZSlcbiAgICAgKiBAcGFyYW0gbGF0aXR1ZGUgTGF0aXR1ZGUgb2YgdGhlIGxvY2F0aW9uXG4gICAgICogQHBhcmFtIGxvbmdpdHVkZSBMb25naXR1ZGUgb2YgdGhlIGxvY2F0aW9uXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2VuZGxvY2F0aW9uXG4gICAgICovXG4gICAgc2VuZExvY2F0aW9uKFxuICAgICAgICBjaGF0X2lkOiBudW1iZXIgfCBzdHJpbmcsXG4gICAgICAgIGxhdGl0dWRlOiBudW1iZXIsXG4gICAgICAgIGxvbmdpdHVkZTogbnVtYmVyLFxuICAgICAgICBvdGhlcj86IE90aGVyPFIsIFwic2VuZExvY2F0aW9uXCIsIFwiY2hhdF9pZFwiIHwgXCJsYXRpdHVkZVwiIHwgXCJsb25naXR1ZGVcIj4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuc2VuZExvY2F0aW9uKFxuICAgICAgICAgICAgeyBjaGF0X2lkLCBsYXRpdHVkZSwgbG9uZ2l0dWRlLCAuLi5vdGhlciB9LFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBlZGl0IGxpdmUgbG9jYXRpb24gbWVzc2FnZXMuIEEgbG9jYXRpb24gY2FuIGJlIGVkaXRlZCB1bnRpbCBpdHMgbGl2ZV9wZXJpb2QgZXhwaXJlcyBvciBlZGl0aW5nIGlzIGV4cGxpY2l0bHkgZGlzYWJsZWQgYnkgYSBjYWxsIHRvIHN0b3BNZXNzYWdlTGl2ZUxvY2F0aW9uLiBPbiBzdWNjZXNzLCBpZiB0aGUgZWRpdGVkIG1lc3NhZ2UgaXMgbm90IGFuIGlubGluZSBtZXNzYWdlLCB0aGUgZWRpdGVkIE1lc3NhZ2UgaXMgcmV0dXJuZWQsIG90aGVyd2lzZSBUcnVlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IGNoYW5uZWwgKGluIHRoZSBmb3JtYXQgQGNoYW5uZWx1c2VybmFtZSlcbiAgICAgKiBAcGFyYW0gbWVzc2FnZV9pZCBJZGVudGlmaWVyIG9mIHRoZSBtZXNzYWdlIHRvIGVkaXRcbiAgICAgKiBAcGFyYW0gbGF0aXR1ZGUgTGF0aXR1ZGUgb2YgbmV3IGxvY2F0aW9uXG4gICAgICogQHBhcmFtIGxvbmdpdHVkZSBMb25naXR1ZGUgb2YgbmV3IGxvY2F0aW9uXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjZWRpdG1lc3NhZ2VsaXZlbG9jYXRpb25cbiAgICAgKi9cbiAgICBlZGl0TWVzc2FnZUxpdmVMb2NhdGlvbihcbiAgICAgICAgY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLFxuICAgICAgICBtZXNzYWdlX2lkOiBudW1iZXIsXG4gICAgICAgIGxhdGl0dWRlOiBudW1iZXIsXG4gICAgICAgIGxvbmdpdHVkZTogbnVtYmVyLFxuICAgICAgICBvdGhlcj86IE90aGVyPFxuICAgICAgICAgICAgUixcbiAgICAgICAgICAgIFwiZWRpdE1lc3NhZ2VMaXZlTG9jYXRpb25cIixcbiAgICAgICAgICAgIHwgXCJjaGF0X2lkXCJcbiAgICAgICAgICAgIHwgXCJtZXNzYWdlX2lkXCJcbiAgICAgICAgICAgIHwgXCJpbmxpbmVfbWVzc2FnZV9pZFwiXG4gICAgICAgICAgICB8IFwibGF0aXR1ZGVcIlxuICAgICAgICAgICAgfCBcImxvbmdpdHVkZVwiXG4gICAgICAgID4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuZWRpdE1lc3NhZ2VMaXZlTG9jYXRpb24oXG4gICAgICAgICAgICB7IGNoYXRfaWQsIG1lc3NhZ2VfaWQsIGxhdGl0dWRlLCBsb25naXR1ZGUsIC4uLm90aGVyIH0sXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIGVkaXQgbGl2ZSBsb2NhdGlvbiBpbmxpbmUgbWVzc2FnZXMuIEEgbG9jYXRpb24gY2FuIGJlIGVkaXRlZCB1bnRpbCBpdHMgbGl2ZV9wZXJpb2QgZXhwaXJlcyBvciBlZGl0aW5nIGlzIGV4cGxpY2l0bHkgZGlzYWJsZWQgYnkgYSBjYWxsIHRvIHN0b3BNZXNzYWdlTGl2ZUxvY2F0aW9uLiBPbiBzdWNjZXNzLCBpZiB0aGUgZWRpdGVkIG1lc3NhZ2UgaXMgbm90IGFuIGlubGluZSBtZXNzYWdlLCB0aGUgZWRpdGVkIE1lc3NhZ2UgaXMgcmV0dXJuZWQsIG90aGVyd2lzZSBUcnVlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGlubGluZV9tZXNzYWdlX2lkIElkZW50aWZpZXIgb2YgdGhlIGlubGluZSBtZXNzYWdlXG4gICAgICogQHBhcmFtIGxhdGl0dWRlIExhdGl0dWRlIG9mIG5ldyBsb2NhdGlvblxuICAgICAqIEBwYXJhbSBsb25naXR1ZGUgTG9uZ2l0dWRlIG9mIG5ldyBsb2NhdGlvblxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI2VkaXRtZXNzYWdlbGl2ZWxvY2F0aW9uXG4gICAgICovXG4gICAgZWRpdE1lc3NhZ2VMaXZlTG9jYXRpb25JbmxpbmUoXG4gICAgICAgIGlubGluZV9tZXNzYWdlX2lkOiBzdHJpbmcsXG4gICAgICAgIGxhdGl0dWRlOiBudW1iZXIsXG4gICAgICAgIGxvbmdpdHVkZTogbnVtYmVyLFxuICAgICAgICBvdGhlcj86IE90aGVyPFxuICAgICAgICAgICAgUixcbiAgICAgICAgICAgIFwiZWRpdE1lc3NhZ2VMaXZlTG9jYXRpb25cIixcbiAgICAgICAgICAgIHwgXCJjaGF0X2lkXCJcbiAgICAgICAgICAgIHwgXCJtZXNzYWdlX2lkXCJcbiAgICAgICAgICAgIHwgXCJpbmxpbmVfbWVzc2FnZV9pZFwiXG4gICAgICAgICAgICB8IFwibGF0aXR1ZGVcIlxuICAgICAgICAgICAgfCBcImxvbmdpdHVkZVwiXG4gICAgICAgID4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuZWRpdE1lc3NhZ2VMaXZlTG9jYXRpb24oXG4gICAgICAgICAgICB7IGlubGluZV9tZXNzYWdlX2lkLCBsYXRpdHVkZSwgbG9uZ2l0dWRlLCAuLi5vdGhlciB9LFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBzdG9wIHVwZGF0aW5nIGEgbGl2ZSBsb2NhdGlvbiBtZXNzYWdlIGJlZm9yZSBsaXZlX3BlcmlvZCBleHBpcmVzLiBPbiBzdWNjZXNzLCBpZiB0aGUgbWVzc2FnZSBpcyBub3QgYW4gaW5saW5lIG1lc3NhZ2UsIHRoZSBlZGl0ZWQgTWVzc2FnZSBpcyByZXR1cm5lZCwgb3RoZXJ3aXNlIFRydWUgaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRhcmdldCBjaGF0IG9yIHVzZXJuYW1lIG9mIHRoZSB0YXJnZXQgY2hhbm5lbCAoaW4gdGhlIGZvcm1hdCBAY2hhbm5lbHVzZXJuYW1lKVxuICAgICAqIEBwYXJhbSBtZXNzYWdlX2lkIElkZW50aWZpZXIgb2YgdGhlIG1lc3NhZ2Ugd2l0aCBsaXZlIGxvY2F0aW9uIHRvIHN0b3BcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNzdG9wbWVzc2FnZWxpdmVsb2NhdGlvblxuICAgICAqL1xuICAgIHN0b3BNZXNzYWdlTGl2ZUxvY2F0aW9uKFxuICAgICAgICBjaGF0X2lkOiBudW1iZXIgfCBzdHJpbmcsXG4gICAgICAgIG1lc3NhZ2VfaWQ6IG51bWJlcixcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcbiAgICAgICAgICAgIFIsXG4gICAgICAgICAgICBcInN0b3BNZXNzYWdlTGl2ZUxvY2F0aW9uXCIsXG4gICAgICAgICAgICBcImNoYXRfaWRcIiB8IFwibWVzc2FnZV9pZFwiIHwgXCJpbmxpbmVfbWVzc2FnZV9pZFwiXG4gICAgICAgID4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuc3RvcE1lc3NhZ2VMaXZlTG9jYXRpb24oXG4gICAgICAgICAgICB7IGNoYXRfaWQsIG1lc3NhZ2VfaWQsIC4uLm90aGVyIH0sXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIHN0b3AgdXBkYXRpbmcgYSBsaXZlIGxvY2F0aW9uIG1lc3NhZ2UgYmVmb3JlIGxpdmVfcGVyaW9kIGV4cGlyZXMuIE9uIHN1Y2Nlc3MsIGlmIHRoZSBtZXNzYWdlIGlzIG5vdCBhbiBpbmxpbmUgbWVzc2FnZSwgdGhlIGVkaXRlZCBNZXNzYWdlIGlzIHJldHVybmVkLCBvdGhlcndpc2UgVHJ1ZSBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbmxpbmVfbWVzc2FnZV9pZCBJZGVudGlmaWVyIG9mIHRoZSBpbmxpbmUgbWVzc2FnZVxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3N0b3BtZXNzYWdlbGl2ZWxvY2F0aW9uXG4gICAgICovXG4gICAgc3RvcE1lc3NhZ2VMaXZlTG9jYXRpb25JbmxpbmUoXG4gICAgICAgIGlubGluZV9tZXNzYWdlX2lkOiBzdHJpbmcsXG4gICAgICAgIG90aGVyPzogT3RoZXI8XG4gICAgICAgICAgICBSLFxuICAgICAgICAgICAgXCJzdG9wTWVzc2FnZUxpdmVMb2NhdGlvblwiLFxuICAgICAgICAgICAgXCJjaGF0X2lkXCIgfCBcIm1lc3NhZ2VfaWRcIiB8IFwiaW5saW5lX21lc3NhZ2VfaWRcIlxuICAgICAgICA+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LnN0b3BNZXNzYWdlTGl2ZUxvY2F0aW9uKFxuICAgICAgICAgICAgeyBpbmxpbmVfbWVzc2FnZV9pZCwgLi4ub3RoZXIgfSxcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gc2VuZCBpbmZvcm1hdGlvbiBhYm91dCBhIHZlbnVlLiBPbiBzdWNjZXNzLCB0aGUgc2VudCBNZXNzYWdlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IGNoYW5uZWwgKGluIHRoZSBmb3JtYXQgQGNoYW5uZWx1c2VybmFtZSlcbiAgICAgKiBAcGFyYW0gbGF0aXR1ZGUgTGF0aXR1ZGUgb2YgdGhlIHZlbnVlXG4gICAgICogQHBhcmFtIGxvbmdpdHVkZSBMb25naXR1ZGUgb2YgdGhlIHZlbnVlXG4gICAgICogQHBhcmFtIHRpdGxlIE5hbWUgb2YgdGhlIHZlbnVlXG4gICAgICogQHBhcmFtIGFkZHJlc3MgQWRkcmVzcyBvZiB0aGUgdmVudWVcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNzZW5kdmVudWVcbiAgICAgKi9cbiAgICBzZW5kVmVudWUoXG4gICAgICAgIGNoYXRfaWQ6IG51bWJlciB8IHN0cmluZyxcbiAgICAgICAgbGF0aXR1ZGU6IG51bWJlcixcbiAgICAgICAgbG9uZ2l0dWRlOiBudW1iZXIsXG4gICAgICAgIHRpdGxlOiBzdHJpbmcsXG4gICAgICAgIGFkZHJlc3M6IHN0cmluZyxcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcbiAgICAgICAgICAgIFIsXG4gICAgICAgICAgICBcInNlbmRWZW51ZVwiLFxuICAgICAgICAgICAgXCJjaGF0X2lkXCIgfCBcImxhdGl0dWRlXCIgfCBcImxvbmdpdHVkZVwiIHwgXCJ0aXRsZVwiIHwgXCJhZGRyZXNzXCJcbiAgICAgICAgPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5zZW5kVmVudWUoXG4gICAgICAgICAgICB7IGNoYXRfaWQsIGxhdGl0dWRlLCBsb25naXR1ZGUsIHRpdGxlLCBhZGRyZXNzLCAuLi5vdGhlciB9LFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBzZW5kIHBob25lIGNvbnRhY3RzLiBPbiBzdWNjZXNzLCB0aGUgc2VudCBNZXNzYWdlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IGNoYW5uZWwgKGluIHRoZSBmb3JtYXQgQGNoYW5uZWx1c2VybmFtZSlcbiAgICAgKiBAcGFyYW0gcGhvbmVfbnVtYmVyIENvbnRhY3QncyBwaG9uZSBudW1iZXJcbiAgICAgKiBAcGFyYW0gZmlyc3RfbmFtZSBDb250YWN0J3MgZmlyc3QgbmFtZVxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NlbmRjb250YWN0XG4gICAgICovXG4gICAgc2VuZENvbnRhY3QoXG4gICAgICAgIGNoYXRfaWQ6IG51bWJlciB8IHN0cmluZyxcbiAgICAgICAgcGhvbmVfbnVtYmVyOiBzdHJpbmcsXG4gICAgICAgIGZpcnN0X25hbWU6IHN0cmluZyxcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcbiAgICAgICAgICAgIFIsXG4gICAgICAgICAgICBcInNlbmRDb250YWN0XCIsXG4gICAgICAgICAgICBcImNoYXRfaWRcIiB8IFwicGhvbmVfbnVtYmVyXCIgfCBcImZpcnN0X25hbWVcIlxuICAgICAgICA+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LnNlbmRDb250YWN0KFxuICAgICAgICAgICAgeyBjaGF0X2lkLCBwaG9uZV9udW1iZXIsIGZpcnN0X25hbWUsIC4uLm90aGVyIH0sXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIHNlbmQgYSBuYXRpdmUgcG9sbC4gT24gc3VjY2VzcywgdGhlIHNlbnQgTWVzc2FnZSBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjaGF0X2lkIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdGFyZ2V0IGNoYXQgb3IgdXNlcm5hbWUgb2YgdGhlIHRhcmdldCBjaGFubmVsIChpbiB0aGUgZm9ybWF0IEBjaGFubmVsdXNlcm5hbWUpXG4gICAgICogQHBhcmFtIHF1ZXN0aW9uIFBvbGwgcXVlc3Rpb24sIDEtMzAwIGNoYXJhY3RlcnNcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBBIGxpc3Qgb2YgYW5zd2VyIG9wdGlvbnMsIDItMTAgc3RyaW5ncyAxLTEwMCBjaGFyYWN0ZXJzIGVhY2hcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNzZW5kcG9sbFxuICAgICAqL1xuICAgIHNlbmRQb2xsKFxuICAgICAgICBjaGF0X2lkOiBudW1iZXIgfCBzdHJpbmcsXG4gICAgICAgIHF1ZXN0aW9uOiBzdHJpbmcsXG4gICAgICAgIG9wdGlvbnM6IHJlYWRvbmx5IHN0cmluZ1tdLFxuICAgICAgICBvdGhlcj86IE90aGVyPFIsIFwic2VuZFBvbGxcIiwgXCJjaGF0X2lkXCIgfCBcInF1ZXN0aW9uXCIgfCBcIm9wdGlvbnNcIj4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuc2VuZFBvbGwoXG4gICAgICAgICAgICB7IGNoYXRfaWQsIHF1ZXN0aW9uLCBvcHRpb25zLCAuLi5vdGhlciB9LFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBzZW5kIGFuIGFuaW1hdGVkIGVtb2ppIHRoYXQgd2lsbCBkaXNwbGF5IGEgcmFuZG9tIHZhbHVlLiBPbiBzdWNjZXNzLCB0aGUgc2VudCBNZXNzYWdlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IGNoYW5uZWwgKGluIHRoZSBmb3JtYXQgQGNoYW5uZWx1c2VybmFtZSlcbiAgICAgKiBAcGFyYW0gZW1vamkgRW1vamkgb24gd2hpY2ggdGhlIGRpY2UgdGhyb3cgYW5pbWF0aW9uIGlzIGJhc2VkLiBDdXJyZW50bHksIG11c3QgYmUgb25lIG9mIOKAnPCfjrLigJ0sIOKAnPCfjq/igJ0sIOKAnPCfj4DigJ0sIOKAnOKaveKAnSwgb3Ig4oCc8J+OsOKAnS4gRGljZSBjYW4gaGF2ZSB2YWx1ZXMgMS02IGZvciDigJzwn46y4oCdIGFuZCDigJzwn46v4oCdLCB2YWx1ZXMgMS01IGZvciDigJzwn4+A4oCdIGFuZCDigJzimr3igJ0sIGFuZCB2YWx1ZXMgMS02NCBmb3Ig4oCc8J+OsOKAnS4gRGVmYXVsdHMgdG8g4oCc8J+OsuKAnVxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NlbmRkaWNlXG4gICAgICovXG4gICAgc2VuZERpY2UoXG4gICAgICAgIGNoYXRfaWQ6IG51bWJlciB8IHN0cmluZyxcbiAgICAgICAgZW1vamk6IHN0cmluZyxcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxSLCBcInNlbmREaWNlXCIsIFwiY2hhdF9pZFwiIHwgXCJlbW9qaVwiPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5zZW5kRGljZSh7IGNoYXRfaWQsIGVtb2ppLCAuLi5vdGhlciB9LCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB3aGVuIHlvdSBuZWVkIHRvIHRlbGwgdGhlIHVzZXIgdGhhdCBzb21ldGhpbmcgaXMgaGFwcGVuaW5nIG9uIHRoZSBib3QncyBzaWRlLiBUaGUgc3RhdHVzIGlzIHNldCBmb3IgNSBzZWNvbmRzIG9yIGxlc3MgKHdoZW4gYSBtZXNzYWdlIGFycml2ZXMgZnJvbSB5b3VyIGJvdCwgVGVsZWdyYW0gY2xpZW50cyBjbGVhciBpdHMgdHlwaW5nIHN0YXR1cykuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogRXhhbXBsZTogVGhlIEltYWdlQm90IG5lZWRzIHNvbWUgdGltZSB0byBwcm9jZXNzIGEgcmVxdWVzdCBhbmQgdXBsb2FkIHRoZSBpbWFnZS4gSW5zdGVhZCBvZiBzZW5kaW5nIGEgdGV4dCBtZXNzYWdlIGFsb25nIHRoZSBsaW5lcyBvZiDigJxSZXRyaWV2aW5nIGltYWdlLCBwbGVhc2Ugd2FpdOKApuKAnSwgdGhlIGJvdCBtYXkgdXNlIHNlbmRDaGF0QWN0aW9uIHdpdGggYWN0aW9uID0gdXBsb2FkX3Bob3RvLiBUaGUgdXNlciB3aWxsIHNlZSBhIOKAnHNlbmRpbmcgcGhvdG/igJ0gc3RhdHVzIGZvciB0aGUgYm90LlxuICAgICAqXG4gICAgICogV2Ugb25seSByZWNvbW1lbmQgdXNpbmcgdGhpcyBtZXRob2Qgd2hlbiBhIHJlc3BvbnNlIGZyb20gdGhlIGJvdCB3aWxsIHRha2UgYSBub3RpY2VhYmxlIGFtb3VudCBvZiB0aW1lIHRvIGFycml2ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjaGF0X2lkIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdGFyZ2V0IGNoYXQgb3IgdXNlcm5hbWUgb2YgdGhlIHRhcmdldCBjaGFubmVsIChpbiB0aGUgZm9ybWF0IEBjaGFubmVsdXNlcm5hbWUpXG4gICAgICogQHBhcmFtIGFjdGlvbiBUeXBlIG9mIGFjdGlvbiB0byBicm9hZGNhc3QuIENob29zZSBvbmUsIGRlcGVuZGluZyBvbiB3aGF0IHRoZSB1c2VyIGlzIGFib3V0IHRvIHJlY2VpdmU6IHR5cGluZyBmb3IgdGV4dCBtZXNzYWdlcywgdXBsb2FkX3Bob3RvIGZvciBwaG90b3MsIHJlY29yZF92aWRlbyBvciB1cGxvYWRfdmlkZW8gZm9yIHZpZGVvcywgcmVjb3JkX3ZvaWNlIG9yIHVwbG9hZF92b2ljZSBmb3Igdm9pY2Ugbm90ZXMsIHVwbG9hZF9kb2N1bWVudCBmb3IgZ2VuZXJhbCBmaWxlcywgY2hvb3NlX3N0aWNrZXIgZm9yIHN0aWNrZXJzLCBmaW5kX2xvY2F0aW9uIGZvciBsb2NhdGlvbiBkYXRhLCByZWNvcmRfdmlkZW9fbm90ZSBvciB1cGxvYWRfdmlkZW9fbm90ZSBmb3IgdmlkZW8gbm90ZXMuXG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNzZW5kY2hhdGFjdGlvblxuICAgICAqL1xuICAgIHNlbmRDaGF0QWN0aW9uKFxuICAgICAgICBjaGF0X2lkOiBudW1iZXIgfCBzdHJpbmcsXG4gICAgICAgIGFjdGlvbjpcbiAgICAgICAgICAgIHwgXCJ0eXBpbmdcIlxuICAgICAgICAgICAgfCBcInVwbG9hZF9waG90b1wiXG4gICAgICAgICAgICB8IFwicmVjb3JkX3ZpZGVvXCJcbiAgICAgICAgICAgIHwgXCJ1cGxvYWRfdmlkZW9cIlxuICAgICAgICAgICAgfCBcInJlY29yZF92b2ljZVwiXG4gICAgICAgICAgICB8IFwidXBsb2FkX3ZvaWNlXCJcbiAgICAgICAgICAgIHwgXCJ1cGxvYWRfZG9jdW1lbnRcIlxuICAgICAgICAgICAgfCBcImZpbmRfbG9jYXRpb25cIlxuICAgICAgICAgICAgfCBcInJlY29yZF92aWRlb19ub3RlXCJcbiAgICAgICAgICAgIHwgXCJ1cGxvYWRfdmlkZW9fbm90ZVwiLFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LnNlbmRDaGF0QWN0aW9uKHsgY2hhdF9pZCwgYWN0aW9uIH0sIHNpZ25hbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIGdldCBhIGxpc3Qgb2YgcHJvZmlsZSBwaWN0dXJlcyBmb3IgYSB1c2VyLiBSZXR1cm5zIGEgVXNlclByb2ZpbGVQaG90b3Mgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHVzZXJfaWQgVW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHRhcmdldCB1c2VyXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjZ2V0dXNlcnByb2ZpbGVwaG90b3NcbiAgICAgKi9cbiAgICBnZXRVc2VyUHJvZmlsZVBob3RvcyhcbiAgICAgICAgdXNlcl9pZDogbnVtYmVyLFxuICAgICAgICBvdGhlcj86IE90aGVyPFIsIFwiZ2V0VXNlclByb2ZpbGVQaG90b3NcIiwgXCJ1c2VyX2lkXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LmdldFVzZXJQcm9maWxlUGhvdG9zKHsgdXNlcl9pZCwgLi4ub3RoZXIgfSwgc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gZ2V0IGJhc2ljIGluZm8gYWJvdXQgYSBmaWxlIGFuZCBwcmVwYXJlIGl0IGZvciBkb3dubG9hZGluZy4gRm9yIHRoZSBtb21lbnQsIGJvdHMgY2FuIGRvd25sb2FkIGZpbGVzIG9mIHVwIHRvIDIwTUIgaW4gc2l6ZS4gT24gc3VjY2VzcywgYSBGaWxlIG9iamVjdCBpcyByZXR1cm5lZC4gVGhlIGZpbGUgY2FuIHRoZW4gYmUgZG93bmxvYWRlZCB2aWEgdGhlIGxpbmsgaHR0cHM6Ly9hcGkudGVsZWdyYW0ub3JnL2ZpbGUvYm90PHRva2VuPi88ZmlsZV9wYXRoPiwgd2hlcmUgPGZpbGVfcGF0aD4gaXMgdGFrZW4gZnJvbSB0aGUgcmVzcG9uc2UuIEl0IGlzIGd1YXJhbnRlZWQgdGhhdCB0aGUgbGluayB3aWxsIGJlIHZhbGlkIGZvciBhdCBsZWFzdCAxIGhvdXIuIFdoZW4gdGhlIGxpbmsgZXhwaXJlcywgYSBuZXcgb25lIGNhbiBiZSByZXF1ZXN0ZWQgYnkgY2FsbGluZyBnZXRGaWxlIGFnYWluLlxuICAgICAqXG4gICAgICogTm90ZTogVGhpcyBmdW5jdGlvbiBtYXkgbm90IHByZXNlcnZlIHRoZSBvcmlnaW5hbCBmaWxlIG5hbWUgYW5kIE1JTUUgdHlwZS4gWW91IHNob3VsZCBzYXZlIHRoZSBmaWxlJ3MgTUlNRSB0eXBlIGFuZCBuYW1lIChpZiBhdmFpbGFibGUpIHdoZW4gdGhlIEZpbGUgb2JqZWN0IGlzIHJlY2VpdmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpbGVfaWQgRmlsZSBpZGVudGlmaWVyIHRvIGdldCBpbmZvIGFib3V0XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNnZXRmaWxlXG4gICAgICovXG4gICAgZ2V0RmlsZShmaWxlX2lkOiBzdHJpbmcsIHNpZ25hbD86IEFib3J0U2lnbmFsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5nZXRGaWxlKHsgZmlsZV9pZCB9LCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKiBAZGVwcmVjYXRlZCBVc2UgYGJhbkNoYXRNZW1iZXJgIGluc3RlYWQuICovXG4gICAga2lja0NoYXRNZW1iZXIoLi4uYXJnczogUGFyYW1ldGVyczxBcGlbXCJiYW5DaGF0TWVtYmVyXCJdPikge1xuICAgICAgICByZXR1cm4gdGhpcy5iYW5DaGF0TWVtYmVyKC4uLmFyZ3MpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBiYW4gYSB1c2VyIGluIGEgZ3JvdXAsIGEgc3VwZXJncm91cCBvciBhIGNoYW5uZWwuIEluIHRoZSBjYXNlIG9mIHN1cGVyZ3JvdXBzIGFuZCBjaGFubmVscywgdGhlIHVzZXIgd2lsbCBub3QgYmUgYWJsZSB0byByZXR1cm4gdG8gdGhlIGNoYXQgb24gdGhlaXIgb3duIHVzaW5nIGludml0ZSBsaW5rcywgZXRjLiwgdW5sZXNzIHVuYmFubmVkIGZpcnN0LiBUaGUgYm90IG11c3QgYmUgYW4gYWRtaW5pc3RyYXRvciBpbiB0aGUgY2hhdCBmb3IgdGhpcyB0byB3b3JrIGFuZCBtdXN0IGhhdmUgdGhlIGFwcHJvcHJpYXRlIGFkbWluaXN0cmF0b3IgcmlnaHRzLiBSZXR1cm5zIFRydWUgb24gc3VjY2Vzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjaGF0X2lkIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdGFyZ2V0IGdyb3VwIG9yIHVzZXJuYW1lIG9mIHRoZSB0YXJnZXQgc3VwZXJncm91cCBvciBjaGFubmVsIChpbiB0aGUgZm9ybWF0IEBjaGFubmVsdXNlcm5hbWUpXG4gICAgICogQHBhcmFtIHVzZXJfaWQgVW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHRhcmdldCB1c2VyXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjYmFuY2hhdG1lbWJlclxuICAgICAqL1xuICAgIGJhbkNoYXRNZW1iZXIoXG4gICAgICAgIGNoYXRfaWQ6IG51bWJlciB8IHN0cmluZyxcbiAgICAgICAgdXNlcl9pZDogbnVtYmVyLFxuICAgICAgICBvdGhlcj86IE90aGVyPFIsIFwiYmFuQ2hhdE1lbWJlclwiLCBcImNoYXRfaWRcIiB8IFwidXNlcl9pZFwiPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5iYW5DaGF0TWVtYmVyKHsgY2hhdF9pZCwgdXNlcl9pZCwgLi4ub3RoZXIgfSwgc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gdW5iYW4gYSBwcmV2aW91c2x5IGJhbm5lZCB1c2VyIGluIGEgc3VwZXJncm91cCBvciBjaGFubmVsLiBUaGUgdXNlciB3aWxsIG5vdCByZXR1cm4gdG8gdGhlIGdyb3VwIG9yIGNoYW5uZWwgYXV0b21hdGljYWxseSwgYnV0IHdpbGwgYmUgYWJsZSB0byBqb2luIHZpYSBsaW5rLCBldGMuIFRoZSBib3QgbXVzdCBiZSBhbiBhZG1pbmlzdHJhdG9yIGZvciB0aGlzIHRvIHdvcmsuIEJ5IGRlZmF1bHQsIHRoaXMgbWV0aG9kIGd1YXJhbnRlZXMgdGhhdCBhZnRlciB0aGUgY2FsbCB0aGUgdXNlciBpcyBub3QgYSBtZW1iZXIgb2YgdGhlIGNoYXQsIGJ1dCB3aWxsIGJlIGFibGUgdG8gam9pbiBpdC4gU28gaWYgdGhlIHVzZXIgaXMgYSBtZW1iZXIgb2YgdGhlIGNoYXQgdGhleSB3aWxsIGFsc28gYmUgcmVtb3ZlZCBmcm9tIHRoZSBjaGF0LiBJZiB5b3UgZG9uJ3Qgd2FudCB0aGlzLCB1c2UgdGhlIHBhcmFtZXRlciBvbmx5X2lmX2Jhbm5lZC4gUmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRhcmdldCBncm91cCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IHN1cGVyZ3JvdXAgb3IgY2hhbm5lbCAoaW4gdGhlIGZvcm1hdCBAdXNlcm5hbWUpXG4gICAgICogQHBhcmFtIHVzZXJfaWQgVW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHRhcmdldCB1c2VyXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjdW5iYW5jaGF0bWVtYmVyXG4gICAgICovXG4gICAgdW5iYW5DaGF0TWVtYmVyKFxuICAgICAgICBjaGF0X2lkOiBudW1iZXIgfCBzdHJpbmcsXG4gICAgICAgIHVzZXJfaWQ6IG51bWJlcixcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxSLCBcInVuYmFuQ2hhdE1lbWJlclwiLCBcImNoYXRfaWRcIiB8IFwidXNlcl9pZFwiPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy51bmJhbkNoYXRNZW1iZXIoeyBjaGF0X2lkLCB1c2VyX2lkLCAuLi5vdGhlciB9LCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byByZXN0cmljdCBhIHVzZXIgaW4gYSBzdXBlcmdyb3VwLiBUaGUgYm90IG11c3QgYmUgYW4gYWRtaW5pc3RyYXRvciBpbiB0aGUgc3VwZXJncm91cCBmb3IgdGhpcyB0byB3b3JrIGFuZCBtdXN0IGhhdmUgdGhlIGFwcHJvcHJpYXRlIGFkbWluaXN0cmF0b3IgcmlnaHRzLiBQYXNzIFRydWUgZm9yIGFsbCBwZXJtaXNzaW9ucyB0byBsaWZ0IHJlc3RyaWN0aW9ucyBmcm9tIGEgdXNlci4gUmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRhcmdldCBjaGF0IG9yIHVzZXJuYW1lIG9mIHRoZSB0YXJnZXQgc3VwZXJncm91cCAoaW4gdGhlIGZvcm1hdCBAc3VwZXJncm91cHVzZXJuYW1lKVxuICAgICAqIEBwYXJhbSB1c2VyX2lkIFVuaXF1ZSBpZGVudGlmaWVyIG9mIHRoZSB0YXJnZXQgdXNlclxuICAgICAqIEBwYXJhbSBwZXJtaXNzaW9ucyBBbiBvYmplY3QgZm9yIG5ldyB1c2VyIHBlcm1pc3Npb25zXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjcmVzdHJpY3RjaGF0bWVtYmVyXG4gICAgICovXG4gICAgcmVzdHJpY3RDaGF0TWVtYmVyKFxuICAgICAgICBjaGF0X2lkOiBudW1iZXIgfCBzdHJpbmcsXG4gICAgICAgIHVzZXJfaWQ6IG51bWJlcixcbiAgICAgICAgcGVybWlzc2lvbnM6IENoYXRQZXJtaXNzaW9ucyxcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcbiAgICAgICAgICAgIFIsXG4gICAgICAgICAgICBcInJlc3RyaWN0Q2hhdE1lbWJlclwiLFxuICAgICAgICAgICAgXCJjaGF0X2lkXCIgfCBcInVzZXJfaWRcIiB8IFwicGVybWlzc2lvbnNcIlxuICAgICAgICA+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LnJlc3RyaWN0Q2hhdE1lbWJlcihcbiAgICAgICAgICAgIHsgY2hhdF9pZCwgdXNlcl9pZCwgcGVybWlzc2lvbnMsIC4uLm90aGVyIH0sXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIHByb21vdGUgb3IgZGVtb3RlIGEgdXNlciBpbiBhIHN1cGVyZ3JvdXAgb3IgYSBjaGFubmVsLiBUaGUgYm90IG11c3QgYmUgYW4gYWRtaW5pc3RyYXRvciBpbiB0aGUgY2hhdCBmb3IgdGhpcyB0byB3b3JrIGFuZCBtdXN0IGhhdmUgdGhlIGFwcHJvcHJpYXRlIGFkbWluaXN0cmF0b3IgcmlnaHRzLiBQYXNzIEZhbHNlIGZvciBhbGwgYm9vbGVhbiBwYXJhbWV0ZXJzIHRvIGRlbW90ZSBhIHVzZXIuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IGNoYW5uZWwgKGluIHRoZSBmb3JtYXQgQGNoYW5uZWx1c2VybmFtZSlcbiAgICAgKiBAcGFyYW0gdXNlcl9pZCBVbmlxdWUgaWRlbnRpZmllciBvZiB0aGUgdGFyZ2V0IHVzZXJcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNwcm9tb3RlY2hhdG1lbWJlclxuICAgICAqL1xuICAgIHByb21vdGVDaGF0TWVtYmVyKFxuICAgICAgICBjaGF0X2lkOiBudW1iZXIgfCBzdHJpbmcsXG4gICAgICAgIHVzZXJfaWQ6IG51bWJlcixcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxSLCBcInByb21vdGVDaGF0TWVtYmVyXCIsIFwiY2hhdF9pZFwiIHwgXCJ1c2VyX2lkXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LnByb21vdGVDaGF0TWVtYmVyKFxuICAgICAgICAgICAgeyBjaGF0X2lkLCB1c2VyX2lkLCAuLi5vdGhlciB9LFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBzZXQgYSBjdXN0b20gdGl0bGUgZm9yIGFuIGFkbWluaXN0cmF0b3IgaW4gYSBzdXBlcmdyb3VwIHByb21vdGVkIGJ5IHRoZSBib3QuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IHN1cGVyZ3JvdXAgKGluIHRoZSBmb3JtYXQgQHN1cGVyZ3JvdXB1c2VybmFtZSlcbiAgICAgKiBAcGFyYW0gdXNlcl9pZCBVbmlxdWUgaWRlbnRpZmllciBvZiB0aGUgdGFyZ2V0IHVzZXJcbiAgICAgKiBAcGFyYW0gY3VzdG9tX3RpdGxlIE5ldyBjdXN0b20gdGl0bGUgZm9yIHRoZSBhZG1pbmlzdHJhdG9yOyAwLTE2IGNoYXJhY3RlcnMsIGVtb2ppIGFyZSBub3QgYWxsb3dlZFxuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2V0Y2hhdGFkbWluaXN0cmF0b3JjdXN0b210aXRsZVxuICAgICAqL1xuICAgIHNldENoYXRBZG1pbmlzdHJhdG9yQ3VzdG9tVGl0bGUoXG4gICAgICAgIGNoYXRfaWQ6IG51bWJlciB8IHN0cmluZyxcbiAgICAgICAgdXNlcl9pZDogbnVtYmVyLFxuICAgICAgICBjdXN0b21fdGl0bGU6IHN0cmluZyxcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5zZXRDaGF0QWRtaW5pc3RyYXRvckN1c3RvbVRpdGxlKFxuICAgICAgICAgICAgeyBjaGF0X2lkLCB1c2VyX2lkLCBjdXN0b21fdGl0bGUgfSxcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gYmFuIGEgY2hhbm5lbCBjaGF0IGluIGEgc3VwZXJncm91cCBvciBhIGNoYW5uZWwuIFVudGlsIHRoZSBjaGF0IGlzIHVuYmFubmVkLCB0aGUgb3duZXIgb2YgdGhlIGJhbm5lZCBjaGF0IHdvbid0IGJlIGFibGUgdG8gc2VuZCBtZXNzYWdlcyBvbiBiZWhhbGYgb2YgYW55IG9mIHRoZWlyIGNoYW5uZWxzLiBUaGUgYm90IG11c3QgYmUgYW4gYWRtaW5pc3RyYXRvciBpbiB0aGUgc3VwZXJncm91cCBvciBjaGFubmVsIGZvciB0aGlzIHRvIHdvcmsgYW5kIG11c3QgaGF2ZSB0aGUgYXBwcm9wcmlhdGUgYWRtaW5pc3RyYXRvciByaWdodHMuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IGNoYW5uZWwgKGluIHRoZSBmb3JtYXQgQGNoYW5uZWx1c2VybmFtZSlcbiAgICAgKiBAcGFyYW0gc2VuZGVyX2NoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHRhcmdldCBzZW5kZXIgY2hhdFxuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjYmFuY2hhdHNlbmRlcmNoYXRcbiAgICAgKi9cbiAgICBiYW5DaGF0U2VuZGVyQ2hhdChcbiAgICAgICAgY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLFxuICAgICAgICBzZW5kZXJfY2hhdF9pZDogbnVtYmVyLFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LmJhbkNoYXRTZW5kZXJDaGF0KHsgY2hhdF9pZCwgc2VuZGVyX2NoYXRfaWQgfSwgc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gdW5iYW4gYSBwcmV2aW91c2x5IGJhbm5lZCBjaGFubmVsIGNoYXQgaW4gYSBzdXBlcmdyb3VwIG9yIGNoYW5uZWwuIFRoZSBib3QgbXVzdCBiZSBhbiBhZG1pbmlzdHJhdG9yIGZvciB0aGlzIHRvIHdvcmsgYW5kIG11c3QgaGF2ZSB0aGUgYXBwcm9wcmlhdGUgYWRtaW5pc3RyYXRvciByaWdodHMuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IGNoYW5uZWwgKGluIHRoZSBmb3JtYXQgQGNoYW5uZWx1c2VybmFtZSlcbiAgICAgKiBAcGFyYW0gc2VuZGVyX2NoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHRhcmdldCBzZW5kZXIgY2hhdFxuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjdW5iYW5jaGF0c2VuZGVyY2hhdFxuICAgICAqL1xuICAgIHVuYmFuQ2hhdFNlbmRlckNoYXQoXG4gICAgICAgIGNoYXRfaWQ6IG51bWJlciB8IHN0cmluZyxcbiAgICAgICAgc2VuZGVyX2NoYXRfaWQ6IG51bWJlcixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy51bmJhbkNoYXRTZW5kZXJDaGF0KFxuICAgICAgICAgICAgeyBjaGF0X2lkLCBzZW5kZXJfY2hhdF9pZCB9LFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBzZXQgZGVmYXVsdCBjaGF0IHBlcm1pc3Npb25zIGZvciBhbGwgbWVtYmVycy4gVGhlIGJvdCBtdXN0IGJlIGFuIGFkbWluaXN0cmF0b3IgaW4gdGhlIGdyb3VwIG9yIGEgc3VwZXJncm91cCBmb3IgdGhpcyB0byB3b3JrIGFuZCBtdXN0IGhhdmUgdGhlIGNhbl9yZXN0cmljdF9tZW1iZXJzIGFkbWluaXN0cmF0b3IgcmlnaHRzLiBSZXR1cm5zIFRydWUgb24gc3VjY2Vzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjaGF0X2lkIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdGFyZ2V0IGNoYXQgb3IgdXNlcm5hbWUgb2YgdGhlIHRhcmdldCBzdXBlcmdyb3VwIChpbiB0aGUgZm9ybWF0IEBzdXBlcmdyb3VwdXNlcm5hbWUpXG4gICAgICogQHBhcmFtIHBlcm1pc3Npb25zIE5ldyBkZWZhdWx0IGNoYXQgcGVybWlzc2lvbnNcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NldGNoYXRwZXJtaXNzaW9uc1xuICAgICAqL1xuICAgIHNldENoYXRQZXJtaXNzaW9ucyhcbiAgICAgICAgY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLFxuICAgICAgICBwZXJtaXNzaW9uczogQ2hhdFBlcm1pc3Npb25zLFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LnNldENoYXRQZXJtaXNzaW9ucyh7IGNoYXRfaWQsIHBlcm1pc3Npb25zIH0sIHNpZ25hbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIGdlbmVyYXRlIGEgbmV3IHByaW1hcnkgaW52aXRlIGxpbmsgZm9yIGEgY2hhdDsgYW55IHByZXZpb3VzbHkgZ2VuZXJhdGVkIHByaW1hcnkgbGluayBpcyByZXZva2VkLiBUaGUgYm90IG11c3QgYmUgYW4gYWRtaW5pc3RyYXRvciBpbiB0aGUgY2hhdCBmb3IgdGhpcyB0byB3b3JrIGFuZCBtdXN0IGhhdmUgdGhlIGFwcHJvcHJpYXRlIGFkbWluaXN0cmF0b3IgcmlnaHRzLiBSZXR1cm5zIHRoZSBuZXcgaW52aXRlIGxpbmsgYXMgU3RyaW5nIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBOb3RlOiBFYWNoIGFkbWluaXN0cmF0b3IgaW4gYSBjaGF0IGdlbmVyYXRlcyB0aGVpciBvd24gaW52aXRlIGxpbmtzLiBCb3RzIGNhbid0IHVzZSBpbnZpdGUgbGlua3MgZ2VuZXJhdGVkIGJ5IG90aGVyIGFkbWluaXN0cmF0b3JzLiBJZiB5b3Ugd2FudCB5b3VyIGJvdCB0byB3b3JrIHdpdGggaW52aXRlIGxpbmtzLCBpdCB3aWxsIG5lZWQgdG8gZ2VuZXJhdGUgaXRzIG93biBsaW5rIHVzaW5nIGV4cG9ydENoYXRJbnZpdGVMaW5rIG9yIGJ5IGNhbGxpbmcgdGhlIGdldENoYXQgbWV0aG9kLiBJZiB5b3VyIGJvdCBuZWVkcyB0byBnZW5lcmF0ZSBhIG5ldyBwcmltYXJ5IGludml0ZSBsaW5rIHJlcGxhY2luZyBpdHMgcHJldmlvdXMgb25lLCB1c2UgZXhwb3J0Q2hhdEludml0ZUxpbmsgYWdhaW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRhcmdldCBjaGF0IG9yIHVzZXJuYW1lIG9mIHRoZSB0YXJnZXQgY2hhbm5lbCAoaW4gdGhlIGZvcm1hdCBAY2hhbm5lbHVzZXJuYW1lKVxuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjZXhwb3J0Y2hhdGludml0ZWxpbmtcbiAgICAgKi9cbiAgICBleHBvcnRDaGF0SW52aXRlTGluayhjaGF0X2lkOiBudW1iZXIgfCBzdHJpbmcsIHNpZ25hbD86IEFib3J0U2lnbmFsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5leHBvcnRDaGF0SW52aXRlTGluayh7IGNoYXRfaWQgfSwgc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gY3JlYXRlIGFuIGFkZGl0aW9uYWwgaW52aXRlIGxpbmsgZm9yIGEgY2hhdC4gVGhlIGJvdCBtdXN0IGJlIGFuIGFkbWluaXN0cmF0b3IgaW4gdGhlIGNoYXQgZm9yIHRoaXMgdG8gd29yayBhbmQgbXVzdCBoYXZlIHRoZSBhcHByb3ByaWF0ZSBhZG1pbmlzdHJhdG9yIHJpZ2h0cy4gVGhlIGxpbmsgY2FuIGJlIHJldm9rZWQgdXNpbmcgdGhlIG1ldGhvZCByZXZva2VDaGF0SW52aXRlTGluay4gUmV0dXJucyB0aGUgbmV3IGludml0ZSBsaW5rIGFzIENoYXRJbnZpdGVMaW5rIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjaGF0X2lkIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdGFyZ2V0IGNoYXQgb3IgdXNlcm5hbWUgb2YgdGhlIHRhcmdldCBjaGFubmVsIChpbiB0aGUgZm9ybWF0IEBjaGFubmVsdXNlcm5hbWUpXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjY3JlYXRlY2hhdGludml0ZWxpbmtcbiAgICAgKi9cbiAgICBjcmVhdGVDaGF0SW52aXRlTGluayhcbiAgICAgICAgY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLFxuICAgICAgICBvdGhlcj86IE90aGVyPFIsIFwiY3JlYXRlQ2hhdEludml0ZUxpbmtcIiwgXCJjaGF0X2lkXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LmNyZWF0ZUNoYXRJbnZpdGVMaW5rKHsgY2hhdF9pZCwgLi4ub3RoZXIgfSwgc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiAgVXNlIHRoaXMgbWV0aG9kIHRvIGVkaXQgYSBub24tcHJpbWFyeSBpbnZpdGUgbGluayBjcmVhdGVkIGJ5IHRoZSBib3QuIFRoZSBib3QgbXVzdCBiZSBhbiBhZG1pbmlzdHJhdG9yIGluIHRoZSBjaGF0IGZvciB0aGlzIHRvIHdvcmsgYW5kIG11c3QgaGF2ZSB0aGUgYXBwcm9wcmlhdGUgYWRtaW5pc3RyYXRvciByaWdodHMuIFJldHVybnMgdGhlIGVkaXRlZCBpbnZpdGUgbGluayBhcyBhIENoYXRJbnZpdGVMaW5rIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjaGF0X2lkIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdGFyZ2V0IGNoYXQgb3IgdXNlcm5hbWUgb2YgdGhlIHRhcmdldCBjaGFubmVsIChpbiB0aGUgZm9ybWF0IEBjaGFubmVsdXNlcm5hbWUpXG4gICAgICogQHBhcmFtIGludml0ZV9saW5rIFRoZSBpbnZpdGUgbGluayB0byBlZGl0XG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjZWRpdGNoYXRpbnZpdGVsaW5rXG4gICAgICovXG4gICAgZWRpdENoYXRJbnZpdGVMaW5rKFxuICAgICAgICBjaGF0X2lkOiBudW1iZXIgfCBzdHJpbmcsXG4gICAgICAgIGludml0ZV9saW5rOiBzdHJpbmcsXG4gICAgICAgIG90aGVyPzogT3RoZXI8UiwgXCJlZGl0Q2hhdEludml0ZUxpbmtcIiwgXCJjaGF0X2lkXCIgfCBcImludml0ZV9saW5rXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LmVkaXRDaGF0SW52aXRlTGluayhcbiAgICAgICAgICAgIHsgY2hhdF9pZCwgaW52aXRlX2xpbmssIC4uLm90aGVyIH0sXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogIFVzZSB0aGlzIG1ldGhvZCB0byByZXZva2UgYW4gaW52aXRlIGxpbmsgY3JlYXRlZCBieSB0aGUgYm90LiBJZiB0aGUgcHJpbWFyeSBsaW5rIGlzIHJldm9rZWQsIGEgbmV3IGxpbmsgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQuIFRoZSBib3QgbXVzdCBiZSBhbiBhZG1pbmlzdHJhdG9yIGluIHRoZSBjaGF0IGZvciB0aGlzIHRvIHdvcmsgYW5kIG11c3QgaGF2ZSB0aGUgYXBwcm9wcmlhdGUgYWRtaW5pc3RyYXRvciByaWdodHMuIFJldHVybnMgdGhlIHJldm9rZWQgaW52aXRlIGxpbmsgYXMgQ2hhdEludml0ZUxpbmsgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHRhcmdldCBjaGF0IG9yIHVzZXJuYW1lIG9mIHRoZSB0YXJnZXQgY2hhbm5lbCAoaW4gdGhlIGZvcm1hdCBAY2hhbm5lbHVzZXJuYW1lKVxuICAgICAqIEBwYXJhbSBpbnZpdGVfbGluayBUaGUgaW52aXRlIGxpbmsgdG8gcmV2b2tlXG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNyZXZva2VjaGF0aW52aXRlbGlua1xuICAgICAqL1xuICAgIHJldm9rZUNoYXRJbnZpdGVMaW5rKFxuICAgICAgICBjaGF0X2lkOiBudW1iZXIgfCBzdHJpbmcsXG4gICAgICAgIGludml0ZV9saW5rOiBzdHJpbmcsXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcucmV2b2tlQ2hhdEludml0ZUxpbmsoeyBjaGF0X2lkLCBpbnZpdGVfbGluayB9LCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBhcHByb3ZlIGEgY2hhdCBqb2luIHJlcXVlc3QuIFRoZSBib3QgbXVzdCBiZSBhbiBhZG1pbmlzdHJhdG9yIGluIHRoZSBjaGF0IGZvciB0aGlzIHRvIHdvcmsgYW5kIG11c3QgaGF2ZSB0aGUgY2FuX2ludml0ZV91c2VycyBhZG1pbmlzdHJhdG9yIHJpZ2h0LiBSZXR1cm5zIFRydWUgb24gc3VjY2Vzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjaGF0X2lkIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdGFyZ2V0IGNoYXQgb3IgdXNlcm5hbWUgb2YgdGhlIHRhcmdldCBjaGFubmVsIChpbiB0aGUgZm9ybWF0IEBjaGFubmVsdXNlcm5hbWUpXG4gICAgICogQHBhcmFtIHVzZXJfaWQgVW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHRhcmdldCB1c2VyXG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNhcHByb3ZlY2hhdGpvaW5yZXF1ZXN0XG4gICAgICovXG4gICAgYXBwcm92ZUNoYXRKb2luUmVxdWVzdChcbiAgICAgICAgY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLFxuICAgICAgICB1c2VyX2lkOiBudW1iZXIsXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuYXBwcm92ZUNoYXRKb2luUmVxdWVzdCh7IGNoYXRfaWQsIHVzZXJfaWQgfSwgc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gZGVjbGluZSBhIGNoYXQgam9pbiByZXF1ZXN0LiBUaGUgYm90IG11c3QgYmUgYW4gYWRtaW5pc3RyYXRvciBpbiB0aGUgY2hhdCBmb3IgdGhpcyB0byB3b3JrIGFuZCBtdXN0IGhhdmUgdGhlIGNhbl9pbnZpdGVfdXNlcnMgYWRtaW5pc3RyYXRvciByaWdodC4gUmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRhcmdldCBjaGF0IG9yIHVzZXJuYW1lIG9mIHRoZSB0YXJnZXQgY2hhbm5lbCAoaW4gdGhlIGZvcm1hdCBAY2hhbm5lbHVzZXJuYW1lKVxuICAgICAqIEBwYXJhbSB1c2VyX2lkIFVuaXF1ZSBpZGVudGlmaWVyIG9mIHRoZSB0YXJnZXQgdXNlclxuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjZGVjbGluZWNoYXRqb2lucmVxdWVzdFxuICAgICAqL1xuICAgIGRlY2xpbmVDaGF0Sm9pblJlcXVlc3QoXG4gICAgICAgIGNoYXRfaWQ6IG51bWJlciB8IHN0cmluZyxcbiAgICAgICAgdXNlcl9pZDogbnVtYmVyLFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LmRlY2xpbmVDaGF0Sm9pblJlcXVlc3QoeyBjaGF0X2lkLCB1c2VyX2lkIH0sIHNpZ25hbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIHNldCBhIG5ldyBwcm9maWxlIHBob3RvIGZvciB0aGUgY2hhdC4gUGhvdG9zIGNhbid0IGJlIGNoYW5nZWQgZm9yIHByaXZhdGUgY2hhdHMuIFRoZSBib3QgbXVzdCBiZSBhbiBhZG1pbmlzdHJhdG9yIGluIHRoZSBjaGF0IGZvciB0aGlzIHRvIHdvcmsgYW5kIG11c3QgaGF2ZSB0aGUgYXBwcm9wcmlhdGUgYWRtaW5pc3RyYXRvciByaWdodHMuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IGNoYW5uZWwgKGluIHRoZSBmb3JtYXQgQGNoYW5uZWx1c2VybmFtZSlcbiAgICAgKiBAcGFyYW0gcGhvdG8gTmV3IGNoYXQgcGhvdG8sIHVwbG9hZGVkIHVzaW5nIG11bHRpcGFydC9mb3JtLWRhdGFcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NldGNoYXRwaG90b1xuICAgICAqL1xuICAgIHNldENoYXRQaG90byhcbiAgICAgICAgY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLFxuICAgICAgICBwaG90bzogSW5wdXRGaWxlLFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LnNldENoYXRQaG90byh7IGNoYXRfaWQsIHBob3RvIH0sIHNpZ25hbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIGRlbGV0ZSBhIGNoYXQgcGhvdG8uIFBob3RvcyBjYW4ndCBiZSBjaGFuZ2VkIGZvciBwcml2YXRlIGNoYXRzLiBUaGUgYm90IG11c3QgYmUgYW4gYWRtaW5pc3RyYXRvciBpbiB0aGUgY2hhdCBmb3IgdGhpcyB0byB3b3JrIGFuZCBtdXN0IGhhdmUgdGhlIGFwcHJvcHJpYXRlIGFkbWluaXN0cmF0b3IgcmlnaHRzLiBSZXR1cm5zIFRydWUgb24gc3VjY2Vzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjaGF0X2lkIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdGFyZ2V0IGNoYXQgb3IgdXNlcm5hbWUgb2YgdGhlIHRhcmdldCBjaGFubmVsIChpbiB0aGUgZm9ybWF0IEBjaGFubmVsdXNlcm5hbWUpXG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNkZWxldGVjaGF0cGhvdG9cbiAgICAgKi9cbiAgICBkZWxldGVDaGF0UGhvdG8oY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLCBzaWduYWw/OiBBYm9ydFNpZ25hbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuZGVsZXRlQ2hhdFBob3RvKHsgY2hhdF9pZCB9LCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBjaGFuZ2UgdGhlIHRpdGxlIG9mIGEgY2hhdC4gVGl0bGVzIGNhbid0IGJlIGNoYW5nZWQgZm9yIHByaXZhdGUgY2hhdHMuIFRoZSBib3QgbXVzdCBiZSBhbiBhZG1pbmlzdHJhdG9yIGluIHRoZSBjaGF0IGZvciB0aGlzIHRvIHdvcmsgYW5kIG11c3QgaGF2ZSB0aGUgYXBwcm9wcmlhdGUgYWRtaW5pc3RyYXRvciByaWdodHMuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IGNoYW5uZWwgKGluIHRoZSBmb3JtYXQgQGNoYW5uZWx1c2VybmFtZSlcbiAgICAgKiBAcGFyYW0gdGl0bGUgTmV3IGNoYXQgdGl0bGUsIDEtMjU1IGNoYXJhY3RlcnNcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NldGNoYXR0aXRsZVxuICAgICAqL1xuICAgIHNldENoYXRUaXRsZShcbiAgICAgICAgY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLFxuICAgICAgICB0aXRsZTogc3RyaW5nLFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LnNldENoYXRUaXRsZSh7IGNoYXRfaWQsIHRpdGxlIH0sIHNpZ25hbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIGNoYW5nZSB0aGUgZGVzY3JpcHRpb24gb2YgYSBncm91cCwgYSBzdXBlcmdyb3VwIG9yIGEgY2hhbm5lbC4gVGhlIGJvdCBtdXN0IGJlIGFuIGFkbWluaXN0cmF0b3IgaW4gdGhlIGNoYXQgZm9yIHRoaXMgdG8gd29yayBhbmQgbXVzdCBoYXZlIHRoZSBhcHByb3ByaWF0ZSBhZG1pbmlzdHJhdG9yIHJpZ2h0cy4gUmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRhcmdldCBjaGF0IG9yIHVzZXJuYW1lIG9mIHRoZSB0YXJnZXQgY2hhbm5lbCAoaW4gdGhlIGZvcm1hdCBAY2hhbm5lbHVzZXJuYW1lKVxuICAgICAqIEBwYXJhbSBkZXNjcmlwdGlvbiBOZXcgY2hhdCBkZXNjcmlwdGlvbiwgMC0yNTUgY2hhcmFjdGVyc1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2V0Y2hhdGRlc2NyaXB0aW9uXG4gICAgICovXG4gICAgc2V0Q2hhdERlc2NyaXB0aW9uKFxuICAgICAgICBjaGF0X2lkOiBudW1iZXIgfCBzdHJpbmcsXG4gICAgICAgIGRlc2NyaXB0aW9uPzogc3RyaW5nLFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LnNldENoYXREZXNjcmlwdGlvbih7IGNoYXRfaWQsIGRlc2NyaXB0aW9uIH0sIHNpZ25hbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIGFkZCBhIG1lc3NhZ2UgdG8gdGhlIGxpc3Qgb2YgcGlubmVkIG1lc3NhZ2VzIGluIGEgY2hhdC4gSWYgdGhlIGNoYXQgaXMgbm90IGEgcHJpdmF0ZSBjaGF0LCB0aGUgYm90IG11c3QgYmUgYW4gYWRtaW5pc3RyYXRvciBpbiB0aGUgY2hhdCBmb3IgdGhpcyB0byB3b3JrIGFuZCBtdXN0IGhhdmUgdGhlICdjYW5fcGluX21lc3NhZ2VzJyBhZG1pbmlzdHJhdG9yIHJpZ2h0IGluIGEgc3VwZXJncm91cCBvciAnY2FuX2VkaXRfbWVzc2FnZXMnIGFkbWluaXN0cmF0b3IgcmlnaHQgaW4gYSBjaGFubmVsLiBSZXR1cm5zIFRydWUgb24gc3VjY2Vzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjaGF0X2lkIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdGFyZ2V0IGNoYXQgb3IgdXNlcm5hbWUgb2YgdGhlIHRhcmdldCBjaGFubmVsIChpbiB0aGUgZm9ybWF0IEBjaGFubmVsdXNlcm5hbWUpXG4gICAgICogQHBhcmFtIG1lc3NhZ2VfaWQgSWRlbnRpZmllciBvZiBhIG1lc3NhZ2UgdG8gcGluXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjcGluY2hhdG1lc3NhZ2VcbiAgICAgKi9cbiAgICBwaW5DaGF0TWVzc2FnZShcbiAgICAgICAgY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLFxuICAgICAgICBtZXNzYWdlX2lkOiBudW1iZXIsXG4gICAgICAgIG90aGVyPzogT3RoZXI8UiwgXCJwaW5DaGF0TWVzc2FnZVwiLCBcImNoYXRfaWRcIiB8IFwibWVzc2FnZV9pZFwiPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5waW5DaGF0TWVzc2FnZShcbiAgICAgICAgICAgIHsgY2hhdF9pZCwgbWVzc2FnZV9pZCwgLi4ub3RoZXIgfSxcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gcmVtb3ZlIGEgbWVzc2FnZSBmcm9tIHRoZSBsaXN0IG9mIHBpbm5lZCBtZXNzYWdlcyBpbiBhIGNoYXQuIElmIHRoZSBjaGF0IGlzIG5vdCBhIHByaXZhdGUgY2hhdCwgdGhlIGJvdCBtdXN0IGJlIGFuIGFkbWluaXN0cmF0b3IgaW4gdGhlIGNoYXQgZm9yIHRoaXMgdG8gd29yayBhbmQgbXVzdCBoYXZlIHRoZSAnY2FuX3Bpbl9tZXNzYWdlcycgYWRtaW5pc3RyYXRvciByaWdodCBpbiBhIHN1cGVyZ3JvdXAgb3IgJ2Nhbl9lZGl0X21lc3NhZ2VzJyBhZG1pbmlzdHJhdG9yIHJpZ2h0IGluIGEgY2hhbm5lbC4gUmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRhcmdldCBjaGF0IG9yIHVzZXJuYW1lIG9mIHRoZSB0YXJnZXQgY2hhbm5lbCAoaW4gdGhlIGZvcm1hdCBAY2hhbm5lbHVzZXJuYW1lKVxuICAgICAqIEBwYXJhbSBtZXNzYWdlX2lkIElkZW50aWZpZXIgb2YgYSBtZXNzYWdlIHRvIHVucGluLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgbW9zdCByZWNlbnQgcGlubmVkIG1lc3NhZ2UgKGJ5IHNlbmRpbmcgZGF0ZSkgd2lsbCBiZSB1bnBpbm5lZC5cbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSN1bnBpbmNoYXRtZXNzYWdlXG4gICAgICovXG4gICAgdW5waW5DaGF0TWVzc2FnZShcbiAgICAgICAgY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLFxuICAgICAgICBtZXNzYWdlX2lkPzogbnVtYmVyLFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LnVucGluQ2hhdE1lc3NhZ2UoeyBjaGF0X2lkLCBtZXNzYWdlX2lkIH0sIHNpZ25hbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIGNsZWFyIHRoZSBsaXN0IG9mIHBpbm5lZCBtZXNzYWdlcyBpbiBhIGNoYXQuIElmIHRoZSBjaGF0IGlzIG5vdCBhIHByaXZhdGUgY2hhdCwgdGhlIGJvdCBtdXN0IGJlIGFuIGFkbWluaXN0cmF0b3IgaW4gdGhlIGNoYXQgZm9yIHRoaXMgdG8gd29yayBhbmQgbXVzdCBoYXZlIHRoZSAnY2FuX3Bpbl9tZXNzYWdlcycgYWRtaW5pc3RyYXRvciByaWdodCBpbiBhIHN1cGVyZ3JvdXAgb3IgJ2Nhbl9lZGl0X21lc3NhZ2VzJyBhZG1pbmlzdHJhdG9yIHJpZ2h0IGluIGEgY2hhbm5lbC4gUmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRhcmdldCBjaGF0IG9yIHVzZXJuYW1lIG9mIHRoZSB0YXJnZXQgY2hhbm5lbCAoaW4gdGhlIGZvcm1hdCBAY2hhbm5lbHVzZXJuYW1lKVxuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjdW5waW5hbGxjaGF0bWVzc2FnZXNcbiAgICAgKi9cbiAgICB1bnBpbkFsbENoYXRNZXNzYWdlcyhjaGF0X2lkOiBudW1iZXIgfCBzdHJpbmcsIHNpZ25hbD86IEFib3J0U2lnbmFsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy51bnBpbkFsbENoYXRNZXNzYWdlcyh7IGNoYXRfaWQgfSwgc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgZm9yIHlvdXIgYm90IHRvIGxlYXZlIGEgZ3JvdXAsIHN1cGVyZ3JvdXAgb3IgY2hhbm5lbC4gUmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRhcmdldCBjaGF0IG9yIHVzZXJuYW1lIG9mIHRoZSB0YXJnZXQgc3VwZXJncm91cCBvciBjaGFubmVsIChpbiB0aGUgZm9ybWF0IEBjaGFubmVsdXNlcm5hbWUpXG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNsZWF2ZWNoYXRcbiAgICAgKi9cbiAgICBsZWF2ZUNoYXQoY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLCBzaWduYWw/OiBBYm9ydFNpZ25hbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcubGVhdmVDaGF0KHsgY2hhdF9pZCB9LCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBnZXQgdXAgdG8gZGF0ZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY2hhdCAoY3VycmVudCBuYW1lIG9mIHRoZSB1c2VyIGZvciBvbmUtb24tb25lIGNvbnZlcnNhdGlvbnMsIGN1cnJlbnQgdXNlcm5hbWUgb2YgYSB1c2VyLCBncm91cCBvciBjaGFubmVsLCBldGMuKS4gUmV0dXJucyBhIENoYXQgb2JqZWN0IG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRhcmdldCBjaGF0IG9yIHVzZXJuYW1lIG9mIHRoZSB0YXJnZXQgc3VwZXJncm91cCBvciBjaGFubmVsIChpbiB0aGUgZm9ybWF0IEBjaGFubmVsdXNlcm5hbWUpXG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNnZXRjaGF0XG4gICAgICovXG4gICAgZ2V0Q2hhdChjaGF0X2lkOiBudW1iZXIgfCBzdHJpbmcsIHNpZ25hbD86IEFib3J0U2lnbmFsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5nZXRDaGF0KHsgY2hhdF9pZCB9LCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBnZXQgYSBsaXN0IG9mIGFkbWluaXN0cmF0b3JzIGluIGEgY2hhdC4gT24gc3VjY2VzcywgcmV0dXJucyBhbiBBcnJheSBvZiBDaGF0TWVtYmVyIG9iamVjdHMgdGhhdCBjb250YWlucyBpbmZvcm1hdGlvbiBhYm91dCBhbGwgY2hhdCBhZG1pbmlzdHJhdG9ycyBleGNlcHQgb3RoZXIgYm90cy4gSWYgdGhlIGNoYXQgaXMgYSBncm91cCBvciBhIHN1cGVyZ3JvdXAgYW5kIG5vIGFkbWluaXN0cmF0b3JzIHdlcmUgYXBwb2ludGVkLCBvbmx5IHRoZSBjcmVhdG9yIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRhcmdldCBjaGF0IG9yIHVzZXJuYW1lIG9mIHRoZSB0YXJnZXQgc3VwZXJncm91cCBvciBjaGFubmVsIChpbiB0aGUgZm9ybWF0IEBjaGFubmVsdXNlcm5hbWUpXG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNnZXRjaGF0YWRtaW5pc3RyYXRvcnNcbiAgICAgKi9cbiAgICBnZXRDaGF0QWRtaW5pc3RyYXRvcnMoY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLCBzaWduYWw/OiBBYm9ydFNpZ25hbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuZ2V0Q2hhdEFkbWluaXN0cmF0b3JzKHsgY2hhdF9pZCB9LCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKiBAZGVwcmVjYXRlZCBVc2UgYGdldENoYXRNZW1iZXJDb3VudGAgaW5zdGVhZC4gKi9cbiAgICBnZXRDaGF0TWVtYmVyc0NvdW50KC4uLmFyZ3M6IFBhcmFtZXRlcnM8QXBpW1wiZ2V0Q2hhdE1lbWJlckNvdW50XCJdPikge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRDaGF0TWVtYmVyQ291bnQoLi4uYXJncyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIGdldCB0aGUgbnVtYmVyIG9mIG1lbWJlcnMgaW4gYSBjaGF0LiBSZXR1cm5zIEludCBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IHN1cGVyZ3JvdXAgb3IgY2hhbm5lbCAoaW4gdGhlIGZvcm1hdCBAY2hhbm5lbHVzZXJuYW1lKVxuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjZ2V0Y2hhdG1lbWJlcmNvdW50XG4gICAgICovXG4gICAgZ2V0Q2hhdE1lbWJlckNvdW50KGNoYXRfaWQ6IG51bWJlciB8IHN0cmluZywgc2lnbmFsPzogQWJvcnRTaWduYWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LmdldENoYXRNZW1iZXJDb3VudCh7IGNoYXRfaWQgfSwgc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gZ2V0IGluZm9ybWF0aW9uIGFib3V0IGEgbWVtYmVyIG9mIGEgY2hhdC4gUmV0dXJucyBhIENoYXRNZW1iZXIgb2JqZWN0IG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRhcmdldCBjaGF0IG9yIHVzZXJuYW1lIG9mIHRoZSB0YXJnZXQgc3VwZXJncm91cCBvciBjaGFubmVsIChpbiB0aGUgZm9ybWF0IEBjaGFubmVsdXNlcm5hbWUpXG4gICAgICogQHBhcmFtIHVzZXJfaWQgVW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHRhcmdldCB1c2VyXG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNnZXRjaGF0bWVtYmVyXG4gICAgICovXG4gICAgZ2V0Q2hhdE1lbWJlcihcbiAgICAgICAgY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLFxuICAgICAgICB1c2VyX2lkOiBudW1iZXIsXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuZ2V0Q2hhdE1lbWJlcih7IGNoYXRfaWQsIHVzZXJfaWQgfSwgc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gc2V0IGEgbmV3IGdyb3VwIHN0aWNrZXIgc2V0IGZvciBhIHN1cGVyZ3JvdXAuIFRoZSBib3QgbXVzdCBiZSBhbiBhZG1pbmlzdHJhdG9yIGluIHRoZSBjaGF0IGZvciB0aGlzIHRvIHdvcmsgYW5kIG11c3QgaGF2ZSB0aGUgYXBwcm9wcmlhdGUgYWRtaW5pc3RyYXRvciByaWdodHMuIFVzZSB0aGUgZmllbGQgY2FuX3NldF9zdGlja2VyX3NldCBseSByZXR1cm5lZCBpbiBnZXRDaGF0IHJlcXVlc3RzIHRvIGNoZWNrIGlmIHRoZSBib3QgY2FuIHVzZSB0aGlzIG1ldGhvZC4gUmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRhcmdldCBjaGF0IG9yIHVzZXJuYW1lIG9mIHRoZSB0YXJnZXQgc3VwZXJncm91cCAoaW4gdGhlIGZvcm1hdCBAc3VwZXJncm91cHVzZXJuYW1lKVxuICAgICAqIEBwYXJhbSBzdGlja2VyX3NldF9uYW1lIE5hbWUgb2YgdGhlIHN0aWNrZXIgc2V0IHRvIGJlIHNldCBhcyB0aGUgZ3JvdXAgc3RpY2tlciBzZXRcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NldGNoYXRzdGlja2Vyc2V0XG4gICAgICovXG4gICAgc2V0Q2hhdFN0aWNrZXJTZXQoXG4gICAgICAgIGNoYXRfaWQ6IG51bWJlciB8IHN0cmluZyxcbiAgICAgICAgc3RpY2tlcl9zZXRfbmFtZTogc3RyaW5nLFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LnNldENoYXRTdGlja2VyU2V0KFxuICAgICAgICAgICAgeyBjaGF0X2lkLCBzdGlja2VyX3NldF9uYW1lIH0sXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIGRlbGV0ZSBhIGdyb3VwIHN0aWNrZXIgc2V0IGZyb20gYSBzdXBlcmdyb3VwLiBUaGUgYm90IG11c3QgYmUgYW4gYWRtaW5pc3RyYXRvciBpbiB0aGUgY2hhdCBmb3IgdGhpcyB0byB3b3JrIGFuZCBtdXN0IGhhdmUgdGhlIGFwcHJvcHJpYXRlIGFkbWluaXN0cmF0b3IgcmlnaHRzLiBVc2UgdGhlIGZpZWxkIGNhbl9zZXRfc3RpY2tlcl9zZXQgbHkgcmV0dXJuZWQgaW4gZ2V0Q2hhdCByZXF1ZXN0cyB0byBjaGVjayBpZiB0aGUgYm90IGNhbiB1c2UgdGhpcyBtZXRob2QuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IHN1cGVyZ3JvdXAgKGluIHRoZSBmb3JtYXQgQHN1cGVyZ3JvdXB1c2VybmFtZSlcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI2RlbGV0ZWNoYXRzdGlja2Vyc2V0XG4gICAgICovXG4gICAgZGVsZXRlQ2hhdFN0aWNrZXJTZXQoY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLCBzaWduYWw/OiBBYm9ydFNpZ25hbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuZGVsZXRlQ2hhdFN0aWNrZXJTZXQoeyBjaGF0X2lkIH0sIHNpZ25hbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIHNlbmQgYW5zd2VycyB0byBjYWxsYmFjayBxdWVyaWVzIHNlbnQgZnJvbSBpbmxpbmUga2V5Ym9hcmRzLiBUaGUgYW5zd2VyIHdpbGwgYmUgZGlzcGxheWVkIHRvIHRoZSB1c2VyIGFzIGEgbm90aWZpY2F0aW9uIGF0IHRoZSB0b3Agb2YgdGhlIGNoYXQgc2NyZWVuIG9yIGFzIGFuIGFsZXJ0LiBPbiBzdWNjZXNzLCBUcnVlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQWx0ZXJuYXRpdmVseSwgdGhlIHVzZXIgY2FuIGJlIHJlZGlyZWN0ZWQgdG8gdGhlIHNwZWNpZmllZCBHYW1lIFVSTC4gRm9yIHRoaXMgb3B0aW9uIHRvIHdvcmssIHlvdSBtdXN0IGZpcnN0IGNyZWF0ZSBhIGdhbWUgZm9yIHlvdXIgYm90IHZpYSBAQm90ZmF0aGVyIGFuZCBhY2NlcHQgdGhlIHRlcm1zLiBPdGhlcndpc2UsIHlvdSBtYXkgdXNlIGxpbmtzIGxpa2UgdC5tZS95b3VyX2JvdD9zdGFydD1YWFhYIHRoYXQgb3BlbiB5b3VyIGJvdCB3aXRoIGEgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNhbGxiYWNrX3F1ZXJ5X2lkIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgcXVlcnkgdG8gYmUgYW5zd2VyZWRcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNhbnN3ZXJjYWxsYmFja3F1ZXJ5XG4gICAgICovXG4gICAgYW5zd2VyQ2FsbGJhY2tRdWVyeShcbiAgICAgICAgY2FsbGJhY2tfcXVlcnlfaWQ6IHN0cmluZyxcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxSLCBcImFuc3dlckNhbGxiYWNrUXVlcnlcIiwgXCJjYWxsYmFja19xdWVyeV9pZFwiPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5hbnN3ZXJDYWxsYmFja1F1ZXJ5KFxuICAgICAgICAgICAgeyBjYWxsYmFja19xdWVyeV9pZCwgLi4ub3RoZXIgfSxcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gY2hhbmdlIHRoZSBib3QncyBtZW51IGJ1dHRvbiBpbiBhIHByaXZhdGUgY2hhdCwgb3IgdGhlIGRlZmF1bHQgbWVudSBidXR0b24uIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2V0Y2hhdG1lbnVidXR0b25cbiAgICAgKi9cbiAgICBzZXRDaGF0TWVudUJ1dHRvbihcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxSLCBcInNldENoYXRNZW51QnV0dG9uXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LnNldENoYXRNZW51QnV0dG9uKHsgLi4ub3RoZXIgfSwgc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gZ2V0IHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSBib3QncyBtZW51IGJ1dHRvbiBpbiBhIHByaXZhdGUgY2hhdCwgb3IgdGhlIGRlZmF1bHQgbWVudSBidXR0b24uIFJldHVybnMgTWVudUJ1dHRvbiBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjZ2V0Y2hhdG1lbnVidXR0b25cbiAgICAgKi9cbiAgICBnZXRDaGF0TWVudUJ1dHRvbihcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxSLCBcImdldENoYXRNZW51QnV0dG9uXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LmdldENoYXRNZW51QnV0dG9uKHsgLi4ub3RoZXIgfSwgc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gdGhlIGNoYW5nZSB0aGUgZGVmYXVsdCBhZG1pbmlzdHJhdG9yIHJpZ2h0cyByZXF1ZXN0ZWQgYnkgdGhlIGJvdCB3aGVuIGl0J3MgYWRkZWQgYXMgYW4gYWRtaW5pc3RyYXRvciB0byBncm91cHMgb3IgY2hhbm5lbHMuIFRoZXNlIHJpZ2h0cyB3aWxsIGJlIHN1Z2dlc3RlZCB0byB1c2VycywgYnV0IHRoZXkgYXJlIGFyZSBmcmVlIHRvIG1vZGlmeSB0aGUgbGlzdCBiZWZvcmUgYWRkaW5nIHRoZSBib3QuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2V0bXlkZWZhdWx0YWRtaW5pc3RyYXRvcnJpZ2h0c1xuICAgICAqL1xuICAgIHNldE15RGVmYXVsdEFkbWluaXN0cmF0b3JSaWdodHMoXG4gICAgICAgIG90aGVyPzogT3RoZXI8UiwgXCJzZXRNeURlZmF1bHRBZG1pbmlzdHJhdG9yUmlnaHRzXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LnNldE15RGVmYXVsdEFkbWluaXN0cmF0b3JSaWdodHMoeyAuLi5vdGhlciB9LCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBnZXQgdGhlIGN1cnJlbnQgZGVmYXVsdCBhZG1pbmlzdHJhdG9yIHJpZ2h0cyBvZiB0aGUgYm90LiBSZXR1cm5zIENoYXRBZG1pbmlzdHJhdG9yUmlnaHRzIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNnZXRteWRlZmF1bHRhZG1pbmlzdHJhdG9ycmlnaHRzXG4gICAgICovXG4gICAgZ2V0TXlEZWZhdWx0QWRtaW5pc3RyYXRvclJpZ2h0cyhcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxSLCBcInNldE15RGVmYXVsdEFkbWluaXN0cmF0b3JSaWdodHNcIj4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuZ2V0TXlEZWZhdWx0QWRtaW5pc3RyYXRvclJpZ2h0cyh7IC4uLm90aGVyIH0sIHNpZ25hbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIGNoYW5nZSB0aGUgbGlzdCBvZiB0aGUgYm90J3MgY29tbWFuZHMuIFNlZSBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMjY29tbWFuZHMgZm9yIG1vcmUgZGV0YWlscyBhYm91dCBib3QgY29tbWFuZHMuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbW1hbmRzIEEgbGlzdCBvZiBib3QgY29tbWFuZHMgdG8gYmUgc2V0IGFzIHRoZSBsaXN0IG9mIHRoZSBib3QncyBjb21tYW5kcy4gQXQgbW9zdCAxMDAgY29tbWFuZHMgY2FuIGJlIHNwZWNpZmllZC5cbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNzZXRteWNvbW1hbmRzXG4gICAgICovXG4gICAgc2V0TXlDb21tYW5kcyhcbiAgICAgICAgY29tbWFuZHM6IHJlYWRvbmx5IEJvdENvbW1hbmRbXSxcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxSLCBcInNldE15Q29tbWFuZHNcIiwgXCJjb21tYW5kc1wiPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5zZXRNeUNvbW1hbmRzKHsgY29tbWFuZHMsIC4uLm90aGVyIH0sIHNpZ25hbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIGRlbGV0ZSB0aGUgbGlzdCBvZiB0aGUgYm90J3MgY29tbWFuZHMgZm9yIHRoZSBnaXZlbiBzY29wZSBhbmQgdXNlciBsYW5ndWFnZS4gQWZ0ZXIgZGVsZXRpb24sIGhpZ2hlciBsZXZlbCBjb21tYW5kcyB3aWxsIGJlIHNob3duIHRvIGFmZmVjdGVkIHVzZXJzLiBSZXR1cm5zIFRydWUgb24gc3VjY2Vzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI2RlbGV0ZW15Y29tbWFuZHNcbiAgICAgKi9cbiAgICBkZWxldGVNeUNvbW1hbmRzKFxuICAgICAgICBvdGhlcj86IE90aGVyPFIsIFwiZGVsZXRlTXlDb21tYW5kc1wiPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5kZWxldGVNeUNvbW1hbmRzKHsgLi4ub3RoZXIgfSwgc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gZ2V0IHRoZSBjdXJyZW50IGxpc3Qgb2YgdGhlIGJvdCdzIGNvbW1hbmRzIGZvciB0aGUgZ2l2ZW4gc2NvcGUgYW5kIHVzZXIgbGFuZ3VhZ2UuIFJldHVybnMgQXJyYXkgb2YgQm90Q29tbWFuZCBvbiBzdWNjZXNzLiBJZiBjb21tYW5kcyBhcmVuJ3Qgc2V0LCBhbiBlbXB0eSBsaXN0IGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjZ2V0bXljb21tYW5kc1xuICAgICAqL1xuICAgIGdldE15Q29tbWFuZHMob3RoZXI/OiBPdGhlcjxSLCBcImdldE15Q29tbWFuZHNcIj4sIHNpZ25hbD86IEFib3J0U2lnbmFsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5nZXRNeUNvbW1hbmRzKHsgLi4ub3RoZXIgfSwgc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gZWRpdCB0ZXh0IGFuZCBnYW1lIG1lc3NhZ2VzLiBPbiBzdWNjZXNzLCBpZiB0aGUgZWRpdGVkIG1lc3NhZ2UgaXMgbm90IGFuIGlubGluZSBtZXNzYWdlLCB0aGUgZWRpdGVkIE1lc3NhZ2UgaXMgcmV0dXJuZWQsIG90aGVyd2lzZSBUcnVlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IGNoYW5uZWwgKGluIHRoZSBmb3JtYXQgQGNoYW5uZWx1c2VybmFtZSlcbiAgICAgKiBAcGFyYW0gbWVzc2FnZV9pZCBJZGVudGlmaWVyIG9mIHRoZSBtZXNzYWdlIHRvIGVkaXRcbiAgICAgKiBAcGFyYW0gdGV4dCBOZXcgdGV4dCBvZiB0aGUgbWVzc2FnZSwgMS00MDk2IGNoYXJhY3RlcnMgYWZ0ZXIgZW50aXRpZXMgcGFyc2luZ1xuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI2VkaXRtZXNzYWdldGV4dFxuICAgICAqL1xuICAgIGVkaXRNZXNzYWdlVGV4dChcbiAgICAgICAgY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLFxuICAgICAgICBtZXNzYWdlX2lkOiBudW1iZXIsXG4gICAgICAgIHRleHQ6IHN0cmluZyxcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcbiAgICAgICAgICAgIFIsXG4gICAgICAgICAgICBcImVkaXRNZXNzYWdlVGV4dFwiLFxuICAgICAgICAgICAgXCJjaGF0X2lkXCIgfCBcIm1lc3NhZ2VfaWRcIiB8IFwiaW5saW5lX21lc3NhZ2VfaWRcIiB8IFwidGV4dFwiXG4gICAgICAgID4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuZWRpdE1lc3NhZ2VUZXh0KFxuICAgICAgICAgICAgeyBjaGF0X2lkLCBtZXNzYWdlX2lkLCB0ZXh0LCAuLi5vdGhlciB9LFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBlZGl0IHRleHQgYW5kIGdhbWUgaW5saW5lIG1lc3NhZ2VzLiBPbiBzdWNjZXNzLCBpZiB0aGUgZWRpdGVkIG1lc3NhZ2UgaXMgbm90IGFuIGlubGluZSBtZXNzYWdlLCB0aGUgZWRpdGVkIE1lc3NhZ2UgaXMgcmV0dXJuZWQsIG90aGVyd2lzZSBUcnVlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGlubGluZV9tZXNzYWdlX2lkIElkZW50aWZpZXIgb2YgdGhlIGlubGluZSBtZXNzYWdlXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjZWRpdG1lc3NhZ2V0ZXh0XG4gICAgICovXG4gICAgZWRpdE1lc3NhZ2VUZXh0SW5saW5lKFxuICAgICAgICBpbmxpbmVfbWVzc2FnZV9pZDogc3RyaW5nLFxuICAgICAgICB0ZXh0OiBzdHJpbmcsXG4gICAgICAgIG90aGVyPzogT3RoZXI8XG4gICAgICAgICAgICBSLFxuICAgICAgICAgICAgXCJlZGl0TWVzc2FnZVRleHRcIixcbiAgICAgICAgICAgIFwiY2hhdF9pZFwiIHwgXCJtZXNzYWdlX2lkXCIgfCBcImlubGluZV9tZXNzYWdlX2lkXCIgfCBcInRleHRcIlxuICAgICAgICA+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LmVkaXRNZXNzYWdlVGV4dChcbiAgICAgICAgICAgIHsgaW5saW5lX21lc3NhZ2VfaWQsIHRleHQsIC4uLm90aGVyIH0sXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIGVkaXQgY2FwdGlvbnMgb2YgbWVzc2FnZXMuIE9uIHN1Y2Nlc3MsIGlmIHRoZSBlZGl0ZWQgbWVzc2FnZSBpcyBub3QgYW4gaW5saW5lIG1lc3NhZ2UsIHRoZSBlZGl0ZWQgTWVzc2FnZSBpcyByZXR1cm5lZCwgb3RoZXJ3aXNlIFRydWUgaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRhcmdldCBjaGF0IG9yIHVzZXJuYW1lIG9mIHRoZSB0YXJnZXQgY2hhbm5lbCAoaW4gdGhlIGZvcm1hdCBAY2hhbm5lbHVzZXJuYW1lKVxuICAgICAqIEBwYXJhbSBtZXNzYWdlX2lkIElkZW50aWZpZXIgb2YgdGhlIG1lc3NhZ2UgdG8gZWRpdFxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI2VkaXRtZXNzYWdlY2FwdGlvblxuICAgICAqL1xuICAgIGVkaXRNZXNzYWdlQ2FwdGlvbihcbiAgICAgICAgY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLFxuICAgICAgICBtZXNzYWdlX2lkOiBudW1iZXIsXG4gICAgICAgIG90aGVyPzogT3RoZXI8XG4gICAgICAgICAgICBSLFxuICAgICAgICAgICAgXCJlZGl0TWVzc2FnZUNhcHRpb25cIixcbiAgICAgICAgICAgIFwiY2hhdF9pZFwiIHwgXCJtZXNzYWdlX2lkXCIgfCBcImlubGluZV9tZXNzYWdlX2lkXCJcbiAgICAgICAgPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5lZGl0TWVzc2FnZUNhcHRpb24oXG4gICAgICAgICAgICB7IGNoYXRfaWQsIG1lc3NhZ2VfaWQsIC4uLm90aGVyIH0sXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIGVkaXQgY2FwdGlvbnMgb2YgaW5saW5lIG1lc3NhZ2VzLiBPbiBzdWNjZXNzLCBpZiB0aGUgZWRpdGVkIG1lc3NhZ2UgaXMgbm90IGFuIGlubGluZSBtZXNzYWdlLCB0aGUgZWRpdGVkIE1lc3NhZ2UgaXMgcmV0dXJuZWQsIG90aGVyd2lzZSBUcnVlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGlubGluZV9tZXNzYWdlX2lkIElkZW50aWZpZXIgb2YgdGhlIGlubGluZSBtZXNzYWdlXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjZWRpdG1lc3NhZ2VjYXB0aW9uXG4gICAgICovXG4gICAgZWRpdE1lc3NhZ2VDYXB0aW9uSW5saW5lKFxuICAgICAgICBpbmxpbmVfbWVzc2FnZV9pZDogc3RyaW5nLFxuICAgICAgICBvdGhlcj86IE90aGVyPFxuICAgICAgICAgICAgUixcbiAgICAgICAgICAgIFwiZWRpdE1lc3NhZ2VDYXB0aW9uXCIsXG4gICAgICAgICAgICBcImNoYXRfaWRcIiB8IFwibWVzc2FnZV9pZFwiIHwgXCJpbmxpbmVfbWVzc2FnZV9pZFwiXG4gICAgICAgID4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuZWRpdE1lc3NhZ2VDYXB0aW9uKFxuICAgICAgICAgICAgeyBpbmxpbmVfbWVzc2FnZV9pZCwgLi4ub3RoZXIgfSxcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gZWRpdCBhbmltYXRpb24sIGF1ZGlvLCBkb2N1bWVudCwgcGhvdG8sIG9yIHZpZGVvIG1lc3NhZ2VzLiBJZiBhIG1lc3NhZ2UgaXMgcGFydCBvZiBhIG1lc3NhZ2UgYWxidW0sIHRoZW4gaXQgY2FuIGJlIGVkaXRlZCBvbmx5IHRvIGFuIGF1ZGlvIGZvciBhdWRpbyBhbGJ1bXMsIG9ubHkgdG8gYSBkb2N1bWVudCBmb3IgZG9jdW1lbnQgYWxidW1zIGFuZCB0byBhIHBob3RvIG9yIGEgdmlkZW8gb3RoZXJ3aXNlLiBXaGVuIGFuIGlubGluZSBtZXNzYWdlIGlzIGVkaXRlZCwgYSBuZXcgZmlsZSBjYW4ndCBiZSB1cGxvYWRlZDsgdXNlIGEgcHJldmlvdXNseSB1cGxvYWRlZCBmaWxlIHZpYSBpdHMgZmlsZV9pZCBvciBzcGVjaWZ5IGEgVVJMLiBPbiBzdWNjZXNzLCBpZiB0aGUgZWRpdGVkIG1lc3NhZ2UgaXMgbm90IGFuIGlubGluZSBtZXNzYWdlLCB0aGUgZWRpdGVkIE1lc3NhZ2UgaXMgcmV0dXJuZWQsIG90aGVyd2lzZSBUcnVlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IGNoYW5uZWwgKGluIHRoZSBmb3JtYXQgQGNoYW5uZWx1c2VybmFtZSlcbiAgICAgKiBAcGFyYW0gbWVzc2FnZV9pZCBJZGVudGlmaWVyIG9mIHRoZSBtZXNzYWdlIHRvIGVkaXRcbiAgICAgKiBAcGFyYW0gbWVkaWEgQW4gb2JqZWN0IGZvciBhIG5ldyBtZWRpYSBjb250ZW50IG9mIHRoZSBtZXNzYWdlXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjZWRpdG1lc3NhZ2VtZWRpYVxuICAgICAqL1xuICAgIGVkaXRNZXNzYWdlTWVkaWEoXG4gICAgICAgIGNoYXRfaWQ6IG51bWJlciB8IHN0cmluZyxcbiAgICAgICAgbWVzc2FnZV9pZDogbnVtYmVyLFxuICAgICAgICBtZWRpYTogSW5wdXRNZWRpYSxcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcbiAgICAgICAgICAgIFIsXG4gICAgICAgICAgICBcImVkaXRNZXNzYWdlTWVkaWFcIixcbiAgICAgICAgICAgIFwiY2hhdF9pZFwiIHwgXCJtZXNzYWdlX2lkXCIgfCBcImlubGluZV9tZXNzYWdlX2lkXCIgfCBcIm1lZGlhXCJcbiAgICAgICAgPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5lZGl0TWVzc2FnZU1lZGlhKFxuICAgICAgICAgICAgeyBjaGF0X2lkLCBtZXNzYWdlX2lkLCBtZWRpYSwgLi4ub3RoZXIgfSxcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gZWRpdCBhbmltYXRpb24sIGF1ZGlvLCBkb2N1bWVudCwgcGhvdG8sIG9yIHZpZGVvIG1lc3NhZ2VzLiBJZiBhIG1lc3NhZ2UgaXMgcGFydCBvZiBhIG1lc3NhZ2UgYWxidW0sIHRoZW4gaXQgY2FuIGJlIGVkaXRlZCBvbmx5IHRvIGFuIGF1ZGlvIGZvciBhdWRpbyBhbGJ1bXMsIG9ubHkgdG8gYSBkb2N1bWVudCBmb3IgZG9jdW1lbnQgYWxidW1zIGFuZCB0byBhIHBob3RvIG9yIGEgdmlkZW8gb3RoZXJ3aXNlLiBXaGVuIGFuIGlubGluZSBtZXNzYWdlIGlzIGVkaXRlZCwgYSBuZXcgZmlsZSBjYW4ndCBiZSB1cGxvYWRlZDsgdXNlIGEgcHJldmlvdXNseSB1cGxvYWRlZCBmaWxlIHZpYSBpdHMgZmlsZV9pZCBvciBzcGVjaWZ5IGEgVVJMLiBPbiBzdWNjZXNzLCBpZiB0aGUgZWRpdGVkIG1lc3NhZ2UgaXMgbm90IGFuIGlubGluZSBtZXNzYWdlLCB0aGUgZWRpdGVkIE1lc3NhZ2UgaXMgcmV0dXJuZWQsIG90aGVyd2lzZSBUcnVlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGlubGluZV9tZXNzYWdlX2lkIElkZW50aWZpZXIgb2YgdGhlIGlubGluZSBtZXNzYWdlXG4gICAgICogQHBhcmFtIG1lZGlhIEFuIG9iamVjdCBmb3IgYSBuZXcgbWVkaWEgY29udGVudCBvZiB0aGUgbWVzc2FnZVxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI2VkaXRtZXNzYWdlbWVkaWFcbiAgICAgKi9cbiAgICBlZGl0TWVzc2FnZU1lZGlhSW5saW5lKFxuICAgICAgICBpbmxpbmVfbWVzc2FnZV9pZDogc3RyaW5nLFxuICAgICAgICBtZWRpYTogSW5wdXRNZWRpYSxcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcbiAgICAgICAgICAgIFIsXG4gICAgICAgICAgICBcImVkaXRNZXNzYWdlTWVkaWFcIixcbiAgICAgICAgICAgIFwiY2hhdF9pZFwiIHwgXCJtZXNzYWdlX2lkXCIgfCBcImlubGluZV9tZXNzYWdlX2lkXCIgfCBcIm1lZGlhXCJcbiAgICAgICAgPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5lZGl0TWVzc2FnZU1lZGlhKFxuICAgICAgICAgICAgeyBpbmxpbmVfbWVzc2FnZV9pZCwgbWVkaWEsIC4uLm90aGVyIH0sXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIGVkaXQgb25seSB0aGUgcmVwbHkgbWFya3VwIG9mIG1lc3NhZ2VzLiBPbiBzdWNjZXNzLCBpZiB0aGUgZWRpdGVkIG1lc3NhZ2UgaXMgbm90IGFuIGlubGluZSBtZXNzYWdlLCB0aGUgZWRpdGVkIE1lc3NhZ2UgaXMgcmV0dXJuZWQsIG90aGVyd2lzZSBUcnVlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IGNoYW5uZWwgKGluIHRoZSBmb3JtYXQgQGNoYW5uZWx1c2VybmFtZSlcbiAgICAgKiBAcGFyYW0gbWVzc2FnZV9pZCBJZGVudGlmaWVyIG9mIHRoZSBtZXNzYWdlIHRvIGVkaXRcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNlZGl0bWVzc2FnZXJlcGx5bWFya3VwXG4gICAgICovXG4gICAgZWRpdE1lc3NhZ2VSZXBseU1hcmt1cChcbiAgICAgICAgY2hhdF9pZDogbnVtYmVyIHwgc3RyaW5nLFxuICAgICAgICBtZXNzYWdlX2lkOiBudW1iZXIsXG4gICAgICAgIG90aGVyPzogT3RoZXI8XG4gICAgICAgICAgICBSLFxuICAgICAgICAgICAgXCJlZGl0TWVzc2FnZVJlcGx5TWFya3VwXCIsXG4gICAgICAgICAgICBcImNoYXRfaWRcIiB8IFwibWVzc2FnZV9pZFwiIHwgXCJpbmxpbmVfbWVzc2FnZV9pZFwiXG4gICAgICAgID4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuZWRpdE1lc3NhZ2VSZXBseU1hcmt1cChcbiAgICAgICAgICAgIHsgY2hhdF9pZCwgbWVzc2FnZV9pZCwgLi4ub3RoZXIgfSxcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gZWRpdCBvbmx5IHRoZSByZXBseSBtYXJrdXAgb2YgaW5saW5lIG1lc3NhZ2VzLiBPbiBzdWNjZXNzLCBpZiB0aGUgZWRpdGVkIG1lc3NhZ2UgaXMgbm90IGFuIGlubGluZSBtZXNzYWdlLCB0aGUgZWRpdGVkIE1lc3NhZ2UgaXMgcmV0dXJuZWQsIG90aGVyd2lzZSBUcnVlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGlubGluZV9tZXNzYWdlX2lkIElkZW50aWZpZXIgb2YgdGhlIGlubGluZSBtZXNzYWdlXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjZWRpdG1lc3NhZ2VyZXBseW1hcmt1cFxuICAgICAqL1xuICAgIGVkaXRNZXNzYWdlUmVwbHlNYXJrdXBJbmxpbmUoXG4gICAgICAgIGlubGluZV9tZXNzYWdlX2lkOiBzdHJpbmcsXG4gICAgICAgIG90aGVyPzogT3RoZXI8XG4gICAgICAgICAgICBSLFxuICAgICAgICAgICAgXCJlZGl0TWVzc2FnZVJlcGx5TWFya3VwXCIsXG4gICAgICAgICAgICBcImNoYXRfaWRcIiB8IFwibWVzc2FnZV9pZFwiIHwgXCJpbmxpbmVfbWVzc2FnZV9pZFwiXG4gICAgICAgID4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuZWRpdE1lc3NhZ2VSZXBseU1hcmt1cChcbiAgICAgICAgICAgIHsgaW5saW5lX21lc3NhZ2VfaWQsIC4uLm90aGVyIH0sXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIHN0b3AgYSBwb2xsIHdoaWNoIHdhcyBzZW50IGJ5IHRoZSBib3QuIE9uIHN1Y2Nlc3MsIHRoZSBzdG9wcGVkIFBvbGwgaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2hhdF9pZCBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHRhcmdldCBjaGF0IG9yIHVzZXJuYW1lIG9mIHRoZSB0YXJnZXQgY2hhbm5lbCAoaW4gdGhlIGZvcm1hdCBAY2hhbm5lbHVzZXJuYW1lKVxuICAgICAqIEBwYXJhbSBtZXNzYWdlX2lkIElkZW50aWZpZXIgb2YgdGhlIG9yaWdpbmFsIG1lc3NhZ2Ugd2l0aCB0aGUgcG9sbFxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3N0b3Bwb2xsXG4gICAgICovXG4gICAgc3RvcFBvbGwoXG4gICAgICAgIGNoYXRfaWQ6IG51bWJlciB8IHN0cmluZyxcbiAgICAgICAgbWVzc2FnZV9pZDogbnVtYmVyLFxuICAgICAgICBvdGhlcj86IE90aGVyPFIsIFwic3RvcFBvbGxcIiwgXCJjaGF0X2lkXCIgfCBcIm1lc3NhZ2VfaWRcIj4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuc3RvcFBvbGwoeyBjaGF0X2lkLCBtZXNzYWdlX2lkLCAuLi5vdGhlciB9LCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBkZWxldGUgYSBtZXNzYWdlLCBpbmNsdWRpbmcgc2VydmljZSBtZXNzYWdlcywgd2l0aCB0aGUgZm9sbG93aW5nIGxpbWl0YXRpb25zOlxuICAgICAqIC0gQSBtZXNzYWdlIGNhbiBvbmx5IGJlIGRlbGV0ZWQgaWYgaXQgd2FzIHNlbnQgbGVzcyB0aGFuIDQ4IGhvdXJzIGFnby5cbiAgICAgKiAtIEEgZGljZSBtZXNzYWdlIGluIGEgcHJpdmF0ZSBjaGF0IGNhbiBvbmx5IGJlIGRlbGV0ZWQgaWYgaXQgd2FzIHNlbnQgbW9yZSB0aGFuIDI0IGhvdXJzIGFnby5cbiAgICAgKiAtIEJvdHMgY2FuIGRlbGV0ZSBvdXRnb2luZyBtZXNzYWdlcyBpbiBwcml2YXRlIGNoYXRzLCBncm91cHMsIGFuZCBzdXBlcmdyb3Vwcy5cbiAgICAgKiAtIEJvdHMgY2FuIGRlbGV0ZSBpbmNvbWluZyBtZXNzYWdlcyBpbiBwcml2YXRlIGNoYXRzLlxuICAgICAqIC0gQm90cyBncmFudGVkIGNhbl9wb3N0X21lc3NhZ2VzIHBlcm1pc3Npb25zIGNhbiBkZWxldGUgb3V0Z29pbmcgbWVzc2FnZXMgaW4gY2hhbm5lbHMuXG4gICAgICogLSBJZiB0aGUgYm90IGlzIGFuIGFkbWluaXN0cmF0b3Igb2YgYSBncm91cCwgaXQgY2FuIGRlbGV0ZSBhbnkgbWVzc2FnZSB0aGVyZS5cbiAgICAgKiAtIElmIHRoZSBib3QgaGFzIGNhbl9kZWxldGVfbWVzc2FnZXMgcGVybWlzc2lvbiBpbiBhIHN1cGVyZ3JvdXAgb3IgYSBjaGFubmVsLCBpdCBjYW4gZGVsZXRlIGFueSBtZXNzYWdlIHRoZXJlLlxuICAgICAqIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IGNoYW5uZWwgKGluIHRoZSBmb3JtYXQgQGNoYW5uZWx1c2VybmFtZSlcbiAgICAgKiBAcGFyYW0gbWVzc2FnZV9pZCBJZGVudGlmaWVyIG9mIHRoZSBtZXNzYWdlIHRvIGRlbGV0ZVxuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjZGVsZXRlbWVzc2FnZVxuICAgICAqL1xuICAgIGRlbGV0ZU1lc3NhZ2UoXG4gICAgICAgIGNoYXRfaWQ6IG51bWJlciB8IHN0cmluZyxcbiAgICAgICAgbWVzc2FnZV9pZDogbnVtYmVyLFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LmRlbGV0ZU1lc3NhZ2UoeyBjaGF0X2lkLCBtZXNzYWdlX2lkIH0sIHNpZ25hbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIHNlbmQgc3RhdGljIC5XRUJQLCBhbmltYXRlZCAuVEdTLCBvciB2aWRlbyAuV0VCTSBzdGlja2Vycy4gT24gc3VjY2VzcywgdGhlIHNlbnQgTWVzc2FnZSBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjaGF0X2lkIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdGFyZ2V0IGNoYXQgb3IgdXNlcm5hbWUgb2YgdGhlIHRhcmdldCBjaGFubmVsIChpbiB0aGUgZm9ybWF0IEBjaGFubmVsdXNlcm5hbWUpXG4gICAgICogQHBhcmFtIHN0aWNrZXIgU3RpY2tlciB0byBzZW5kLiBQYXNzIGEgZmlsZV9pZCBhcyBTdHJpbmcgdG8gc2VuZCBhIGZpbGUgdGhhdCBleGlzdHMgb24gdGhlIFRlbGVncmFtIHNlcnZlcnMgKHJlY29tbWVuZGVkKSwgcGFzcyBhbiBIVFRQIFVSTCBhcyBhIFN0cmluZyBmb3IgVGVsZWdyYW0gdG8gZ2V0IGEgLldFQlAgZmlsZSBmcm9tIHRoZSBJbnRlcm5ldCwgb3IgdXBsb2FkIGEgbmV3IG9uZSB1c2luZyBtdWx0aXBhcnQvZm9ybS1kYXRhLlxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NlbmRzdGlja2VyXG4gICAgICovXG4gICAgc2VuZFN0aWNrZXIoXG4gICAgICAgIGNoYXRfaWQ6IG51bWJlciB8IHN0cmluZyxcbiAgICAgICAgc3RpY2tlcjogSW5wdXRGaWxlIHwgc3RyaW5nLFxuICAgICAgICBvdGhlcj86IE90aGVyPFIsIFwic2VuZFN0aWNrZXJcIiwgXCJjaGF0X2lkXCIgfCBcInN0aWNrZXJcIj4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuc2VuZFN0aWNrZXIoeyBjaGF0X2lkLCBzdGlja2VyLCAuLi5vdGhlciB9LCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBnZXQgYSBzdGlja2VyIHNldC4gT24gc3VjY2VzcywgYSBTdGlja2VyU2V0IG9iamVjdCBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIHN0aWNrZXIgc2V0XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNnZXRzdGlja2Vyc2V0XG4gICAgICovXG4gICAgZ2V0U3RpY2tlclNldChuYW1lOiBzdHJpbmcsIHNpZ25hbD86IEFib3J0U2lnbmFsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5nZXRTdGlja2VyU2V0KHsgbmFtZSB9LCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byB1cGxvYWQgYSAuUE5HIGZpbGUgd2l0aCBhIHN0aWNrZXIgZm9yIGxhdGVyIHVzZSBpbiBjcmVhdGVOZXdTdGlja2VyU2V0IGFuZCBhZGRTdGlja2VyVG9TZXQgbWV0aG9kcyAoY2FuIGJlIHVzZWQgbXVsdGlwbGUgdGltZXMpLiBSZXR1cm5zIHRoZSB1cGxvYWRlZCBGaWxlIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdXNlcl9pZCBVc2VyIGlkZW50aWZpZXIgb2Ygc3RpY2tlciBmaWxlIG93bmVyXG4gICAgICogQHBhcmFtIHBuZ19zdGlja2VyIFBORyBpbWFnZSB3aXRoIHRoZSBzdGlja2VyLCBtdXN0IGJlIHVwIHRvIDUxMiBraWxvYnl0ZXMgaW4gc2l6ZSwgZGltZW5zaW9ucyBtdXN0IG5vdCBleGNlZWQgNTEycHgsIGFuZCBlaXRoZXIgd2lkdGggb3IgaGVpZ2h0IG11c3QgYmUgZXhhY3RseSA1MTJweC5cbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3VwbG9hZHN0aWNrZXJmaWxlXG4gICAgICovXG4gICAgdXBsb2FkU3RpY2tlckZpbGUoXG4gICAgICAgIHVzZXJfaWQ6IG51bWJlcixcbiAgICAgICAgcG5nX3N0aWNrZXI6IElucHV0RmlsZSxcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy51cGxvYWRTdGlja2VyRmlsZSh7IHVzZXJfaWQsIHBuZ19zdGlja2VyIH0sIHNpZ25hbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIGNyZWF0ZSBhIG5ldyBzdGlja2VyIHNldCBvd25lZCBieSBhIHVzZXIuIFRoZSBib3Qgd2lsbCBiZSBhYmxlIHRvIGVkaXQgdGhlIHN0aWNrZXIgc2V0IHRodXMgY3JlYXRlZC4gWW91IG11c3QgdXNlIGV4YWN0bHkgb25lIG9mIHRoZSBmaWVsZHMgcG5nX3N0aWNrZXIsIHRnc19zdGlja2VyLCBvciB3ZWJtX3N0aWNrZXIuIFJldHVybnMgVHJ1ZSBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHVzZXJfaWQgVXNlciBpZGVudGlmaWVyIG9mIGNyZWF0ZWQgc3RpY2tlciBzZXQgb3duZXJcbiAgICAgKiBAcGFyYW0gbmFtZSBTaG9ydCBuYW1lIG9mIHN0aWNrZXIgc2V0LCB0byBiZSB1c2VkIGluIHQubWUvYWRkc3RpY2tlcnMvIFVSTHMgKGUuZy4sIGFuaW1hbHMpLiBDYW4gY29udGFpbiBvbmx5IGVuZ2xpc2ggbGV0dGVycywgZGlnaXRzIGFuZCB1bmRlcnNjb3Jlcy4gTXVzdCBiZWdpbiB3aXRoIGEgbGV0dGVyLCBjYW4ndCBjb250YWluIGNvbnNlY3V0aXZlIHVuZGVyc2NvcmVzIGFuZCBtdXN0IGVuZCBpbiDigJxfYnlfPGJvdCB1c2VybmFtZT7igJ0uIDxib3RfdXNlcm5hbWU+IGlzIGNhc2UgaW5zZW5zaXRpdmUuIDEtNjQgY2hhcmFjdGVycy5cbiAgICAgKiBAcGFyYW0gdGl0bGUgU3RpY2tlciBzZXQgdGl0bGUsIDEtNjQgY2hhcmFjdGVyc1xuICAgICAqIEBwYXJhbSBlbW9qaXMgT25lIG9yIG1vcmUgZW1vamkgY29ycmVzcG9uZGluZyB0byB0aGUgc3RpY2tlclxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI2NyZWF0ZW5ld3N0aWNrZXJzZXRcbiAgICAgKi9cbiAgICBjcmVhdGVOZXdTdGlja2VyU2V0KFxuICAgICAgICB1c2VyX2lkOiBudW1iZXIsXG4gICAgICAgIG5hbWU6IHN0cmluZyxcbiAgICAgICAgdGl0bGU6IHN0cmluZyxcbiAgICAgICAgZW1vamlzOiBzdHJpbmcsXG4gICAgICAgIG90aGVyPzogT3RoZXI8XG4gICAgICAgICAgICBSLFxuICAgICAgICAgICAgXCJjcmVhdGVOZXdTdGlja2VyU2V0XCIsXG4gICAgICAgICAgICBcInVzZXJfaWRcIiB8IFwibmFtZVwiIHwgXCJ0aXRsZVwiIHwgXCJlbW9qaXNcIlxuICAgICAgICA+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LmNyZWF0ZU5ld1N0aWNrZXJTZXQoXG4gICAgICAgICAgICB7IHVzZXJfaWQsIG5hbWUsIHRpdGxlLCBlbW9qaXMsIC4uLm90aGVyIH0sXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIGFkZCBhIG5ldyBzdGlja2VyIHRvIGEgc2V0IGNyZWF0ZWQgYnkgdGhlIGJvdC4gWW91IG11c3QgdXNlIGV4YWN0bHkgb25lIG9mIHRoZSBmaWVsZHMgcG5nX3N0aWNrZXIsIHRnc19zdGlja2VyLCBvciB3ZWJtX3N0aWNrZXIuIEFuaW1hdGVkIHN0aWNrZXJzIGNhbiBiZSBhZGRlZCB0byBhbmltYXRlZCBzdGlja2VyIHNldHMgYW5kIG9ubHkgdG8gdGhlbS4gQW5pbWF0ZWQgc3RpY2tlciBzZXRzIGNhbiBoYXZlIHVwIHRvIDUwIHN0aWNrZXJzLiBTdGF0aWMgc3RpY2tlciBzZXRzIGNhbiBoYXZlIHVwIHRvIDEyMCBzdGlja2Vycy4gUmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdXNlcl9pZCBVc2VyIGlkZW50aWZpZXIgb2Ygc3RpY2tlciBzZXQgb3duZXJcbiAgICAgKiBAcGFyYW0gbmFtZSBTdGlja2VyIHNldCBuYW1lXG4gICAgICogQHBhcmFtIGVtb2ppcyBPbmUgb3IgbW9yZSBlbW9qaSBjb3JyZXNwb25kaW5nIHRvIHRoZSBzdGlja2VyXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjYWRkc3RpY2tlcnRvc2V0XG4gICAgICovXG4gICAgYWRkU3RpY2tlclRvU2V0KFxuICAgICAgICB1c2VyX2lkOiBudW1iZXIsXG4gICAgICAgIG5hbWU6IHN0cmluZyxcbiAgICAgICAgZW1vamlzOiBzdHJpbmcsXG4gICAgICAgIG90aGVyPzogT3RoZXI8UiwgXCJhZGRTdGlja2VyVG9TZXRcIiwgXCJ1c2VyX2lkXCIgfCBcIm5hbWVcIiB8IFwiZW1vamlzXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LmFkZFN0aWNrZXJUb1NldChcbiAgICAgICAgICAgIHsgdXNlcl9pZCwgbmFtZSwgZW1vamlzLCAuLi5vdGhlciB9LFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBtb3ZlIGEgc3RpY2tlciBpbiBhIHNldCBjcmVhdGVkIGJ5IHRoZSBib3QgdG8gYSBzcGVjaWZpYyBwb3NpdGlvbi4gUmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RpY2tlciBGaWxlIGlkZW50aWZpZXIgb2YgdGhlIHN0aWNrZXJcbiAgICAgKiBAcGFyYW0gcG9zaXRpb24gTmV3IHN0aWNrZXIgcG9zaXRpb24gaW4gdGhlIHNldCwgemVyby1iYXNlZFxuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2V0c3RpY2tlcnBvc2l0aW9uaW5zZXRcbiAgICAgKi9cbiAgICBzZXRTdGlja2VyUG9zaXRpb25JblNldChcbiAgICAgICAgc3RpY2tlcjogc3RyaW5nLFxuICAgICAgICBwb3NpdGlvbjogbnVtYmVyLFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LnNldFN0aWNrZXJQb3NpdGlvbkluU2V0KHsgc3RpY2tlciwgcG9zaXRpb24gfSwgc2lnbmFsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gZGVsZXRlIGEgc3RpY2tlciBmcm9tIGEgc2V0IGNyZWF0ZWQgYnkgdGhlIGJvdC4gUmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RpY2tlciBGaWxlIGlkZW50aWZpZXIgb2YgdGhlIHN0aWNrZXJcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI2RlbGV0ZXN0aWNrZXJmcm9tc2V0XG4gICAgICovXG4gICAgZGVsZXRlU3RpY2tlckZyb21TZXQoc3RpY2tlcjogc3RyaW5nLCBzaWduYWw/OiBBYm9ydFNpZ25hbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuZGVsZXRlU3RpY2tlckZyb21TZXQoeyBzdGlja2VyIH0sIHNpZ25hbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIHNldCB0aGUgdGh1bWJuYWlsIG9mIGEgc3RpY2tlciBzZXQuIEFuaW1hdGVkIHRodW1ibmFpbHMgY2FuIGJlIHNldCBmb3IgYW5pbWF0ZWQgc3RpY2tlciBzZXRzIG9ubHkuIFZpZGVvIHRodW1ibmFpbHMgY2FuIGJlIHNldCBvbmx5IGZvciB2aWRlbyBzdGlja2VyIHNldHMgb25seS4gUmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmFtZSBTdGlja2VyIHNldCBuYW1lXG4gICAgICogQHBhcmFtIHVzZXJfaWQgVXNlciBpZGVudGlmaWVyIG9mIHRoZSBzdGlja2VyIHNldCBvd25lclxuICAgICAqIEBwYXJhbSB0aHVtYiBBIFBORyBpbWFnZSB3aXRoIHRoZSB0aHVtYm5haWwsIG11c3QgYmUgdXAgdG8gMTI4IGtpbG9ieXRlcyBpbiBzaXplIGFuZCBoYXZlIHdpZHRoIGFuZCBoZWlnaHQgZXhhY3RseSAxMDBweCwgb3IgYSBUR1MgYW5pbWF0aW9uIHdpdGggdGhlIHRodW1ibmFpbCB1cCB0byAzMiBraWxvYnl0ZXMgaW4gc2l6ZTsgc2VlIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvc3RpY2tlcnMjYW5pbWF0ZWQtc3RpY2tlci1yZXF1aXJlbWVudHMgZm9yIGFuaW1hdGVkIHN0aWNrZXIgdGVjaG5pY2FsIHJlcXVpcmVtZW50cywgb3IgYSBXRUJNIHZpZGVvIHdpdGggdGhlIHRodW1ibmFpbCB1cCB0byAzMiBraWxvYnl0ZXMgaW4gc2l6ZTsgc2VlIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvc3RpY2tlcnMjdmlkZW8tc3RpY2tlci1yZXF1aXJlbWVudHMgZm9yIHZpZGVvIHN0aWNrZXIgdGVjaG5pY2FsIHJlcXVpcmVtZW50cy4gUGFzcyBhIGZpbGVfaWQgYXMgYSBTdHJpbmcgdG8gc2VuZCBhIGZpbGUgdGhhdCBhbHJlYWR5IGV4aXN0cyBvbiB0aGUgVGVsZWdyYW0gc2VydmVycywgcGFzcyBhbiBIVFRQIFVSTCBhcyBhIFN0cmluZyBmb3IgVGVsZWdyYW0gdG8gZ2V0IGEgZmlsZSBmcm9tIHRoZSBJbnRlcm5ldCwgb3IgdXBsb2FkIGEgbmV3IG9uZSB1c2luZyBtdWx0aXBhcnQvZm9ybS1kYXRhLiBNb3JlIGluZm8gb24gU2VuZGluZyBGaWxlcyDCuy4gQW5pbWF0ZWQgc3RpY2tlciBzZXQgdGh1bWJuYWlscyBjYW4ndCBiZSB1cGxvYWRlZCB2aWEgSFRUUCBVUkwuXG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNzZXRzdGlja2Vyc2V0dGh1bWJcbiAgICAgKi9cbiAgICBzZXRTdGlja2VyU2V0VGh1bWIoXG4gICAgICAgIG5hbWU6IHN0cmluZyxcbiAgICAgICAgdXNlcl9pZDogbnVtYmVyLFxuICAgICAgICB0aHVtYj86IElucHV0RmlsZSB8IHN0cmluZyxcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5zZXRTdGlja2VyU2V0VGh1bWIoeyBuYW1lLCB1c2VyX2lkLCB0aHVtYiB9LCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBzZW5kIGFuc3dlcnMgdG8gYW4gaW5saW5lIHF1ZXJ5LiBPbiBzdWNjZXNzLCBUcnVlIGlzIHJldHVybmVkLlxuICAgICAqIE5vIG1vcmUgdGhhbiA1MCByZXN1bHRzIHBlciBxdWVyeSBhcmUgYWxsb3dlZC5cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6IEFuIGlubGluZSBib3QgdGhhdCBzZW5kcyBZb3VUdWJlIHZpZGVvcyBjYW4gYXNrIHRoZSB1c2VyIHRvIGNvbm5lY3QgdGhlIGJvdCB0byB0aGVpciBZb3VUdWJlIGFjY291bnQgdG8gYWRhcHQgc2VhcmNoIHJlc3VsdHMgYWNjb3JkaW5nbHkuIFRvIGRvIHRoaXMsIGl0IGRpc3BsYXlzIGEgJ0Nvbm5lY3QgeW91ciBZb3VUdWJlIGFjY291bnQnIGJ1dHRvbiBhYm92ZSB0aGUgcmVzdWx0cywgb3IgZXZlbiBiZWZvcmUgc2hvd2luZyBhbnkuIFRoZSB1c2VyIHByZXNzZXMgdGhlIGJ1dHRvbiwgc3dpdGNoZXMgdG8gYSBwcml2YXRlIGNoYXQgd2l0aCB0aGUgYm90IGFuZCwgaW4gZG9pbmcgc28sIHBhc3NlcyBhIHN0YXJ0IHBhcmFtZXRlciB0aGF0IGluc3RydWN0cyB0aGUgYm90IHRvIHJldHVybiBhbiBPQXV0aCBsaW5rLiBPbmNlIGRvbmUsIHRoZSBib3QgY2FuIG9mZmVyIGEgc3dpdGNoX2lubGluZSBidXR0b24gc28gdGhhdCB0aGUgdXNlciBjYW4gZWFzaWx5IHJldHVybiB0byB0aGUgY2hhdCB3aGVyZSB0aGV5IHdhbnRlZCB0byB1c2UgdGhlIGJvdCdzIGlubGluZSBjYXBhYmlsaXRpZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5saW5lX3F1ZXJ5X2lkIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgYW5zd2VyZWQgcXVlcnlcbiAgICAgKiBAcGFyYW0gcmVzdWx0cyBBbiBhcnJheSBvZiByZXN1bHRzIGZvciB0aGUgaW5saW5lIHF1ZXJ5XG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjYW5zd2VyaW5saW5lcXVlcnlcbiAgICAgKi9cbiAgICBhbnN3ZXJJbmxpbmVRdWVyeShcbiAgICAgICAgaW5saW5lX3F1ZXJ5X2lkOiBzdHJpbmcsXG4gICAgICAgIHJlc3VsdHM6IHJlYWRvbmx5IElubGluZVF1ZXJ5UmVzdWx0W10sXG4gICAgICAgIG90aGVyPzogT3RoZXI8UiwgXCJhbnN3ZXJJbmxpbmVRdWVyeVwiLCBcImlubGluZV9xdWVyeV9pZFwiIHwgXCJyZXN1bHRzXCI+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LmFuc3dlcklubGluZVF1ZXJ5KFxuICAgICAgICAgICAgeyBpbmxpbmVfcXVlcnlfaWQsIHJlc3VsdHMsIC4uLm90aGVyIH0sXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIHNldCB0aGUgcmVzdWx0IG9mIGFuIGludGVyYWN0aW9uIHdpdGggYSBXZWIgQXBwIGFuZCBzZW5kIGEgY29ycmVzcG9uZGluZyBtZXNzYWdlIG9uIGJlaGFsZiBvZiB0aGUgdXNlciB0byB0aGUgY2hhdCBmcm9tIHdoaWNoIHRoZSBxdWVyeSBvcmlnaW5hdGVkLiBPbiBzdWNjZXNzLCBhIFNlbnRXZWJBcHBNZXNzYWdlIG9iamVjdCBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB3ZWJfYXBwX3F1ZXJ5X2lkIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgcXVlcnkgdG8gYmUgYW5zd2VyZWRcbiAgICAgKiBAcGFyYW0gcmVzdWx0IEFuIG9iamVjdCBkZXNjcmliaW5nIHRoZSBtZXNzYWdlIHRvIGJlIHNlbnRcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI2Fuc3dlcmlubGluZXF1ZXJ5XG4gICAgICovXG4gICAgYW5zd2VyV2ViQXBwUXVlcnkoXG4gICAgICAgIHdlYl9hcHBfcXVlcnlfaWQ6IHN0cmluZyxcbiAgICAgICAgcmVzdWx0OiBJbmxpbmVRdWVyeVJlc3VsdCxcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5hbnN3ZXJXZWJBcHBRdWVyeSh7IHdlYl9hcHBfcXVlcnlfaWQsIHJlc3VsdCB9LCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBzZW5kIGludm9pY2VzLiBPbiBzdWNjZXNzLCB0aGUgc2VudCBNZXNzYWdlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdCBvciB1c2VybmFtZSBvZiB0aGUgdGFyZ2V0IGNoYW5uZWwgKGluIHRoZSBmb3JtYXQgQGNoYW5uZWx1c2VybmFtZSlcbiAgICAgKiBAcGFyYW0gdGl0bGUgUHJvZHVjdCBuYW1lLCAxLTMyIGNoYXJhY3RlcnNcbiAgICAgKiBAcGFyYW0gZGVzY3JpcHRpb24gUHJvZHVjdCBkZXNjcmlwdGlvbiwgMS0yNTUgY2hhcmFjdGVyc1xuICAgICAqIEBwYXJhbSBwYXlsb2FkIEJvdC1kZWZpbmVkIGludm9pY2UgcGF5bG9hZCwgMS0xMjggYnl0ZXMuIFRoaXMgd2lsbCBub3QgYmUgZGlzcGxheWVkIHRvIHRoZSB1c2VyLCB1c2UgZm9yIHlvdXIgaW50ZXJuYWwgcHJvY2Vzc2VzLlxuICAgICAqIEBwYXJhbSBwcm92aWRlcl90b2tlbiBQYXltZW50cyBwcm92aWRlciB0b2tlbiwgb2J0YWluZWQgdmlhIEJvdGZhdGhlclxuICAgICAqIEBwYXJhbSBjdXJyZW5jeSBUaHJlZS1sZXR0ZXIgSVNPIDQyMTcgY3VycmVuY3kgY29kZSwgc2VlIG1vcmUgb24gY3VycmVuY2llc1xuICAgICAqIEBwYXJhbSBwcmljZXMgUHJpY2UgYnJlYWtkb3duLCBhIGxpc3Qgb2YgY29tcG9uZW50cyAoZS5nLiBwcm9kdWN0IHByaWNlLCB0YXgsIGRpc2NvdW50LCBkZWxpdmVyeSBjb3N0LCBkZWxpdmVyeSB0YXgsIGJvbnVzLCBldGMuKVxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NlbmRpbnZvaWNlXG4gICAgICovXG4gICAgc2VuZEludm9pY2UoXG4gICAgICAgIGNoYXRfaWQ6IG51bWJlciB8IHN0cmluZyxcbiAgICAgICAgdGl0bGU6IHN0cmluZyxcbiAgICAgICAgZGVzY3JpcHRpb246IHN0cmluZyxcbiAgICAgICAgcGF5bG9hZDogc3RyaW5nLFxuICAgICAgICBwcm92aWRlcl90b2tlbjogc3RyaW5nLFxuICAgICAgICBjdXJyZW5jeTogc3RyaW5nLFxuICAgICAgICBwcmljZXM6IHJlYWRvbmx5IExhYmVsZWRQcmljZVtdLFxuICAgICAgICBvdGhlcj86IE90aGVyPFxuICAgICAgICAgICAgUixcbiAgICAgICAgICAgIFwic2VuZEludm9pY2VcIixcbiAgICAgICAgICAgIHwgXCJjaGF0X2lkXCJcbiAgICAgICAgICAgIHwgXCJ0aXRsZVwiXG4gICAgICAgICAgICB8IFwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgfCBcInBheWxvYWRcIlxuICAgICAgICAgICAgfCBcInByb3ZpZGVyX3Rva2VuXCJcbiAgICAgICAgICAgIHwgXCJjdXJyZW5jeVwiXG4gICAgICAgICAgICB8IFwicHJpY2VzXCJcbiAgICAgICAgPixcbiAgICAgICAgc2lnbmFsPzogQWJvcnRTaWduYWwsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhdy5zZW5kSW52b2ljZSh7XG4gICAgICAgICAgICBjaGF0X2lkLFxuICAgICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHBheWxvYWQsXG4gICAgICAgICAgICBwcm92aWRlcl90b2tlbixcbiAgICAgICAgICAgIGN1cnJlbmN5LFxuICAgICAgICAgICAgcHJpY2VzLFxuICAgICAgICAgICAgLi4ub3RoZXIsXG4gICAgICAgIH0sIHNpZ25hbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIGNyZWF0ZSBhIGxpbmsgZm9yIGFuIGludm9pY2UuIFJldHVybnMgdGhlIGNyZWF0ZWQgaW52b2ljZSBsaW5rIGFzIFN0cmluZyBvbiBzdWNjZXNzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRpdGxlIFByb2R1Y3QgbmFtZSwgMS0zMiBjaGFyYWN0ZXJzXG4gICAgICogQHBhcmFtIGRlc2NyaXB0aW9uIFByb2R1Y3QgZGVzY3JpcHRpb24sIDEtMjU1IGNoYXJhY3RlcnNcbiAgICAgKiBAcGFyYW0gcGF5bG9hZCBCb3QtZGVmaW5lZCBpbnZvaWNlIHBheWxvYWQsIDEtMTI4IGJ5dGVzLiBUaGlzIHdpbGwgbm90IGJlIGRpc3BsYXllZCB0byB0aGUgdXNlciwgdXNlIGZvciB5b3VyIGludGVybmFsIHByb2Nlc3Nlcy5cbiAgICAgKiBAcGFyYW0gcHJvdmlkZXJfdG9rZW4gUGF5bWVudCBwcm92aWRlciB0b2tlbiwgb2J0YWluZWQgdmlhIEJvdEZhdGhlclxuICAgICAqIEBwYXJhbSBjdXJyZW5jeSBUaHJlZS1sZXR0ZXIgSVNPIDQyMTcgY3VycmVuY3kgY29kZSwgc2VlIG1vcmUgb24gY3VycmVuY2llc1xuICAgICAqIEBwYXJhbSBwcmljZXMgUHJpY2UgYnJlYWtkb3duLCBhIEpTT04tc2VyaWFsaXplZCBsaXN0IG9mIGNvbXBvbmVudHMgKGUuZy4gcHJvZHVjdCBwcmljZSwgdGF4LCBkaXNjb3VudCwgZGVsaXZlcnkgY29zdCwgZGVsaXZlcnkgdGF4LCBib251cywgZXRjLilcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNjcmVhdGVpbnZvaWNlbGlua1xuICAgICAqL1xuICAgIGNyZWF0ZUludm9pY2VMaW5rKFxuICAgICAgICB0aXRsZTogc3RyaW5nLFxuICAgICAgICBkZXNjcmlwdGlvbjogc3RyaW5nLFxuICAgICAgICBwYXlsb2FkOiBzdHJpbmcsXG4gICAgICAgIHByb3ZpZGVyX3Rva2VuOiBzdHJpbmcsXG4gICAgICAgIGN1cnJlbmN5OiBzdHJpbmcsXG4gICAgICAgIHByaWNlczogTGFiZWxlZFByaWNlW10sXG4gICAgICAgIG90aGVyPzogT3RoZXI8XG4gICAgICAgICAgICBSLFxuICAgICAgICAgICAgXCJjcmVhdGVJbnZvaWNlTGlua1wiLFxuICAgICAgICAgICAgfCBcInRpdGxlXCJcbiAgICAgICAgICAgIHwgXCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICB8IFwicGF5bG9hZFwiXG4gICAgICAgICAgICB8IFwicHJvdmlkZXJfdG9rZW5cIlxuICAgICAgICAgICAgfCBcImN1cnJlbmN5XCJcbiAgICAgICAgICAgIHwgXCJwcmljZXNcIlxuICAgICAgICA+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LmNyZWF0ZUludm9pY2VMaW5rKHtcbiAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgcHJvdmlkZXJfdG9rZW4sXG4gICAgICAgICAgICBjdXJyZW5jeSxcbiAgICAgICAgICAgIHByaWNlcyxcbiAgICAgICAgICAgIC4uLm90aGVyLFxuICAgICAgICB9LCBzaWduYWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElmIHlvdSBzZW50IGFuIGludm9pY2UgcmVxdWVzdGluZyBhIHNoaXBwaW5nIGFkZHJlc3MgYW5kIHRoZSBwYXJhbWV0ZXIgaXNfZmxleGlibGUgd2FzIHNwZWNpZmllZCwgdGhlIEJvdCBBUEkgd2lsbCBzZW5kIGFuIFVwZGF0ZSB3aXRoIGEgc2hpcHBpbmdfcXVlcnkgZmllbGQgdG8gdGhlIGJvdC4gVXNlIHRoaXMgbWV0aG9kIHRvIHJlcGx5IHRvIHNoaXBwaW5nIHF1ZXJpZXMuIE9uIHN1Y2Nlc3MsIFRydWUgaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2hpcHBpbmdfcXVlcnlfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBxdWVyeSB0byBiZSBhbnN3ZXJlZFxuICAgICAqIEBwYXJhbSBvayBTcGVjaWZ5IFRydWUgaWYgZGVsaXZlcnkgdG8gdGhlIHNwZWNpZmllZCBhZGRyZXNzIGlzIHBvc3NpYmxlIGFuZCBGYWxzZSBpZiB0aGVyZSBhcmUgYW55IHByb2JsZW1zIChmb3IgZXhhbXBsZSwgaWYgZGVsaXZlcnkgdG8gdGhlIHNwZWNpZmllZCBhZGRyZXNzIGlzIG5vdCBwb3NzaWJsZSlcbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNhbnN3ZXJzaGlwcGluZ3F1ZXJ5XG4gICAgICovXG4gICAgYW5zd2VyU2hpcHBpbmdRdWVyeShcbiAgICAgICAgc2hpcHBpbmdfcXVlcnlfaWQ6IHN0cmluZyxcbiAgICAgICAgb2s6IGJvb2xlYW4sXG4gICAgICAgIG90aGVyPzogT3RoZXI8UiwgXCJhbnN3ZXJTaGlwcGluZ1F1ZXJ5XCIsIFwic2hpcHBpbmdfcXVlcnlfaWRcIiB8IFwib2tcIj4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuYW5zd2VyU2hpcHBpbmdRdWVyeShcbiAgICAgICAgICAgIHsgc2hpcHBpbmdfcXVlcnlfaWQsIG9rLCAuLi5vdGhlciB9LFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9uY2UgdGhlIHVzZXIgaGFzIGNvbmZpcm1lZCB0aGVpciBwYXltZW50IGFuZCBzaGlwcGluZyBkZXRhaWxzLCB0aGUgQm90IEFQSSBzZW5kcyB0aGUgZmluYWwgY29uZmlybWF0aW9uIGluIHRoZSBmb3JtIG9mIGFuIFVwZGF0ZSB3aXRoIHRoZSBmaWVsZCBwcmVfY2hlY2tvdXRfcXVlcnkuIFVzZSB0aGlzIG1ldGhvZCB0byByZXNwb25kIHRvIHN1Y2ggcHJlLWNoZWNrb3V0IHF1ZXJpZXMuIE9uIHN1Y2Nlc3MsIFRydWUgaXMgcmV0dXJuZWQuIE5vdGU6IFRoZSBCb3QgQVBJIG11c3QgcmVjZWl2ZSBhbiBhbnN3ZXIgd2l0aGluIDEwIHNlY29uZHMgYWZ0ZXIgdGhlIHByZS1jaGVja291dCBxdWVyeSB3YXMgc2VudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwcmVfY2hlY2tvdXRfcXVlcnlfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBxdWVyeSB0byBiZSBhbnN3ZXJlZFxuICAgICAqIEBwYXJhbSBvayBTcGVjaWZ5IFRydWUgaWYgZXZlcnl0aGluZyBpcyBhbHJpZ2h0IChnb29kcyBhcmUgYXZhaWxhYmxlLCBldGMuKSBhbmQgdGhlIGJvdCBpcyByZWFkeSB0byBwcm9jZWVkIHdpdGggdGhlIG9yZGVyLiBVc2UgRmFsc2UgaWYgdGhlcmUgYXJlIGFueSBwcm9ibGVtcy5cbiAgICAgKiBAcGFyYW0gb3RoZXIgT3B0aW9uYWwgcmVtYWluaW5nIHBhcmFtZXRlcnMsIGNvbmZlciB0aGUgb2ZmaWNpYWwgcmVmZXJlbmNlIGJlbG93XG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNhbnN3ZXJwcmVjaGVja291dHF1ZXJ5XG4gICAgICovXG4gICAgYW5zd2VyUHJlQ2hlY2tvdXRRdWVyeShcbiAgICAgICAgcHJlX2NoZWNrb3V0X3F1ZXJ5X2lkOiBzdHJpbmcsXG4gICAgICAgIG9rOiBib29sZWFuLFxuICAgICAgICBvdGhlcj86IE90aGVyPFxuICAgICAgICAgICAgUixcbiAgICAgICAgICAgIFwiYW5zd2VyUHJlQ2hlY2tvdXRRdWVyeVwiLFxuICAgICAgICAgICAgXCJwcmVfY2hlY2tvdXRfcXVlcnlfaWRcIiB8IFwib2tcIlxuICAgICAgICA+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LmFuc3dlclByZUNoZWNrb3V0UXVlcnkoXG4gICAgICAgICAgICB7IHByZV9jaGVja291dF9xdWVyeV9pZCwgb2ssIC4uLm90aGVyIH0sXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5mb3JtcyBhIHVzZXIgdGhhdCBzb21lIG9mIHRoZSBUZWxlZ3JhbSBQYXNzcG9ydCBlbGVtZW50cyB0aGV5IHByb3ZpZGVkIGNvbnRhaW5zIGVycm9ycy4gVGhlIHVzZXIgd2lsbCBub3QgYmUgYWJsZSB0byByZS1zdWJtaXQgdGhlaXIgUGFzc3BvcnQgdG8geW91IHVudGlsIHRoZSBlcnJvcnMgYXJlIGZpeGVkICh0aGUgY29udGVudHMgb2YgdGhlIGZpZWxkIGZvciB3aGljaCB5b3UgcmV0dXJuZWQgdGhlIGVycm9yIG11c3QgY2hhbmdlKS4gUmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MuXG4gICAgICpcbiAgICAgKiBVc2UgdGhpcyBpZiB0aGUgZGF0YSBzdWJtaXR0ZWQgYnkgdGhlIHVzZXIgZG9lc24ndCBzYXRpc2Z5IHRoZSBzdGFuZGFyZHMgeW91ciBzZXJ2aWNlIHJlcXVpcmVzIGZvciBhbnkgcmVhc29uLiBGb3IgZXhhbXBsZSwgaWYgYSBiaXJ0aGRheSBkYXRlIHNlZW1zIGludmFsaWQsIGEgc3VibWl0dGVkIGRvY3VtZW50IGlzIGJsdXJyeSwgYSBzY2FuIHNob3dzIGV2aWRlbmNlIG9mIHRhbXBlcmluZywgZXRjLiBTdXBwbHkgc29tZSBkZXRhaWxzIGluIHRoZSBlcnJvciBtZXNzYWdlIHRvIG1ha2Ugc3VyZSB0aGUgdXNlciBrbm93cyBob3cgdG8gY29ycmVjdCB0aGUgaXNzdWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHVzZXJfaWQgVXNlciBpZGVudGlmaWVyXG4gICAgICogQHBhcmFtIGVycm9ycyBBbiBhcnJheSBkZXNjcmliaW5nIHRoZSBlcnJvcnNcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NldHBhc3Nwb3J0ZGF0YWVycm9yc1xuICAgICAqL1xuICAgIHNldFBhc3Nwb3J0RGF0YUVycm9ycyhcbiAgICAgICAgdXNlcl9pZDogbnVtYmVyLFxuICAgICAgICBlcnJvcnM6IHJlYWRvbmx5IFBhc3Nwb3J0RWxlbWVudEVycm9yW10sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuc2V0UGFzc3BvcnREYXRhRXJyb3JzKHsgdXNlcl9pZCwgZXJyb3JzIH0sIHNpZ25hbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIHNlbmQgYSBnYW1lLiBPbiBzdWNjZXNzLCB0aGUgc2VudCBNZXNzYWdlIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdFxuICAgICAqIEBwYXJhbSBnYW1lX3Nob3J0X25hbWUgU2hvcnQgbmFtZSBvZiB0aGUgZ2FtZSwgc2VydmVzIGFzIHRoZSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGdhbWUuIFNldCB1cCB5b3VyIGdhbWVzIHZpYSBCb3RmYXRoZXIuXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2VuZGdhbWVcbiAgICAgKi9cbiAgICBzZW5kR2FtZShcbiAgICAgICAgY2hhdF9pZDogbnVtYmVyLFxuICAgICAgICBnYW1lX3Nob3J0X25hbWU6IHN0cmluZyxcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxSLCBcInNlbmRHYW1lXCIsIFwiY2hhdF9pZFwiIHwgXCJnYW1lX3Nob3J0X25hbWVcIj4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuc2VuZEdhbWUoXG4gICAgICAgICAgICB7IGNoYXRfaWQsIGdhbWVfc2hvcnRfbmFtZSwgLi4ub3RoZXIgfSxcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gc2V0IHRoZSBzY29yZSBvZiB0aGUgc3BlY2lmaWVkIHVzZXIgaW4gYSBnYW1lIG1lc3NhZ2UuIE9uIHN1Y2Nlc3MsIGlmIHRoZSBtZXNzYWdlIGlzIG5vdCBhbiBpbmxpbmUgbWVzc2FnZSwgdGhlIE1lc3NhZ2UgaXMgcmV0dXJuZWQsIG90aGVyd2lzZSBUcnVlIGlzIHJldHVybmVkLiBSZXR1cm5zIGFuIGVycm9yLCBpZiB0aGUgbmV3IHNjb3JlIGlzIG5vdCBncmVhdGVyIHRoYW4gdGhlIHVzZXIncyBjdXJyZW50IHNjb3JlIGluIHRoZSBjaGF0IGFuZCBmb3JjZSBpcyBGYWxzZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjaGF0X2lkIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdGFyZ2V0IGNoYXRcbiAgICAgKiBAcGFyYW0gbWVzc2FnZV9pZCBJZGVudGlmaWVyIG9mIHRoZSBzZW50IG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0gdXNlcl9pZCBVc2VyIGlkZW50aWZpZXJcbiAgICAgKiBAcGFyYW0gc2NvcmUgTmV3IHNjb3JlLCBtdXN0IGJlIG5vbi1uZWdhdGl2ZVxuICAgICAqIEBwYXJhbSBvdGhlciBPcHRpb25hbCByZW1haW5pbmcgcGFyYW1ldGVycywgY29uZmVyIHRoZSBvZmZpY2lhbCByZWZlcmVuY2UgYmVsb3dcbiAgICAgKiBAcGFyYW0gc2lnbmFsIE9wdGlvbmFsIGBBYm9ydFNpZ25hbGAgdG8gY2FuY2VsIHRoZSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiAqKk9mZmljaWFsIHJlZmVyZW5jZToqKiBodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI3NldGdhbWVzY29yZVxuICAgICAqL1xuICAgIHNldEdhbWVTY29yZShcbiAgICAgICAgY2hhdF9pZDogbnVtYmVyLFxuICAgICAgICBtZXNzYWdlX2lkOiBudW1iZXIsXG4gICAgICAgIHVzZXJfaWQ6IG51bWJlcixcbiAgICAgICAgc2NvcmU6IG51bWJlcixcbiAgICAgICAgb3RoZXI/OiBPdGhlcjxcbiAgICAgICAgICAgIFIsXG4gICAgICAgICAgICBcInNldEdhbWVTY29yZVwiLFxuICAgICAgICAgICAgXCJjaGF0X2lkXCIgfCBcIm1lc3NhZ2VfaWRcIiB8IFwiaW5saW5lX21lc3NhZ2VfaWRcIiB8IFwidXNlcl9pZFwiIHwgXCJzY29yZVwiXG4gICAgICAgID4sXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuc2V0R2FtZVNjb3JlKFxuICAgICAgICAgICAgeyBjaGF0X2lkLCBtZXNzYWdlX2lkLCB1c2VyX2lkLCBzY29yZSwgLi4ub3RoZXIgfSxcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gc2V0IHRoZSBzY29yZSBvZiB0aGUgc3BlY2lmaWVkIHVzZXIgaW4gYSBnYW1lIG1lc3NhZ2UuIE9uIHN1Y2Nlc3MsIGlmIHRoZSBtZXNzYWdlIGlzIG5vdCBhbiBpbmxpbmUgbWVzc2FnZSwgdGhlIE1lc3NhZ2UgaXMgcmV0dXJuZWQsIG90aGVyd2lzZSBUcnVlIGlzIHJldHVybmVkLiBSZXR1cm5zIGFuIGVycm9yLCBpZiB0aGUgbmV3IHNjb3JlIGlzIG5vdCBncmVhdGVyIHRoYW4gdGhlIHVzZXIncyBjdXJyZW50IHNjb3JlIGluIHRoZSBjaGF0IGFuZCBmb3JjZSBpcyBGYWxzZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbmxpbmVfbWVzc2FnZV9pZCBJZGVudGlmaWVyIG9mIHRoZSBpbmxpbmUgbWVzc2FnZVxuICAgICAqIEBwYXJhbSB1c2VyX2lkIFVzZXIgaWRlbnRpZmllclxuICAgICAqIEBwYXJhbSBzY29yZSBOZXcgc2NvcmUsIG11c3QgYmUgbm9uLW5lZ2F0aXZlXG4gICAgICogQHBhcmFtIG90aGVyIE9wdGlvbmFsIHJlbWFpbmluZyBwYXJhbWV0ZXJzLCBjb25mZXIgdGhlIG9mZmljaWFsIHJlZmVyZW5jZSBiZWxvd1xuICAgICAqIEBwYXJhbSBzaWduYWwgT3B0aW9uYWwgYEFib3J0U2lnbmFsYCB0byBjYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgKlxuICAgICAqICoqT2ZmaWNpYWwgcmVmZXJlbmNlOioqIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvYm90cy9hcGkjc2V0Z2FtZXNjb3JlXG4gICAgICovXG4gICAgc2V0R2FtZVNjb3JlSW5saW5lKFxuICAgICAgICBpbmxpbmVfbWVzc2FnZV9pZDogc3RyaW5nLFxuICAgICAgICB1c2VyX2lkOiBudW1iZXIsXG4gICAgICAgIHNjb3JlOiBudW1iZXIsXG4gICAgICAgIG90aGVyPzogT3RoZXI8XG4gICAgICAgICAgICBSLFxuICAgICAgICAgICAgXCJzZXRHYW1lU2NvcmVcIixcbiAgICAgICAgICAgIFwiY2hhdF9pZFwiIHwgXCJtZXNzYWdlX2lkXCIgfCBcImlubGluZV9tZXNzYWdlX2lkXCIgfCBcInVzZXJfaWRcIiB8IFwic2NvcmVcIlxuICAgICAgICA+LFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LnNldEdhbWVTY29yZShcbiAgICAgICAgICAgIHsgaW5saW5lX21lc3NhZ2VfaWQsIHVzZXJfaWQsIHNjb3JlLCAuLi5vdGhlciB9LFxuICAgICAgICAgICAgc2lnbmFsLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB0byBnZXQgZGF0YSBmb3IgaGlnaCBzY29yZSB0YWJsZXMuIFdpbGwgcmV0dXJuIHRoZSBzY29yZSBvZiB0aGUgc3BlY2lmaWVkIHVzZXIgYW5kIHNldmVyYWwgb2YgdGhlaXIgbmVpZ2hib3JzIGluIGEgZ2FtZS4gT24gc3VjY2VzcywgcmV0dXJucyBhbiBBcnJheSBvZiBHYW1lSGlnaFNjb3JlIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCB3aWxsIGN1cnJlbnRseSByZXR1cm4gc2NvcmVzIGZvciB0aGUgdGFyZ2V0IHVzZXIsIHBsdXMgdHdvIG9mIHRoZWlyIGNsb3Nlc3QgbmVpZ2hib3JzIG9uIGVhY2ggc2lkZS4gV2lsbCBhbHNvIHJldHVybiB0aGUgdG9wIHRocmVlIHVzZXJzIGlmIHRoZSB1c2VyIGFuZCBoaXMgbmVpZ2hib3JzIGFyZSBub3QgYW1vbmcgdGhlbS4gUGxlYXNlIG5vdGUgdGhhdCB0aGlzIGJlaGF2aW9yIGlzIHN1YmplY3QgdG8gY2hhbmdlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYXRfaWQgVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB0YXJnZXQgY2hhdFxuICAgICAqIEBwYXJhbSBtZXNzYWdlX2lkIElkZW50aWZpZXIgb2YgdGhlIHNlbnQgbWVzc2FnZVxuICAgICAqIEBwYXJhbSB1c2VyX2lkIFRhcmdldCB1c2VyIGlkXG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNnZXRnYW1laGlnaHNjb3Jlc1xuICAgICAqL1xuICAgIGdldEdhbWVIaWdoU2NvcmVzKFxuICAgICAgICBjaGF0X2lkOiBudW1iZXIsXG4gICAgICAgIG1lc3NhZ2VfaWQ6IG51bWJlcixcbiAgICAgICAgdXNlcl9pZDogbnVtYmVyLFxuICAgICAgICBzaWduYWw/OiBBYm9ydFNpZ25hbCxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3LmdldEdhbWVIaWdoU2NvcmVzKFxuICAgICAgICAgICAgeyBjaGF0X2lkLCBtZXNzYWdlX2lkLCB1c2VyX2lkIH0sXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIGdldCBkYXRhIGZvciBoaWdoIHNjb3JlIHRhYmxlcy4gV2lsbCByZXR1cm4gdGhlIHNjb3JlIG9mIHRoZSBzcGVjaWZpZWQgdXNlciBhbmQgc2V2ZXJhbCBvZiB0aGVpciBuZWlnaGJvcnMgaW4gYW4gaW5saW5lIGdhbWUuIE9uIHN1Y2Nlc3MsIHJldHVybnMgYW4gQXJyYXkgb2YgR2FtZUhpZ2hTY29yZSBvYmplY3RzLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCBjdXJyZW50bHkgcmV0dXJuIHNjb3JlcyBmb3IgdGhlIHRhcmdldCB1c2VyLCBwbHVzIHR3byBvZiB0aGVpciBjbG9zZXN0IG5laWdoYm9ycyBvbiBlYWNoIHNpZGUuIFdpbGwgYWxzbyByZXR1cm4gdGhlIHRvcCB0aHJlZSB1c2VycyBpZiB0aGUgdXNlciBhbmQgaGlzIG5laWdoYm9ycyBhcmUgbm90IGFtb25nIHRoZW0uIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBiZWhhdmlvciBpcyBzdWJqZWN0IHRvIGNoYW5nZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbmxpbmVfbWVzc2FnZV9pZCBJZGVudGlmaWVyIG9mIHRoZSBpbmxpbmUgbWVzc2FnZVxuICAgICAqIEBwYXJhbSB1c2VyX2lkIFRhcmdldCB1c2VyIGlkXG4gICAgICogQHBhcmFtIHNpZ25hbCBPcHRpb25hbCBgQWJvcnRTaWduYWxgIHRvIGNhbmNlbCB0aGUgcmVxdWVzdFxuICAgICAqXG4gICAgICogKipPZmZpY2lhbCByZWZlcmVuY2U6KiogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNnZXRnYW1laGlnaHNjb3Jlc1xuICAgICAqL1xuICAgIGdldEdhbWVIaWdoU2NvcmVzSW5saW5lKFxuICAgICAgICBpbmxpbmVfbWVzc2FnZV9pZDogc3RyaW5nLFxuICAgICAgICB1c2VyX2lkOiBudW1iZXIsXG4gICAgICAgIHNpZ25hbD86IEFib3J0U2lnbmFsLFxuICAgICkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYXcuZ2V0R2FtZUhpZ2hTY29yZXMoXG4gICAgICAgICAgICB7IGlubGluZV9tZXNzYWdlX2lkLCB1c2VyX2lkIH0sXG4gICAgICAgICAgICBzaWduYWwsXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiLy8gZGVuby1saW50LWlnbm9yZS1maWxlIGNhbWVsY2FzZVxuaW1wb3J0IHsgQm90RXJyb3IsIENvbXBvc2VyLCBydW4gfSBmcm9tIFwiLi9jb21wb3Nlci50c1wiO1xuaW1wb3J0IHsgQ29udGV4dCB9IGZyb20gXCIuL2NvbnRleHQudHNcIjtcbmltcG9ydCB7IEFwaSB9IGZyb20gXCIuL2NvcmUvYXBpLnRzXCI7XG5pbXBvcnQge1xuICAgIHR5cGUgQXBpQ2xpZW50T3B0aW9ucyxcbiAgICB0eXBlIFdlYmhvb2tSZXBseUVudmVsb3BlLFxufSBmcm9tIFwiLi9jb3JlL2NsaWVudC50c1wiO1xuaW1wb3J0IHsgR3JhbW15RXJyb3IsIEh0dHBFcnJvciB9IGZyb20gXCIuL2NvcmUvZXJyb3IudHNcIjtcbmltcG9ydCB7IGRlYnVnIGFzIGQgfSBmcm9tIFwiLi9wbGF0Zm9ybS5kZW5vLnRzXCI7XG5pbXBvcnQgeyB0eXBlIFVwZGF0ZSwgdHlwZSBVc2VyRnJvbUdldE1lIH0gZnJvbSBcIi4vdHlwZXMudHNcIjtcbmNvbnN0IGRlYnVnID0gZChcImdyYW1teTpib3RcIik7XG5jb25zdCBkZWJ1Z0VyciA9IGQoXCJncmFtbXk6ZXJyb3JcIik7XG5cbi8qKlxuICogT3B0aW9ucyB0aGF0IGNhbiBiZSBzcGVjaWZpZWQgd2hlbiBydW5uaW5nIHRoZSBib3QgdmlhIHNpbXBsZSBsb25nIHBvbGxpbmcuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUG9sbGluZ09wdGlvbnMge1xuICAgIC8qKlxuICAgICAqIExpbWl0cyB0aGUgbnVtYmVyIG9mIHVwZGF0ZXMgdG8gYmUgcmV0cmlldmVkIHBlciBgZ2V0VXBkYXRlc2AgY2FsbC5cbiAgICAgKiBWYWx1ZXMgYmV0d2VlbiAxLTEwMCBhcmUgYWNjZXB0ZWQuIERlZmF1bHRzIHRvIDEwMC5cbiAgICAgKi9cbiAgICBsaW1pdD86IG51bWJlcjtcbiAgICAvKipcbiAgICAgKiBUaW1lb3V0IGluIHNlY29uZHMgZm9yIGxvbmcgcG9sbGluZy4gZ3JhbW1ZIHVzZXMgMzAgc2Vjb25kcyBhcyBhIGRlZmF1bHRcbiAgICAgKiB2YWx1ZS5cbiAgICAgKi9cbiAgICB0aW1lb3V0PzogbnVtYmVyO1xuICAgIC8qKlxuICAgICAqIEEgbGlzdCBvZiB0aGUgdXBkYXRlIHR5cGVzIHlvdSB3YW50IHlvdXIgYm90IHRvIHJlY2VpdmUuIEZvciBleGFtcGxlLFxuICAgICAqIHNwZWNpZnkgW+KAnG1lc3NhZ2XigJ0sIOKAnGVkaXRlZF9jaGFubmVsX3Bvc3TigJ0sIOKAnGNhbGxiYWNrX3F1ZXJ54oCdXSB0byBvbmx5XG4gICAgICogcmVjZWl2ZSB1cGRhdGVzIG9mIHRoZXNlIHR5cGVzLiBTZWUgVXBkYXRlIGZvciBhIGNvbXBsZXRlIGxpc3Qgb2ZcbiAgICAgKiBhdmFpbGFibGUgdXBkYXRlIHR5cGVzLiBTcGVjaWZ5IGFuIGVtcHR5IGxpc3QgdG8gcmVjZWl2ZSBhbGwgdXBkYXRlIHR5cGVzXG4gICAgICogZXhjZXB0IGNoYXRfbWVtYmVyIChkZWZhdWx0KS4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHByZXZpb3VzIHNldHRpbmcgd2lsbFxuICAgICAqIGJlIHVzZWQuXG4gICAgICpcbiAgICAgKiBQbGVhc2Ugbm90ZSB0aGF0IHRoaXMgcGFyYW1ldGVyIGRvZXNuJ3QgYWZmZWN0IHVwZGF0ZXMgY3JlYXRlZCBiZWZvcmUgdGhlXG4gICAgICogY2FsbCB0byB0aGUgZ2V0VXBkYXRlcywgc28gdW53YW50ZWQgdXBkYXRlcyBtYXkgYmUgcmVjZWl2ZWQgZm9yIGEgc2hvcnRcbiAgICAgKiBwZXJpb2Qgb2YgdGltZS5cbiAgICAgKi9cbiAgICBhbGxvd2VkX3VwZGF0ZXM/OiBSZWFkb25seUFycmF5PEV4Y2x1ZGU8a2V5b2YgVXBkYXRlLCBcInVwZGF0ZV9pZFwiPj47XG4gICAgLyoqXG4gICAgICogUGFzcyBUcnVlIHRvIGRyb3AgYWxsIHBlbmRpbmcgdXBkYXRlcyBiZWZvcmUgc3RhcnRpbmcgdGhlIGxvbmcgcG9sbGluZy5cbiAgICAgKi9cbiAgICBkcm9wX3BlbmRpbmdfdXBkYXRlcz86IGJvb2xlYW47XG4gICAgLyoqXG4gICAgICogQSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IGlzIHVzZWZ1bCBmb3IgbG9nZ2luZyAob3Igc2V0dGluZyB1cCBtaWRkbGV3YXJlXG4gICAgICogaWYgeW91IGRpZCBub3QgZG8gdGhpcyBiZWZvcmUpLiBJdCB3aWxsIGJlIGV4ZWN1dGVkIGFmdGVyIHRoZSBzZXR1cCBvZlxuICAgICAqIHRoZSBib3QgaGFzIGNvbXBsZXRlZCwgYW5kIGltbWVkaWF0ZWx5IGJlZm9yZSB0aGUgZmlyc3QgdXBkYXRlcyBhcmUgYmVpbmdcbiAgICAgKiBmZXRjaGVkLiBUaGUgYm90IGluZm9ybWF0aW9uIGBib3QuYm90SW5mb2Agd2lsbCBiZSBhdmFpbGFibGUgd2hlbiB0aGVcbiAgICAgKiBmdW5jdGlvbiBpcyBydW4uIEZvciBjb252ZW5pZW5jZSwgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHJlY2VpdmVzIHRoZVxuICAgICAqIHZhbHVlIG9mIGBib3QuYm90SW5mb2AgYXMgYW4gYXJndW1lbnQuXG4gICAgICovXG4gICAgb25TdGFydD86IChib3RJbmZvOiBVc2VyRnJvbUdldE1lKSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPjtcbn1cblxuZXhwb3J0IHsgQm90RXJyb3IgfTtcbi8qKlxuICogRXJyb3IgaGFuZGxlciB0aGF0IGNhbiBiZSBpbnN0YWxsZWQgb24gYSBib3QgdG8gY2F0Y2ggZXJyb3IgdGhyb3duIGJ5XG4gKiBtaWRkbGV3YXJlLlxuICovXG5leHBvcnQgdHlwZSBFcnJvckhhbmRsZXI8QyBleHRlbmRzIENvbnRleHQgPSBDb250ZXh0PiA9IChcbiAgICBlcnJvcjogQm90RXJyb3I8Qz4sXG4pID0+IHVua25vd247XG5cbi8qKlxuICogT3B0aW9ucyB0byBwYXNzIHRvIHRoZSBib3Qgd2hlbiBjcmVhdGluZyBpdC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCb3RDb25maWc8QyBleHRlbmRzIENvbnRleHQ+IHtcbiAgICAvKipcbiAgICAgKiBZb3UgY2FuIHNwZWNpZnkgYSBudW1iZXIgb2YgYWR2YW5jZWQgb3B0aW9ucyB1bmRlciB0aGUgYGNsaWVudGAgcHJvcGVydHkuXG4gICAgICogVGhlIG9wdGlvbnMgd2lsbCBiZSBwYXNzZWQgdG8gdGhlIGdyYW1tWSBjbGllbnTigJR0aGlzIGlzIHRoZSBwYXJ0IG9mXG4gICAgICogZ3JhbW1ZIHRoYXQgYWN0dWFsbHkgY29ubmVjdHMgdG8gdGhlIFRlbGVncmFtIEJvdCBBUEkgc2VydmVyIGluIHRoZSBlbmRcbiAgICAgKiB3aGVuIG1ha2luZyBIVFRQIHJlcXVlc3RzLlxuICAgICAqL1xuICAgIGNsaWVudD86IEFwaUNsaWVudE9wdGlvbnM7XG4gICAgLyoqXG4gICAgICogZ3JhbW1ZIGF1dG9tYXRpY2FsbHkgY2FsbHMgYGdldE1lYCB3aGVuIHN0YXJ0aW5nIHVwIHRvIG1ha2Ugc3VyZSB0aGF0XG4gICAgICogeW91ciBib3QgaGFzIGFjY2VzcyB0byB0aGUgYm90J3Mgb3duIGluZm9ybWF0aW9uLiBJZiB5b3UgcmVzdGFydCB5b3VyIGJvdFxuICAgICAqIG9mdGVuLCBmb3IgZXhhbXBsZSBiZWNhdXNlIGl0IGlzIHJ1bm5pbmcgaW4gYSBzZXJ2ZXJsZXNzIGVudmlyb25tZW50LFxuICAgICAqIHRoZW4geW91IG1heSB3YW50IHRvIHNraXAgdGhpcyBpbml0aWFsIEFQSSBjYWxsLlxuICAgICAqXG4gICAgICogU2V0IHRoaXMgcHJvcGVydHkgb2YgdGhlIG9wdGlvbnMgdG8gcHJlLWluaXRpYWxpemUgdGhlIGJvdCB3aXRoIGNhY2hlZFxuICAgICAqIHZhbHVlcy4gSWYgeW91IHVzZSB0aGlzIG9wdGlvbiwgZ3JhbW1ZIHdpbGwgbm90IGF0dGVtcHQgdG8gbWFrZSBhIGBnZXRNZWBcbiAgICAgKiBjYWxsIGJ1dCB1c2UgdGhlIHByb3ZpZGVkIGRhdGEgaW5zdGVhZC5cbiAgICAgKi9cbiAgICBib3RJbmZvPzogVXNlckZyb21HZXRNZTtcbiAgICAvKipcbiAgICAgKiBQYXNzIHRoZSBjb25zdHJ1Y3RvciBvZiBhIGN1c3RvbSBjb250ZXh0IG9iamVjdCB0aGF0IHdpbGwgYmUgdXNlZCB3aGVuXG4gICAgICogY3JlYXRpbmcgdGhlIGNvbnRleHQgZm9yIGVhY2ggaW5jb21pbmcgdXBkYXRlLlxuICAgICAqL1xuICAgIENvbnRleHRDb25zdHJ1Y3Rvcj86IG5ldyAoXG4gICAgICAgIC4uLmFyZ3M6IENvbnN0cnVjdG9yUGFyYW1ldGVyczx0eXBlb2YgQ29udGV4dD5cbiAgICApID0+IEM7XG59XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgc2luZ2xlIG1vc3QgaW1wb3J0YW50IGNsYXNzIG9mIGdyYW1tWS4gSXQgcmVwcmVzZW50cyB5b3VyIGJvdC5cbiAqXG4gKiBGaXJzdCwgeW91IG11c3QgY3JlYXRlIGEgYm90IGJ5IHRhbGtpbmcgdG8gQEJvdEZhdGhlciwgY2hlY2sgb3V0XG4gKiBodHRwczovL3QubWUvQm90RmF0aGVyLiBPbmNlIGl0IGlzIHJlYWR5LCB5b3Ugb2J0YWluIGEgc2VjcmV0IHRva2VuIGZvciB5b3VyXG4gKiBib3QuIGdyYW1tWSB3aWxsIHVzZSB0aGF0IHRva2VuIHRvIGlkZW50aWZ5IGFzIHlvdXIgYm90IHdoZW4gdGFsa2luZyB0byB0aGVcbiAqIFRlbGVncmFtIHNlcnZlcnMuIEdvdCB0aGUgdG9rZW4/IFlvdSBhcmUgbm93IHJlYWR5IHRvIHdyaXRlIHNvbWUgY29kZSBhbmQgcnVuXG4gKiB5b3VyIGJvdCFcbiAqXG4gKiBZb3Ugc2hvdWxkIGRvIHRocmVlIHRoaW5ncyB0byBydW4geW91ciBib3Q6XG4gKiBgYGB0c1xuICogLy8gMS4gQ3JlYXRlIGEgYm90IGluc3RhbmNlXG4gKiBjb25zdCBib3QgPSBuZXcgQm90KCc8c2VjcmV0LXRva2VuPicpXG4gKiAvLyAyLiBMaXN0ZW4gZm9yIHVwZGF0ZXNcbiAqIGJvdC5vbignbWVzc2FnZTp0ZXh0JywgY3R4ID0+IGN0eC5yZXBseSgnWW91IHdyb3RlOiAnICsgY3R4Lm1lc3NhZ2UudGV4dCkpXG4gKiAvLyAzLiBMYXVuY2ggaXQhXG4gKiBib3Quc3RhcnQoKVxuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBCb3Q8XG4gICAgQyBleHRlbmRzIENvbnRleHQgPSBDb250ZXh0LFxuICAgIEEgZXh0ZW5kcyBBcGkgPSBBcGksXG4+IGV4dGVuZHMgQ29tcG9zZXI8Qz4ge1xuICAgIHByaXZhdGUgcG9sbGluZ1J1bm5pbmcgPSBmYWxzZTtcbiAgICBwcml2YXRlIHBvbGxpbmdBYm9ydENvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlciB8IHVuZGVmaW5lZDtcbiAgICBwcml2YXRlIGxhc3RUcmllZFVwZGF0ZUlkID0gMDtcblxuICAgIC8qKlxuICAgICAqIEdpdmVzIHlvdSBmdWxsIGFjY2VzcyB0byB0aGUgVGVsZWdyYW0gQm90IEFQSS5cbiAgICAgKiBgYGB0c1xuICAgICAqIC8vIFRoaXMgaXMgaG93IHRvIGNhbGwgdGhlIEJvdCBBUEkgbWV0aG9kczpcbiAgICAgKiBib3QuYXBpLnNlbmRNZXNzYWdlKGNoYXRfaWQsICdIZWxsbywgZ3JhbW1ZIScpXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBVc2UgdGhpcyBvbmx5IG91dHNpZGUgb2YgeW91ciBtaWRkbGV3YXJlLiBJZiB5b3UgaGF2ZSBhY2Nlc3MgdG8gYGN0eGAsXG4gICAgICogdGhlbiB1c2luZyBgY3R4LmFwaWAgaW5zdGVhZCBvZiBgYm90LmFwaWAgaXMgcHJlZmVycmVkLlxuICAgICAqL1xuICAgIHB1YmxpYyByZWFkb25seSBhcGk6IEE7XG5cbiAgICBwcml2YXRlIG1lOiBVc2VyRnJvbUdldE1lIHwgdW5kZWZpbmVkO1xuICAgIHByaXZhdGUgbWVQcm9taXNlOiBQcm9taXNlPFVzZXJGcm9tR2V0TWU+IHwgdW5kZWZpbmVkO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgY2xpZW50Q29uZmlnOiBBcGlDbGllbnRPcHRpb25zIHwgdW5kZWZpbmVkO1xuXG4gICAgcHJpdmF0ZSByZWFkb25seSBDb250ZXh0Q29uc3RydWN0b3I6IG5ldyAoXG4gICAgICAgIC4uLmFyZ3M6IENvbnN0cnVjdG9yUGFyYW1ldGVyczx0eXBlb2YgQ29udGV4dD5cbiAgICApID0+IEM7XG5cbiAgICAvKipcbiAgICAgKiBIb2xkcyB0aGUgYm90J3MgZXJyb3IgaGFuZGxlciB0aGF0IGlzIGludm9rZWQgd2hlbmV2ZXIgbWlkZGxld2FyZSB0aHJvd3NcbiAgICAgKiAocmVqZWN0cykuIElmIHlvdSBzZXQgeW91ciBvd24gZXJyb3IgaGFuZGxlciB2aWEgYGJvdC5jYXRjaGAsIGFsbCB0aGF0XG4gICAgICogaGFwcGVucyBpcyB0aGF0IHRoaXMgdmFyaWFibGUgaXMgYXNzaWduZWQuXG4gICAgICovXG4gICAgcHVibGljIGVycm9ySGFuZGxlcjogRXJyb3JIYW5kbGVyPEM+ID0gYXN5bmMgKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgXCJFcnJvciBpbiBtaWRkbGV3YXJlIHdoaWxlIGhhbmRsaW5nIHVwZGF0ZVwiLFxuICAgICAgICAgICAgZXJyLmN0eD8udXBkYXRlPy51cGRhdGVfaWQsXG4gICAgICAgICAgICBlcnIuZXJyb3IsXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBlcnJvciBoYW5kbGVyIHdhcyBzZXQhXCIpO1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiU2V0IHlvdXIgb3duIGVycm9yIGhhbmRsZXIgd2l0aCBgYm90LmNhdGNoID0gLi4uYFwiKTtcbiAgICAgICAgaWYgKHRoaXMucG9sbGluZ1J1bm5pbmcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJTdG9wcGluZyBib3RcIik7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlcnI7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgQm90IHdpdGggdGhlIGdpdmVuIHRva2VuLlxuICAgICAqXG4gICAgICogUmVtZW1iZXIgdGhhdCB5b3UgY2FuIGxpc3RlbiBmb3IgbWVzc2FnZXMgYnkgY2FsbGluZ1xuICAgICAqIGBgYHRzXG4gICAgICogYm90Lm9uKCdtZXNzYWdlJywgY3R4ID0+IHsgLi4uIH0pXG4gICAgICogYGBgXG4gICAgICogb3Igc2ltaWxhciBtZXRob2RzLlxuICAgICAqXG4gICAgICogVGhlIHNpbXBsZXN0IHdheSB0byBzdGFydCB5b3VyIGJvdCBpcyB2aWEgc2ltcGxlIGxvbmcgcG9sbGluZzpcbiAgICAgKiBgYGB0c1xuICAgICAqIGJvdC5zdGFydCgpXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdG9rZW4gVGhlIGJvdCdzIHRva2VuIGFzIGFjcXVpcmVkIGZyb20gaHR0cHM6Ly90Lm1lL0JvdEZhdGhlclxuICAgICAqIEBwYXJhbSBjb25maWcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBwcm9wZXJ0aWVzIGZvciB0aGUgYm90XG4gICAgICovXG4gICAgY29uc3RydWN0b3IocHVibGljIHJlYWRvbmx5IHRva2VuOiBzdHJpbmcsIGNvbmZpZz86IEJvdENvbmZpZzxDPikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAoIXRva2VuKSB0aHJvdyBuZXcgRXJyb3IoXCJFbXB0eSB0b2tlbiFcIik7XG4gICAgICAgIHRoaXMubWUgPSBjb25maWc/LmJvdEluZm87XG4gICAgICAgIHRoaXMuY2xpZW50Q29uZmlnID0gY29uZmlnPy5jbGllbnQ7XG4gICAgICAgIHRoaXMuQ29udGV4dENvbnN0cnVjdG9yID0gY29uZmlnPy5Db250ZXh0Q29uc3RydWN0b3IgPz9cbiAgICAgICAgICAgIChDb250ZXh0IGFzIHVua25vd24gYXMgbmV3IChcbiAgICAgICAgICAgICAgICAuLi5hcmdzOiBDb25zdHJ1Y3RvclBhcmFtZXRlcnM8dHlwZW9mIENvbnRleHQ+XG4gICAgICAgICAgICApID0+IEMpO1xuICAgICAgICB0aGlzLmFwaSA9IG5ldyBBcGkodG9rZW4sIHRoaXMuY2xpZW50Q29uZmlnKSBhcyBBO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluZm9ybWF0aW9uIGFib3V0IHRoZSBib3QgaXRzZWxmIGFzIHJldHJpZXZlZCBmcm9tIGBhcGkuZ2V0TWUoKWAuIE9ubHlcbiAgICAgKiBhdmFpbGFibGUgYWZ0ZXIgdGhlIGJvdCBoYXMgYmVlbiBpbml0aWFsaXplZCB2aWEgYGF3YWl0IGJvdC5pbml0KClgLCBvclxuICAgICAqIGFmdGVyIHRoZSB2YWx1ZSBoYXMgYmVlbiBzZXQgbWFudWFsbHkuXG4gICAgICpcbiAgICAgKiBTdGFydGluZyB0aGUgYm90IHdpbGwgYWx3YXlzIHBlcmZvcm0gdGhlIGluaXRpYWxpemF0aW9uIGF1dG9tYXRpY2FsbHksXG4gICAgICogdW5sZXNzIGEgbWFudWFsIHZhbHVlIGlzIGFscmVhZHkgc2V0LlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoZSByZWNvbW1lbmRlZCB3YXkgdG8gc2V0IGEgY3VzdG9tIGJvdCBpbmZvcm1hdGlvbiBvYmplY3QgaXNcbiAgICAgKiB0byBwYXNzIGl0IHRvIHRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBvZiB0aGUgYG5ldyBCb3QoKWAgaW5zdGF0aWF0aW9uLFxuICAgICAqIHJhdGhlciB0aGFuIGFzc2lnbmluZyB0aGlzIHByb3BlcnR5LlxuICAgICAqL1xuICAgIHB1YmxpYyBzZXQgYm90SW5mbyhib3RJbmZvOiBVc2VyRnJvbUdldE1lKSB7XG4gICAgICAgIHRoaXMubWUgPSBib3RJbmZvO1xuICAgIH1cbiAgICBwdWJsaWMgZ2V0IGJvdEluZm8oKTogVXNlckZyb21HZXRNZSB7XG4gICAgICAgIGlmICh0aGlzLm1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICBcIkJvdCBpbmZvcm1hdGlvbiB1bmF2YWlsYWJsZSEgTWFrZSBzdXJlIHRvIGNhbGwgYGF3YWl0IGJvdC5pbml0KClgIGJlZm9yZSBhY2Nlc3NpbmcgYGJvdC5ib3RJbmZvYCFcIixcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSBib3QgaGFzIGJlZW4gaW5pdGlhbGl6ZWQuIEEgYm90IGlzIGluaXRpYWxpemVkIGlmIHRoZSBib3RcbiAgICAgKiBpbmZvcm1hdGlvbiBpcyBzZXQuIFRoZSBib3QgaW5mb3JtYXRpb24gY2FuIGVpdGhlciBiZSBzZXQgYXV0b21hdGljYWxseVxuICAgICAqIGJ5IGNhbGxpbmcgYGJvdC5pbml0YCwgb3IgbWFudWFsbHkgdGhyb3VnaCB0aGUgYm90IGNvbnN0cnVjdG9yLiBOb3RlIHRoYXRcbiAgICAgKiB1c3VhbGx5LCBpbml0aWFsaXphdGlvbiBpcyBkb25lIGF1dG9tYXRpY2FsbHkgYW5kIHlvdSBkbyBub3QgaGF2ZSB0byBjYXJlXG4gICAgICogYWJvdXQgdGhpcyBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBib3QgaXMgaW5pdGlhbGl6ZWQsIGFuZCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKi9cbiAgICBpc0luaXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWUgIT09IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgYm90LCBpLmUuIGZldGNoZXMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGJvdCBpdHNlbGYuIFRoaXNcbiAgICAgKiBtZXRob2QgaXMgY2FsbGVkIGF1dG9tYXRpY2FsbHksIHlvdSB1c3VhbGx5IGRvbid0IGhhdmUgdG8gY2FsbCBpdFxuICAgICAqIG1hbnVhbGx5LlxuICAgICAqL1xuICAgIGFzeW5jIGluaXQoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0luaXRlZCgpKSB7XG4gICAgICAgICAgICBkZWJ1ZyhcIkluaXRpYWxpemluZyBib3RcIik7XG4gICAgICAgICAgICB0aGlzLm1lUHJvbWlzZSA/Pz0gd2l0aFJldHJpZXMoKCkgPT4gdGhpcy5hcGkuZ2V0TWUoKSk7XG4gICAgICAgICAgICBsZXQgbWU6IFVzZXJGcm9tR2V0TWU7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG1lID0gYXdhaXQgdGhpcy5tZVByb21pc2U7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHRoaXMubWVQcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubWUgPT09IHVuZGVmaW5lZCkgdGhpcy5tZSA9IG1lO1xuICAgICAgICAgICAgZWxzZSBkZWJ1ZyhcIkJvdCBpbmZvIHdhcyBzZXQgYnkgbm93LCB3aWxsIG5vdCBvdmVyd3JpdGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgZGVidWcoYEkgYW0gJHt0aGlzLm1lIS51c2VybmFtZX0hYCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwuIERvIG5vdCBjYWxsLiBIYW5kbGVzIGFuIHVwZGF0ZSBiYXRjaCBzZXF1ZW50aWFsbHkgYnkgc3VwcGx5aW5nXG4gICAgICogaXQgb25lLWJ5LW9uZSB0byB0aGUgbWlkZGxld2FyZS4gSGFuZGxlcyBtaWRkbGV3YXJlIGVycm9ycyBhbmQgc3RvcmVzIHRoZVxuICAgICAqIGxhc3QgdXBkYXRlIGlkZW50aWZpZXIgdGhhdCB3YXMgYmVpbmcgdHJpZWQgdG8gaGFuZGxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHVwZGF0ZXMgQW4gYXJyYXkgb2YgdXBkYXRlcyB0byBoYW5kbGVcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZVVwZGF0ZXModXBkYXRlczogVXBkYXRlW10pIHtcbiAgICAgICAgLy8gaGFuZGxlIHVwZGF0ZXMgc2VxdWVudGlhbGx5ICghKVxuICAgICAgICBmb3IgKGNvbnN0IHVwZGF0ZSBvZiB1cGRhdGVzKSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RUcmllZFVwZGF0ZUlkID0gdXBkYXRlLnVwZGF0ZV9pZDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVVcGRhdGUodXBkYXRlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIC8vIHNob3VsZCBhbHdheXMgYmUgdHJ1ZVxuICAgICAgICAgICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBCb3RFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmVycm9ySGFuZGxlcihlcnIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGQVRBTDogZ3JhbW1ZIHVuYWJsZSB0byBoYW5kbGU6XCIsIGVycik7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIGFuIGludGVybmFsIG1ldGhvZCB0aGF0IHlvdSBwcm9iYWJseSB3aWxsIG5vdCBldmVyIG5lZWQgdG8gY2FsbC5cbiAgICAgKiBJdCBpcyB1c2VkIHdoZW5ldmVyIGEgbmV3IHVwZGF0ZSBhcnJpdmVzIGZyb20gdGhlIFRlbGVncmFtIHNlcnZlcnMgdGhhdFxuICAgICAqIHlvdXIgYm90IHdpbGwgaGFuZGxlLlxuICAgICAqXG4gICAgICogSWYgeW91J3JlIHdyaXRpbmcgYSBsaWJyYXJ5IG9uIHRvcCBvZiBncmFtbVksIGNoZWNrIG91dCB0aGVcbiAgICAgKiBbZG9jdW1lbnRhdGlvbl0oaHR0cHM6Ly9ncmFtbXkuZGV2L3BsdWdpbnMvcnVubmVyLmh0bWwpIG9mIHRoZSBydW5uZXJcbiAgICAgKiBwbHVnaW4gZm9yIGFuIGV4YW1wbGUgdGhhdCB1c2VzIHRoaXMgbWV0aG9kLlxuICAgICAqXG4gICAgICogQHBhcmFtIHVwZGF0ZSBBbiB1cGRhdGUgZnJvbSB0aGUgVGVsZWdyYW0gQm90IEFQSVxuICAgICAqIEBwYXJhbSB3ZWJob29rUmVwbHlFbnZlbG9wZSBBbiBvcHRpb25hbCB3ZWJob29rIHJlcGx5IGVudmVsb3BlXG4gICAgICovXG4gICAgYXN5bmMgaGFuZGxlVXBkYXRlKFxuICAgICAgICB1cGRhdGU6IFVwZGF0ZSxcbiAgICAgICAgd2ViaG9va1JlcGx5RW52ZWxvcGU/OiBXZWJob29rUmVwbHlFbnZlbG9wZSxcbiAgICApIHtcbiAgICAgICAgaWYgKHRoaXMubWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuXCJCb3Qgbm90IGluaXRpYWxpemVkISBFaXRoZXIgY2FsbCBgYXdhaXQgYm90LmluaXQoKWAsIFxcXG5vciBkaXJlY3RseSBzZXQgdGhlIGBib3RJbmZvYCBvcHRpb24gaW4gdGhlIGBCb3RgIGNvbnN0cnVjdG9yIHRvIHNwZWNpZnkgXFxcbmEga25vd24gYm90IGluZm8gb2JqZWN0LlwiLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBkZWJ1ZyhgUHJvY2Vzc2luZyB1cGRhdGUgJHt1cGRhdGUudXBkYXRlX2lkfWApO1xuICAgICAgICAvLyBjcmVhdGUgQVBJIG9iamVjdFxuICAgICAgICBjb25zdCBhcGkgPSBuZXcgQXBpKFxuICAgICAgICAgICAgdGhpcy50b2tlbixcbiAgICAgICAgICAgIHRoaXMuY2xpZW50Q29uZmlnLFxuICAgICAgICAgICAgd2ViaG9va1JlcGx5RW52ZWxvcGUsXG4gICAgICAgICk7XG4gICAgICAgIC8vIGNvbmZpZ3VyZSBpdCB3aXRoIHRoZSBzYW1lIHRyYW5zZm9ybWVycyBhcyBib3QuYXBpXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmFwaS5jb25maWcuaW5zdGFsbGVkVHJhbnNmb3JtZXJzKCk7XG4gICAgICAgIGlmICh0Lmxlbmd0aCA+IDApIGFwaS5jb25maWcudXNlKC4uLnQpO1xuICAgICAgICAvLyBjcmVhdGUgY29udGV4dCBvYmplY3RcbiAgICAgICAgY29uc3QgY3R4ID0gbmV3IHRoaXMuQ29udGV4dENvbnN0cnVjdG9yKHVwZGF0ZSwgYXBpLCB0aGlzLm1lKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIHJ1biBtaWRkbGV3YXJlIHN0YWNrXG4gICAgICAgICAgICBhd2FpdCBydW4odGhpcy5taWRkbGV3YXJlKCksIGN0eCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgZGVidWdFcnIoYEVycm9yIGluIG1pZGRsZXdhcmUgZm9yIHVwZGF0ZSAke3VwZGF0ZS51cGRhdGVfaWR9YCk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQm90RXJyb3I8Qz4oZXJyLCBjdHgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RhcnRzIHlvdXIgYm90IHVzaW5nIGxvbmcgcG9sbGluZy5cbiAgICAgKlxuICAgICAqID4gVGhpcyBtZXRob2QgcmV0dXJucyBhIGBQcm9taXNlYCB0aGF0IHdpbGwgbmV2ZXIgcmVzb2x2ZSBleGNlcHQgaWYgeW91clxuICAgICAqID4gYm90IGlzIHN0b3BwZWQuICoqWW91IGRvbid0IG5lZWQgdG8gYGF3YWl0YCB0aGUgY2FsbCB0byBgYm90LnN0YXJ0YCoqLFxuICAgICAqID4gYnV0IHJlbWVtYmVyIHRvIGNhdGNoIHBvdGVudGlhbCBlcnJvcnMgYnkgY2FsbGluZyBgYm90LmNhdGNoYC5cbiAgICAgKiA+IE90aGVyd2lzZSB5b3VyIGJvdCB3aWxsIGNyYXNoIChhbmQgc3RvcCkgaWYgc29tZXRoaW5nIGdvZXMgd3JvbmcgaW5cbiAgICAgKiA+IHlvdXIgY29kZS5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGVmZmVjdGl2ZWx5IGVudGVycyBhIGxvb3AgdGhhdCB3aWxsIHJlcGVhdGVkbHkgY2FsbFxuICAgICAqIGBnZXRVcGRhdGVzYCBhbmQgcnVuIHlvdXIgbWlkZGxld2FyZSBmb3IgZXZlcnkgcmVjZWl2ZWQgdXBkYXRlLCBhbGxvd2luZ1xuICAgICAqIHlvdXIgYm90IHRvIHJlc3BvbmQgdG8gbWVzc2FnZXMuXG4gICAgICpcbiAgICAgKiBJZiB5b3VyIGJvdCBpcyBhbHJlYWR5IHJ1bm5pbmcsIHRoaXMgbWV0aG9kIGRvZXMgbm90aGluZy5cbiAgICAgKlxuICAgICAqICoqTm90ZSB0aGF0IHRoaXMgc3RhcnRzIHlvdXIgYm90IHVzaW5nIGEgdmVyeSBzaW1wbGUgbG9uZyBwb2xsaW5nXG4gICAgICogaW1wbGVtZW50YXRpb24uKiogYGJvdC5zdGFydGAgc2hvdWxkIG9ubHkgYmUgdXNlZCBmb3Igc21hbGwgYm90cy4gV2hpbGVcbiAgICAgKiB0aGUgcmVzdCBvZiBncmFtbVkgd2FzIGJ1aWx0IHRvIHBlcmZvcm0gd2VsbCBldmVuIHVuZGVyIGV4dHJlbWUgbG9hZHMsXG4gICAgICogc2ltcGxlIGxvbmcgcG9sbGluZyBpcyBub3QgY2FwYWJsZSBvZiBzY2FsaW5nIHVwIGluIGEgc2ltaWxhciBmYXNoaW9uLlxuICAgICAqIFlvdSBzaG91bGQgc3dpdGNoIG92ZXIgdG8gdXNpbmcgYEBncmFtbXlqcy9ydW5uZXJgIGlmIHlvdSBhcmUgcnVubmluZyBhXG4gICAgICogYm90IHdpdGggaGlnaCBsb2FkLlxuICAgICAqXG4gICAgICogV2hhdCBleGFjdGx5IF9oaWdoIGxvYWRfIG1lYW5zIGRpZmZlcnMgZnJvbSBib3QgdG8gYm90LCBidXQgYXMgYSBydWxlIG9mXG4gICAgICogdGh1bWIsIHNpbXBsZSBsb25nIHBvbGxpbmcgc2hvdWxkIG5vdCBiZSBwcm9jZXNzaW5nIG1vcmUgdGhhbiB+NUtcbiAgICAgKiBtZXNzYWdlcyBldmVyeSBob3VyLiBBbHNvLCBpZiB5b3VyIGJvdCBoYXMgbG9uZy1ydW5uaW5nIG9wZXJhdGlvbnMgc3VjaFxuICAgICAqIGFzIGxhcmdlIGZpbGUgdHJhbnNmZXJzIHRoYXQgYmxvY2sgdGhlIG1pZGRsZXdhcmUgZnJvbSBjb21wbGV0aW5nLCB0aGlzXG4gICAgICogd2lsbCBpbXBhY3QgdGhlIHJlc3BvbnNpdmVuZXNzIG5lZ2F0aXZlbHksIHNvIGl0IG1ha2VzIHNlbnNlIHRvIHVzZSB0aGVcbiAgICAgKiBgQGdyYW1teWpzL3J1bm5lcmAgcGFja2FnZSBldmVuIGlmIHlvdSByZWNlaXZlIG11Y2ggZmV3ZXIgbWVzc2FnZXMuIElmXG4gICAgICogeW91IHdvcnJ5IGFib3V0IGhvdyBtdWNoIGxvYWQgeW91ciBib3QgY2FuIGhhbmRsZSwgY2hlY2sgb3V0IHRoZSBncmFtbVlcbiAgICAgKiBbZG9jdW1lbnRhdGlvbl0oaHR0cHM6Ly9ncmFtbXkuZGV2L2FkdmFuY2VkL3NjYWxpbmcuaHRtbCkgYWJvdXQgc2NhbGluZ1xuICAgICAqIHVwLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyB0byB1c2UgZm9yIHNpbXBsZSBsb25nIHBvbGxpbmdcbiAgICAgKi9cbiAgICBhc3luYyBzdGFydChvcHRpb25zPzogUG9sbGluZ09wdGlvbnMpIHtcbiAgICAgICAgLy8gUGVyZm9ybSBzZXR1cFxuICAgICAgICBpZiAoIXRoaXMuaXNJbml0ZWQoKSkgYXdhaXQgdGhpcy5pbml0KCk7XG4gICAgICAgIGlmICh0aGlzLnBvbGxpbmdSdW5uaW5nKSB7XG4gICAgICAgICAgICBkZWJ1ZyhcIlNpbXBsZSBsb25nIHBvbGxpbmcgYWxyZWFkeSBydW5uaW5nIVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB3aXRoUmV0cmllcygoKSA9PlxuICAgICAgICAgICAgdGhpcy5hcGkuZGVsZXRlV2ViaG9vayh7XG4gICAgICAgICAgICAgICAgZHJvcF9wZW5kaW5nX3VwZGF0ZXM6IG9wdGlvbnM/LmRyb3BfcGVuZGluZ191cGRhdGVzLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBBbGwgYXN5bmMgb3BzIG9mIHNldHVwIGNvbXBsZXRlLCBydW4gY2FsbGJhY2tcbiAgICAgICAgYXdhaXQgb3B0aW9ucz8ub25TdGFydD8uKHRoaXMuYm90SW5mbyk7XG5cbiAgICAgICAgLy8gUHJldmVudCBjb21tb24gbWlzdXNlIHRoYXQgY2F1c2VzIG1lbW9yeSBsZWFrXG4gICAgICAgIHRoaXMudXNlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJdCBsb29rcyBsaWtlIHlvdSBhcmUgcmVnaXN0ZXJpbmcgbW9yZSBsaXN0ZW5lcnMgXFxcbm9uIHlvdXIgYm90IGZyb20gd2l0aGluIG90aGVyIGxpc3RlbmVycyEgVGhpcyBtZWFucyB0aGF0IGV2ZXJ5IHRpbWUgeW91ciBib3QgXFxcbmhhbmRsZXMgYSBtZXNzYWdlIGxpa2UgdGhpcyBvbmUsIG5ldyBsaXN0ZW5lcnMgd2lsbCBiZSBhZGRlZC4gVGhpcyBsaXN0IGdyb3dzIHVudGlsIFxcXG55b3VyIG1hY2hpbmUgY3Jhc2hlcywgc28gZ3JhbW1ZIHRocm93cyB0aGlzIGVycm9yIHRvIHRlbGwgeW91IHRoYXQgeW91IHNob3VsZCBcXFxucHJvYmFibHkgZG8gdGhpbmdzIGEgYml0IGRpZmZlcmVudGx5LiBJZiB5b3UncmUgdW5zdXJlIGhvdyB0byByZXNvbHZlIHRoaXMgcHJvYmxlbSwgXFxcbnlvdSBjYW4gYXNrIGluIHRoZSBncm91cCBjaGF0OiBodHRwczovL3RlbGVncmFtLm1lL2dyYW1teWpzXG5cbk9uIHRoZSBvdGhlciBoYW5kLCBpZiB5b3UgYWN0dWFsbHkga25vdyB3aGF0IHlvdSdyZSBkb2luZyBhbmQgeW91IGRvIG5lZWQgdG8gaW5zdGFsbCBcXFxuZnVydGhlciBtaWRkbGV3YXJlIHdoaWxlIHlvdXIgYm90IGlzIHJ1bm5pbmcsIGNvbnNpZGVyIGluc3RhbGxpbmcgYSBjb21wb3NlciBcXFxuaW5zdGFuY2Ugb24geW91ciBib3QsIGFuZCBpbiB0dXJuIGF1Z21lbnQgdGhlIGNvbXBvc2VyIGFmdGVyIHRoZSBmYWN0LiBUaGlzIHdheSwgXFxcbnlvdSBjYW4gY2lyY3VtdmVudCB0aGlzIHByb3RlY3Rpb24gYWdhaW5zdCBtZW1vcnkgbGVha3MuYCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gU3RhcnQgcG9sbGluZ1xuICAgICAgICBkZWJ1ZyhcIlN0YXJ0aW5nIHNpbXBsZSBsb25nIHBvbGxpbmdcIik7XG4gICAgICAgIGF3YWl0IHRoaXMubG9vcChvcHRpb25zKTtcbiAgICAgICAgZGVidWcoXCJNaWRkbGV3YXJlIGlzIGRvbmUgcnVubmluZ1wiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdG9wcyB0aGUgYm90IGZyb20gbG9uZyBwb2xsaW5nLlxuICAgICAqXG4gICAgICogQWxsIG1pZGRsZXdhcmUgdGhhdCBpcyBjdXJyZW50bHkgYmVpbmcgZXhlY3V0ZWQgbWF5IGNvbXBsZXRlLCBidXQgbm9cbiAgICAgKiBmdXJ0aGVyIGBnZXRVcGRhdGVzYCBjYWxscyB3aWxsIGJlIHBlcmZvcm1lZC4gVGhlIGN1cnJlbnQgYGdldFVwZGF0ZXNgXG4gICAgICogcmVxdWVzdCB3aWxsIGJlIGNhbmNlbGxlZC5cbiAgICAgKlxuICAgICAqIEluIGFkZGl0aW9uLCB0aGlzIG1ldGhvZCB3aWxsIF9jb25maXJtXyB0aGUgbGFzdCByZWNlaXZlZCB1cGRhdGUgdG8gdGhlXG4gICAgICogVGVsZWdyYW0gc2VydmVycyBieSBjYWxsaW5nIGBnZXRVcGRhdGVzYCBvbmUgbGFzdCB0aW1lIHdpdGggdGhlIGxhdGVzdFxuICAgICAqIG9mZnNldCB2YWx1ZS4gSWYgYW55IHVwZGF0ZXMgYXJlIHJlY2VpdmVkIGluIHRoaXMgY2FsbCwgdGhleSBhcmVcbiAgICAgKiBkaXNjYXJkZWQgYW5kIHdpbGwgYmUgZmV0Y2hlZCBhZ2FpbiB3aGVuIHRoZSBib3Qgc3RhcnRzIHVwIHRoZSBuZXh0IHRpbWUuXG4gICAgICogQ29uZmVyIHRoZSBvZmZpY2lhbCBkb2N1bWVudGF0aW9uIG9uIGNvbmZpcm1pbmcgdXBkYXRlcyBpZiB5b3Ugd2FudCB0b1xuICAgICAqIGtub3cgbW9yZTogaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9ib3RzL2FwaSNnZXR1cGRhdGVzXG4gICAgICpcbiAgICAgKiA+IE5vdGUgdGhhdCB0aGlzIG1ldGhvZCB3aWxsIG5vdCB3YWl0IGZvciB0aGUgbWlkZGxld2FyZSBzdGFjayB0byBmaW5pc2guXG4gICAgICogPiBJZiB5b3UgbmVlZCB0byBydW4gY29kZSBhZnRlciBhbGwgbWlkZGxld2FyZSBpcyBkb25lLCBjb25zaWRlciB3YWl0aW5nXG4gICAgICogPiBmb3IgdGhlIHByb21pc2UgcmV0dXJuZWQgYnkgYGJvdC5zdGFydCgpYCB0byByZXNvbHZlLlxuICAgICAqL1xuICAgIGFzeW5jIHN0b3AoKSB7XG4gICAgICAgIGlmICh0aGlzLnBvbGxpbmdSdW5uaW5nKSB7XG4gICAgICAgICAgICBkZWJ1ZyhcIlN0b3BwaW5nIGJvdCwgc2F2aW5nIHVwZGF0ZSBvZmZzZXRcIik7XG4gICAgICAgICAgICB0aGlzLnBvbGxpbmdSdW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnBvbGxpbmdBYm9ydENvbnRyb2xsZXI/LmFib3J0KCk7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSB0aGlzLmxhc3RUcmllZFVwZGF0ZUlkICsgMTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBpLmdldFVwZGF0ZXMoeyBvZmZzZXQsIGxpbWl0OiAxIH0pO1xuICAgICAgICAgICAgdGhpcy5wb2xsaW5nQWJvcnRDb250cm9sbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVidWcoXCJCb3QgaXMgbm90IHJ1bm5pbmchXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgYm90cyBlcnJvciBoYW5kbGVyIHRoYXQgaXMgdXNlZCBkdXJpbmcgbG9uZyBwb2xsaW5nLlxuICAgICAqXG4gICAgICogWW91IHNob3VsZCBjYWxsIHRoaXMgbWV0aG9kIHRvIHNldCBhbiBlcnJvciBoYW5kbGVyIGlmIHlvdSBhcmUgdXNpbmcgbG9uZ1xuICAgICAqIHBvbGxpbmcsIG5vIG1hdHRlciB3aGV0aGVyIHlvdSB1c2UgYGJvdC5zdGFydGAgb3IgdGhlIGBAZ3JhbW15anMvcnVubmVyYFxuICAgICAqIHBhY2thZ2UgdG8gcnVuIHlvdXIgYm90LlxuICAgICAqXG4gICAgICogQ2FsbGluZyBgYm90LmNhdGNoYCB3aGVuIHVzaW5nIG90aGVyIG1lYW5zIG9mIHJ1bm5pbmcgeW91ciBib3QgKG9yXG4gICAgICogd2ViaG9va3MpIGhhcyBubyBlZmZlY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXJyb3JIYW5kbGVyIEEgZnVuY3Rpb24gdGhhdCBoYW5kbGVzIHBvdGVudGlhbCBtaWRkbGV3YXJlIGVycm9yc1xuICAgICAqL1xuICAgIGNhdGNoKGVycm9ySGFuZGxlcjogRXJyb3JIYW5kbGVyPEM+KSB7XG4gICAgICAgIHRoaXMuZXJyb3JIYW5kbGVyID0gZXJyb3JIYW5kbGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEludGVybmFsLiBEbyBub3QgY2FsbC4gRW50ZXJzIGEgbG9vcCB0aGF0IHdpbGwgcGVyZm9ybSBsb25nIHBvbGxpbmcgdW50aWxcbiAgICAgKiB0aGUgYm90IGlzIHN0b3BwZWQuXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBsb29wKG9wdGlvbnM/OiBQb2xsaW5nT3B0aW9ucykge1xuICAgICAgICB0aGlzLnBvbGxpbmdSdW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5wb2xsaW5nQWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXG4gICAgICAgIGNvbnN0IGxpbWl0ID0gb3B0aW9ucz8ubGltaXQ7XG4gICAgICAgIGNvbnN0IHRpbWVvdXQgPSBvcHRpb25zPy50aW1lb3V0ID8/IDMwOyAvLyBzZWNvbmRzXG4gICAgICAgIGxldCBhbGxvd2VkX3VwZGF0ZXMgPSBvcHRpb25zPy5hbGxvd2VkX3VwZGF0ZXM7XG5cbiAgICAgICAgd2hpbGUgKHRoaXMucG9sbGluZ1J1bm5pbmcpIHtcbiAgICAgICAgICAgIC8vIGZldGNoIHVwZGF0ZXNcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZXMgPSBhd2FpdCB0aGlzLmZldGNoVXBkYXRlcyhcbiAgICAgICAgICAgICAgICB7IGxpbWl0LCB0aW1lb3V0LCBhbGxvd2VkX3VwZGF0ZXMgfSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICAvLyBjaGVjayBpZiBwb2xsaW5nIHN0b3BwZWRcbiAgICAgICAgICAgIGlmICh1cGRhdGVzID09PSB1bmRlZmluZWQpIGJyZWFrO1xuICAgICAgICAgICAgLy8gaGFuZGxlIHVwZGF0ZXNcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlVXBkYXRlcyh1cGRhdGVzKTtcbiAgICAgICAgICAgIC8vIFRlbGVncmFtIHVzZXMgdGhlIGxhc3Qgc2V0dGluZyBpZiBgYWxsb3dlZF91cGRhdGVzYCBpcyBvbWl0dGVkIHNvXG4gICAgICAgICAgICAvLyB3ZSBjYW4gc2F2ZSBzYW1lIHRyYWZmaWMgYnkgb25seSBzZW5kaW5nIGl0IGluIHRoZSBmaXJzdCByZXF1ZXN0XG4gICAgICAgICAgICBhbGxvd2VkX3VwZGF0ZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbC4gRG8gbm90IGNhbGwuIFJlbGlhYmx5IGZldGNoZXMgYW4gdXBkYXRlIGJhdGNoIHZpYSBgZ2V0VXBkYXRlc2AuXG4gICAgICogSGFuZGxlcyBhbGwga25vd24gZXJyb3JzLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmIHRoZSBib3QgaXMgc3RvcHBlZCBhbmRcbiAgICAgKiB0aGUgY2FsbCBnZXRzIGNhbmNlbGxlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFBvbGxpbmcgb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHVwZGF0ZXMsIG9yIGB1bmRlZmluZWRgIGlmIHRoZSBib3QgaXMgc3RvcHBlZC5cbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGZldGNoVXBkYXRlcyhcbiAgICAgICAgeyBsaW1pdCwgdGltZW91dCwgYWxsb3dlZF91cGRhdGVzIH06IFBvbGxpbmdPcHRpb25zLFxuICAgICkge1xuICAgICAgICBjb25zdCBvZmZzZXQgPSB0aGlzLmxhc3RUcmllZFVwZGF0ZUlkICsgMTtcbiAgICAgICAgbGV0IHVwZGF0ZXM6IFVwZGF0ZVtdIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHVwZGF0ZXMgPSBhd2FpdCB0aGlzLmFwaS5nZXRVcGRhdGVzKFxuICAgICAgICAgICAgICAgICAgICB7IG9mZnNldCwgbGltaXQsIHRpbWVvdXQsIGFsbG93ZWRfdXBkYXRlcyB9LFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvbGxpbmdBYm9ydENvbnRyb2xsZXI/LnNpZ25hbCxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZVBvbGxpbmdFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKHVwZGF0ZXMgPT09IHVuZGVmaW5lZCAmJiB0aGlzLnBvbGxpbmdSdW5uaW5nKTtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwuIERvIG5vdCBjYWxsLiBIYW5kbGVzIGFuIGVycm9yIHRoYXQgb2NjdXJyZWQgZHVyaW5nIGxvbmdcbiAgICAgKiBwb2xsaW5nLlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlUG9sbGluZ0Vycm9yKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgIGlmICghdGhpcy5wb2xsaW5nUnVubmluZykge1xuICAgICAgICAgICAgZGVidWcoXCJQZW5kaW5nIGdldFVwZGF0ZXMgcmVxdWVzdCBjYW5jZWxsZWRcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNsZWVwU2Vjb25kcyA9IDM7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEdyYW1teUVycm9yKSB7XG4gICAgICAgICAgICBkZWJ1Z0VycihlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIGlmIChlcnJvci5lcnJvcl9jb2RlID09PSA0MDEpIHtcbiAgICAgICAgICAgICAgICBkZWJ1Z0VycihcbiAgICAgICAgICAgICAgICAgICAgXCJNYWtlIHN1cmUgeW91IGFyZSB1c2luZyB0aGUgYm90IHRva2VuIHlvdSBvYnRhaW5lZCBmcm9tIEBCb3RGYXRoZXIgKGh0dHBzOi8vdC5tZS9Cb3RGYXRoZXIpLlwiLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLmVycm9yX2NvZGUgPT09IDQwOSkge1xuICAgICAgICAgICAgICAgIGRlYnVnRXJyKFxuICAgICAgICAgICAgICAgICAgICBcIkNvbnNpZGVyIHJldm9raW5nIHRoZSBib3QgdG9rZW4gaWYgeW91IGJlbGlldmUgdGhhdCBubyBvdGhlciBpbnN0YW5jZSBpcyBydW5uaW5nLlwiLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLmVycm9yX2NvZGUgPT09IDQyOSkge1xuICAgICAgICAgICAgICAgIGRlYnVnRXJyKFwiQm90IEFQSSBzZXJ2ZXIgaXMgY2xvc2luZy5cIik7XG4gICAgICAgICAgICAgICAgc2xlZXBTZWNvbmRzID0gZXJyb3IucGFyYW1ldGVycy5yZXRyeV9hZnRlciA/PyBzbGVlcFNlY29uZHM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBkZWJ1Z0VycihlcnJvcik7XG4gICAgICAgIGRlYnVnRXJyKFxuICAgICAgICAgICAgYENhbGwgdG8gZ2V0VXBkYXRlcyBmYWlsZWQsIHJldHJ5aW5nIGluICR7c2xlZXBTZWNvbmRzfSBzZWNvbmRzIC4uLmAsXG4gICAgICAgICk7XG4gICAgICAgIGF3YWl0IHNsZWVwKHNsZWVwU2Vjb25kcyk7XG4gICAgfVxufVxuXG4vKipcbiAqIFBlcmZvcm1zIGEgbmV0d29yayBjYWxsIHRhc2ssIHJldHJ5aW5nIHVwb24ga25vd24gZXJyb3JzIHVudGlsIHN1Y2Nlc3MuXG4gKlxuICogQHBhcmFtIHRhc2sgQXN5bmMgdGFzayB0byBwZXJmb3JtXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHdpdGhSZXRyaWVzPFQ+KHRhc2s6ICgpID0+IFByb21pc2U8VD4pOiBQcm9taXNlPFQ+IHtcbiAgICBsZXQgcmVzdWx0OiB7IG9rOiBmYWxzZSB9IHwgeyBvazogdHJ1ZTsgdmFsdWU6IFQgfSA9IHsgb2s6IGZhbHNlIH07XG4gICAgd2hpbGUgKCFyZXN1bHQub2spIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHsgb2s6IHRydWUsIHZhbHVlOiBhd2FpdCB0YXNrKCkgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGRlYnVnRXJyKGVycm9yKTtcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEh0dHBFcnJvcikgY29udGludWU7XG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBHcmFtbXlFcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5lcnJvcl9jb2RlID49IDUwMCkgY29udGludWU7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLmVycm9yX2NvZGUgPT09IDQyOSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXRyeUFmdGVyID0gZXJyb3IucGFyYW1ldGVycy5yZXRyeV9hZnRlcjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJldHJ5QWZ0ZXIgIT09IHVuZGVmaW5lZCkgYXdhaXQgc2xlZXAocmV0cnlBZnRlcik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQudmFsdWU7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIG5ldyBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgdGhlIHNwZWNpZmllZCBudW1iZXIgb2Ygc2Vjb25kcy5cbiAqL1xuZnVuY3Rpb24gc2xlZXAoc2Vjb25kczogbnVtYmVyKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyKSA9PiBzZXRUaW1lb3V0KHIsIDEwMDAgKiBzZWNvbmRzKSk7XG59XG4iLCJpbXBvcnQgeyB0eXBlIENvbnRleHQgfSBmcm9tIFwiLi4vY29udGV4dC50c1wiO1xuaW1wb3J0IHsgdHlwZSBNaWRkbGV3YXJlRm4gfSBmcm9tIFwiLi4vY29tcG9zZXIudHNcIjtcbmltcG9ydCB7IGRlYnVnIGFzIGQgfSBmcm9tIFwiLi4vcGxhdGZvcm0uZGVuby50c1wiO1xuY29uc3QgZGVidWcgPSBkKFwiZ3JhbW15OnNlc3Npb25cIik7XG5cbnR5cGUgTWF5YmVQcm9taXNlPFQ+ID0gUHJvbWlzZTxUPiB8IFQ7XG5cbi8vID09PSBNYWluIHNlc3Npb24gcGx1Z2luXG4vKipcbiAqIEEgc2Vzc2lvbiBmbGF2b3IgaXMgYSBjb250ZXh0IGZsYXZvciB0aGF0IGhvbGRzIHNlc3Npb24gZGF0YSB1bmRlclxuICogYGN0eC5zZXNzaW9uYC5cbiAqXG4gKiBTZXNzaW9uIG1pZGRsZXdhcmUgd2lsbCBsb2FkIHRoZSBzZXNzaW9uIGRhdGEgb2YgYSBzcGVjaWZpYyBjaGF0IGZyb20geW91clxuICogc3RvcmFnZSBzb2x1dGlvbiwgYW5kIG1ha2UgaXQgYXZhaWxhYmxlIHRvIHlvdSBvbiB0aGUgY29udGV4dCBvYmplY3QuIENoZWNrXG4gKiBvdXQgdGhlXG4gKiBbZG9jdW1lbnRhdGlvbl0oaHR0cHM6Ly9kb2MuZGVuby5sYW5kL2h0dHBzOi8vZGVuby5sYW5kL3gvZ3JhbW15L21vZC50cy9+L3Nlc3Npb24pXG4gKiBvbiBzZXNzaW9uIG1pZGRsZXdhcmUgdG8ga25vdyBtb3JlLCBhbmQgcmVhZCB0aGUgc2VjdGlvbiBhYm91dCBzZXNzaW9ucyBvblxuICogdGhlIFt3ZWJzaXRlXShodHRwczovL2dyYW1teS5kZXYvcGx1Z2lucy9zZXNzaW9uLmh0bWwpLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNlc3Npb25GbGF2b3I8Uz4ge1xuICAgIC8qKlxuICAgICAqIFNlc3Npb24gZGF0YSBvbiB0aGUgY29udGV4dCBvYmplY3QuXG4gICAgICpcbiAgICAgKiAqKldBUk5JTkc6KiogWW91IGhhdmUgdG8gbWFrZSBzdXJlIHRoYXQgeW91ciBzZXNzaW9uIGRhdGEgaXMgbm90XG4gICAgICogdW5kZWZpbmVkIGJ5IF9wcm92aWRpbmcgYW4gaW5pdGlhbCB2YWx1ZSB0byB0aGUgc2Vzc2lvbiBtaWRkbGV3YXJlXywgb3IgYnlcbiAgICAgKiBtYWtpbmcgc3VyZSB0aGF0IGBjdHguc2Vzc2lvbmAgaXMgYXNzaWduZWQgaWYgaXQgaXMgZW1wdHkhIFRoZSB0eXBlXG4gICAgICogc3lzdGVtIGRvZXMgbm90IGluY2x1ZGUgYHwgdW5kZWZpbmVkYCBiZWNhdXNlIHRoaXMgaXMgcmVhbGx5IGFubm95aW5nIHRvXG4gICAgICogd29yayB3aXRoLlxuICAgICAqXG4gICAgICogIEFjY2Vzc2luZyBgY3R4LnNlc3Npb25gIGJ5IHJlYWRpbmcgb3Igd3JpdGluZyB3aWxsIHRocm93IGlmXG4gICAgICogYGdldFNlc3Npb25LZXkoY3R4KSA9PT0gdW5kZWZpbmVkYCBmb3IgdGhlIHJlc3BlY3RpdmUgY29udGV4dCBvYmplY3RcbiAgICAgKiBgY3R4YC5cbiAgICAgKi9cbiAgICBnZXQgc2Vzc2lvbigpOiBTO1xuICAgIHNldCBzZXNzaW9uKHNlc3Npb246IFMgfCBudWxsIHwgdW5kZWZpbmVkKTtcbn1cbi8qKlxuICogQSBsYXp5IHNlc3Npb24gZmxhdm9yIGlzIGEgY29udGV4dCBmbGF2b3IgdGhhdCBob2xkcyBhIHByb21pc2Ugb2Ygc29tZVxuICogc2Vzc2lvbiBkYXRhIHVuZGVyIGBjdHguc2Vzc2lvbmAuXG4gKlxuICogTGF6eSBzZXNzaW9uIG1pZGRsZXdhcmUgd2lsbCBwcm92aWRlIHRoaXMgcHJvbWlzZSBsYXppbHkgb24gdGhlIGNvbnRleHRcbiAqIG9iamVjdC4gT25jZSB5b3UgYWNjZXNzIGBjdHguc2Vzc2lvbmAsIHRoZSBzdG9yYWdlIHdpbGwgYmUgcXVlcmllZCBhbmQgdGhlXG4gKiBzZXNzaW9uIGRhdGEgYmVjb21lcyBhdmFpbGFibGUuIElmIHlvdSBhY2Nlc3MgYGN0eC5zZXNzaW9uYCBhZ2FpbiBmb3IgdGhlXG4gKiBzYW1lIGNvbnRleHQgb2JqZWN0LCB0aGUgY2FjaGVkIHZhbHVlIHdpbGwgYmUgdXNlZC4gQ2hlY2sgb3V0IHRoZVxuICogW2RvY3VtZW50YXRpb25dKGh0dHBzOi8vZG9jLmRlbm8ubGFuZC9odHRwczovL2Rlbm8ubGFuZC94L2dyYW1teS9tb2QudHMvfi9sYXp5U2Vzc2lvbilcbiAqIG9uIGxhenkgc2Vzc2lvbiBtaWRkbGV3YXJlIHRvIGtub3cgbW9yZSwgYW5kIHJlYWQgdGhlIHNlY3Rpb24gYWJvdXQgbGF6eVxuICogc2Vzc2lvbnMgb24gdGhlXG4gKiBbd2Vic2l0ZV0oaHR0cHM6Ly9ncmFtbXkuZGV2L3BsdWdpbnMvc2Vzc2lvbi5odG1sI2xhenktc2Vzc2lvbnMpLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIExhenlTZXNzaW9uRmxhdm9yPFM+IHtcbiAgICAvKipcbiAgICAgKiBTZXNzaW9uIGRhdGEgb24gdGhlIGNvbnRleHQgb2JqZWN0LCBwb3RlbnRpYWxseSBhIHByb21pc2UuXG4gICAgICpcbiAgICAgKiAqKldBUk5JTkc6KiogWW91IGhhdmUgdG8gbWFrZSBzdXJlIHRoYXQgeW91ciBzZXNzaW9uIGRhdGEgaXMgbm90XG4gICAgICogdW5kZWZpbmVkIGJ5IF9wcm92aWRpbmcgYSBkZWZhdWx0IHZhbHVlIHRvIHRoZSBzZXNzaW9uIG1pZGRsZXdhcmVfLCBvciBieVxuICAgICAqIG1ha2luZyBzdXJlIHRoYXQgYGN0eC5zZXNzaW9uYCBpcyBhc3NpZ25lZCBpZiBpdCBpcyBlbXB0eSEgVGhlIHR5cGVcbiAgICAgKiBzeXN0ZW0gZG9lcyBub3QgaW5jbHVkZSBgfCB1bmRlZmluZWRgIGJlY2F1c2UgdGhpcyBpcyByZWFsbHkgYW5ub3lpbmcgdG9cbiAgICAgKiB3b3JrIHdpdGguXG4gICAgICpcbiAgICAgKiBBY2Nlc3NpbmcgYGN0eC5zZXNzaW9uYCBieSByZWFkaW5nIG9yIHdyaXRpbmcgd2lsbCB0aHJvdyBpZmZcbiAgICAgKiBgZ2V0U2Vzc2lvbktleShjdHgpID09PSB1bmRlZmluZWRgIGhvbGRzIGZvciB0aGUgcmVzcGVjdGl2ZSBjb250ZXh0XG4gICAgICogb2JqZWN0IGBjdHhgLlxuICAgICAqL1xuICAgIGdldCBzZXNzaW9uKCk6IE1heWJlUHJvbWlzZTxTPjtcbiAgICBzZXQgc2Vzc2lvbihzZXNzaW9uOiBNYXliZVByb21pc2U8UyB8IG51bGwgfCB1bmRlZmluZWQ+KTtcbn1cblxuLyoqXG4gKiBBIHN0b3JhZ2UgYWRhcHRlciBpcyBhbiBhYnN0cmFjdGlvbiB0aGF0IHByb3ZpZGVzIHJlYWQsIHdyaXRlLCBhbmQgZGVsZXRlXG4gKiBhY2Nlc3MgdG8gYSBzdG9yYWdlIHNvbHV0aW9uIG9mIGFueSBraW5kLiBTdG9yYWdlIGFkYXB0ZXJzIGFyZSB1c2VkIHRvIGtlZXBcbiAqIHNlc3Npb24gbWlkZGxld2FyZSBpbmRlcGVuZGVudCBvZiB5b3VyIGRhdGFiYXNlIHByb3ZpZGVyLCBhbmQgdGhleSBhbGxvdyB5b3VcbiAqIHRvIHBhc3MgeW91ciBvd24gc3RvcmFnZSBzb2x1dGlvbi5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdG9yYWdlQWRhcHRlcjxUPiB7XG4gICAgLyoqXG4gICAgICogUmVhZHMgYSB2YWx1ZSBmb3IgdGhlIGdpdmVuIGtleSBmcm9tIHRoZSBzdG9yYWdlLiBNYXkgcmV0dXJuIHRoZSB2YWx1ZSBvclxuICAgICAqIHVuZGVmaW5lZCwgb3IgYSBwcm9taXNlIG9mIGVpdGhlci5cbiAgICAgKi9cbiAgICByZWFkOiAoa2V5OiBzdHJpbmcpID0+IE1heWJlUHJvbWlzZTxUIHwgdW5kZWZpbmVkPjtcbiAgICAvKipcbiAgICAgKiBXcml0ZXMgYSB2YWx1ZSBmb3IgdGhlIGdpdmVuIGtleSB0byB0aGUgc3RvcmFnZS5cbiAgICAgKi9cbiAgICB3cml0ZTogKGtleTogc3RyaW5nLCB2YWx1ZTogVCkgPT4gTWF5YmVQcm9taXNlPHZvaWQ+O1xuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgYSB2YWx1ZSBmb3IgdGhlIGdpdmVuIGtleSBmcm9tIHRoZSBzdG9yYWdlLlxuICAgICAqL1xuICAgIGRlbGV0ZTogKGtleTogc3RyaW5nKSA9PiBNYXliZVByb21pc2U8dm9pZD47XG59XG5cbi8qKlxuICogT3B0aW9ucyBmb3Igc2Vzc2lvbiBtaWRkbGV3YXJlLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNlc3Npb25PcHRpb25zPFM+IHtcbiAgICB0eXBlPzogXCJzaW5nbGVcIjtcbiAgICAvKipcbiAgICAgKiAqKlJlY29tbWVuZGVkIHRvIHVzZS4qKlxuICAgICAqXG4gICAgICogQSBmdW5jdGlvbiB0aGF0IHByb2R1Y2VzIGFuIGluaXRpYWwgdmFsdWUgZm9yIGBjdHguc2Vzc2lvbmAuIFRoaXNcbiAgICAgKiBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBldmVyeSB0aW1lIHRoZSBzdG9yYWdlIHNvbHV0aW9uIHJldHVybnMgdW5kZWZpbmVkXG4gICAgICogZm9yIGEgZ2l2ZW4gc2Vzc2lvbiBrZXkuIE1ha2Ugc3VyZSB0byBjcmVhdGUgYSBuZXcgdmFsdWUgZXZlcnkgdGltZSwgc3VjaFxuICAgICAqIHRoYXQgZGlmZmVyZW50IGNvbnRleHQgb2JqZWN0cyBkbyB0aGF0IGFjY2lkZW50YWxseSBzaGFyZSB0aGUgc2FtZVxuICAgICAqIHNlc3Npb24gZGF0YS5cbiAgICAgKi9cbiAgICBpbml0aWFsPzogKCkgPT4gUztcbiAgICAvKipcbiAgICAgKiBUaGlzIG9wdGlvbiBsZXRzIHlvdSBnZW5lcmF0ZSB5b3VyIG93biBzZXNzaW9uIGtleXMgcGVyIGNvbnRleHQgb2JqZWN0LlxuICAgICAqIFRoZSBzZXNzaW9uIGtleSBkZXRlcm1pbmVzIGhvdyB0byBtYXAgdGhlIGRpZmZlcmVudCBzZXNzaW9uIG9iamVjdHMgdG9cbiAgICAgKiB5b3VyIGNoYXRzIGFuZCB1c2Vycy4gQ2hlY2sgb3V0IHRoZVxuICAgICAqIFtkb2N1bWVudGF0aW9uXShodHRwczovL2dyYW1teS5kZXYvcGx1Z2lucy9zZXNzaW9uLmh0bWwjaG93LXRvLXVzZS1zZXNzaW9ucylcbiAgICAgKiBvbiB0aGUgd2Vic2l0ZSBhYm91dCBob3cgdG8gdXNlIHNlc3Npb24gbWlkZGxld2FyZSB0byBrbm93IGhvdyBzZXNzaW9uXG4gICAgICoga2V5cyBhcmUgdXNlZC5cbiAgICAgKlxuICAgICAqIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIHdpbGwgc3RvcmUgc2Vzc2lvbnMgcGVyIGNoYXQsIGFzIGRldGVybWluZWQgYnlcbiAgICAgKiBgY3R4LmNoYXQ/LmlkYC5cbiAgICAgKi9cbiAgICBnZXRTZXNzaW9uS2V5PzogKGN0eDogQ29udGV4dCkgPT4gTWF5YmVQcm9taXNlPHN0cmluZyB8IHVuZGVmaW5lZD47XG4gICAgLyoqXG4gICAgICogQSBzdG9yYWdlIGFkYXB0ZXIgdG8geW91ciBzdG9yYWdlIHNvbHV0aW9uLiBQcm92aWRlcyByZWFkLCB3cml0ZSwgYW5kXG4gICAgICogZGVsZXRlIGFjY2VzcyB0byB0aGUgc2Vzc2lvbiBtaWRkbGV3YXJlLlxuICAgICAqXG4gICAgICogQ29uc2lkZXIgdXNpbmcgYSBba25vd24gc3RvcmFnZVxuICAgICAqIGFkYXB0ZXJdKGh0dHBzOi8vZ3JhbW15LmRldi9wbHVnaW5zL3Nlc3Npb24uaHRtbCNrbm93bi1zdG9yYWdlLWFkYXB0ZXJzKVxuICAgICAqIGluc3RlYWQgb2Ygcm9sbGluZyB5b3VyIG93biBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzLlxuICAgICAqXG4gICAgICogVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gd2lsbCBzdG9yZSBzZXNzaW9uIGluIG1lbW9yeS4gVGhlIGRhdGEgd2lsbCBiZVxuICAgICAqIGxvc3Qgd2hlbmV2ZXIgeW91ciBib3QgcmVzdGFydHMuXG4gICAgICovXG4gICAgc3RvcmFnZT86IFN0b3JhZ2VBZGFwdGVyPFM+O1xufVxuXG4vKipcbiAqIE9wdGlvbnMgZm9yIHNlc3Npb24gbWlkZGxld2FyZSBpZiBtdWx0aSBzZXNzaW9ucyBhcmUgdXNlZC4gU3BlY2lmeSBgXCJ0eXBlXCI6XG4gKiBcIm11bHRpXCJgIGluIHRoZSBvcHRpb25zIHRvIHVzZSBtdWx0aSBzZXNzaW9ucy5cbiAqL1xuLy8gZGVuby1saW50LWlnbm9yZSBuby1leHBsaWNpdC1hbnlcbmV4cG9ydCB0eXBlIE11bHRpU2Vzc2lvbk9wdGlvbnM8Uz4gPSBTIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgYW55PiAvLyB1bmtub3duIGJyZWFrcyBleHRlbmRzXG4gICAgPyB7IHR5cGU6IFwibXVsdGlcIiB9ICYgTXVsdGlTZXNzaW9uT3B0aW9uc1JlY29yZDxTPlxuICAgIDogbmV2ZXI7XG50eXBlIE11bHRpU2Vzc2lvbk9wdGlvbnNSZWNvcmQ8UyBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+PiA9IHtcbiAgICBbSyBpbiBrZXlvZiBTXTogU2Vzc2lvbk9wdGlvbnM8U1tLXT47XG59O1xuXG4vKipcbiAqIFNlc3Npb24gbWlkZGxld2FyZSBwcm92aWRlcyBhIHBlcnNpc3RlbnQgZGF0YSBzdG9yYWdlIGZvciB5b3VyIGJvdC4gWW91IGNhblxuICogdXNlIGl0IHRvIGxldCB5b3VyIGJvdCByZW1lbWJlciBhbnkgZGF0YSB5b3Ugd2FudCwgZm9yIGV4YW1wbGUgdGhlIG1lc3NhZ2VzXG4gKiBpdCBzZW50IG9yIHJlY2VpdmVkIGluIHRoZSBwYXN0LiBUaGlzIGlzIGRvbmUgYnkgYXR0YWNoaW5nIF9zZXNzaW9uIGRhdGFfIHRvXG4gKiBldmVyeSBjaGF0LiBUaGUgc3RvcmVkIGRhdGEgaXMgdGhlbiBwcm92aWRlZCBvbiB0aGUgY29udGV4dCBvYmplY3QgdW5kZXJcbiAqIGBjdHguc2Vzc2lvbmAuXG4gKlxuICogPiAqKldoYXQgaXMgYSBzZXNzaW9uPyoqIFNpbXBseSBwdXQsIHRoZSBzZXNzaW9uIG9mIGEgY2hhdCBpcyBhIGxpdHRsZVxuICogPiBwZXJzaXN0ZW50IHN0b3JhZ2UgdGhhdCBpcyBhdHRhY2hlZCB0byBpdC4gQXMgYW4gZXhhbXBsZSwgeW91ciBib3QgY2FuIHNlbmRcbiAqID4gYSBtZXNzYWdlIHRvIGEgY2hhdCBhbmQgc3RvcmUgdGhlIElEIG9mIHRoYXQgbWVzc2FnZSBpbiB0aGUgY29ycmVzcG9uZGluZ1xuICogPiBzZXNzaW9uLiBUaGUgbmV4dCB0aW1lIHlvdXIgYm90IHJlY2VpdmVzIGFuIHVwZGF0ZSBmcm9tIHRoYXQgY2hhdCwgdGhlXG4gKiA+IHNlc3Npb24gd2lsbCBzdGlsbCBjb250YWluIHRoYXQgSUQuXG4gKiA+XG4gKiA+IFNlc3Npb24gZGF0YSBjYW4gYmUgc3RvcmVkIGluIGEgZGF0YWJhc2UsIGluIGEgZmlsZSwgb3Igc2ltcGx5IGluIG1lbW9yeS5cbiAqID4gZ3JhbW1ZIG9ubHkgc3VwcG9ydHMgbWVtb3J5IHNlc3Npb25zIG91dCBvZiB0aGUgYm94LCBidXQgeW91IGNhbiB1c2VcbiAqID4gdGhpcmQtcGFydHkgc2Vzc2lvbiBtaWRkbGV3YXJlIHRvIGNvbm5lY3QgdG8gb3RoZXIgc3RvcmFnZSBzb2x1dGlvbnMuIE5vdGVcbiAqID4gdGhhdCBtZW1vcnkgc2Vzc2lvbnMgd2lsbCBiZSBsb3N0IHdoZW4geW91IHN0b3AgeW91ciBib3QgYW5kIHRoZSBwcm9jZXNzXG4gKiA+IGV4aXRzLCBzbyB0aGV5IGFyZSB1c3VhbGx5IG5vdCB1c2VmdWwgaW4gcHJvZHVjdGlvbi5cbiAqXG4gKiBXaGVuZXZlciB5b3VyIGJvdCByZWNlaXZlcyBhbiB1cGRhdGUsIHRoZSBmaXJzdCB0aGluZyB0aGUgc2Vzc2lvbiBtaWRkbGV3YXJlXG4gKiB3aWxsIGRvIGlzIHRvIGxvYWQgdGhlIGNvcnJlY3Qgc2Vzc2lvbiBmcm9tIHlvdXIgc3RvcmFnZSBzb2x1dGlvbi4gVGhpc1xuICogb2JqZWN0IGlzIHRoZW4gcHJvdmlkZWQgb24gYGN0eC5zZXNzaW9uYCB3aGlsZSB5b3VyIG90aGVyIG1pZGRsZXdhcmUgaXNcbiAqIHJ1bm5pbmcuIEFzIHNvb24gYXMgeW91ciBib3QgaXMgZG9uZSBoYW5kbGluZyB0aGUgdXBkYXRlLCB0aGUgbWlkZGxld2FyZVxuICogdGFrZXMgb3ZlciBhZ2FpbiBhbmQgd3JpdGVzIGJhY2sgdGhlIHNlc3Npb24gb2JqZWN0IHRvIHlvdXIgc3RvcmFnZS4gVGhpc1xuICogYWxsb3dzIHlvdSB0byBtb2RpZnkgdGhlIHNlc3Npb24gb2JqZWN0IGFyYml0cmFyaWx5IGluIHlvdXIgbWlkZGxld2FyZSwgYW5kXG4gKiB0byBzdG9wIHdvcnJ5aW5nIGFib3V0IHRoZSBkYXRhYmFzZS5cbiAqXG4gKiBgYGB0c1xuICogYm90LnVzZShzZXNzaW9uKCkpXG4gKlxuICogYm90Lm9uKCdtZXNzYWdlJywgY3R4ID0+IHtcbiAqICAgLy8gVGhlIHNlc3Npb24gb2JqZWN0IGlzIHBlcnNpc3RlZCBhY3Jvc3MgdXBkYXRlcyFcbiAqICAgY29uc3Qgc2Vzc2lvbiA9IGN0eC5zZXNzaW9uXG4gKiB9KVxuICogYGBgXG4gKlxuICogSXQgaXMgcmVjb21tZW5kZWQgdG8gbWFrZSB1c2Ugb2YgdGhlIGBpbml0YWxgIG9wdGlvbiBpbiB0aGUgY29uZmlndXJhdGlvblxuICogb2JqZWN0LCB3aGljaCBjb3JyZWN0bHkgaW5pdGlhbGl6ZXMgc2Vzc2lvbiBvYmplY3RzIGZvciBuZXcgY2hhdHMuXG4gKlxuICogWW91IGNhbiBkZWxldGUgdGhlIHNlc3Npb24gZGF0YSBieSBzZXR0aW5nIGBjdHguc2Vzc2lvbmAgdG8gYG51bGxgIG9yXG4gKiBgdW5kZWZpbmVkYC5cbiAqXG4gKiBDaGVjayBvdXQgdGhlIFtkb2N1bWVudGF0aW9uXShodHRwczovL2dyYW1teS5kZXYvcGx1Z2lucy9zZXNzaW9uLmh0bWwpIG9uIHRoZVxuICogd2Vic2l0ZSB0byBrbm93IG1vcmUgYWJvdXQgaG93IHNlc3Npb25zIHdvcmsgaW4gZ3JhbW1ZLlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gdG8gcGFzcyB0byB0aGUgc2Vzc2lvbiBtaWRkbGV3YXJlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXNzaW9uPFMsIEMgZXh0ZW5kcyBDb250ZXh0PihcbiAgICBvcHRpb25zOiBTZXNzaW9uT3B0aW9uczxTPiB8IE11bHRpU2Vzc2lvbk9wdGlvbnM8Uz4gPSB7fSxcbik6IE1pZGRsZXdhcmVGbjxDICYgU2Vzc2lvbkZsYXZvcjxTPj4ge1xuICAgIHJldHVybiBvcHRpb25zLnR5cGUgPT09IFwibXVsdGlcIlxuICAgICAgICA/IHN0cmljdE11bHRpU2Vzc2lvbihvcHRpb25zKVxuICAgICAgICA6IHN0cmljdFNpbmdsZVNlc3Npb24ob3B0aW9ucyk7XG59XG5cbmZ1bmN0aW9uIHN0cmljdFNpbmdsZVNlc3Npb248UywgQyBleHRlbmRzIENvbnRleHQ+KFxuICAgIG9wdGlvbnM6IFNlc3Npb25PcHRpb25zPFM+LFxuKTogTWlkZGxld2FyZUZuPEMgJiBTZXNzaW9uRmxhdm9yPFM+PiB7XG4gICAgY29uc3QgeyBpbml0aWFsLCBzdG9yYWdlLCBnZXRTZXNzaW9uS2V5LCBjdXN0b20gfSA9IGZpbGxEZWZhdWx0cyhvcHRpb25zKTtcbiAgICByZXR1cm4gYXN5bmMgKGN0eCwgbmV4dCkgPT4ge1xuICAgICAgICBjb25zdCBwcm9wU2Vzc2lvbiA9IG5ldyBQcm9wZXJ0eVNlc3Npb248U2Vzc2lvbkZsYXZvcjxTPiwgXCJzZXNzaW9uXCI+KFxuICAgICAgICAgICAgc3RvcmFnZSxcbiAgICAgICAgICAgIGN0eCxcbiAgICAgICAgICAgIFwic2Vzc2lvblwiLFxuICAgICAgICAgICAgaW5pdGlhbCxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgZ2V0U2Vzc2lvbktleShjdHgpO1xuICAgICAgICBhd2FpdCBwcm9wU2Vzc2lvbi5pbml0KGtleSwgeyBjdXN0b20sIGxhenk6IGZhbHNlIH0pO1xuICAgICAgICBhd2FpdCBuZXh0KCk7IC8vIG5vIGNhdGNoOiBkbyBub3Qgd3JpdGUgYmFjayBpZiBtaWRkbGV3YXJlIHRocm93c1xuICAgICAgICBhd2FpdCBwcm9wU2Vzc2lvbi5maW5pc2goKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gc3RyaWN0TXVsdGlTZXNzaW9uPFMsIEMgZXh0ZW5kcyBDb250ZXh0PihcbiAgICBvcHRpb25zOiBNdWx0aVNlc3Npb25PcHRpb25zPFM+LFxuKTogTWlkZGxld2FyZUZuPEMgJiBTZXNzaW9uRmxhdm9yPFM+PiB7XG4gICAgY29uc3QgcHJvcHMgPSBPYmplY3Qua2V5cyhvcHRpb25zKS5maWx0ZXIoKGspID0+IGsgIT09IFwidHlwZVwiKTtcbiAgICBjb25zdCBkZWZhdWx0cyA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgICAgcHJvcHMubWFwKChwcm9wKSA9PiBbcHJvcCwgZmlsbERlZmF1bHRzKG9wdGlvbnNbcHJvcF0pXSksXG4gICAgKTtcbiAgICByZXR1cm4gYXN5bmMgKGN0eCwgbmV4dCkgPT4ge1xuICAgICAgICBjdHguc2Vzc2lvbiA9IHt9IGFzIFM7XG4gICAgICAgIGNvbnN0IHByb3BTZXNzaW9ucyA9IGF3YWl0IFByb21pc2UuYWxsKHByb3BzLm1hcChhc3luYyAocHJvcCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBpbml0aWFsLCBzdG9yYWdlLCBnZXRTZXNzaW9uS2V5LCBjdXN0b20gfSA9IGRlZmF1bHRzW3Byb3BdO1xuICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBQcm9wZXJ0eVNlc3Npb24oXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSBjYW5ub3QgZXhwcmVzcyB0aGF0IHRoZSBzdG9yYWdlIHdvcmtzIGZvciBhIGNvbmNyZXRlIHByb3BcbiAgICAgICAgICAgICAgICBzdG9yYWdlLFxuICAgICAgICAgICAgICAgIGN0eC5zZXNzaW9uLFxuICAgICAgICAgICAgICAgIHByb3AsXG4gICAgICAgICAgICAgICAgaW5pdGlhbCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBhd2FpdCBnZXRTZXNzaW9uS2V5KGN0eCk7XG4gICAgICAgICAgICBhd2FpdCBzLmluaXQoa2V5LCB7IGN1c3RvbSwgbGF6eTogZmFsc2UgfSk7XG4gICAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgfSkpO1xuICAgICAgICBhd2FpdCBuZXh0KCk7IC8vIG5vIGNhdGNoOiBkbyBub3Qgd3JpdGUgYmFjayBpZiBtaWRkbGV3YXJlIHRocm93c1xuICAgICAgICBpZiAoY3R4LnNlc3Npb24gPT0gbnVsbCkgcHJvcFNlc3Npb25zLmZvckVhY2goKHMpID0+IHMuZGVsZXRlKCkpO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChwcm9wU2Vzc2lvbnMubWFwKChzKSA9PiBzLmZpbmlzaCgpKSk7XG4gICAgfTtcbn1cblxuLyoqXG4gKiA+IFRoaXMgaXMgYW4gYWR2YW5jZWQgZnVuY3Rpb24gb2YgZ3JhbW1ZLlxuICpcbiAqIEdlbmVyYWxseSBzcGVha2luZywgbGF6eSBzZXNzaW9ucyB3b3JrIGp1c3QgbGlrZSBub3JtYWwgc2Vzc2lvbnPigJRqdXN0IHRoZXlcbiAqIGFyZSBsb2FkZWQgb24gZGVtYW5kLiBFeGNlcHQgZm9yIGEgZmV3IGBhc3luY2BzIGFuZCBgYXdhaXRgcyBoZXJlIGFuZCB0aGVyZSxcbiAqIHRoZWlyIHVzYWdlIGxvb2tzIDEwMCAlIGlkZW50aWNhbC5cbiAqXG4gKiBJbnN0ZWFkIG9mIGRpcmVjdGx5IHF1ZXJ5aW5nIHRoZSBzdG9yYWdlIGV2ZXJ5IHRpbWUgYW4gdXBkYXRlIGFycml2ZXMsIGxhenlcbiAqIHNlc3Npb25zIHF1aWNrbHkgZG8gdGhpcyBfb25jZSB5b3UgYWNjZXNzXyBgY3R4LnNlc3Npb25gLiBUaGlzIGNhblxuICogc2lnbmlmaWNhbnRseSByZWR1Y2UgdGhlIGRhdGFiYXNlIHRyYWZmaWMgKGVzcGVjaWFsbHkgd2hlbiB5b3VyIGJvdCBpcyBhZGRlZFxuICogdG8gZ3JvdXAgY2hhdHMpLCBiZWNhdXNlIGl0IHNraXBzIGEgcmVhZCBhbmQgYSB3cm90ZSBvcGVyYXRpb24gZm9yIGFsbFxuICogdXBkYXRlcyB0aGF0IHRoZSBib3QgZG9lcyBub3QgcmVhY3QgdG8uXG4gKlxuICogYGBgdHNcbiAqIC8vIFRoZSBvcHRpb25zIGFyZSBpZGVudGljYWxcbiAqIGJvdC51c2UobGF6eVNlc3Npb24oeyBzdG9yYWdlOiAuLi4gfSkpXG4gKlxuICogYm90Lm9uKCdtZXNzYWdlJywgYXN5bmMgY3R4ID0+IHtcbiAqICAgLy8gVGhlIHNlc3Npb24gb2JqZWN0IGlzIHBlcnNpc3RlZCBhY3Jvc3MgdXBkYXRlcyFcbiAqICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGN0eC5zZXNzaW9uXG4gKiAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgXlxuICogICAvLyAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqICAgLy8gICAgICAgICAgICAgICAgICAgICAgIFRoaXMgcGxhaW4gcHJvcGVydHkgYWNjZXNzIChubyBmdW5jdGlvbiBjYWxsKSB3aWxsIHRyaWdnZXIgdGhlIGRhdGFiYXNlIHF1ZXJ5IVxuICogfSlcbiAqIGBgYFxuICpcbiAqIENoZWNrIG91dCB0aGVcbiAqIFtkb2N1bWVudGF0aW9uXShodHRwczovL2dyYW1teS5kZXYvcGx1Z2lucy9zZXNzaW9uLmh0bWwjbGF6eS1zZXNzaW9ucykgb24gdGhlXG4gKiB3ZWJzaXRlIHRvIGtub3cgbW9yZSBhYm91dCBob3cgbGF6eSBzZXNzaW9ucyB3b3JrIGluIGdyYW1tWS5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25hbCBjb25maWd1cmF0aW9uIHRvIHBhc3MgdG8gdGhlIHNlc3Npb24gbWlkZGxld2FyZVxuICovXG5leHBvcnQgZnVuY3Rpb24gbGF6eVNlc3Npb248UywgQyBleHRlbmRzIENvbnRleHQ+KFxuICAgIG9wdGlvbnM6IFNlc3Npb25PcHRpb25zPFM+ID0ge30sXG4pOiBNaWRkbGV3YXJlRm48QyAmIExhenlTZXNzaW9uRmxhdm9yPFM+PiB7XG4gICAgY29uc3QgeyBpbml0aWFsLCBzdG9yYWdlLCBnZXRTZXNzaW9uS2V5LCBjdXN0b20gfSA9IGZpbGxEZWZhdWx0cyhvcHRpb25zKTtcbiAgICByZXR1cm4gYXN5bmMgKGN0eCwgbmV4dCkgPT4ge1xuICAgICAgICBjb25zdCBwcm9wU2Vzc2lvbiA9IG5ldyBQcm9wZXJ0eVNlc3Npb24oXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlIHN1cHByZXNzIHByb21pc2UgbmF0dXJlIG9mIHZhbHVlc1xuICAgICAgICAgICAgc3RvcmFnZSxcbiAgICAgICAgICAgIGN0eCxcbiAgICAgICAgICAgIFwic2Vzc2lvblwiLFxuICAgICAgICAgICAgaW5pdGlhbCxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgZ2V0U2Vzc2lvbktleShjdHgpO1xuICAgICAgICBhd2FpdCBwcm9wU2Vzc2lvbi5pbml0KGtleSwgeyBjdXN0b20sIGxhenk6IHRydWUgfSk7XG4gICAgICAgIGF3YWl0IG5leHQoKTsgLy8gbm8gY2F0Y2g6IGRvIG5vdCB3cml0ZSBiYWNrIGlmIG1pZGRsZXdhcmUgdGhyb3dzXG4gICAgICAgIGF3YWl0IHByb3BTZXNzaW9uLmZpbmlzaCgpO1xuICAgIH07XG59XG5cbi8qKlxuICogSW50ZXJuYWwgY2xhc3MgdGhhdCBtYW5hZ2VzIGEgc2luZ2xlIHByb3BlcnR5IG9uIHRoZSBzZXNzaW9uLiBDYW4gYmUgdXNlZFxuICogYm90aCBpbiBhIHN0cmljdCBhbmQgYSBsYXp5IHdheS4gV29ya3MgYnkgdXNpbmcgYE9iamVjdC5kZWZpbmVQcm9wZXJ0eWAgdG9cbiAqIGluc3RhbGwgYE9bUF1gLlxuICovXG5jbGFzcyBQcm9wZXJ0eVNlc3Npb248TywgUCBleHRlbmRzIGtleW9mIE8+IHtcbiAgICBwcml2YXRlIGtleT86IHN0cmluZztcbiAgICBwcml2YXRlIHZhbHVlOiBPW1BdIHwgdW5kZWZpbmVkO1xuICAgIHByaXZhdGUgcHJvbWlzZTogUHJvbWlzZTxPW1BdIHwgdW5kZWZpbmVkPiB8IHVuZGVmaW5lZDtcblxuICAgIHByaXZhdGUgZmV0Y2hpbmcgPSBmYWxzZTtcbiAgICBwcml2YXRlIHJlYWQgPSBmYWxzZTtcbiAgICBwcml2YXRlIHdyb3RlID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBzdG9yYWdlOiBTdG9yYWdlQWRhcHRlcjxPW1BdPixcbiAgICAgICAgcHJpdmF0ZSBvYmo6IE8sXG4gICAgICAgIHByaXZhdGUgcHJvcDogUCxcbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsOiAoKCkgPT4gT1tQXSkgfCB1bmRlZmluZWQsXG4gICAgKSB7fVxuXG4gICAgLyoqIFBlcmZvcm1zIGEgcmVhZCBvcCBhbmQgc3RvcmVzIHRoZSByZXN1bHQgaW4gYHRoaXMudmFsdWVgICovXG4gICAgcHJpdmF0ZSBsb2FkKCkge1xuICAgICAgICBpZiAodGhpcy5rZXkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gTm8gc2Vzc2lvbiBrZXkgcHJvdmlkZWQsIGNhbm5vdCBsb2FkXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMud3JvdGUpIHtcbiAgICAgICAgICAgIC8vIFZhbHVlIHdhcyBzZXQsIG5vIG5lZWQgdG8gbG9hZFxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFBlcmZvcm0gcmVhZCBvcCBpZiBub3QgY2FjaGVkXG4gICAgICAgIGlmICh0aGlzLnByb21pc2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5mZXRjaGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnByb21pc2UgPSBQcm9taXNlLnJlc29sdmUodGhpcy5zdG9yYWdlLnJlYWQodGhpcy5rZXkpKVxuICAgICAgICAgICAgICAgIC50aGVuKCh2YWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZXRjaGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3Igd3JpdGUgb3AgaW4gdGhlIG1lYW50aW1lXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndyb3RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEaXNjYXJkIHJlYWQgb3BcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFN0b3JlIHJlY2VpdmVkIHZhbHVlIGluIGB0aGlzLnZhbHVlYFxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWw7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIE5vIHZhbHVlLCBuZWVkIHRvIGluaXRpYWxpemVcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gdGhpcy5pbml0aWFsPy4oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXcm90ZSBpbml0aWFsIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndyb3RlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcm9taXNlO1xuICAgIH1cblxuICAgIGFzeW5jIGluaXQoXG4gICAgICAgIGtleTogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgICAgICBvcHRzOiB7IGN1c3RvbTogYm9vbGVhbjsgbGF6eTogYm9vbGVhbiB9LFxuICAgICkge1xuICAgICAgICB0aGlzLmtleSA9IGtleTtcbiAgICAgICAgaWYgKCFvcHRzLmxhenkpIGF3YWl0IHRoaXMubG9hZCgpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5vYmosIHRoaXMucHJvcCwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtc2cgPSB1bmRlZihcImFjY2Vzc1wiLCBvcHRzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVhZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRzLmxhenkgfHwgdGhpcy53cm90ZSkgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hpbmcgPyB0aGlzLnByb21pc2UgOiB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogKHYpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbXNnID0gdW5kZWYoXCJhc3NpZ25cIiwgb3B0cyk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLndyb3RlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmZldGNoaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHY7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBkZWxldGUoKSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5vYmosIHsgW3RoaXMucHJvcF06IHVuZGVmaW5lZCB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBmaW5pc2goKSB7XG4gICAgICAgIGlmICh0aGlzLmtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkKSBhd2FpdCB0aGlzLmxvYWQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWQgfHwgdGhpcy53cm90ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgdGhpcy52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkgYXdhaXQgdGhpcy5zdG9yYWdlLmRlbGV0ZSh0aGlzLmtleSk7XG4gICAgICAgICAgICAgICAgZWxzZSBhd2FpdCB0aGlzLnN0b3JhZ2Uud3JpdGUodGhpcy5rZXksIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZmlsbERlZmF1bHRzPFM+KG9wdHM6IFNlc3Npb25PcHRpb25zPFM+ID0ge30pIHtcbiAgICBsZXQgeyBnZXRTZXNzaW9uS2V5ID0gZGVmYXVsdEdldFNlc3Npb25LZXksIGluaXRpYWwsIHN0b3JhZ2UgfSA9IG9wdHM7XG4gICAgaWYgKHN0b3JhZ2UgPT0gbnVsbCkge1xuICAgICAgICBkZWJ1ZyhcbiAgICAgICAgICAgIFwiU3RvcmluZyBzZXNzaW9uIGRhdGEgaW4gbWVtb3J5LCBhbGwgZGF0YSB3aWxsIGJlIGxvc3Qgd2hlbiB0aGUgYm90IHJlc3RhcnRzLlwiLFxuICAgICAgICApO1xuICAgICAgICBzdG9yYWdlID0gbmV3IE1lbW9yeVNlc3Npb25TdG9yYWdlKCk7XG4gICAgfVxuICAgIGNvbnN0IGN1c3RvbSA9IGdldFNlc3Npb25LZXkgIT09IGRlZmF1bHRHZXRTZXNzaW9uS2V5O1xuICAgIHJldHVybiB7IGluaXRpYWwsIHN0b3JhZ2UsIGdldFNlc3Npb25LZXksIGN1c3RvbSB9O1xufVxuXG4vKiogU3RvcmVzIHNlc3Npb24gZGF0YSBwZXIgY2hhdCBieSBkZWZhdWx0ICovXG5mdW5jdGlvbiBkZWZhdWx0R2V0U2Vzc2lvbktleShjdHg6IENvbnRleHQpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiBjdHguY2hhdD8uaWQudG9TdHJpbmcoKTtcbn1cblxuLyoqIFJldHVybnMgYSB1c2VmdWwgZXJyb3IgbWVzc2FnZSBmb3Igd2hlbiB0aGUgc2Vzc2lvbiBrZXkgaXMgdW5kZWZpbmVkICovXG5mdW5jdGlvbiB1bmRlZihcbiAgICBvcDogXCJhY2Nlc3NcIiB8IFwiYXNzaWduXCIsXG4gICAgb3B0czogeyBjdXN0b206IGJvb2xlYW47IGxhenk/OiBib29sZWFuIH0sXG4pIHtcbiAgICBjb25zdCB7IGxhenkgPSBmYWxzZSwgY3VzdG9tIH0gPSBvcHRzO1xuICAgIGNvbnN0IHJlYXNvbiA9IGN1c3RvbVxuICAgICAgICA/IFwidGhlIGN1c3RvbSBgZ2V0U2Vzc2lvbktleWAgZnVuY3Rpb24gcmV0dXJuZWQgdW5kZWZpbmVkIGZvciB0aGlzIHVwZGF0ZVwiXG4gICAgICAgIDogXCJ0aGlzIHVwZGF0ZSBkb2VzIG5vdCBiZWxvbmcgdG8gYSBjaGF0LCBzbyB0aGUgc2Vzc2lvbiBrZXkgaXMgdW5kZWZpbmVkXCI7XG4gICAgcmV0dXJuIGBDYW5ub3QgJHtvcH0gJHtsYXp5ID8gXCJsYXp5IFwiIDogXCJcIn1zZXNzaW9uIGRhdGEgYmVjYXVzZSAke3JlYXNvbn0hYDtcbn1cblxuLy8gPT09IFNlc3Npb24gbWlncmF0aW9uc1xuLyoqXG4gKiBXaGVuIGVuaGFuY2luZyBhIHN0b3JhZ2UgYWRhcHRlciwgaXQgbmVlZHMgdG8gYmUgYWJsZSB0byBzdG9yZSBhZGRpdGlvbmFsXG4gKiBpbmZvcm1hdGlvbi4gSXQgZG9lcyB0aGlzIGJ5IHdyYXBwaW5nIHRoZSBhY3R1YWwgZGF0YSBpbnNpZGUgYW4gb2JqZWN0LCBhbmRcbiAqIGFkZGluZyBtb3JlIHByb3BlcnRpZXMgdG8gdGhpcyB3cmFwcGVyLlxuICpcbiAqIFRoaXMgaW50ZXJmYWNlIGRlZmluZXMgdGhlIGFkZGl0aW9uYWwgcHJvcGVydGllcyB0aGF0IG5lZWQgdG8gYmUgc3RvcmVkIGJ5IGFcbiAqIHN0b3JhZ2UgYWRhcHRlciB0aGF0IHN1cHBvcnRzIGVuaGFuY2VkIHNlc3Npb25zLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEVuaGFuY2U8VD4ge1xuICAgIC8qKiBWZXJzaW9uICovXG4gICAgdj86IG51bWJlcjtcbiAgICAvKiogRGF0YSAqL1xuICAgIF9fZDogVDtcbiAgICAvKiogRXhwaXJ5IGRhdGUgKi9cbiAgICBlPzogbnVtYmVyO1xufVxuZnVuY3Rpb24gaXNFbmhhbmNlPFQ+KHZhbHVlPzogVCB8IEVuaGFuY2U8VD4pOiB2YWx1ZSBpcyBFbmhhbmNlPFQ+IHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGwgJiYgXCJfX2RcIiBpbiB2YWx1ZTtcbn1cbi8qKiBPcHRpb25zIGZvciBlbmhhbmNlZCBzZXNzaW9ucyAqL1xuZXhwb3J0IGludGVyZmFjZSBNaWdyYXRpb25PcHRpb25zPFQ+IHtcbiAgICAvKiogVGhlIG9yaWdpbmFsIHN0b3JhZ2UgYWRhcHRlciB0aGF0IHdpbGwgYmUgZW5oYW5jZWQgKi9cbiAgICBzdG9yYWdlOiBTdG9yYWdlQWRhcHRlcjxFbmhhbmNlPFQ+PjtcbiAgICAvKipcbiAgICAgKiBBIHNldCBvZiBzZXNzaW9uIG1pZ3JhdGlvbnMsIGRlZmluZWQgYXMgYW4gb2JqZWN0IG1hcHBpbmcgZnJvbSB2ZXJzaW9uXG4gICAgICogbnVtYmVycyB0byBtaWdyYXRpb24gZnVuY3Rpb25zIHRoYXQgdHJhbnNmb3JtIGRhdGEgdG8gdGhlIHJlc3BlY3RpdmVcbiAgICAgKiB2ZXJzaW9uLlxuICAgICAqL1xuICAgIG1pZ3JhdGlvbnM/OiBNaWdyYXRpb25zO1xuICAgIC8qKlxuICAgICAqIE51bWJlciBvZiBtaWxsaXNlY29uZHMgYWZ0ZXIgdGhlIGxhc3Qgd3JpdGUgb3BlcmF0aW9uIHVudGlsIHRoZSBzZXNzaW9uXG4gICAgICogZGF0YSBleHBpcmVzLlxuICAgICAqL1xuICAgIG1pbGxpc2Vjb25kc1RvTGl2ZT86IG51bWJlcjtcbn1cbi8qKlxuICogQSBtYXBwaW5nIGZyb20gdmVyc2lvbiBudW1iZXJzIHRvIHNlc3Npb24gbWlncmF0aW9uIGZ1bmN0aW9ucy4gRWFjaCBlbnRyeSBpblxuICogdGhpcyBvYmplY3QgaGFzIGEgdmVyc2lvbiBudW1iZXIgYXMgYSBrZXksIGFuZCBhIGZ1bmN0aW9uIGFzIGEgdmFsdWUuXG4gKlxuICogRm9yIGEga2V5IGBuYCwgdGhlIHJlc3BlY3RpdmUgdmFsdWUgc2hvdWxkIGJlIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyB0aGVcbiAqIHByZXZpb3VzIHNlc3Npb24gZGF0YSBhbmQgbWlncmF0ZXMgaXQgdG8gY29uZm9ybSB3aXRoIHRoZSBkYXRhIHRoYXQgaXMgdXNlZFxuICogYnkgdmVyc2lvbiBgbmAuIFRoZSBwcmV2aW91cyBzZXNzaW9uIGRhdGEgaXMgZGVmaW5lZCBieSB0aGUgbmV4dCBrZXkgbGVzc1xuICogdGhhbiBgbmAsIHN1Y2ggYXMgYG4tMWAuIFZlcnNpb25zIGRvbid0IGhhdmUgdG8gYmUgaW50ZWdlcnMsIG5vciBkbyBhbGxcbiAqIHZlcnNpb25zIGhhdmUgdG8gYmUgYWRqYWNlbnQuIEZvciBleGFtcGxlLCB5b3UgY2FuIHVzZSBgWzEsIDEuNSwgNF1gIGFzXG4gKiB2ZXJzaW9ucy4gSWYgYG5gIGlzIHRoZSBsb3dlc3QgdmFsdWUgaW4gdGhlIHNldCBvZiBrZXlzLCB0aGUgZnVuY3Rpb24gc3RvcmVkXG4gKiBmb3IgYG5gIGNhbiBiZSB1c2VkIHRvIG1pZ3JhdGUgc2Vzc2lvbiBkYXRhIHRoYXQgd2FzIHN0b3JlZCBiZWZvcmUgbWlncmF0aW9uc1xuICogd2VyZSB1c2VkLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1pZ3JhdGlvbnMge1xuICAgIC8vIGRlbm8tbGludC1pZ25vcmUgbm8tZXhwbGljaXQtYW55XG4gICAgW3ZlcnNpb246IG51bWJlcl06IChvbGQ6IGFueSkgPT4gYW55O1xufVxuXG4vKipcbiAqIFlvdSBjYW4gdXNlIHRoaXMgZnVuY3Rpb24gdG8gdHJhbnNmb3JtIGFuIGV4aXN0aW5nIHN0b3JhZ2UgYWRhcHRlciwgYW5kIGFkZFxuICogbW9yZSBmZWF0dXJlcyB0byBpdC4gQ3VycmVudGx5LCB5b3UgY2FuIGFkZCBzZXNzaW9uIG1pZ3JhdGlvbnMgYW5kIGV4cGlyeVxuICogZGF0ZXMuXG4gKlxuICogWW91IGNhbiB1c2UgdGhpcyBmdW5jdGlvbiBsaWtlIHNvOlxuICogYGBgdHNcbiAqIGNvbnN0IHN0b3JhZ2UgPSAuLi4gLy8gZGVmaW5lIHlvdXIgc3RvcmFnZSBhZGFwdGVyXG4gKiBjb25zdCBlbmhhbmNlZCA9IGVuaGFuY2VTdG9yYWdlKHsgc3RvcmFnZSwgbWlsbGlzZWNvbmRzVG9MaXZlOiA1MDAgfSlcbiAqIGJvdC51c2Uoc2Vzc2lvbih7IHN0b3JhZ2U6IGVuaGFuY2VkIH0pKVxuICogYGBgXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgU2Vzc2lvbiBlbmhhbmNpbmcgb3B0aW9uc1xuICogQHJldHVybnMgVGhlIGVuaGFuY2VkIHN0b3JhZ2UgYWRhcHRlclxuICovXG5leHBvcnQgZnVuY3Rpb24gZW5oYW5jZVN0b3JhZ2U8VD4oXG4gICAgb3B0aW9uczogTWlncmF0aW9uT3B0aW9uczxUPixcbik6IFN0b3JhZ2VBZGFwdGVyPFQ+IHtcbiAgICBsZXQgeyBzdG9yYWdlLCBtaWxsaXNlY29uZHNUb0xpdmUsIG1pZ3JhdGlvbnMgfSA9IG9wdGlvbnM7XG4gICAgc3RvcmFnZSA9IGNvbXBhdFN0b3JhZ2Uoc3RvcmFnZSk7XG4gICAgaWYgKG1pbGxpc2Vjb25kc1RvTGl2ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHN0b3JhZ2UgPSB0aW1lb3V0U3RvcmFnZShzdG9yYWdlLCBtaWxsaXNlY29uZHNUb0xpdmUpO1xuICAgIH1cbiAgICBpZiAobWlncmF0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHN0b3JhZ2UgPSBtaWdyYXRpb25TdG9yYWdlKHN0b3JhZ2UsIG1pZ3JhdGlvbnMpO1xuICAgIH1cbiAgICByZXR1cm4gd3JhcFN0b3JhZ2Uoc3RvcmFnZSk7XG59XG5cbmZ1bmN0aW9uIGNvbXBhdFN0b3JhZ2U8VD4oXG4gICAgc3RvcmFnZTogU3RvcmFnZUFkYXB0ZXI8RW5oYW5jZTxUPj4sXG4pOiBTdG9yYWdlQWRhcHRlcjxFbmhhbmNlPFQ+PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVhZDogYXN5bmMgKGspID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHYgPSBhd2FpdCBzdG9yYWdlLnJlYWQoayk7XG4gICAgICAgICAgICByZXR1cm4gaXNFbmhhbmNlKHYpID8gdiA6IHsgX19kOiB2IH07XG4gICAgICAgIH0sXG4gICAgICAgIHdyaXRlOiAoaywgdikgPT4gc3RvcmFnZS53cml0ZShrLCB2KSxcbiAgICAgICAgZGVsZXRlOiAoaykgPT4gc3RvcmFnZS5kZWxldGUoayksXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gdGltZW91dFN0b3JhZ2U8VD4oXG4gICAgc3RvcmFnZTogU3RvcmFnZUFkYXB0ZXI8RW5oYW5jZTxUPj4sXG4gICAgbWlsbGlzZWNvbmRzVG9MaXZlOiBudW1iZXIsXG4pOiBTdG9yYWdlQWRhcHRlcjxFbmhhbmNlPFQ+PiB7XG4gICAgY29uc3QgdHRsU3RvcmFnZTogU3RvcmFnZUFkYXB0ZXI8RW5oYW5jZTxUPj4gPSB7XG4gICAgICAgIHJlYWQ6IGFzeW5jIChrKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHN0b3JhZ2UucmVhZChrKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKHZhbHVlLmUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHR0bFN0b3JhZ2Uud3JpdGUoaywgdmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZS5lIDwgRGF0ZS5ub3coKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHR0bFN0b3JhZ2UuZGVsZXRlKGspO1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIHdyaXRlOiBhc3luYyAoaywgdikgPT4ge1xuICAgICAgICAgICAgdi5lID0gYWRkRXhwaXJ5RGF0ZSh2LCBtaWxsaXNlY29uZHNUb0xpdmUpLmV4cGlyZXM7XG4gICAgICAgICAgICBhd2FpdCBzdG9yYWdlLndyaXRlKGssIHYpO1xuICAgICAgICB9LFxuICAgICAgICBkZWxldGU6IChrKSA9PiBzdG9yYWdlLmRlbGV0ZShrKSxcbiAgICB9O1xuICAgIHJldHVybiB0dGxTdG9yYWdlO1xufVxuZnVuY3Rpb24gbWlncmF0aW9uU3RvcmFnZTxUPihcbiAgICBzdG9yYWdlOiBTdG9yYWdlQWRhcHRlcjxFbmhhbmNlPFQ+PixcbiAgICBtaWdyYXRpb25zOiBNaWdyYXRpb25zLFxuKTogU3RvcmFnZUFkYXB0ZXI8RW5oYW5jZTxUPj4ge1xuICAgIGNvbnN0IHZlcnNpb25zID0gT2JqZWN0LmtleXMobWlncmF0aW9ucylcbiAgICAgICAgLm1hcCgodikgPT4gcGFyc2VJbnQodikpXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG4gICAgY29uc3QgY291bnQgPSB2ZXJzaW9ucy5sZW5ndGg7XG4gICAgaWYgKGNvdW50ID09PSAwKSB0aHJvdyBuZXcgRXJyb3IoXCJObyBtaWdyYXRpb25zIGdpdmVuIVwiKTtcbiAgICBjb25zdCBlYXJsaWVzdCA9IHZlcnNpb25zWzBdO1xuICAgIGNvbnN0IGxhc3QgPSBjb3VudCAtIDE7XG4gICAgY29uc3QgbGF0ZXN0ID0gdmVyc2lvbnNbbGFzdF07XG4gICAgY29uc3QgaW5kZXggPSBuZXcgTWFwPG51bWJlciwgbnVtYmVyPigpO1xuICAgIHZlcnNpb25zLmZvckVhY2goKHYsIGkpID0+IGluZGV4LnNldCh2LCBpKSk7IC8vIGludmVyc2UgYXJyYXkgbG9va3VwXG4gICAgZnVuY3Rpb24gbmV4dEFmdGVyKGN1cnJlbnQ6IG51bWJlcikge1xuICAgICAgICAvLyBUT0RPOiB1c2UgYGZpbmRMYXN0SW5kZXhgIHdpdGggTm9kZSAxOFxuICAgICAgICBsZXQgaSA9IGxhc3Q7XG4gICAgICAgIHdoaWxlIChjdXJyZW50IDw9IHZlcnNpb25zW2ldKSBpLS07XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgICAvLyByZXR1cm4gdmVyc2lvbnMuZmluZExhc3RJbmRleCgodikgPT4gdiA8IGN1cnJlbnQpXG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHJlYWQ6IGFzeW5jIChrKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWwgPSBhd2FpdCBzdG9yYWdlLnJlYWQoayk7XG4gICAgICAgICAgICBpZiAodmFsID09PSB1bmRlZmluZWQpIHJldHVybiB2YWw7XG4gICAgICAgICAgICBsZXQgeyBfX2Q6IHZhbHVlLCB2OiBjdXJyZW50ID0gZWFybGllc3QgLSAxIH0gPSB2YWw7XG4gICAgICAgICAgICBsZXQgaSA9IDEgKyAoaW5kZXguZ2V0KGN1cnJlbnQpID8/IG5leHRBZnRlcihjdXJyZW50KSk7XG4gICAgICAgICAgICBmb3IgKDsgaSA8IGNvdW50OyBpKyspIHZhbHVlID0gbWlncmF0aW9uc1t2ZXJzaW9uc1tpXV0odmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIHsgLi4udmFsLCB2OiBsYXRlc3QsIF9fZDogdmFsdWUgfTtcbiAgICAgICAgfSxcbiAgICAgICAgd3JpdGU6IChrLCB2KSA9PiBzdG9yYWdlLndyaXRlKGssIHsgdjogbGF0ZXN0LCAuLi52IH0pLFxuICAgICAgICBkZWxldGU6IChrKSA9PiBzdG9yYWdlLmRlbGV0ZShrKSxcbiAgICB9O1xufVxuZnVuY3Rpb24gd3JhcFN0b3JhZ2U8VD4oXG4gICAgc3RvcmFnZTogU3RvcmFnZUFkYXB0ZXI8RW5oYW5jZTxUPj4sXG4pOiBTdG9yYWdlQWRhcHRlcjxUPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVhZDogKGspID0+IFByb21pc2UucmVzb2x2ZShzdG9yYWdlLnJlYWQoaykpLnRoZW4oKHYpID0+IHY/Ll9fZCksXG4gICAgICAgIHdyaXRlOiAoaywgdikgPT4gc3RvcmFnZS53cml0ZShrLCB7IF9fZDogdiB9KSxcbiAgICAgICAgZGVsZXRlOiAoaykgPT4gc3RvcmFnZS5kZWxldGUoayksXG4gICAgfTtcbn1cblxuLy8gPT09IE1lbW9yeSBzdG9yYWdlIGFkYXB0ZXJcbi8qKlxuICogVGhlIG1lbW9yeSBzZXNzaW9uIHN0b3JhZ2UgaXMgYSBidWlsdC1pbiBzdG9yYWdlIGFkYXB0ZXIgdGhhdCBzYXZlcyB5b3VyXG4gKiBzZXNzaW9uIGRhdGEgaW4gUkFNIHVzaW5nIGEgcmVndWxhciBKYXZhU2NyaXB0IGBNYXBgIG9iamVjdC4gSWYgeW91IHVzZSB0aGlzXG4gKiBzdG9yYWdlIGFkYXB0ZXIsIGFsbCBzZXNzaW9ucyB3aWxsIGJlIGxvc3Qgd2hlbiB5b3VyIHByb2Nlc3MgdGVybWluYXRlcyBvclxuICogcmVzdGFydHMuIEhlbmNlLCB5b3Ugc2hvdWxkIG9ubHkgdXNlIGl0IGZvciBzaG9ydC1saXZlZCBkYXRhIHRoYXQgaXMgbm90XG4gKiBpbXBvcnRhbnQgdG8gcGVyc2lzdC5cbiAqXG4gKiBUaGlzIGNsYXNzIGlzIHVzZWQgYXMgZGVmYXVsdCBpZiB5b3UgZG8gbm90IHByb3ZpZGUgYSBzdG9yYWdlIGFkYXB0ZXIsIGUuZy5cbiAqIHRvIHlvdXIgZGF0YWJhc2UuXG4gKlxuICogVGhpcyBzdG9yYWdlIGFkYXB0ZXIgZmVhdHVyZXMgZXhwaXJpbmcgc2Vzc2lvbnMuIFdoZW4gaW5zdGF0aWF0aW5nIHRoaXMgY2xhc3NcbiAqIHlvdXJzZWxmLCB5b3UgY2FuIHBhc3MgYSB0aW1lIHRvIGxpdmUgaW4gbWlsbGlzZWNvbmRzIHRoYXQgd2lsbCBiZSB1c2VkIGZvclxuICogZWFjaCBzZXNzaW9uIG9iamVjdC4gSWYgYSBzZXNzaW9uIGZvciBhIHVzZXIgZXhwaXJlZCwgdGhlIHNlc3Npb24gZGF0YSB3aWxsXG4gKiBiZSBkaXNjYXJkZWQgb24gaXRzIGZpcnN0IHJlYWQsIGFuZCBhIGZyZXNoIHNlc3Npb24gb2JqZWN0IGFzIHJldHVybmVkIGJ5IHRoZVxuICogYGluaXRhbGAgb3B0aW9uIChvciB1bmRlZmluZWQpIHdpbGwgYmUgcHV0IGludG8gcGxhY2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBNZW1vcnlTZXNzaW9uU3RvcmFnZTxTPiBpbXBsZW1lbnRzIFN0b3JhZ2VBZGFwdGVyPFM+IHtcbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbGx5IHVzZWQgYE1hcGAgaW5zdGFuY2UgdGhhdCBzdG9yZXMgdGhlIHNlc3Npb24gZGF0YVxuICAgICAqL1xuICAgIHByb3RlY3RlZCByZWFkb25seSBzdG9yYWdlID0gbmV3IE1hcDxcbiAgICAgICAgc3RyaW5nLFxuICAgICAgICB7IHNlc3Npb246IFM7IGV4cGlyZXM/OiBudW1iZXIgfVxuICAgID4oKTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgbWVtb3J5IHNlc3Npb24gc3RvcmFnZSB3aXRoIHRoZSBnaXZlbiB0aW1lIHRvIGxpdmUuIE5vdGVcbiAgICAgKiB0aGF0IHRoaXMgc3RvcmFnZSBhZGFwdGVyIHdpbGwgbm90IHN0b3JlIHlvdXIgZGF0YSBwZXJtYW5lbnRseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0aW1lVG9MaXZlIFRUTCBpbiBtaWxsaXNlY29uZHMsIGRlZmF1bHQgaXMgYEluZmluaXR5YFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgdGltZVRvTGl2ZT86IG51bWJlcikge31cblxuICAgIHJlYWQoa2V5OiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLnN0b3JhZ2UuZ2V0KGtleSk7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodmFsdWUuZXhwaXJlcyAhPT0gdW5kZWZpbmVkICYmIHZhbHVlLmV4cGlyZXMgPCBEYXRlLm5vdygpKSB7XG4gICAgICAgICAgICB0aGlzLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWUuc2Vzc2lvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWFkcyB0aGUgdmFsdWVzIGZvciBhbGwga2V5cyBvZiB0aGUgc2Vzc2lvbiBzdG9yYWdlLCBhbmQgcmV0dXJucyB0aGVtIGFzXG4gICAgICogYW4gYXJyYXkuXG4gICAgICovXG4gICAgcmVhZEFsbCgpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5XG4gICAgICAgICAgICAuZnJvbSh0aGlzLnN0b3JhZ2Uua2V5cygpKVxuICAgICAgICAgICAgLm1hcCgoa2V5KSA9PiB0aGlzLnJlYWQoa2V5KSlcbiAgICAgICAgICAgIC5maWx0ZXIoKHZhbHVlKTogdmFsdWUgaXMgUyA9PiB2YWx1ZSAhPT0gdW5kZWZpbmVkKTtcbiAgICB9XG5cbiAgICB3cml0ZShrZXk6IHN0cmluZywgdmFsdWU6IFMpIHtcbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldChrZXksIGFkZEV4cGlyeURhdGUodmFsdWUsIHRoaXMudGltZVRvTGl2ZSkpO1xuICAgIH1cblxuICAgIGRlbGV0ZShrZXk6IHN0cmluZykge1xuICAgICAgICB0aGlzLnN0b3JhZ2UuZGVsZXRlKGtleSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhZGRFeHBpcnlEYXRlPFQ+KHZhbHVlOiBULCB0dGw/OiBudW1iZXIpIHtcbiAgICBpZiAodHRsICE9PSB1bmRlZmluZWQgJiYgdHRsIDwgSW5maW5pdHkpIHtcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuIHsgc2Vzc2lvbjogdmFsdWUsIGV4cGlyZXM6IG5vdyArIHR0bCB9O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB7IHNlc3Npb246IHZhbHVlIH07XG4gICAgfVxufVxuIiwiLy8gZGVuby1saW50LWlnbm9yZS1maWxlIG5vLWV4cGxpY2l0LWFueVxuaW1wb3J0IHsgdHlwZSBCb3QgfSBmcm9tIFwiLi4vYm90LnRzXCI7XG5pbXBvcnQgeyBkZWJ1ZyBhcyBkIH0gZnJvbSBcIi4uL3BsYXRmb3JtLmRlbm8udHNcIjtcbmltcG9ydCB7IHR5cGUgVXBkYXRlIH0gZnJvbSBcIi4uL3R5cGVzLnRzXCI7XG5pbXBvcnQgeyB0eXBlIFdlYmhvb2tSZXBseUVudmVsb3BlIH0gZnJvbSBcIi4uL2NvcmUvY2xpZW50LnRzXCI7XG5pbXBvcnQgeyB0eXBlIENvbnRleHQgfSBmcm9tIFwiLi4vY29udGV4dC50c1wiO1xuaW1wb3J0IHtcbiAgICBhZGFwdGVycyBhcyBuYXRpdmVBZGFwdGVycyxcbiAgICBkZWZhdWx0QWRhcHRlcixcbn0gZnJvbSBcIi4vZnJhbWV3b3Jrcy5kZW5vLnRzXCI7XG5jb25zdCBkZWJ1Z0VyciA9IGQoXCJncmFtbXk6ZXJyb3JcIik7XG5cbmNvbnN0IGNhbGxiYWNrQWRhcHRlcjogRnJhbWV3b3JrQWRhcHRlciA9IChcbiAgICB1cGRhdGU6IFVwZGF0ZSxcbiAgICBjYWxsYmFjazogKGpzb246IHN0cmluZykgPT4gdW5rbm93bixcbiAgICBoZWFkZXI6IHN0cmluZyxcbiAgICB1bmF1dGhvcml6ZWQgPSAoKSA9PiBjYWxsYmFjaygnXCJ1bmF1dGhvcml6ZWRcIicpLFxuKSA9PiAoe1xuICAgIHVwZGF0ZTogUHJvbWlzZS5yZXNvbHZlKHVwZGF0ZSksXG4gICAgcmVzcG9uZDogY2FsbGJhY2ssXG4gICAgaGVhZGVyLFxuICAgIHVuYXV0aG9yaXplZCxcbn0pO1xuY29uc3QgYWRhcHRlcnMgPSB7IC4uLm5hdGl2ZUFkYXB0ZXJzLCBjYWxsYmFjazogY2FsbGJhY2tBZGFwdGVyIH07XG5cbi8qKlxuICogSFRUUCBXZWIgZnJhbWV3b3JrcyBmb3Igd2hpY2ggZ3JhbW1ZIHByb3ZpZGVzIGNvbXBhdGlibGUgY2FsbGJhY2sgb3V0IG9mIHRoZVxuICogYm94LlxuICovXG50eXBlIFN1cHBvcnRlZEZyYW1ld29ya3MgPSBrZXlvZiB0eXBlb2YgYWRhcHRlcnM7XG5cbi8qKlxuICogQWJzdHJhY3Rpb24gb3ZlciBhIHJlcXVlc3QtcmVzcG9uc2UgY3ljbGUsIHByb3ZkaW5nIGFjY2VzcyB0byB0aGUgdXBkYXRlLCBhc1xuICogd2VsbCBhcyBhIG1lY2hhbmlzbSBmb3IgcmVzcG9uZGluZyB0byB0aGUgcmVxdWVzdCBhbmQgdG8gZW5kIGl0LlxuICovXG5pbnRlcmZhY2UgUmVxUmVzSGFuZGxlciB7XG4gICAgLyoqXG4gICAgICogVGhlIHVwZGF0ZSBvYmplY3Qgc2VudCBmcm9tIFRlbGVncmFtLCB1c3VhbGx5IHJlc29sdmVzIHRoZSByZXF1ZXN0J3MgSlNPTlxuICAgICAqIGJvZHlcbiAgICAgKi9cbiAgICB1cGRhdGU6IFByb21pc2U8VXBkYXRlPjtcbiAgICAvKipcbiAgICAgKiBYLVRlbGVncmFtLUJvdC1BcGktU2VjcmV0LVRva2VuIGhlYWRlciBvZiB0aGUgcmVxdWVzdCwgb3IgdW5kZWZpbmVkIGlmXG4gICAgICogbm90IHByZXNlbnRcbiAgICAgKi9cbiAgICBoZWFkZXI/OiBzdHJpbmc7XG4gICAgLyoqXG4gICAgICogRW5kcyB0aGUgcmVxdWVzdCBpbW1lZGlhdGVseSB3aXRob3V0IGJvZHksIGNhbGxlZCBhZnRlciBldmVyeSByZXF1ZXN0XG4gICAgICogdW5sZXNzIGEgd2ViaG9vayByZXBseSB3YXMgcGVyZm9ybWVkXG4gICAgICovXG4gICAgZW5kPzogKCkgPT4gdm9pZDtcbiAgICAvKipcbiAgICAgKiBTZW5kcyB0aGUgc3BlY2lmaWVkIEpTT04gYXMgYSBwYXlsb2FkIGluIHRoZSBib2R5LCB1c2VkIGZvciB3ZWJob29rXG4gICAgICogcmVwbGllc1xuICAgICAqL1xuICAgIHJlc3BvbmQ6IChqc29uOiBzdHJpbmcpID0+IHVua25vd24gfCBQcm9taXNlPHVua25vd24+O1xuICAgIC8qKlxuICAgICAqIFJlc3BvbmRzIHRoYXQgdGhlIHJlcXVlc3QgaXMgdW5hdXRob3JpemVkIGR1ZSB0byBtaXNtYXRjaGluZ1xuICAgICAqIFgtVGVsZWdyYW0tQm90LUFwaS1TZWNyZXQtVG9rZW4gaGVhZGVyc1xuICAgICAqL1xuICAgIHVuYXV0aG9yaXplZDogKCkgPT4gdW5rbm93biB8IFByb21pc2U8dW5rbm93bj47XG4gICAgLyoqXG4gICAgICogU29tZSBmcmFtZXdvcmtzIChlLmcuIERlbm8ncyBzdGQvaHR0cCBgbGlzdGVuQW5kU2VydmVgKSBhc3N1bWUgdGhhdFxuICAgICAqIGhhbmRsZXIgcmV0dXJucyBzb21ldGhpbmdcbiAgICAgKi9cbiAgICBoYW5kbGVyUmV0dXJuPzogYW55O1xufVxuLyoqXG4gKiBNaWRkbGV3YXJlIGZvciBhIHdlYiBmcmFtZXdvcmsuIENyZWF0ZXMgYSByZXF1ZXN0LXJlc3BvbnNlIGhhbmRsZXIgZm9yIGFcbiAqIHJlcXVlc3QuIFRoZSBoYW5kbGVyIHdpbGwgYmUgdXNlZCB0byBpbnRlZ3JhdGUgd2l0aCB0aGUgY29tcGF0aWJsZSBmcmFtZXdvcmsuXG4gKi9cbmV4cG9ydCB0eXBlIEZyYW1ld29ya0FkYXB0ZXIgPSAoLi4uYXJnczogYW55W10pID0+IFJlcVJlc0hhbmRsZXI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2ViaG9va09wdGlvbnMge1xuICAgIC8qKiBBbiBvcHRpb25hbCBzdHJhdGVneSB0byBoYW5kbGUgdGltZW91dHMgKGRlZmF1bHQ6ICd0aHJvdycpICovXG4gICAgb25UaW1lb3V0PzogXCJ0aHJvd1wiIHwgXCJyZXR1cm5cIiB8ICgoLi4uYXJnczogYW55W10pID0+IHVua25vd24pO1xuICAgIC8qKiBBbiBvcHRpb25hbCBudW1iZXIgb2YgdGltZW91dCBtaWxsaXNlY29uZHMgKGRlZmF1bHQ6IDEwXzAwMCkgKi9cbiAgICB0aW1lb3V0TWlsbGlzZWNvbmRzPzogbnVtYmVyO1xuICAgIC8qKiBBbiBvcHRpb25hbCBzdHJpbmcgdG8gY29tcGFyZSB0byBYLVRlbGVncmFtLUJvdC1BcGktU2VjcmV0LVRva2VuICovXG4gICAgc2VjcmV0VG9rZW4/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgeW91IGNhbiBwYXNzIHRvIGEgd2ViIGZyYW1ld29yayAoc3VjaCBhc1xuICogZXhwcmVzcykgaWYgeW91IHdhbnQgdG8gcnVuIHlvdXIgYm90IHZpYSB3ZWJob29rcy4gVXNlIGl0IGxpa2UgdGhpczpcbiAqIGBgYHRzXG4gKiBjb25zdCBhcHAgPSBleHByZXNzKCkgLy8gb3Igd2hhdGV2ZXIgeW91J3JlIHVzaW5nXG4gKiBjb25zdCBib3QgPSBuZXcgQm90KCc8dG9rZW4+JylcbiAqXG4gKiBhcHAudXNlKHdlYmhvb2tDYWxsYmFjayhib3QsICdleHByZXNzJykpXG4gKiBgYGBcbiAqXG4gKiBDb25mZXIgdGhlIGdyYW1tWVxuICogW2RvY3VtZW50YXRpb25dKGh0dHBzOi8vZ3JhbW15LmRldi9ndWlkZS9kZXBsb3ltZW50LXR5cGVzLmh0bWwpIHRvIHJlYWQgbW9yZVxuICogYWJvdXQgaG93IHRvIHJ1biB5b3VyIGJvdCB3aXRoIHdlYmhvb2tzLlxuICpcbiAqIEBwYXJhbSBib3QgVGhlIGJvdCBmb3Igd2hpY2ggdG8gY3JlYXRlIGEgY2FsbGJhY2tcbiAqIEBwYXJhbSBhZGFwdGVyIEFuIG9wdGlvbmFsIHN0cmluZyBpZGVudGlmeWluZyB0aGUgZnJhbWV3b3JrIChkZWZhdWx0OiAnZXhwcmVzcycpXG4gKiBAcGFyYW0gb25UaW1lb3V0IEFuIG9wdGlvbmFsIHN0cmF0ZWd5IHRvIGhhbmRsZSB0aW1lb3V0cyAoZGVmYXVsdDogJ3Rocm93JylcbiAqIEBwYXJhbSB0aW1lb3V0TWlsbGlzZWNvbmRzIEFuIG9wdGlvbmFsIG51bWJlciBvZiB0aW1lb3V0IG1pbGxpc2Vjb25kcyAoZGVmYXVsdDogMTBfMDAwKVxuICovXG5leHBvcnQgZnVuY3Rpb24gd2ViaG9va0NhbGxiYWNrPEMgZXh0ZW5kcyBDb250ZXh0ID0gQ29udGV4dD4oXG4gICAgYm90OiBCb3Q8Qz4sXG4gICAgYWRhcHRlcj86IFN1cHBvcnRlZEZyYW1ld29ya3MgfCBGcmFtZXdvcmtBZGFwdGVyLFxuICAgIG9uVGltZW91dD86IFdlYmhvb2tPcHRpb25zW1wib25UaW1lb3V0XCJdLFxuICAgIHRpbWVvdXRNaWxsaXNlY29uZHM/OiBXZWJob29rT3B0aW9uc1tcInRpbWVvdXRNaWxsaXNlY29uZHNcIl0sXG4gICAgc2VjcmV0VG9rZW4/OiBXZWJob29rT3B0aW9uc1tcInNlY3JldFRva2VuXCJdLFxuKTogKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk7XG5leHBvcnQgZnVuY3Rpb24gd2ViaG9va0NhbGxiYWNrPEMgZXh0ZW5kcyBDb250ZXh0ID0gQ29udGV4dD4oXG4gICAgYm90OiBCb3Q8Qz4sXG4gICAgYWRhcHRlcj86IFN1cHBvcnRlZEZyYW1ld29ya3MgfCBGcmFtZXdvcmtBZGFwdGVyLFxuICAgIHdlYmhvb2tPcHRpb25zPzogV2ViaG9va09wdGlvbnMsXG4pOiAoLi4uYXJnczogYW55W10pID0+IGFueTtcbmV4cG9ydCBmdW5jdGlvbiB3ZWJob29rQ2FsbGJhY2s8QyBleHRlbmRzIENvbnRleHQgPSBDb250ZXh0PihcbiAgICBib3Q6IEJvdDxDPixcbiAgICBhZGFwdGVyOiBTdXBwb3J0ZWRGcmFtZXdvcmtzIHwgRnJhbWV3b3JrQWRhcHRlciA9IGRlZmF1bHRBZGFwdGVyLFxuICAgIG9uVGltZW91dDpcbiAgICAgICAgfCBXZWJob29rT3B0aW9uc1xuICAgICAgICB8IFdlYmhvb2tPcHRpb25zW1wib25UaW1lb3V0XCJdID0gXCJ0aHJvd1wiLFxuICAgIHRpbWVvdXRNaWxsaXNlY29uZHM6IFdlYmhvb2tPcHRpb25zW1widGltZW91dE1pbGxpc2Vjb25kc1wiXSA9IDEwXzAwMCxcbiAgICBzZWNyZXRUb2tlbj86IFdlYmhvb2tPcHRpb25zW1wic2VjcmV0VG9rZW5cIl0sXG4pIHtcbiAgICBjb25zdCB7XG4gICAgICAgIG9uVGltZW91dDogdGltZW91dCA9IFwidGhyb3dcIixcbiAgICAgICAgdGltZW91dE1pbGxpc2Vjb25kczogbXMgPSAxMF8wMDAsXG4gICAgICAgIHNlY3JldFRva2VuOiB0b2tlbixcbiAgICB9ID0gdHlwZW9mIG9uVGltZW91dCA9PT0gXCJvYmplY3RcIlxuICAgICAgICA/IG9uVGltZW91dFxuICAgICAgICA6IHsgb25UaW1lb3V0LCB0aW1lb3V0TWlsbGlzZWNvbmRzLCBzZWNyZXRUb2tlbiB9O1xuICAgIGxldCBpbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIGNvbnN0IHNlcnZlcjogRnJhbWV3b3JrQWRhcHRlciA9IHR5cGVvZiBhZGFwdGVyID09PSBcInN0cmluZ1wiXG4gICAgICAgID8gYWRhcHRlcnNbYWRhcHRlcl1cbiAgICAgICAgOiBhZGFwdGVyO1xuICAgIHJldHVybiBhc3luYyAoLi4uYXJnczogYW55W10pID0+IHtcbiAgICAgICAgaWYgKCFpbml0aWFsaXplZCkge1xuICAgICAgICAgICAgLy8gV2lsbCBkZWR1cGUgY29uY3VycmVudGx5IGluY29taW5nIGNhbGxzIGZyb20gc2V2ZXJhbCB1cGRhdGVzXG4gICAgICAgICAgICBhd2FpdCBib3QuaW5pdCgpO1xuICAgICAgICAgICAgaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgdXBkYXRlLCByZXNwb25kLCB1bmF1dGhvcml6ZWQsIGVuZCwgaGFuZGxlclJldHVybiwgaGVhZGVyIH0gPVxuICAgICAgICAgICAgc2VydmVyKC4uLmFyZ3MpO1xuICAgICAgICBpZiAoaGVhZGVyICE9PSB0b2tlbikge1xuICAgICAgICAgICAgYXdhaXQgdW5hdXRob3JpemVkKCk7XG4gICAgICAgICAgICAvLyBUT0RPOiBpbnZlc3RpZ2F0ZSBkZW5vIGJ1ZyB0aGF0IGhhcHBlbnMgd2hlbiB0aGlzIGNvbnNvbGUgbG9nZ2luZyBpcyByZW1vdmVkXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhoYW5kbGVyUmV0dXJuKTtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVyUmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCB1c2VkV2ViaG9va1JlcGx5ID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IHdlYmhvb2tSZXBseUVudmVsb3BlOiBXZWJob29rUmVwbHlFbnZlbG9wZSA9IHtcbiAgICAgICAgICAgIGFzeW5jIHNlbmQoanNvbikge1xuICAgICAgICAgICAgICAgIHVzZWRXZWJob29rUmVwbHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGF3YWl0IHJlc3BvbmQoanNvbik7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCB0aW1lb3V0SWZOZWNlc3NhcnkoXG4gICAgICAgICAgICBib3QuaGFuZGxlVXBkYXRlKGF3YWl0IHVwZGF0ZSwgd2ViaG9va1JlcGx5RW52ZWxvcGUpLFxuICAgICAgICAgICAgdHlwZW9mIHRpbWVvdXQgPT09IFwiZnVuY3Rpb25cIiA/ICgpID0+IHRpbWVvdXQoLi4uYXJncykgOiB0aW1lb3V0LFxuICAgICAgICAgICAgbXMsXG4gICAgICAgICk7XG4gICAgICAgIGlmICghdXNlZFdlYmhvb2tSZXBseSkgZW5kPy4oKTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZXJSZXR1cm47XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gdGltZW91dElmTmVjZXNzYXJ5KFxuICAgIHRhc2s6IFByb21pc2U8dm9pZD4sXG4gICAgb25UaW1lb3V0OiBcInRocm93XCIgfCBcInJldHVyblwiIHwgKCgpID0+IHVua25vd24pLFxuICAgIHRpbWVvdXQ6IG51bWJlcixcbik6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aW1lb3V0ID09PSBJbmZpbml0eSkgcmV0dXJuIHRhc2s7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgaGFuZGxlID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAob25UaW1lb3V0ID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKGBSZXF1ZXN0IHRpbWVkIG91dCBhZnRlciAke3RpbWVvdXR9IG1zYCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9uVGltZW91dCA9PT0gXCJmdW5jdGlvblwiKSBvblRpbWVvdXQoKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgdGFzay5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkaWZmID0gRGF0ZS5ub3coKSAtIG5vdztcbiAgICAgICAgICAgICAgICBkZWJ1Z0VycihgUmVxdWVzdCBjb21wbGV0ZWQgJHtkaWZmfSBtcyBhZnRlciB0aW1lb3V0IWApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICB0YXNrLnRoZW4ocmVzb2x2ZSlcbiAgICAgICAgICAgIC5jYXRjaChyZWplY3QpXG4gICAgICAgICAgICAuZmluYWxseSgoKSA9PiBjbGVhclRpbWVvdXQoaGFuZGxlKSk7XG4gICAgfSk7XG59XG4iLCJpbXBvcnQgeyBCb3QgfSBmcm9tIFwiaHR0cHM6Ly9kZW5vLmxhbmQveC9ncmFtbXlAdjEuMTAuMS9tb2QudHNcIjtcbmZ1bmN0aW9uIGdldEJvdCh0b2tlbjogc3RyaW5nKSB7XG4vKipcbiAqIEB0aXRsZSBNZXNzYWdlIEZvcm1hdHRpbmdcbiAqIEBydW5cbiAqIEBkZW5vX2NsaSA8dXJsPlxuICogQHJlc291cmNlIHtodHRwczovL2dyYW1teS5kZXYvZ3VpZGUvYmFzaWNzLmh0bWwjc2VuZGluZy1tZXNzYWdlLXdpdGgtZm9ybWF0dGluZ30gRG9jczogU2VuZGluZyBNZXNzYWdlIFdpdGggRm9ybWF0dGluZ1xuICogQHJlc291cmNlIHtodHRwczovL2NvcmUudGVsZWdyYW0ub3JnL2JvdHMvYXBpI2Zvcm1hdHRpbmctb3B0aW9uc30gQm90IEFQSSBNYW51YWw6IEZvcm1hdHRpbmcgT3B0aW9uc1xuICpcbiAqIEZvcm1hdCBib3QncyB0ZXh0IG1lc3NhZ2VzIHVzaW5nIHBhcnNlIG1vZGVzLlxuICovXG4vLyBUZWxlZ3JhbSBhbGxvd3MgeW91IHRvIGZvcm1hdCB5b3VyIG1lc3NhZ2VzIGFuZCBtYWtlIHRoZW0gbG9vayBiZXR0ZXIuXG4vLyBCeSBwcm92aWRpbmcgJ3BhcnNlX21vZGUnIG9wdGlvbiB3aGlsZSBzZW5kaW5nIG1lc3NhZ2VzLCB5b3VyIGJvdCBjYW4gYWxzbyBkbyB0aGlzLlxuXG4vLyBBcyB1c3VhbCwgaW1wb3J0IHRoZSBtYWluIGBCb3RgIGNsYXNzIGZyb20gZ3JhbW1ZLlxuXG5cbi8vIE5leHQgc3RlcDogY3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoZSBib3QgdXNpbmcgeW91ciBCb3QgVG9rZW4uXG5jb25zdCBib3QgPSBuZXcgQm90KHRva2VuKTtcblxuLy8gTGV0cyBzYXkgYSBib2xkIGhlbGxvIHRvIHRoZSB1c2VyLCB3aGVuIHRoZXkgdXNlIHRoZSBgL3N0YXJ0YCBjb21tYW5kLlxuLy8gV2UncmUgdXNpbmcgXCJNYXJrZG93blYyXCIgcGFyc2UgbW9kZSBmb3IgaXQuXG5ib3QuY29tbWFuZChcInN0YXJ0XCIsIGFzeW5jIChjdHgpID0+IHtcbiAgYXdhaXQgY3R4LnJlcGx5KFwiKkhlbGxvIHRoZXJlXFwhKlwiLCB7XG4gICAgcGFyc2VfbW9kZTogXCJNYXJrZG93blYyXCIsXG4gIH0pO1xufSk7XG5cbi8vIFRoZXJlIGlzIGFsc28gdGhlIEhUTUwgcGFyc2UgbW9kZS5cbi8vIExldHMgZGVzaWduIGEgaGVscCBtZXNzYWdlIHVzaW5nIHRoZSBIVE1MIG1vZGUuXG5ib3QuY29tbWFuZChcImhlbHBcIiwgYXN5bmMgKGN0eCkgPT4ge1xuICBhd2FpdCBjdHgucmVwbHkoXG4gICAgXCI8Yj5IZWxwPC9iPlxcblwiICtcbiAgICAgIFwiSSBjYW4gc2hvdyB5b3UgSUQgb2YgdGhlIGN1cnJlbnQgY2hhdC4gSnVzdCBzZW5kIC9pZCFcXG5cXG5cIiArXG4gICAgICBgVGhpcyBjaGF0J3MgSUQgaXM6IDxjb2RlPiR7Y3R4LmNoYXQuaWR9PC9jb2RlPmAsXG4gICAgeyBwYXJzZV9tb2RlOiBcIkhUTUxcIiB9LFxuICApO1xufSk7XG5cbi8vIFRoZXJlIGlzIGFsc28gTWFya2Rvd24gVjEuXG4vLyBUaGlzIG9ubHkgZXhpc3RzIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LlxuLy8gWW91IHNob3VsZG4ndCBiZSB1c2luZyB0aGlzIGZvciB5b3VyIGJvdC5cbi8vIEJ1dCBmb3IgZGVtb25zdHJhdGlvbiBwdXJwb3NlczpcbmJvdC5jb21tYW5kKFwiaWRcIiwgYXN5bmMgKGN0eCkgPT4ge1xuICBhd2FpdCBjdHgucmVwbHkoXCJgXCIgKyBjdHguY2hhdC5pZCArIFwiYFwiLCB7XG4gICAgcGFyc2VfbW9kZTogXCJNYXJrZG93blwiLFxuICB9KTtcbn0pO1xuXG4vLyBNYWtlIHRoZSBib3Qgb25saW5lLlxuLy8gYm90LnN0YXJ0KCk7XG5cbi8vIE5vdyB5b3Uga25vdyBob3cgdG8gbWFrZSB5b3VyIGJvdCdzIG1lc3NhZ2VzIGxvb2sgY29vbGVyIGluIGNoYXRzLlxuLy8gQ2hlY2sgb3V0IHRoZSBhZGRpdGlvbmFsIHJlc291cmNlcyBiZWxvdyBmb3IgbW9yZSBpbmZvcm1hdGlvbiByZWxhdGVkIHRvIG1lc3NhZ2UgZm9ybWF0dGluZy5cbi8vIGdyYW1tWSBhbHNvIGhhcyBhbiBvZmZpY2lhbCBwYXJzZSBtb2RlIHBsdWdpbiB3aGljaCBtYWtlcyB5b3VyIGNvZGUgbXVjaCBjbGVhbmVyIGFuZCBzaW1wbGlmeSB0aGUgd29yay5cbi8vIFdlJ2xsIGxvb2sgaW50byB0aGF0IGluIGEgZGlmZmVyZW50IGNoYXB0ZXIuXG5yZXR1cm4gYm90O1xufVxuXG5leHBvcnQgeyBnZXRCb3QgfTtcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE4Qk8sU0FBUyxXQUFXLENBQ3ZCLE1BQWUsRUFDZ0I7SUFDL0IsTUFBTSxNQUFNLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxBQUFDO0lBQzdCLE1BQU0sU0FBUyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQUFBQztJQUNsQyxPQUFPLENBQUMsR0FBTSxHQUEwQixTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7Q0FDMUQ7QUFFRCxTQUFTLEtBQUssQ0FBQyxNQUFtQyxFQUFjO0lBQzVELE9BQU8sS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FDdEIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQy9CO1FBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7S0FBQyxDQUFDO0NBQzdCO0FBRUQsU0FBUyxPQUFPLENBQUMsTUFBa0Is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QUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7S0FDVixDQUFDO0lBQ0YsU0FBUyxVQUFVLEdBQUc7UUFDcEIsSUFBSSxPQUFPLE1BQU0sS0FBSyxXQUFXLElBQUksTUFBTSxDQUFDLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxLQUFLLFVBQVUsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQ3BILE9BQU8sSUFBSSxDQUFD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SSxDQUFDLEdBQUMsTUFBTSxDQUFDLE1BQU0sQUFBQztBQUFBLElBQUksQ0FBQyxHQUFDLE1BQU0sQ0FBQyxjQUFjLEFBQUM7QUFBQSxJQUFJLENBQUMsR0FBQyxNQUFNLENBQUMsd0JBQXdCLEFBQUM7QUFBQSxJQUFJLEVBQUMsR0FBQyxNQUFNLENBQUMsbUJBQW1CLEFBQUM7QUFBQSxJQUFJLENBQUMsR0FBQyxNQUFNLENBQUMsY0FBYyxFQUFDLEVBQUMsR0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsQUFBQztBQUFBLElBQUksQ0FBQyxHQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxJQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBQztZQUFDLE9BQU8sRUFBQyxFQUFFO1NBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBQyxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEFBQUM7QUFBQSxJQUFJLENBQUMsR0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsR0FBRztJQUFDLElBQUcsQ0FBQyxJQUFFLE9BQU8sQ0FBQyxJQUFFLFFBQVEsSUFBRSxPQUFPLENBQUMsSUFBRSxVQUFVLEVBQUMsS0FBSSxJQUFJLENBQUMsSUFBSSxFQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsSUFBRSxDQUFDLEtBQUcsQ0FBQyxJQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDO1FBQUMsR0FBRyxFQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUFDLFVBQVUsRUFBQyxDQUFDLENBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUMsSUFBRSxDQUFDLENBQUMsVUFBVTtLQUFDLENBQUMsQ0FBQztJQUFBLE9BQU8sQ0FBQyxDQUFBO0NBQUMsQUFBQztBQUFBLElBQUksQ0FBQyxHQUFDLENBQUMsQ0FBQyxFQUFD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
